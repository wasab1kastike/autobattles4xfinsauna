(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();class wi{listeners=new Map;on(t,n){const s=this.listeners.get(t)??[];s.push(n),this.listeners.set(t,s)}off(t,n){const s=this.listeners.get(t);if(!s)return;const o=s.indexOf(n);o!==-1&&(s.splice(o,1),s.length===0?this.listeners.delete(t):this.listeners.set(t,s))}emit(t,n){const s=this.listeners.get(t);if(s)for(const o of s)o(n)}}const z=new wi;class _s{type="farm";cost=50;beerPerTick=1}class ka{type="barracks";cost=100;trainingCapacity=1}const Ta=Math.sqrt(3),La=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}];function Ne(e,t){return{x:t*Ta*(e.q+e.r/2),y:t*(3/2)*e.r}}function $t(e,t,n){const s=(Ta/3*e-.3333333333333333*t)/n,o=2/3*t/n;return{q:s,r:o}}function vi(e,t,n){return Si($t(e,t,n))}function Fn(e){return La.map(t=>({q:e.q+t.q,r:e.r+t.r}))}function en(e,t){const n=-e.q-e.r,s=-t.q-t.r;return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(n-s))}function Si(e){let t=e.q,n=e.r,s=-t-n,o=Math.round(t),a=Math.round(s),r=Math.round(n);const i=Math.abs(o-t),c=Math.abs(a-s),l=Math.abs(r-n);return i>c&&i>l?o=-a-r:c>l?a=-o-r:r=-o-a,{q:o,r}}const Kn=new Set;let On=32;function Ei(e){return`${e.q},${e.r}`}function ks(e,t){On=t,Kn.add(Ei(e))}function Ci(e){if(Kn.size===0)return{center:{x:0,y:0},zoom:1};const t=On*Math.sqrt(3),n=On*2,s=t/2,o=n/2;let a=1/0,r=1/0,i=-1/0,c=-1/0;for(const v of Kn){const[D,b]=v.split(",").map(Number),{x:I,y:k}=Ne({q:D,r:b},On),T=I-s,w=k-o;a=Math.min(a,T),r=Math.min(r,w),i=Math.max(i,T+t),c=Math.max(c,w+n)}const l=i-a,d=c-r,u=96,f={x:a+l/2,y:r+d/2},h=Math.max(0,Math.min(e.safeRight??0,e.width)),g=Math.max(e.width-h,1)/(l+u*2),p=e.height/(d+u*2),y=Math.min(g,p);return{center:{x:y>0?f.x-h/(2*y):f.x,y:f.y},zoom:y}}const Q={x:0,y:0,zoom:1};function Bi(e,t=300){const n=Q.x,s=Q.y,o=Q.zoom,a=typeof performance<"u"?performance.now():Date.now(),r=i=>{const c=Math.min((i-a)/t,1);Q.x=n+(e.center.x-n)*c,Q.y=s+(e.center.y-s)*c,Q.zoom=o+(e.zoom-o)*c,c<1&&(typeof requestAnimationFrame<"u"?requestAnimationFrame(r):setTimeout(()=>r(typeof performance<"u"?performance.now():Date.now()),16))};typeof requestAnimationFrame<"u"?requestAnimationFrame(r):setTimeout(()=>r(typeof performance<"u"?performance.now():Date.now()),0)}function xi(){Kn.clear()}async function zi(e){const t={},n={},s=[],o=Object.entries(e.images??{}).map(([r,i])=>new Promise(c=>{const l=new Image;l.onload=()=>{t[r]=l,c()},l.onerror=()=>{const d=`Failed to load image: ${i}`;console.error(d),s.push(d),c()},l.src=i})),a=Object.entries(e.sounds??{}).map(([r,i])=>new Promise(c=>{const l=new Audio;l.oncanplaythrough=()=>{n[r]=l,c()},l.onerror=()=>{const d=`Failed to load sound: ${i}`;console.error(d),s.push(d),c()},l.src=i,l.load()}));return await Promise.all([...o,...a]),{assets:{images:t,sounds:n},failures:s}}function Ii(e){if(typeof globalThis.localStorage>"u")return;const t=globalThis.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){console.warn(`Failed to parse data for "${e}", clearing`,n),globalThis.localStorage.removeItem(e);return}}const Ra="progression:ngPlusState",$s=5,ja=1831565813,Qn=Object.freeze({runSeed:0,ngPlusLevel:0,unlockSlots:0});function Oa(){if(typeof window>"u")return null;try{return window.localStorage??null}catch(e){return console.warn("Local storage unavailable for NG+ state",e),null}}function xo(e,t,n){const s=Number.isFinite(e)?e:Number(e);if(!Number.isFinite(s))return t;const o=Math.trunc(s);return Math.min(n,Math.max(t,o))}function Qa(e){const t=Number.isFinite(e)?e:Number(e);return!Number.isFinite(t)||t===0?0:Math.trunc(Math.abs(t))}function Ha(e=Math.random){let t=e();(!Number.isFinite(t)||t<=0||t>=1)&&(t=Math.random());const n=Math.floor(t*4294967295);return n===0?ja:n}function Fe(e={}){const t=Qn,n=Qa(e.runSeed??t.runSeed),s=xo(e.ngPlusLevel??t.ngPlusLevel,0,Number.MAX_SAFE_INTEGER),o=xo(e.unlockSlots??t.unlockSlots,0,$s);return{runSeed:n,ngPlusLevel:s,unlockSlots:o}}function Oe(e,t=Math.random){const n=Fe(e);return n.runSeed!==0?n:Fe({...n,runSeed:Ha(t)})}function Ni(e=Math.random){const t=Oa();if(!t)return Oe(Qn,e);const n=t.getItem(Ra);if(!n)return Oe(Qn,e);try{const s=JSON.parse(n);return Oe(Fe(s),e)}catch(s){return console.warn("Failed to parse NG+ state",s),Oe(Qn,e)}}function Ts(e){const t=Oa();if(!t)return;const n=Fe(e);t.setItem(Ra,JSON.stringify(n))}function Pi(e,t){const n=Fe(e),s=typeof t.random=="function"?t.random:Math.random;let o=n.ngPlusLevel,a=n.unlockSlots;if(t.outcome==="win"){o+=1;const i=Math.max(0,Math.trunc(t.bonusUnlocks??1));i>0&&(a=Math.min($s,a+i))}const r=Ha(s);return Oe(Fe({runSeed:r,ngPlusLevel:o,unlockSlots:a}),s)}function Di(e){const t=Math.max(0,e.ngPlusLevel),n=Math.max(0,e.unlockSlots)*.02;return Math.min(3,1+t*.12+n)}function ki(e){const t=Math.max(0,e.ngPlusLevel),n=Math.max(0,e.unlockSlots)*.01,s=.1+t*.05+n;return Math.max(0,Math.min(.85,s))}function Ti(e){const t=Math.max(0,e.ngPlusLevel);return Math.max(.5,1+t*.25)}function Li(e){return 1+Math.max(0,e.unlockSlots)}function zo(e,t=0){let n=Qa(e)^(t|0);return n===0&&(n=ja^(t|0)),()=>{n=n+1831565813|0;let s=Math.imul(n^n>>>15,1|n);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}}function As(e){return`${e.q},${e.r}`}const Ga={farm:()=>new _s,barracks:()=>new ka};function Ri(e){return Ga[e]?.()}var C=(e=>(e.SAUNA_BEER="sauna-beer",e.SAUNAKUNNIA="saunakunnia",e.SISU="sisu",e))(C||{});const wn={"sauna-beer":1,saunakunnia:0,sisu:0};class ji{constructor(t,n="gameState"){this.tickInterval=t,this.storageKey=n}resources={"sauna-beer":0,saunakunnia:0,sisu:0};passiveGeneration={...wn};lastSaved=Date.now();buildings={};buildingPlacements=new Map;policies=new Set;nightWorkSpeedMultiplier=1;ngPlus=Fe();tick(){Object.keys(this.passiveGeneration).forEach(t=>{this.addResource(t,this.passiveGeneration[t])})}save(){this.lastSaved=Date.now();const t={};this.buildingPlacements.forEach((o,a)=>{t[a]=o.type});const n={resources:this.resources,lastSaved:this.lastSaved,buildings:this.buildings,buildingPlacements:t,policies:Array.from(this.policies),passiveGeneration:{...this.passiveGeneration},nightWorkSpeedMultiplier:this.nightWorkSpeedMultiplier,ngPlus:this.ngPlus},s=typeof localStorage<"u"&&localStorage?localStorage:void 0;if(!s){console.warn("GameState.save: localStorage is unavailable, skipping persistence.");return}try{s.setItem(this.storageKey,JSON.stringify(n))}catch(o){console.warn("GameState.save: Failed to persist state to localStorage.",o)}}load(t){const n=Ii(this.storageKey);if(!n)return this.lastSaved=Date.now(),!1;this.resources={...this.resources,...n.resources??{}},Object.keys(this.resources).forEach(c=>{Number.isFinite(this.resources[c])||(this.resources[c]=0)});const s={};Object.entries(n.buildings??{}).forEach(([c,l])=>{Ga[c]&&(s[c]=l)}),this.buildings=s,this.buildingPlacements.clear(),n.buildingPlacements&&Object.entries(n.buildingPlacements).forEach(([c,l])=>{const d=Ri(l);if(!d)return;this.buildingPlacements.set(c,d);const[u,f]=c.split(",").map(Number);if(t){const h=t.ensureTile(u,f);h.placeBuilding(d.type),h.reveal(),ks({q:u,r:f},t.hexSize)}z.emit("buildingPlaced",{building:d,coord:{q:u,r:f},state:this})}),this.lastSaved=n.lastSaved??Date.now();const o=n.ngPlus?Fe(n.ngPlus):this.ngPlus;if(this.ngPlus=Oe(o),this.policies=new Set,this.passiveGeneration={...wn},this.nightWorkSpeedMultiplier=1,(Array.isArray(n.policies)?n.policies.filter(c=>typeof c=="string"):[]).forEach(c=>{this.policies.add(c)}),this.policies.forEach(c=>{z.emit("policyApplied",{policy:c,state:this})}),n.passiveGeneration){const c={...wn};Object.keys(wn).forEach(l=>{const d=n.passiveGeneration?.[l];typeof d=="number"&&Number.isFinite(d)&&(c[l]=d)}),this.passiveGeneration=c}typeof n.nightWorkSpeedMultiplier=="number"&&Number.isFinite(n.nightWorkSpeedMultiplier)&&(this.nightWorkSpeedMultiplier=n.nightWorkSpeedMultiplier);const r=Date.now()-this.lastSaved,i=Math.floor(r/this.tickInterval);return Object.keys(this.passiveGeneration).forEach(c=>{this.resources[c]+=i*this.passiveGeneration[c]}),!0}getResource(t){return this.resources[t]}canAfford(t,n="sauna-beer"){return this.resources[n]>=t}spendResource(t,n="sauna-beer"){return this.spend(t,n)}spend(t,n="sauna-beer"){return this.canAfford(t,n)?(this.resources[n]-=t,z.emit("resourceChanged",{resource:n,amount:-t,total:this.resources[n]}),!0):!1}addResource(t,n){this.resources[t]+=n,z.emit("resourceChanged",{resource:t,amount:n,total:this.resources[t]})}modifyPassiveGeneration(t,n){this.passiveGeneration[t]=(this.passiveGeneration[t]??0)+n}construct(t,n,s="sauna-beer"){return this.spend(n,s)?(this.buildings[t]=(this.buildings[t]??0)+1,!0):!1}placeBuilding(t,n,s,o="sauna-beer"){const a=s.getTile(n.q,n.r);return!a||a.building||!this.construct(t.type,t.cost,o)?!1:(this.buildingPlacements.set(As(n),t),a.placeBuilding(t.type),z.emit("buildingPlaced",{building:t,coord:n,state:this}),!0)}getBuildingAt(t){return this.buildingPlacements.get(As(t))}removeBuilding(t,n){const s=As(t),o=this.buildingPlacements.get(s);return o?(this.buildingPlacements.delete(s),n.getTile(t.q,t.r)?.placeBuilding(null),this.buildings[o.type]!==void 0&&(this.buildings[o.type]-=1,this.buildings[o.type]<=0&&delete this.buildings[o.type]),z.emit("buildingRemoved",{building:o,coord:t,state:this}),!0):!1}upgrade(t,n,s="sauna-beer"){return this.construct(`upgrade:${t}`,n,s)}applyPolicy(t,n,s="saunakunnia"){return this.spend(n,s)?(this.policies.add(t),z.emit("policyApplied",{policy:t,state:this}),!0):!1}hasPolicy(t){return this.policies.has(t)}getNgPlusState(){return{...this.ngPlus}}setNgPlusState(t){const n=Fe({...this.ngPlus,...t});return this.ngPlus=Oe(n),this.ngPlus}}class Oi{constructor(t,n){this.baseInterval=t,this.onTick=n}timer=null;speed=1;lastTick=0;accumulator=0;start(){this.stop(),this.lastTick=Date.now();const t=this.baseInterval/this.speed;this.timer=setInterval(()=>{const n=Date.now(),s=n-this.lastTick;this.lastTick=n,this.onTick(s)},t)}stop(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)}setSpeed(t){if(t<=0)throw new Error("Speed multiplier must be positive");this.speed=t,this.timer!==null&&this.start()}getSpeed(){return this.speed}getBaseInterval(){return this.baseInterval}tick(t){for(this.accumulator+=t*this.speed;this.accumulator>=this.baseInterval;)this.accumulator-=this.baseInterval,this.onTick(this.baseInterval)}}var ye=(e=>(e[e.Plains=0]="Plains",e[e.Forest=1]="Forest",e[e.Hills=2]="Hills",e[e.Lake=3]="Lake",e))(ye||{});function Qi(e,t,n){let s=e*374761393+t*668265263+n*0x14057b7ef7678100;return s=(s^s>>13)*1274126177,s^=s>>16,(s>>>0)/4294967295}function Hi(e,t,n=0){const s=Qi(e,t,n);return s<.1?3:s<.3?1:s<.5?2:0}class Gi{_terrain;_building;_isFogged;listeners=new Set;constructor(t=ye.Plains,n=null,s=!0){this._terrain=t,this._building=n,this._isFogged=s}get terrain(){return this._terrain}set terrain(t){this._terrain!==t&&(this._terrain=t,this.notify("terrain"))}get building(){return this._building}set building(t){this._building!==t&&(this._building=t,this.notify("building"))}get isFogged(){return this._isFogged}set isFogged(t){this._isFogged!==t&&(this._isFogged=t,this.notify("fog"))}reveal(){this.isFogged=!1}placeBuilding(t){this.building=t}setFogged(t){this.isFogged=t}addMutationListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notify(t){for(const n of this.listeners)n(t)}}class Ui{constructor(t=10,n=10,s=32,o=0){this.hexSize=s,this.seed=o,this.minQ=0,this.minR=0,this.maxQ=t-1,this.maxR=n-1}tiles=new Map;tileSubscriptions=new Map;changeListeners=new Set;minQ;maxQ;minR;maxR;get width(){return this.maxQ-this.minQ+1}get height(){return this.maxR-this.minR+1}key(t,n){return`${t},${n}`}addTileChangeListener(t){return this.changeListeners.add(t),()=>this.changeListeners.delete(t)}notifyTileChange(t,n,s){for(const o of this.changeListeners)o(t,n,s)}attachTileListener(t,n,s){const o=n.addMutationListener(a=>{this.notifyTileChange(s,n,a)});this.tileSubscriptions.set(t,o)}ensureTile(t,n){const s=this.key(t,n);let o=this.tiles.get(s);return o||(o=new Gi(Hi(t,n,this.seed)),this.tiles.set(s,o),this.minQ=Math.min(this.minQ,t),this.maxQ=Math.max(this.maxQ,t),this.minR=Math.min(this.minR,n),this.maxR=Math.max(this.maxR,n),this.attachTileListener(s,o,{q:t,r:n}),this.notifyTileChange({q:t,r:n},o,"created"),o.isFogged||ks({q:t,r:n},this.hexSize)),o}getTile(t,n){return this.tiles.get(this.key(t,n))}forEachTile(t){for(const[n,s]of this.tiles){const[o,a]=n.split(",").map(Number);t(s,{q:o,r:a})}}getNeighbors(t,n){return Fn({q:t,r:n}).map(s=>this.ensureTile(s.q,s.r))}revealAround(t,n,s={}){const{autoFrame:o=!0}=s;for(let i=-n;i<=n;i++){const c=Math.max(-n,-i-n),l=Math.min(n,-i+n);for(let d=c;d<=l;d++){const u={q:t.q+i,r:t.r+d};this.ensureTile(u.q,u.r).reveal(),ks(u,this.hexSize)}}if(!o)return;const a=typeof window<"u"?(()=>{const i=Math.max(window.innerWidth,0),c=Math.max(window.innerHeight,0);let l=0;if(typeof document<"u"){const u=document.getElementById("right-panel");if(u){const f=u.getBoundingClientRect();if(f.width>0){const h=u.closest("#ui-overlay");if(h){const m=h.getBoundingClientRect(),g=window.getComputedStyle(h),p=Number.parseFloat(g.paddingRight||"0"),y=m.right-f.left,M=f.width+(Number.isFinite(p)?p:0);l=Math.max(0,Math.max(y,M))}else l=Math.max(0,f.width)}}}const d=Math.min(Math.max(l,0),i);return{width:i,height:c,safeRight:d}})():{width:0,height:0,safeRight:0},r=Ci(a);Bi(r,300)}}const Ua=({policy:e,state:t})=>{e==="eco"&&(t.modifyPassiveGeneration(C.SAUNA_BEER,1),z.off("policyApplied",Ua))},Fa=({policy:e,state:t})=>{e==="temperance"&&(t.nightWorkSpeedMultiplier*=1.05,z.off("policyApplied",Fa))},Ka=({policy:e,state:t})=>{e==="steam-diplomats"&&(t.modifyPassiveGeneration(C.SAUNA_BEER,2),z.off("policyApplied",Ka))};z.on("policyApplied",Ua);z.on("policyApplied",Fa);z.on("policyApplied",Ka);const Fi="modulepreload",Ki=function(e){return"/"+e},Io={},Yi=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=r?.nonce||r?.getAttribute("nonce");o=c(n.map(l=>{if(l=Ki(l),l in Io)return;Io[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Fi,d||(f.as="script"),f.crossOrigin="",f.href=l,i&&f.setAttribute("nonce",i),document.head.appendChild(f),d)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return o.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})},Xi=({building:e,coord:t,state:n})=>{e instanceof _s?n.modifyPassiveGeneration(C.SAUNA_BEER,e.beerPerTick):e instanceof ka&&Yi(async()=>{const{spawnUnit:s}=await Promise.resolve().then(()=>Nc);return{spawnUnit:s}},void 0).then(({spawnUnit:s})=>{s(n,"soldier",`barracks-${t.q}-${t.r}`,t,"player")})},qi=({building:e,state:t})=>{e instanceof _s&&t.modifyPassiveGeneration(C.SAUNA_BEER,-e.beerPerTick)};z.on("buildingPlaced",Xi);z.on("buildingRemoved",qi);const ys={attack:`
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
  `,death:`
UklGRkZWAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSJWAAAAAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkS
PRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2
NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0v
YS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcC
vQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/T
g9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTI
YsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbp
Y+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMc
ih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5
QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgo
iSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3
cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN
78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL
88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPy
RPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk
5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5
dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYg
ax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rt
dewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJ
AMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQ
MNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39
hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgs
CC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4
zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYX
TBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLk
GePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH
1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW
79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H
0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEy
uDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0
XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QN
dAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3b
qtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/G
gMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e
99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR
2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42
xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEw
PS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbAD
NwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLU
b9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DH
BMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7n
Bulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfca
QxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4
EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEp
mCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/5
6Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17O
o83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHK
Vcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx
0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8j
xSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5
ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9oh
piBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv
2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJ
dckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofP
WNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7
Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiEr
GCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4
JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0Y
phdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57Dl
YuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0TH
B8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V
4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUF
XQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEEx
ATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY1
9jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP
5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbc
zduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjG
b8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3d
v9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQ
chHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1
TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4w
ETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikF
sAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3V
YtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XH
sMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5Vnm
rucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ
9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs4
3DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6Mq
oSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6
X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLP
Xs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXK
wcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjv
ZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMi
nyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5
ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj
2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7w
Q+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK
88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/O
h89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6
k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMq
ISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4
djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa
/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APn
sOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rH
RMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U
3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E
5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kw
QTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02
hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0Q
Ug/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe
9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrG
aMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hc
jd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwO
CBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81
yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx
3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEG
KQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/W
XdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTH
ZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnl
Weau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIY
pxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4
mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4r
oyqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD8
1/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/P
Is9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJ
NcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u
+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEh
cyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5
mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMk
CiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzy
rvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrL
esrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/N
v86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4
G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4p
IyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4
vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4b
UBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06Vro
A+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnH
isdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT
39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMC
bQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgv
eTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2
DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYS
vRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4Frf
Jt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbG
asZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvb
YdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0N
nA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0
PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10y
ojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgI
oQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjX
X9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3G
JMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3j
CeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoW
UhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3
UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEs
niujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9
UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ
788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJ
ssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yft
ju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkg
QSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5
kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYl
MyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9Izz
HPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPL
Cst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN
/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33
o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEo
HikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5
+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHucc
nhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67Tp
WugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI
2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS
6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB
8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAu
qC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3
izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsT
JhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXg
Wt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozG
dsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2Rva
O9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwL
LQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00
qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEz
XTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44J
GAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfY
aNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G
7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804Xbi
veMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V
+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543
/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0t
kSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/
yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/R
w9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnI
OcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPr
J+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcwe
CSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5
gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3Im
ViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70
jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXM
o8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nM
SM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1
Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4m
ESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5
Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe
5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPr
tOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTI
MsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS
+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAA
egHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt
0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3
ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0U
ixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49Th
leBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvG
jMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZ
G9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgK
vAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4Mmcz
DTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLsz
ETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAIL
jgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Z
d9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvG
v8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zTh
duK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0U
nRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3
njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2Eu
fS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0A
Q//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PS
n9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLI
ycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPq
w+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIod
zB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5
ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIkn
ciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2
/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/M
RcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PL
mcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0
uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl
/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5
VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsf
LB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXs
E+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJ
lMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDR
ENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+
AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt
8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43
bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW
7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj
1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XG
q8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/X
Atkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MI
SAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgy
ZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00
uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQM
AguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26ra
jtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDG
m8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vff
NOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkS
PRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2
NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0v
YS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcC
vQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/T
g9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTI
YsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbp
Y+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMc
ih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5
QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgo
iSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3
cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN
78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL
88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPy
RPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk
5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5
dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYg
ax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rt
dewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJ
AMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQ
MNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39
hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgs
CC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4
zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYX
TBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLk
GePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH
1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW
79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H
0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEy
uDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0
XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QN
dAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3b
qtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/G
gMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e
99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR
2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42
xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEw
PS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbAD
NwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLU
b9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DH
BMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7n
Bulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfca
QxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4
EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEp
mCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/5
6Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17O
o83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHK
Vcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx
0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8j
xSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5
ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9oh
piBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv
2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJ
dckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofP
WNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7
Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiEr
GCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4
JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0Y
phdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57Dl
YuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0TH
B8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V
4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4=
  `,sisu:`
UklGRrh4AABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YZR4AAAAAAAAAQADAAUACAAMABAAFQAZAB4AJAApAC4A
MgA3ADsAPgBBAEQARQBGAEYARgBFAEMAQAA9ADkANQAwACsAJgAhABsAFgARAA0ACQAFAAIAAAD+//z//P/7//v//P/9////
AAABAAMABAAFAAYABgAFAAQAAQD+//n/8//s/+P/2f/N/8D/sv+j/5P/gv9x/1//Tf87/yr/Gf8J//r+7P7h/tf+z/7K/sj+
yP7L/tL+2/7n/vf+Cv8f/zj/U/9w/5D/sf/U//j/HABBAGcAjACwANMA9QAUATIBTQFlAXoBiwGZAaQBqwGuAa4BqgGjAZgB
iwF6AWcBUwE8ASQBCgHwANYAvACiAIoAcgBcAEcANAAkABUACQAAAPn/9P/x//D/8P/y//b/+v///wMACAAMAA8AEQARABAA
DAAFAP3/8f/i/9D/uv+i/4f/af9I/yX/Af/b/rT+jf5m/j/+Gv72/dX9tv2c/YX9cv1l/V39W/1e/Wj9eP2O/av9zf32/ST+
WP6Q/s3+Df9R/5f/3/8nAHEAugACAUcBigHKAQYCPQJuApoCwALgAvkCCwMWAxoDGAMPAwED7ALSArMCjwJoAj4CEgLjAbQB
hAFVAScB+gDQAKgAgwBiAEQAKgAUAAMA9v/t/+f/5P/l/+j/7f/0//z/AwALABIAGAAcAB0AGwAWAAwA///t/9X/uf+Y/3P/
SP8a/+j+sv56/j/+A/7H/Yr9T/0V/d/8rPx9/FT8MfwV/AH89fvx+/b7Bfwd/D78afyd/Nr8IP1t/cL9Hf59/uL+S/+2/yIA
jwD8AGYBzgExApAC6AI5A4MDxAP8AysEUARrBHwEgwSABHQEXwRBBBsE7wO8A4MDRwMGA8QCfwI6AvYBswFyATUB+wDFAJUA
aQBDACQACQD2/+f/3v/Z/9n/3f/k/+3/9/8CAA0AGAAgACYAKAAnACAAFAACAOv/zf+o/3z/Sv8S/9T+kf5J/v39r/1e/Qz9
u/xr/B380/uO+0/7F/vn+sD6o/qR+ov6kfqj+sH67Pok+2j7uPsT/Hn86Pxg/d/9Zf7w/n7/DQCdAC0BugFEAsgCRQO7AycE
igThBC0FbAWeBcQF3AXnBeUF1wW8BZcFZwUuBewEpARVBAIEqwNSA/gCnwJHAvIBoQFVAQ4BzQCUAGEANwATAPj/5P/W/8//
zv/R/9n/5P/y/wAADgAbACcALwAzADIALAAeAAkA7f/J/5z/Zv8p/+P+l/5D/ur9i/0p/cT8Xvz4+5P7MfvT+nv6K/rj+aX5
c/lN+TT5Kvku+UL5ZvmZ+dz5LvqP+v/6e/sE/Jj8Nf3a/YX+Nf/o/5sATgH+AakCTgPrA38EBwWDBfIFUgajBuQGFQc1B0YH
Rgc3BxkH7Qa1BnAGIQbJBWkFAwWZBCsEvQNPA+MCeQIVArYBXQENAcQAhABOACEA/v/j/9D/xv/C/8b/zv/b/+v//P8NAB4A
LAA3AD4APgA3ACkAEgDy/8j/lP9V/w3/vP5h/v79lP0k/a/8Nvy7+0D7xvpQ+t75dPkR+bn4bfgt+P333PfN98/34/cK+ET4
kfjw+GH54/l1+hb7xPt+/EH9DP7e/rP/iABeATAC/gLEA4EEMwXZBW8G9gZsB88HIAheCIkIoAikCJUIdQhECAQItQdZB/IG
ggYKBo0FDAWJBAcEhgMIA5ACHgKzAVIB+gCsAGoAMgAFAOT/zP+9/7j/uv/C/9D/4v/2/woAHwAxAD8ARwBJAEQANQAcAPn/
yv+Q/0r/+P6b/jP+wv1I/cb8P/yz+yT7lPoG+nv59vh3+AP4mfc+9/H2tfaL9nX2c/aH9rD27/ZE9673LfjB+Gf5Hvrl+rr7
m/yG/Xf+bv9lAF0BUwJCAyoECAXZBZsGTQftB3kI8QhTCZ8J1Qn0Cf0J8QnPCZoJUwn7CJQIIAigBxgHiAb0BV0FxgQwBJ4D
EgONAhACnQE2AdoAigBHABAA5//J/7b/rf+u/7b/xf/Z//D/BwAeADMARQBQAFUAUABBACgAAgDQ/5D/Q//o/oH+Df6O/QX9
cvzZ+zr7mPr0+VH5svgY+Ib3//aE9hj2vfV19UH1I/Uc9S31V/Wa9fX1afb19pj3Ufge+f357Prp+/H8A/4a/zMATQFlAncD
gAR+BW8GTwcdCNcIegkHCnwK1woZC0ILUQtICycL8AqjCkQK0glRCcMIKgiJB+IGOAaMBeMEPAScAwMDdALvAXcBDAGvAGAA
HwDt/8j/sP+k/6L/qv+5/87/5/8BABwANQBKAFgAXwBcAE4ANAANANj/lP9A/97+bf7u/WL9yvwo/H37zPoX+l/5qPj190f3
ofYG9nr1/fST9D30/vPX88rz1/MA9EX0pvQi9bn1avY09xX4CvkS+ir7UPyA/bf+8v8tAWcCmwPGBOUF9Qb0B94IswlvChIL
mgsGDFYMigyhDJwMfQxEDPQLjQsSC4YK6glCCZAI1wcZB1oGnAXiBC0EgQPeAkgCvwFEAdkAfQAyAPf/yv+s/5z/l/+e/63/
w//e//z/GQA1AE0AXwBpAGgAXABCABoA4/+a/0L/2P5e/tX9Pf2X/Ob7K/to+qD51fgL+EP3gPbH9Rn1evTs83HzDvPC8pHy
ffKF8qzy8fJV89jzefQ39RH2BPcO+C75YPqi++/8Rv6h//0AWQKuA/sEOwZsB4kIkQmBClcLEQyuDCwNiw3KDeoN7A3QDZcN
RA3XDFUMvgsWC18KnQnSCAIILwddBo4FxgQFBFADpwINAoIBCAGfAEgAAgDO/6r/lP+N/5H/oP+3/9T/9P8UADMATwBlAHIA
dABpAFAAKADv/6T/R//X/lX+w/0f/W38rfvj+g/6NflX+Hj3nPbG9fj0N/SE8+TyWvLn8Y7xUvE18TfxWvGf8QXyjfI38wD0
5/Tr9Qr3QPiL+ef6UvzG/UL/vwA7ArIDIQWCBtMHEAk2CkILMgwEDbcNSA63DgMPLg83Dx8P6A6TDiIOmQ34DEUMgAuuCtMJ
8AgLCCUHQgZlBZEEyQMNA2ECxgE9AcYAYgASANX/qv+P/4P/hf+T/6r/yP/q/w0AMQBQAGkAeQB/AHYAXwA3AP7/sP9P/9r+
Uv62/Qn9Svx9+6P6v/nT+OP38fYB9hb1NfRf85ry5/FM8cnwYvAa8PPv7u8M8E/wtvBC8fHxxPK488z0/fVI96v4Ifqn+zn9
1P5xAA4CpwM2BbkGKgiHCcwK9QsADesNtA5ZD9oPNRBrEH0QaxA2EOEPbQ/eDjUOdw2mDMUL2QrlCe0I9Af9Bg0GJQVIBHoD
vAIQAnYB8QCBACYA3/+s/4v/ev96/4b/nf+8/+D/BgAsAE8AbACAAIkAgwBuAEcADAC//1v/4f5T/q/9+Pwv/FX7bfp5+Xz4
efd19nH1cvR985PyuvH18EfwtO8/7+rut+6p7sLuAe9n7/XvqvCF8YXyp/Pp9Ej2wPdP+fD6n/xX/hQA0gGLAzwF4AZyCO8J
UwuaDMENxg6mD2AQ8xBfEaIRvRGyEYERLRG4ECQQdA+sDs8N4QzlC+EK1gnKCMAHuwa/Bc8E7gMdA18CtgEiAaQAPQDs/7D/
iP9z/27/ef+P/67/1P/+/yYATQBuAIYAkgCQAH0AVwAeAM//af/s/lj+rv3u/Br8NPs/+jz5Lvga9wP27PTa89Dy0vHl8A3w
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
YADiAFIBpwHYAdwBrAE/AZIAoP9m/uH8Evv7+J/2AfQo8Rvu4uqH5xXkl+AZ3afZUNYe0yHQY83yytjIIMfUxfzEnsTBxGjF
lcZIyIHKPM110CXURNjK3Krh2eZK7O7xuPeX/XsDVwkbD7YUGho6HwkkeiiELB0wPTPeNf03lTmoOjQ7PTvIOtk5eDitNoI0
AjI4LzEs+SidJSoirR4yG8UXchRDEUEOdQvlCJcGjwTQAloBLgBK/6r+Sv4j/jD+aP7C/jb/uf9BAMQAOQGVAc4B3QG5AVsB
vgDe/7b+RP2I+4X5O/ev9Ofx6u6/62/oB+WP4RXepNpL1xTUDtFFzsXLmcnNx2rGeMX/xATFi8WYxivIQsrdzPXPhdOG1+/b
tODL5SbruPBy9kb8IQL5B7oNWBPCGOsdxiJHJ2MrES9IMgM1PDfxOCA6yjrxOpg6xTl/OM42uzRRMpsvpSx7KSsmwSJKH9Mb
ZxgSFd8R1g4BDGcJDQf4BCoDpgFrAHn/yv5d/ir+LP5a/q3+G/+b/yIApgAfAYABwgHbAcQBdAHnABYAAf+i/fr7CfrS91j1
ofK075fsVOn15YXiD9+g20XYCtX80SjPmsxeyn7IBMf5xWXFTcW2xaPGFcgMyoXMfc/t0tDWHNvG38TkCeqI7zL1+frLAJwG
XAz7EWoXnByDIRImQCoCLlAxJDR3Nkg4kzlaOp46YjqrOYA46TbvNJsy+S8ULfoptiZWI+YfchwIGbIVexJsD48M6gmFB2MF
iAP1AasAqv/u/nL+M/4q/k7+mv4C/37/AwCIAAMBagG0AdcBywGJAQsBSwBH//v9ZvyI+mT4/PVX83nwa+006t/md+MH4Jrc
PtkA1uvSDdByzSXLMsmix3/G0cWcxefFtcYHyN3JNcwNz17SIdZQ2t/exOPz6F7u9/Ow+Xr/QwUAC58QExZMGz4g2yQaKfAs
VDA/M601mTcAOeQ5RTomOos5fDj/Nhw13zJSMH8tdSo+J+gjfyAQHagZURYXEwIQHg1wCv8H0AXoA0cC7wDf/xT/i/4//ir+
Rf6I/ur+Yf/l/2oA5wBTAaQB0AHPAZsBKwF8AIr/T/7N/AL78fic9gj0OvE67hHrx+dn5Pzgk9032vXW2tPz0EvO78vqyUXI
C8dCxvLFH8bOxgDItsnuy6TO1tF71YzZAN7L4uPnOe3B8mz4K/7tA6YJRQ+8FPwZ+B6jI/In2itUL1cy3jTkNmg4aDnmOeM5
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
gNXv1sHY89qB3WfgneMc59vq0u718jv3
  `},Ya={click:{loader:e=>Zi(e),debounceMs:30},spawn:{loader:e=>Wi(e),debounceMs:120},error:{loader:e=>Vi(e)},attack:{loader:e=>Ms(ys.attack,e),debounceMs:70},death:{loader:e=>Ms(ys.death,e),debounceMs:180},sisu:{loader:e=>Ms(ys.sisu,e),debounceMs:800}};let nt=null,nn=null;const No=new Map,vn=new Map,Po=new Map;let Ke=!1;typeof localStorage<"u"&&(Ke=localStorage.getItem("sfx-muted")==="true");const Ls=new Set;function Ji(){for(const e of Ls)e(Ke)}function Xa(e){if(nn)return nn;const t=e.createGain();return t.gain.value=Ke?0:1,t.connect(e.destination),nn=t,t}function eo(e,t,n){const s=Math.floor(e.sampleRate*t),o=e.createBuffer(1,s,e.sampleRate),a=o.getChannelData(0);for(let r=0;r<s;r++){const i=r/e.sampleRate;a[r]=n(i)}return o}function Zi(e){return eo(e,.05,t=>Math.sin(2*Math.PI*1e3*t)*Math.exp(-40*t))}function Wi(e){return eo(e,.2,t=>(Math.sin(2*Math.PI*440*t)+Math.sin(2*Math.PI*660*t))*.5*Math.exp(-6*t))}function Vi(e){return eo(e,.3,t=>Math.sin(2*Math.PI*110*t)*Math.exp(-8*t))}function _i(e){const t=globalThis;if(typeof t.atob=="function"){const n=t.atob(e),s=n.length,o=new Uint8Array(s);for(let a=0;a<s;a++)o[a]=n.charCodeAt(a);return o}if(t.Buffer){const n=t.Buffer.from(e,"base64"),s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n[o];return s}throw new Error("No base64 decoder available for sound payloads.")}async function Ms(e,t){const n=_i(e),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);return await t.decodeAudioData(s)}function fn(){if(nt||typeof window>"u")return nt;const e=window.AudioContext||window.webkitAudioContext;if(!e)return console.warn("Web Audio API not supported"),null;try{nt=new e,Xa(nt)}catch(t){return console.warn("Unable to create AudioContext",t),nt=null,null}if(nt.state==="suspended"){const t=()=>{nt?.resume()};window.addEventListener("pointerdown",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})}return nt}function $i(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function ec(e){const t=No.get(e);if(t)return Promise.resolve(t);const n=vn.get(e);if(n)return n;const s=fn();if(!s)return Promise.reject(new Error("Audio context unavailable"));const o=Ya[e];if(!o)return Promise.reject(new Error(`No sound registered for ${e}`));const a=Promise.resolve(o.loader(s)).then(r=>(No.set(e,r),vn.delete(e),r)).catch(r=>{throw vn.delete(e),r});return vn.set(e,a),a}function Ye(e){if(Ke)return;const t=Ya[e];if(!t)return;const n=$i(),s=t.debounceMs??0,o=Po.get(e)??0;s>0&&n-o<s||(Po.set(e,n),ec(e).then(a=>{if(Ke)return;const r=fn();if(!r)return;const i=Xa(r),c=r.createBufferSource();c.buffer=a,c.connect(i);try{c.start()}catch(l){console.warn("Unable to start sound",l)}}).catch(a=>{a instanceof Error&&a.message==="Audio context unavailable"||console.warn("Failed to play sound",e,a)}))}function Rs(){return Ke}function tc(e){Ke=e,nn&&(nn.gain.value=Ke?0:1),typeof localStorage<"u"&&localStorage.setItem("sfx-muted",Ke?"true":"false"),Ji()}function nc(e){return Ls.add(e),()=>{Ls.delete(e)}}typeof document<"u"&&document.addEventListener("click",e=>{e.target instanceof HTMLButtonElement&&Ye("click")});fn();const Do="__autobattlesAudioEvents__",ko=globalThis;ko[Do]||(z.on("unitDamaged",e=>{!e||e.amount<=0||Ye("attack")}),z.on("unitDied",()=>{Ye("death")}),z.on("sisuBurstStart",()=>{Ye("sisu")}),ko[Do]=!0);function sc(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function oc(e){const t={};if(!e)return t;for(const[n,s]of Object.entries(e))typeof s=="function"&&(t[n]=s);return t}class ac{constructor(t=z){this.emitter=t}modifiers=new Map;hookIndex=new Map;listeners=new Map;add(t){if(typeof t.id!="string"||t.id.length===0)throw new Error("Modifier id must be a non-empty string");if((typeof t.duration!="number"||!Number.isFinite(t.duration))&&t.duration!==1/0)throw new Error("Modifier duration must be a positive number or Infinity");if(Number.isFinite(t.duration)&&t.duration<=0)throw new Error("Modifier duration must be greater than zero");const n=oc(t.hooks),s=sc();this.modifiers.has(t.id)&&this.remove(t.id,"replaced");const o={...t,hooks:n,remaining:t.duration,appliedAt:s};this.modifiers.set(o.id,o),this.indexHooks(o);const a={runtime:this,modifier:o};return t.onApply?.(a),this.emit("modifierAdded",{modifier:o}),this.emitter?.emit("modifierAdded",{modifier:o}),Number.isFinite(o.remaining)&&o.remaining<=0&&this.remove(o.id,"expired"),o}has(t){return this.modifiers.has(t)}list(){return Array.from(this.modifiers.values()).map(t=>({...t,hooks:{...t.hooks}}))}remove(t,n="manual"){const s=this.modifiers.get(t);if(!s)return!1;this.modifiers.delete(t),this.unindexHooks(s);const o={runtime:this,modifier:s,reason:n};return s.onExpire?.(o),n==="expired"&&(this.emit("modifierExpired",{modifier:s}),this.emitter?.emit("modifierExpired",{modifier:s})),this.emit("modifierRemoved",{modifier:s,reason:n}),this.emitter?.emit("modifierRemoved",{modifier:s,reason:n}),!0}advance(t){if(typeof t!="number"||t<=0)return;const n=[];for(const s of this.modifiers.values())Number.isFinite(s.remaining)&&(s.remaining=Math.max(0,s.remaining-t),s.remaining<=0&&n.push(s.id));for(const s of n)this.remove(s,"expired")}trigger(t,n){const s=this.hookIndex.get(t);if(!s||s.size===0)return;const o=Array.from(s);for(const a of o){const r=this.modifiers.get(a);if(!r){s.delete(a);continue}const i=r.hooks[t];if(!i){s.delete(a);continue}i(n,{runtime:this,modifier:r})}}clear(){const t=Array.from(this.modifiers.keys());for(const n of t)this.remove(n,"manual")}on(t,n){const s=this.listeners.get(t)??new Set;s.add(n),this.listeners.set(t,s)}off(t,n){const s=this.listeners.get(t);s&&(s.delete(n),s.size===0&&this.listeners.delete(t))}emit(t,n){const s=this.listeners.get(t);if(!(!s||s.size===0))for(const o of Array.from(s))o(n)}indexHooks(t){for(const n of Object.keys(t.hooks)){const s=this.hookIndex.get(n)??new Set;s.add(t.id),this.hookIndex.set(n,s)}}unindexHooks(t){for(const n of Object.keys(t.hooks)){const s=this.hookIndex.get(n);s&&(s.delete(t.id),s.size===0&&this.hookIndex.delete(n))}}}const cs=new ac,rc=e=>cs.add(e),ic=(e,t="manual")=>cs.remove(e,t),cc=e=>{cs.advance(e)},Sn=(e,t)=>{cs.trigger(e,t)};class lc{constructor(t,n,s){this.owner=t,this.entries=n,this.log=s}runTick(t,n){for(const{definition:s,state:o}of this.entries){if(!s.onTick)continue;const a=s.onTick({owner:this.owner,state:o,self:t,opponent:n}),r=yt(a?.shieldDamage??0);if(r>0){const c=Math.min(t.shield,r);c>0&&(t.shield-=c,this.log.tickShieldDamage+=c)}const i=yt(a?.hpDamage??0);if(i>0){const c=Math.min(t.health,i);c>0&&(t.health-=c,this.log.tickHpDamage+=c)}}}grantShield(t,n){let s=0;for(const{definition:o,state:a}of this.entries){if(!o.onGrantShield)continue;const r=yt(o.onGrantShield({owner:this.owner,state:a,self:t,opponent:n})??0);r>0&&(s+=r)}return s>0&&(t.shield+=s,this.log.shieldGranted+=s),s}consumeShield(t,n,s){let o=yt(t);if(o<=0)return 0;let a=0;for(const{definition:r,state:i}of this.entries){if(!r.onConsumeShield||o<=0)continue;const c=yt(r.onConsumeShield({owner:this.owner,state:i,self:n,opponent:s,amount:o})??0);if(c<=0)continue;const l=Math.min(o,c);a+=l,o-=l}return a>0&&(this.log.shieldConsumed+=a),a}applyHit(t,n,s){if(t<=0)return 0;let o=0;for(const{definition:i,state:c}of this.entries){if(!i.onHit)continue;const l=yt(i.onHit({owner:this.owner,state:c,self:n,opponent:s,hpDamage:t})??0);l>0&&(o+=l)}if(o<=0)return 0;const a=Math.max(0,n.maxHealth-n.health);if(a<=0)return 0;const r=Math.min(a,o);return r>0&&(n.health+=r,this.log.lifesteal+=r),r}getShieldValue(){let t=0;for(const{definition:n,state:s}of this.entries){if(!n.onGrantShield||s.keyword!=="Shield")continue;const o=js(s);if(o<=0)continue;const a=Math.max(0,Number.isFinite(s.stacks)?s.stacks:0);a<=0||(t+=a*o)}return t}}function dc(){return{attacker:Lo(),defender:Lo()}}function To(e,t,n){const s=uc(e);if(s.length===0)return null;const o=[];for(const a of s){const r=qa.get(a.keyword);r&&o.push({state:a,definition:r})}return o.length===0?null:new lc(t,o,n)}const qa=new Map;function ls(e,t){qa.set(e,t)}function Lo(){return{tickHpDamage:0,tickShieldDamage:0,shieldGranted:0,shieldConsumed:0,lifesteal:0,keywordShieldRemaining:0}}function yt(e){return typeof e!="number"||!Number.isFinite(e)?0:e>0?e:0}function Rt(e){return typeof e!="number"||!Number.isFinite(e)?0:e>0?e:0}function hn(e){return typeof e!="number"||!Number.isFinite(e)?0:e>0?e:0}function uc(e){if(!e)return[];const t=[],n=e;if(typeof n[Symbol.iterator]=="function"){for(const s of n){const o=Ro(s);o&&t.push(o)}return t}if(typeof e=="object")for(const s of Object.values(e)){const o=Ro(s);o&&t.push(o)}return t}function Ro(e){if(!e||typeof e!="object")return null;const t=e;if(!Object.prototype.hasOwnProperty.call(t,"stacks"))return null;const n=fc(t.keyword);if(!n)return null;const s=t;return s.keyword=n,s.stacks=Rt(s.stacks),Object.prototype.hasOwnProperty.call(t,"potency")&&s.potency!==void 0&&(s.potency=hn(s.potency)),s}function fc(e){if(typeof e!="string")return null;switch(e.trim().toLowerCase()){case"bleed":return"Bleed";case"burn":return"Burn";case"lifesteal":case"life-steal":return"Lifesteal";case"shield":return"Shield";default:return null}}function js(e){const t=e.potency!==void 0?hn(e.potency):1;return t>0?t:0}function hc(e){if(e.potency!==void 0){const s=hn(e.potency);return s>0?s:0}const t=Rt(e.stacks);if(t<=0)return 0;const n=t*.2;return n>0?n:0}ls("Bleed",{onTick({state:e,self:t}){const n=Rt(e.stacks);if(n<=0||t.health<=0){e.stacks=n;return}const s=e.potency!==void 0?hn(e.potency):1,o=n*s;if(o<=0)return;const a=Math.min(t.health,o);return e.stacks=Math.max(0,n-1),{hpDamage:a}}});ls("Burn",{onTick({state:e,self:t}){const n=Rt(e.stacks);if(n<=0){e.stacks=n;return}const s=e.potency!==void 0?hn(e.potency):1,o=n*s;if(o<=0)return;const a=Math.min(t.shield,o),r=o-a,i=Math.min(t.health,r);return e.stacks=Math.max(0,n-1),{shieldDamage:a,hpDamage:i}}});ls("Shield",{onGrantShield({state:e}){const t=Rt(e.stacks);if(t<=0)return e.stacks=t,0;const n=t*js(e);return n>0?n:0},onConsumeShield({state:e,amount:t}){const n=Rt(e.stacks);if(n<=0)return e.stacks=0,0;const s=js(e);if(s<=0)return e.stacks=0,0;const o=n*s;if(o<=0)return e.stacks=0,0;const a=Math.min(o,yt(t)),r=a/s;return e.stacks=Math.max(0,n-r),a>0?a:0}});ls("Lifesteal",{onHit({state:e,hpDamage:t}){if(t<=0)return 0;const n=hc(e);if(n<=0)return 0;const s=t*n;return s>0?s:0}});function we(e){return Number.isFinite(e)?Math.max(0,e):0}function jo(e,t){const n=we(t?.health??e?.health??0),s=we(t?.shield??e?.shield??0);return{id:e?.id??"unknown",faction:e?.faction,health:n,maxHealth:e?.maxHealth,shield:s}}function Oo(e){if(!e)return!1;const t=e;return typeof t.onHit=="function"||typeof t.onKill=="function"||Array.isArray(t.onHit)||Array.isArray(t.onKill)}function Qo(e){return e?Array.isArray(e)?e.filter(t=>typeof t=="function"):typeof e=="function"?[e]:[]:[]}function mc(e){if(!e)return[];if(typeof e[Symbol.iterator]=="function"){const n=[];for(const s of e)Oo(s)&&n.push(s);return n}return Object.values(e).filter(n=>Oo(n))}function En(e,t,n){if(!e)return;const s=Qo(e.hooks?.[t]);for(const a of s)a(n);const o=mc(e.keywords);for(const a of o)for(const r of Qo(a[t]))r(n)}function Ho(e){const t=we(e?.health??0),n=we(e?.maxHealth??t);return{health:t,maxHealth:Math.max(n,t),shield:we(e?.shield??0)}}function gc(){return{health:0,maxHealth:0,shield:0}}function pc(e){const t=e.attacker??null,n=e.defender,s=e.baseDamage,o=we(e.minimumDamage??1),a=Number.isFinite(s)?we(s):we(t?.attack??0),r=we(n.defense??0),i=dc(),c=Ho(n),l=t?Ho(t):null,d=To(n.keywords??null,"defender",i.defender),u=t?To(t.keywords??null,"attacker",i.attacker):null,f=l??gc();d&&d.runTick(c,f),u&&l&&u.runTick(l,c);const h=c.health>0,m=we(c.shield);d&&d.grantShield(c,f);const g=we(c.shield),p=h?Math.max(o,a-r):0,y=h?Math.min(g,p):0,M=h?Math.max(0,p-y):0;c.shield=Math.max(0,g-y);const v=Math.min(m,y),D=Math.max(0,y-v);d&&D>0&&d.consumeShield(D,c,f);const b=d?d.getShieldValue():0;i.defender.keywordShieldRemaining=b;const I=Math.max(0,m-v);c.shield=I+b;const k=c.health;c.health=Math.max(0,k-M);const T=c.health,w=T<=0;let x=0;u&&l?(x=u.applyHit(M,l,c),i.attacker.keywordShieldRemaining=u.getShieldValue()):i.attacker.keywordShieldRemaining=0;const A=jo(t,l??void 0),P=jo(n,{health:T,shield:I+b}),N={attacker:A,defender:P,damage:p,shieldDamage:y,hpDamage:M,lethal:w},R={...N,source:"defender"};if(En(n,"onHit",R),Sn("combat:onHit",R),t){const B={...N,source:"attacker"};En(t,"onHit",B),Sn("combat:onHit",B),w&&(En(t,"onKill",B),Sn("combat:onKill",B))}return w&&(En(n,"onKill",R),Sn("combat:onKill",R)),{damage:p,shieldDamage:y,hpDamage:M,lethal:w,remainingHealth:T,remainingShield:I+b,attackerHealing:x,attackerRemainingHealth:l?.health,attackerRemainingShield:l?.shield,keywordEffects:i}}const Go=5;function ue(e){return`${e.q},${e.r}`}function Uo(e){const[t,n]=e.split(",").map(Number);return{q:t,r:n}}class Ac{constructor(t,n,s,o,a,r=[]){this.id=t,this.type=n,this.coord=s,this.faction=o,this.stats=a,this.priorityFactions=r,this.maxHealth=a.health}alive=!0;listeners={};maxHealth;healMarkerElapsed=0;healAmountBuffer=0;cachedTargetKey;cachedStartKey;cachedPath;movementCooldownSeconds=0;shield=0;immortal=!1;combatHooks=null;combatKeywords=null;onDeath(t){(this.listeners.death??=[]).push(t)}emitDeath(){for(const t of this.listeners.death??[])t()}isDead(){return!this.alive}getMaxHealth(){return this.maxHealth}distanceTo(t){return en(this.coord,t)}getVisionRange(){const{visionRange:t}=this.stats;return Number.isFinite(t)?t:3}attack(t){return this.distanceTo(t.coord)>this.stats.attackRange?null:t.takeDamage(this.stats.attackDamage,this)}update(t,n){if(!(this.isDead()||!n))if(en(this.coord,n.pos)<=n.auraRadius){const s=this.stats.health;if(this.stats.health=Math.min(this.stats.health+n.regenPerSec*t,this.maxHealth),this.stats.health>s){const o=this.stats.health-s;this.healMarkerElapsed+=t,this.healAmountBuffer+=o,(this.healMarkerElapsed>=.9||this.healAmountBuffer>=2)&&this.flushHealEvent()}}else this.healAmountBuffer>0&&this.flushHealEvent(),this.healMarkerElapsed=0,this.healAmountBuffer=0}flushHealEvent(){if(this.healAmountBuffer<=0){this.healMarkerElapsed=0;return}const t=Math.round(this.healAmountBuffer*10)/10;t>0&&z.emit("unitHealed",{unitId:this.id,amount:t,remainingHealth:this.stats.health}),this.healAmountBuffer=0,this.healMarkerElapsed=0}takeDamage(t,n){const s=Number.isFinite(t);if(s&&t<=0||!s&&!n)return null;const o=n?n.toCombatParticipant():null,a=this.toCombatParticipant(),r=pc({attacker:o,defender:a,baseDamage:s?t:void 0});this.stats.health=r.remainingHealth,this.shield=r.remainingShield;let i=r;if(r.lethal&&this.alive&&this.immortal&&(this.stats.health=Math.max(1,this.stats.health),i={...r,lethal:!1,remainingHealth:this.stats.health,remainingShield:this.shield}),n&&r.attackerRemainingHealth!==void 0){const c=Math.min(n.getMaxHealth(),Math.max(0,r.attackerRemainingHealth));n.stats.health=c}return n&&r.attackerRemainingShield!==void 0&&n.setShield(r.attackerRemainingShield),i.damage>0&&z.emit("unitDamaged",{attackerId:n?.id,targetId:this.id,amount:i.damage,remainingHealth:this.stats.health}),i.lethal&&this.alive&&(this.stats.health=0,this.alive=!1,z.emit("unitDied",{unitId:this.id,attackerId:n?.id,unitFaction:this.faction,attackerFaction:n?.faction}),this.emitDeath()),i}getShield(){return this.shield}setShield(t){if(!Number.isFinite(t)||t<=0){this.shield=0;return}this.shield=t}updateStats(t){this.stats.attackDamage=t.attackDamage,this.stats.attackRange=t.attackRange,this.stats.movementRange=t.movementRange,typeof t.defense=="number"&&Number.isFinite(t.defense)?this.stats.defense=t.defense:delete this.stats.defense,typeof t.visionRange=="number"&&Number.isFinite(t.visionRange)&&(this.stats.visionRange=t.visionRange);const n=Math.max(1,Math.round(t.health));this.maxHealth=n,this.stats.health=Math.min(n,Math.max(0,this.stats.health))}isImmortal(){return this.immortal}setImmortal(t){this.immortal=!!t}toCombatParticipant(){return{id:this.id,faction:this.faction,attack:this.stats.attackDamage,defense:this.stats.defense,health:this.stats.health,maxHealth:this.maxHealth,shield:this.shield,hooks:this.combatHooks,keywords:this.combatKeywords}}addMovementTime(t){!Number.isFinite(t)||t<=0||(this.movementCooldownSeconds+=t)}canStep(t=Go){return this.movementCooldownSeconds>=t}consumeMovementCooldown(t=Go){return this.canStep(t)?(this.movementCooldownSeconds-=t,!0):!1}moveTowards(t,n,s){const o=this.getPathTo(t,n,s);if(o.length<2)return[];let a=0;const r=ue(t);for(let c=1;c<o.length;c++){const l=ue(o[c]);if(s.has(l)){l!==r&&this.clearPathCache();break}a=c}if(a===0)return[];const i=Math.min(this.stats.movementRange,a);return o.slice(0,i+1)}getPathTo(t,n,s){const o=ue(this.coord),a=ue(t);return(!this.cachedPath||this.cachedTargetKey!==a||this.cachedStartKey!==o)&&(this.cachedPath=this.findPath(t,n,s),this.cachedTargetKey=a,this.cachedStartKey=o),this.cachedPath}advancePathCache(t){!this.cachedPath||t<=0||(this.cachedPath=this.cachedPath.slice(t),this.cachedPath.length>0?this.cachedStartKey=ue(this.cachedPath[0]):(this.cachedPath=void 0,this.cachedStartKey=void 0,this.cachedTargetKey=void 0))}clearPathCache(){this.cachedPath=void 0,this.cachedStartKey=void 0,this.cachedTargetKey=void 0}findPath(t,n,s){const o=this.coord,a=ue(o),r=ue(t),i=new Set([a]),c=new Map([[a,null]]),l=new Map([[a,0]]),d=new Map([[a,en(o,t)]]);for(;i.size>0;){let h=null,m=1/0;for(const y of i){const M=d.get(y)??1/0;M<m&&(m=M,h=y)}if(h===null||h===r)break;i.delete(h);const g=Uo(h),p=l.get(h)??1/0;for(const y of Fn(g)){const M=ue(y);if(M!==r&&!this.isPassable(y,n,s))continue;const v=p+1;v<(l.get(M)??1/0)&&(c.set(M,h),l.set(M,v),d.set(M,v+en(y,t)),i.add(M))}}if(!c.has(r))return[o];const u=[];let f=r;for(;f;)u.push(Uo(f)),f=c.get(f)??null;return u.reverse()}seekNearestEnemy(t,n,s){const o=new Map;for(const i of t)o.set(ue(i.coord),i);const a=[this.coord],r=new Set([ue(this.coord)]);for(;a.length>0;){const i=a.shift(),c=ue(i),l=o.get(c);if(l)return l;for(const d of Fn(i)){const u=ue(d),f=o.get(u);if(f)return f;this.isPassable(d,n,s)&&(r.has(u)||(r.add(u),a.push(d)))}}return null}canTraverse(t,n,s){return this.isPassable(t,n,s)}isPassable(t,n,s){const o=n.getTile(t.q,t.r);return!o||s&&s.has(ue(t))?!1:o.terrain!==ye.Lake}}class yc{static selectTarget(t,n){let s=n.filter(a=>a.faction!==t.faction&&!a.isDead());if(s.length===0)return null;if(t.priorityFactions.length>0){const a=s.filter(r=>t.priorityFactions.includes(r.faction));a.length>0&&(s=a)}const o=s.filter(a=>t.distanceTo(a.coord)<=t.stats.attackRange);return o.length>0?(o.sort((a,r)=>a.stats.health-r.stats.health),o[0]):(s.sort((a,r)=>t.distanceTo(a.coord)-t.distanceTo(r.coord)),s[0]??null)}}const Mc=4,bc=8;class wc{buckets=[];bucketCount=0;currentBucket=0;minBuckets;maxBuckets;constructor(t={}){this.minBuckets=t.minBuckets??Mc,this.maxBuckets=t.maxBuckets??bc}reset(){this.buckets=[],this.bucketCount=0,this.currentBucket=0}next(t){const n=t.length;if(n===0)return this.reset(),[];const s=this.computeBucketCount(n);s!==this.bucketCount&&(this.bucketCount=s,this.currentBucket=this.currentBucket%Math.max(1,s)),this.rebuildBuckets(t);const o=this.buckets[this.currentBucket]??[];return this.bucketCount>0&&(this.currentBucket=(this.currentBucket+1)%this.bucketCount),o}rebuildBuckets(t){const n=this.bucketCount;this.buckets=Array.from({length:n},()=>[]);const s=[...t].sort((o,a)=>o.id.localeCompare(a.id));for(let o=0;o<s.length;o++){const a=o%n;this.buckets[a].push(s[o])}}computeBucketCount(t){if(t<=0)return 0;const n=Math.ceil(t/12);let s=Math.max(this.minBuckets,n);return s=Math.min(this.maxBuckets,s),s=Math.min(s,t),s=Math.max(1,s),s}}function bs(e){return`${e.q},${e.r}`}const vc=500;class Sc{cache=new Map;targetIndex=new Map;targetPositions=new Map;ttlMs;constructor(t=vc){this.ttlMs=t}clearExpired(t=Date.now()){for(const[n,s]of this.cache.entries())if(s.expiresAt<=t&&(this.cache.delete(n),s.targetId)){const o=this.targetIndex.get(s.targetId);o?.delete(n),o&&o.size===0&&this.targetIndex.delete(s.targetId)}}trackUnit(t){this.invalidateIfTargetMoved(t.id,bs(t.coord))}invalidateForUnit(t){const n=this.targetIndex.get(t);if(n){for(const s of n)this.cache.delete(s);this.targetIndex.delete(t)}this.targetPositions.delete(t)}getPath(t,n,s,o,a={}){const r=a.now??Date.now(),i=a.targetId,c=bs(n);i&&this.invalidateIfTargetMoved(i,c);const l=this.hashObstacles(o),d=this.createCacheKey(bs(t.coord),c,l),u=this.cache.get(d);if(u&&u.expiresAt>r)return u.path;t.clearPathCache();const f=t.getPathTo(n,s,o);if(this.cache.set(d,{path:f,expiresAt:r+this.ttlMs,targetId:i}),i){let h=this.targetIndex.get(i);h||(h=new Set,this.targetIndex.set(i,h)),h.add(d),this.targetPositions.set(i,c)}return f}invalidateIfTargetMoved(t,n){const s=this.targetPositions.get(t);if(!s){this.targetPositions.set(t,n);return}if(s===n)return;const o=this.targetIndex.get(t);if(o){for(const a of o)this.cache.delete(a);o.clear()}this.targetPositions.set(t,n)}hashObstacles(t){return t.size===0?"empty":Array.from(t).sort().join("|")}createCacheKey(t,n,s){return`${t}->${n}|${s}`}}const Ec=30;function fe(e){return`${e.q},${e.r}`}class Cc{constructor(t){this.map=t}scheduler=new wc;pathCache=new Sc;findExplorationGoal(t,n){const s=t.coord;if(this.map.ensureTile(s.q,s.r).isFogged&&t.canTraverse(s,this.map,n))return s;const a=new Set([fe(s)]),r=[s];for(;r.length>0;){const i=r.shift(),c=Fn(i),l=this.map.getNeighbors(i.q,i.r);for(let d=0;d<c.length;d++){const u=c[d],f=l[d],h=fe(u);if(!a.has(h)&&(a.add(h),!!t.canTraverse(u,this.map,n))){if(f.isFogged)return u;r.push(u)}}}return null}tick(t,n){const s=t.length,o=Date.now();if(this.pathCache.clearExpired(o),s===0){this.scheduler.reset();return}for(const c of t)c.addMovementTime(n);const a=new Set,r=[];for(const c of t){if(c.isDead()){c.clearPathCache(),this.pathCache.invalidateForUnit(c.id);continue}this.pathCache.trackUnit(c),r.push(c),a.add(fe(c.coord))}if(r.length===0){this.scheduler.reset();return}const i=this.scheduler.next(r);if(i.length!==0)for(const c of i){const l=fe(c.coord);if(a.delete(l),c.isDead()){c.clearPathCache(),this.pathCache.invalidateForUnit(c.id);continue}const d=yc.selectTarget(c,t);if(!d){const g=this.findExplorationGoal(c,a);if(g){const p=this.computeMovementPath(c,g,a,o);if(p.length>1&&c.stats.movementRange>0){const y=p[1],M=fe(y);if(a.has(M))c.clearPathCache();else{if(!c.canStep()){a.add(l);continue}if(c.consumeMovementCooldown()){c.coord=y,c.advancePathCache(1);const v=fe(c.coord);v===fe(g)&&c.clearPathCache(),a.add(v);continue}}}else c.clearPathCache()}else c.clearPathCache();a.add(l);continue}if(d.isDead()){c.clearPathCache(),a.add(l);continue}const u=fe(d.coord),f=this.pathCache.getPath(c,d.coord,this.map,a,{now:o,targetId:d.id});if(f.length>1&&c.stats.movementRange>0){const g=f[1],p=fe(g),y=p===u;!a.has(p)||y?c.canStep()&&c.consumeMovementCooldown()&&(c.coord=g,c.advancePathCache(1)):c.clearPathCache()}const h=fe(c.coord);a.add(h);const m=fe(d.coord);m!==u&&c.clearPathCache(),c.distanceTo(d.coord)<=c.stats.attackRange&&!d.isDead()&&((c.attack(d)?.lethal??!1)||d.isDead())&&(a.delete(m),c.clearPathCache(),this.pathCache.invalidateForUnit(d.id))}}computeMovementPath(t,n,s,o){const a=this.pathCache.getPath(t,n,this.map,s,{now:o});if(a.length<2)return[];let r=0;const i=fe(n);for(let l=1;l<a.length;l++){const d=fe(a[l]);if(s.has(d)){d!==i&&t.clearPathCache();break}r=l}if(r===0)return[];const c=Math.min(t.stats.movementRange,r);return a.slice(0,c+1)}}function ds(e){if(!Number.isFinite(e??NaN))return 1;const t=Math.floor(e);return Math.max(1,t)}function Bc(e){return Math.max(0,ds(e)-1)}function xc(e,t="linear"){const n=Bc(e);switch(t){case"accelerating":return n*(n+1)/2;case"diminishing":return n===0?0:Math.log2(n+1);case"linear":default:return n}}function zc(e,t="round"){switch(t){case"floor":return Math.floor(e);case"ceil":return Math.ceil(e);case"none":return e;case"round":default:return Math.round(e)}}function Ic(e,t,n){let s=e;return Number.isFinite(t)&&(s=Math.max(s,t)),Number.isFinite(n)&&(s=Math.min(s,n)),s}function Xt(e,t){const n=ds(t),s=e.curve??"linear",o=xc(n,s),a=e.base+e.growth*o,r=Ic(a,e.min,e.max);return zc(r,e.round??"round")}function mn(e,t){const n=ds(t),s=e.stats,o={health:Xt(s.health,n),attackDamage:Xt(s.attackDamage,n),attackRange:Xt(s.attackRange,n),movementRange:Xt(s.movementRange,n)};return s.visionRange&&(o.visionRange=Xt(s.visionRange,n)),o}function Fo(e){if(typeof e=="number"&&Number.isFinite(e))return e}function Yn(e,t){let n=e.health,s=e.attackDamage,o=e.attackRange,a=e.movementRange,r=Fo(e.defense),i=Fo(e.shield);for(const l of t){const d=Math.max(1,Math.round(l.quantity)),u=l.modifiers;typeof u.health=="number"&&(n+=u.health*d),typeof u.attackDamage=="number"&&(s+=u.attackDamage*d),typeof u.attackRange=="number"&&(o+=u.attackRange*d),typeof u.movementRange=="number"&&(a+=u.movementRange*d),typeof u.defense=="number"&&(r=(r??0)+u.defense*d),typeof u.shield=="number"&&(i=(i??0)+u.shield*d)}const c={health:Math.max(1,Math.round(n)),attackDamage:Math.max(0,Math.round(s)),attackRange:Math.max(0,Math.round(o)),movementRange:Math.max(0,Math.round(a))};return r!==void 0&&(c.defense=Math.max(0,Math.round(r))),i!==void 0&&(c.shield=Math.max(0,Math.round(i))),typeof e.visionRange=="number"&&Number.isFinite(e.visionRange)&&(c.visionRange=Math.max(0,Math.round(e.visionRange))),c}const to=Object.freeze({id:"soldier",displayName:"Sauna Soldier",cost:50,tags:["infantry","melee"],stats:{health:{base:20,growth:6,curve:"linear",round:"round"},attackDamage:{base:5,growth:1,curve:"linear",round:"round"},attackRange:{base:1,growth:0,round:"round"},movementRange:{base:1,growth:0,round:"round"},visionRange:{base:3,growth:0,round:"round"}}}),no=Object.freeze({id:"archer",displayName:"Sauna Archer",cost:75,tags:["ranged"],stats:{health:{base:15,growth:4,curve:"linear",round:"round"},attackDamage:{base:3,growth:.4,curve:"accelerating",round:"ceil"},attackRange:{base:3,growth:.5,curve:"diminishing",round:"ceil",max:5},movementRange:{base:1,growth:0,round:"round"},visionRange:{base:3,growth:.25,curve:"linear",round:"round",max:5}}}),Ja=Object.freeze({id:"avanto-marauder",displayName:"Avanto Marauder",cost:0,tags:["enemy","melee"],stats:{health:{base:12,growth:5,curve:"linear",round:"round"},attackDamage:{base:4,growth:.6,curve:"accelerating",round:"ceil"},attackRange:{base:1,growth:0,round:"round"},movementRange:{base:1,growth:.25,curve:"linear",round:"round",max:2},visionRange:{base:3,growth:0,round:"round"}}}),Za=Object.freeze({soldier:to,archer:no,"avanto-marauder":Ja});function so(e){return Za[e]??null}Object.freeze(Object.keys(Za));const Ko=to.cost;Object.freeze(mn(to,1));no.cost;Object.freeze(mn(no,1));Object.freeze(mn(Ja,1));function Wa(e,t,n,s,o){const a=ds(o?.level),r=mn(e,a);return new Ac(t,e.id,n,s,r,e.priorityFactions)}function Va(e,t,n,s,o){const a=so(e);return a?Wa(a,t,n,s,o):null}function oo(e,t,n,s,o,a){const r=so(t);if(!r)return null;const i=r.cost;if(!e.canAfford(i,C.SAUNA_BEER))return Ye("error"),null;e.addResource(C.SAUNA_BEER,-i);const c=Wa(r,n,s,o,a);return Ye("spawn"),z.emit("unitSpawned",{unit:c}),c}const Nc=Object.freeze(Object.defineProperty({__proto__:null,createUnit:Va,spawnUnit:oo},Symbol.toStringTag,{value:"Module"})),Pc=["Aino","Eero","Ilona","Kalevi","Lumi","Mika","Noora","Oskari","Saana","Tapio","Veera","Yrj"],Dc=["Emberguard","Frostwalker","Steamcaller","Dawnwatch","Gritforged","Stormchant","Snowborn","Torchbearer","Chillwarden","Sisuheart"],kc=["Aalto","Halla","Karhu","Korhonen","Laine","Mets","Niemi","Salmi","Tuomi","Virta"];function ws(e,t){if(e.length===0)throw new Error("Cannot select a name from an empty collection.");const n=Math.floor(t()*e.length);return e[Math.min(n,e.length-1)]}function Tc(e=Math.random){const t=ws(Pc,e),n=ws(Dc,e),s=ws(kc,e);return`${t} "${n}" ${s}`}const jt=Object.freeze(["supply","weapon","focus","relic"]);function _a(){return{supply:null,weapon:null,focus:null,relic:null}}const Lc=Object.freeze({supply:Object.freeze({id:"supply",label:"Supply Satchel",description:"Consumables and restorative provisions carried into battle.",maxStacks:5}),weapon:Object.freeze({id:"weapon",label:"Primary Armament",description:"The attendant's main weapon or ranged kit.",maxStacks:1}),focus:Object.freeze({id:"focus",label:"Battle Focus",description:"Tools that sharpen aim, steps, or battlefield intuition.",maxStacks:1}),relic:Object.freeze({id:"relic",label:"Sauna Relic",description:"Charms and relics that empower the attendant's resolve.",maxStacks:1})}),Rc=Object.freeze({"birch-sap-satchel":Object.freeze({id:"birch-sap-satchel",slot:"supply",modifiers:{health:3},maxStacks:3}),"steamed-bandages":Object.freeze({id:"steamed-bandages",slot:"supply",modifiers:{shield:4},maxStacks:2}),"aurora-distillate":Object.freeze({id:"aurora-distillate",slot:"supply",modifiers:{attackDamage:2,defense:1},maxStacks:1}),"stolen-sauna-tokens":Object.freeze({id:"stolen-sauna-tokens",slot:"supply",modifiers:{movementRange:.5},maxStacks:5}),"midnight-bloodwine":Object.freeze({id:"midnight-bloodwine",slot:"supply",modifiers:{health:6,attackDamage:1},maxStacks:1}),"sauna-incense":Object.freeze({id:"sauna-incense",slot:"supply",modifiers:{attackRange:1},maxStacks:2}),"glacier-brand":Object.freeze({id:"glacier-brand",slot:"weapon",modifiers:{attackDamage:3},maxStacks:1}),"emberglass-arrow":Object.freeze({id:"emberglass-arrow",slot:"weapon",modifiers:{attackDamage:1,attackRange:2},maxStacks:1}),"aurora-lattice":Object.freeze({id:"aurora-lattice",slot:"focus",modifiers:{attackDamage:2,attackRange:1},maxStacks:1}),"emberglass-shard":Object.freeze({id:"emberglass-shard",slot:"focus",modifiers:{attackDamage:1,movementRange:1},maxStacks:1}),"windstep-totem":Object.freeze({id:"windstep-totem",slot:"focus",modifiers:{movementRange:1,defense:1},maxStacks:1}),"searing-chant-censer":Object.freeze({id:"searing-chant-censer",slot:"focus",modifiers:{attackDamage:2,shield:2},maxStacks:1}),"cracked-ice-amulet":Object.freeze({id:"cracked-ice-amulet",slot:"relic",modifiers:{defense:2},maxStacks:1}),"myrsky-charm":Object.freeze({id:"myrsky-charm",slot:"relic",modifiers:{attackRange:1,defense:1},maxStacks:1}),"frostwyrm-signet":Object.freeze({id:"frostwyrm-signet",slot:"relic",modifiers:{shield:5},maxStacks:1}),"spirit-oak-charm":Object.freeze({id:"spirit-oak-charm",slot:"relic",modifiers:{defense:1,health:2},maxStacks:1})});function gn(e){const t=Lc[e];if(!t)throw new Error(`Unknown equipment slot: ${e}`);return t}function pn(e){return Rc[e]}function $a(e){return Number.isFinite(e)?Math.max(1,Math.round(e)):1}function er(e,t){return{id:e.id,name:e.name,description:e.description,icon:e.icon,rarity:e.rarity,quantity:t}}function tr(e,t,n,s){const o=gn(t),a=Math.max(1,Math.floor(n.maxStacks??o.maxStacks)),r=Math.min(a,s),i=n.modifiers??{};return{...er(e,r),slot:t,maxStacks:a,modifiers:i}}function Os(e){e.equipment||(e.equipment=_a());for(const t of jt)e.equipment[t]??=null;return e.equipment}function ve(e){const t=[];for(const n of jt){const s=e[n];s&&t.push({...s})}return t}function ao(e){return ve(e).map(t=>er(t,t.quantity))}function vs(e){const t=_a();for(const n of e){const s=pn(n.id);if(!s)continue;const o=$a(n.quantity),a=t[s.slot];if(a&&a.id!==n.id)continue;const r=(a?.quantity??0)+o,i=tr(n,s.slot,s,r);t[s.slot]=i}return t}function jc(e,t){const n=pn(t.id);if(!n)return{success:!1,slot:"supply",loadout:ve(Os(e)),item:null,reason:"unknown-item"};const s=Os(e),o=n.slot,a=gn(o),r=$a(t.quantity),i=Math.max(1,Math.floor(n.maxStacks??a.maxStacks)),c=s[o];if(c&&c.id!==t.id)return{success:!1,slot:o,loadout:ve(s),item:c,reason:"slot-occupied"};const l=Math.min(i,(c?.quantity??0)+r);if((c?.quantity??0)+r>i)return{success:!1,slot:o,loadout:ve(s),item:c,reason:"stack-limit"};const d=tr(t,o,n,l);return s[o]=d,e.items=ao(s),{success:!0,slot:o,loadout:ve(s),item:d}}function Oc(e,t){const n=Os(e),s=n[t];return s?(n[t]=null,e.items=ao(n),{success:!0,slot:t,loadout:ve(n),removed:s}):{success:!1,slot:t,loadout:ve(n),removed:null,reason:"empty-slot"}}function Qc(e,t){return pn(e)?.slot===t}const Hc={q:0,r:0},Gc="Saunoja",Qs=18,Yo=0,Dt=0,Hn=10,Xo=1,Cn={health:Qs,attackDamage:4,attackRange:1,movementRange:1,defense:0,shield:0};function Bn(e,t,n){return Math.min(Math.max(e,t),n)}function xn(e,t,n){const s=typeof e=="number"&&Number.isFinite(e)?e:t;return Math.max(n,s)}function Ss(e,t,n=0){if(typeof e=="number"&&Number.isFinite(e))return Math.max(n,e);if(typeof t=="number"&&Number.isFinite(t))return Math.max(n,t)}function qo(e,t){if(!e||typeof e!="object")return{...t};const n=e,s=xn(n.health,t.health,1),o=xn(n.attackDamage,t.attackDamage,0),a=xn(n.attackRange,t.attackRange,0),r=xn(n.movementRange,t.movementRange,0),i=Ss(n.defense,t.defense,0),c=Ss(n.shield,t.shield,0),l=Ss(n.visionRange,t.visionRange,0);return{health:s,attackDamage:o,attackRange:a,movementRange:r,defense:i,shield:c,visionRange:l}}function Uc(e,t){if(!e||typeof e!="object")return vs(t);const n=e,s=[];for(const o of Object.values(n)){const a=nr(o);a&&s.push(a)}return s.length===0?vs(t):vs(s)}function nr(e){if(!e||typeof e!="object")return null;const t=e,n=typeof t.id=="string"?t.id.trim():"",s=typeof t.name=="string"?t.name.trim():"";if(!n||!s)return null;const o=typeof t.description=="string"?t.description.trim():void 0,a=typeof t.icon=="string"?t.icon.trim():void 0,r=typeof t.rarity=="string"?t.rarity.trim():void 0,i=typeof t.quantity=="number"?t.quantity:Number(t.quantity),c=Number.isFinite(i)?Math.max(1,Math.round(i)):1;return{id:n,name:s,description:o,icon:a,rarity:r,quantity:c}}function Fc(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const s=nr(n);s&&t.push(s)}return t}function Kc(e){if(!e||typeof e!="object")return null;const t=e,n=typeof t.id=="string"?t.id.trim():"",s=typeof t.name=="string"?t.name.trim():"";if(!n||!s)return null;const o=t.duration;let a=1/0;typeof o=="number"&&Number.isFinite(o)?a=Math.max(0,o):o!==1/0&&(a=1/0);const r=t.remaining;let i=a;typeof r=="number"&&Number.isFinite(r)?i=Math.max(0,r):r===1/0&&(i=1/0),a!==1/0&&i===1/0&&(i=a);const c=t.appliedAt,l=typeof c=="number"&&Number.isFinite(c)?Math.max(0,c):void 0,d=t.stacks,u=typeof d=="number"&&Number.isFinite(d)?Math.max(1,Math.round(d)):void 0,f=typeof t.description=="string"?t.description.trim():void 0,h=typeof t.source=="string"?t.source.trim():void 0;return{id:n,name:s,description:f,duration:a,remaining:i,appliedAt:l,stacks:u,source:h}}function Yc(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const s=Kc(n);s&&t.push(s)}return t}function Xc(e){if(typeof e=="string"){const t=e.trim();if(t.length>0)return t}try{return Tc()}catch(t){return console.warn("Falling back to default Saunoja name",t),Gc}}function ro(e){const{id:t,name:n,coord:s=Hc,maxHp:o=Qs,hp:a=o,steam:r=0,defense:i,shield:c=0,traits:l=[],upkeep:d=Xo,xp:u=0,lastHitAt:f=Yo,selected:h=!1,items:m,modifiers:g,combatKeywords:p=null,combatHooks:y=null}=e,M=Number.isFinite(o)?Math.max(1,o):Qs,v=Number.isFinite(a)?a:M,D=Bn(v,0,M),b=Number.isFinite(r)?r:0,I=Bn(b,0,1),T=(Array.isArray(l)?l:[]).filter(me=>typeof me=="string").map(me=>me.trim()).filter(me=>me.length>0),w=Number.isFinite(d)?d:Xo,x=Bn(w,Dt,Hn),A=Number.isFinite(u)?u:0,P=Math.max(0,A),N=Number.isFinite(f)?f:Yo,R=Math.max(0,N),B=Number.isFinite(c)?c:0,j=Math.max(0,B),H=Number.isFinite(i)?i:void 0,le=H!==void 0?Math.max(0,H):void 0,K=Fc(m),Y=Yc(g),ie=Uc(e.equipment,K),de=ao(ie),We={...Cn,health:M,defense:le??Cn.defense,shield:Cn.shield},X=qo(e.baseStats,We),dt={...X,health:M,defense:le??X.defense,shield:j},se=qo(e.effectiveStats,dt),Pe=Math.max(1,se.health),Ve=Bn(D,0,Pe),_e=typeof se.defense=="number"?Math.max(0,se.defense):le??void 0,ut=typeof se.shield=="number"?Math.max(0,se.shield):j,ft={...X,health:Math.max(1,X.health),defense:typeof X.defense=="number"?Math.max(0,X.defense):le??void 0,shield:typeof X.shield=="number"?Math.max(0,X.shield):Cn.shield},De={...se,health:Pe,defense:_e,shield:ut},St=Xc(n);return{id:t,name:St,coord:{q:s.q,r:s.r},maxHp:Pe,hp:Ve,defense:_e,shield:ut,steam:I,traits:[...T],upkeep:x,xp:P,lastHitAt:R,selected:h,items:de,baseStats:ft,effectiveStats:De,equipment:ie,modifiers:Y,combatKeywords:p,combatHooks:y}}const Ot=32;function sn(e,t,n,s){e.beginPath();for(let o=0;o<6;o++){const a=Math.PI/3*o,r=t+s*Math.cos(a),i=n+s*Math.sin(a);o===0?e.moveTo(r,i):e.lineTo(r,i)}e.closePath()}function io(e,t,n){return Math.min(Math.max(e,t),n)}function qc(e,{centerX:t,centerY:n,hp:s,maxHp:o,radius:a=Ot*.55}){const r=Number.isFinite(o)?Math.max(1,o):1,i=Number.isFinite(s)?s:r,c=io(i/r,0,1);if(e.save(),sn(e,t,n,a),e.fillStyle="rgba(7, 11, 18, 0.72)",e.fill(),e.restore(),c>0){e.save(),sn(e,t,n,a),e.clip();const l=e.createLinearGradient(t,n+a,t,n-a);l.addColorStop(0,"rgba(46, 160, 98, 0.35)"),l.addColorStop(1,"rgba(218, 255, 239, 0.95)"),e.fillStyle=l;const d=a*2*c,u=n+a-d;e.fillRect(t-a,u,a*2,d),e.restore()}e.save(),sn(e,t,n,a),e.lineWidth=Math.max(1,a*.12),e.strokeStyle="rgba(255, 255, 255, 0.28)",e.stroke(),e.restore()}function Jc(e,{centerX:t,centerY:n,radius:s=Ot,progress:o=0}){const a=io(o,0,1);if(a<=0)return;const r=Number.isFinite(s)&&s>0?s:Ot;e.save(),e.globalCompositeOperation="lighter",e.globalAlpha=a;const i=e.createRadialGradient(t,n,Math.max(1,r*.1),t,n,r);i.addColorStop(0,"rgba(255, 255, 255, 0.92)"),i.addColorStop(.45,"rgba(255, 255, 255, 0.68)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=i,e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),e.restore()}function Zc(e,{centerX:t,centerY:n,radius:s=Ot*.85,intensity:o=1}){const a=io(o,0,1);if(a<=0)return;e.save(),sn(e,t,n,s),e.clip();const r=e.createLinearGradient(t,n+s,t,n-s);r.addColorStop(0,"rgba(255, 255, 255, 0)"),r.addColorStop(.55,`rgba(255, 255, 255, ${.12*a})`),r.addColorStop(1,`rgba(255, 255, 255, ${.35*a})`),e.globalCompositeOperation="lighter",e.fillStyle=r,e.fillRect(t-s,n-s,s*2,s*2),e.restore(),e.save(),e.globalCompositeOperation="lighter",e.lineCap="round",e.strokeStyle=`rgba(255, 255, 255, ${.25*a})`,e.lineWidth=Math.max(1,s*.08);const i=s*.75,c=s*.35;for(let l=0;l<3;l++){const d=n-s*.5+l*c;e.beginPath(),e.moveTo(t-i,d),e.bezierCurveTo(t-i*.4,d-s*.4,t+i*.4,d+s*.2,t+i,d-s*.45),e.stroke()}e.restore()}const Wc={baseThreshold:50,heatPerSecond:50/30,thresholdGrowth:.05,coolingPerSecond:0};function oe(e,t=0){return Number.isFinite(e)?e:t}class Vc{heat;threshold;baseThreshold;thresholdGrowthFactor;heatPerSecond;coolingPerSecond;maxStoredHeat;constructor(t={}){const n={...Wc,...t},s=Math.max(1,oe(n.baseThreshold,50)),o=Math.max(1,oe(t.initialThreshold??s,s));this.baseThreshold=s,this.threshold=o,this.thresholdGrowthFactor=1+Math.max(0,oe(n.thresholdGrowth,0)),this.heatPerSecond=Math.max(0,oe(n.heatPerSecond,0)),this.coolingPerSecond=Math.max(0,oe(n.coolingPerSecond,0));const a=oe(n.maxStoredHeat??Number.NaN,Number.NaN);this.maxStoredHeat=Number.isFinite(a)&&a>=0?a:null;const r=Math.max(0,oe(t.initialHeat??0,0));this.heat=this.setHeatInternal(r)}getHeat(){return this.heat}getThreshold(){return this.threshold}getBuildRate(){return this.heatPerSecond}getCoolingRate(){return this.coolingPerSecond}reset(){this.heat=0,this.threshold=this.baseThreshold}setHeat(t){const n=Math.max(0,oe(t,0));return this.heat=this.setHeatInternal(n),this.heat}setHeatInternal(t){const n=Math.max(0,oe(t,0));return this.maxStoredHeat===null?(this.heat=n,this.heat):(this.heat=Math.min(n,this.maxStoredHeat),this.heat)}addHeat(t){const n=Math.max(0,oe(t,0));if(n<=0)return 0;const s=this.heat,o=s+n;return this.heat=this.maxStoredHeat===null?o:Math.min(o,this.maxStoredHeat),this.heat-s}cool(t){const n=Math.max(0,oe(t,0));if(n<=0||this.heat<=0)return 0;const s=this.heat;return this.heat=Math.max(0,this.heat-n),s-this.heat}vent(t=1){const n=Math.max(0,Math.min(1,oe(t,1)));return n<=0?0:this.cool(this.threshold*n)}advance(t,n){const s=Math.max(0,oe(t,0)),o=this.heatPerSecond,a=s>0?o*s:0,r=Math.max(0,oe(n?.bonusHeat??0,0)),i=a+r,c=this.addHeat(i),l=Math.max(0,oe(n?.coolingMultiplier??1,1)),d=s>0?this.coolingPerSecond*s*l:0,u=this.cool(d);return{addedHeat:c,cooledHeat:u,heat:this.heat}}hasTriggerReady(){return this.heat>=this.threshold-1e-6}consumeTrigger(){return this.hasTriggerReady()?(this.cool(this.threshold),this.threshold=Math.max(this.baseThreshold,this.threshold*this.thresholdGrowthFactor),!0):!1}timeUntilNextTrigger(){return this.hasTriggerReady()?0:this.heatPerSecond<=0?Number.POSITIVE_INFINITY:Math.max(0,this.threshold-this.heat)/this.heatPerSecond}getCooldownSeconds(){return this.heatPerSecond<=0?Number.POSITIVE_INFINITY:this.threshold/this.heatPerSecond}}function _c(e){return new Vc(e)}function sr(e,t,n){const s=typeof t=="number"?t:2,o=(typeof t=="number"?n:t)??[],a=[];for(let i=-s;i<=s;i++){const c=Math.max(-s,-i-s),l=Math.min(s,-i+s);for(let d=c;d<=l;d++){const u=Math.max(Math.abs(i),Math.abs(d),Math.abs(-i-d));if(u===0||u>s)continue;const f={q:e.q+i,r:e.r+d};o.some(m=>!m.isDead()&&m.coord.q===f.q&&m.coord.r===f.r)||a.push(f)}}if(a.length===0)return null;const r=Math.floor(Math.random()*a.length);return a[r]}function $c(e,t,n={}){const s=_c(t),o=s.getBuildRate(),a=s.getCooldownSeconds(),r=s.timeUntilNextTrigger(),i=Number.isFinite(n.maxRosterSize)?Math.max(0,Math.floor(n.maxRosterSize??0)):0;return{id:"sauna",pos:e,auraRadius:2,regenPerSec:1,rallyToFront:!1,maxRosterSize:i,heat:s.getHeat(),heatPerTick:o,playerSpawnThreshold:s.getThreshold(),playerSpawnCooldown:Number.isFinite(a)?a:0,playerSpawnTimer:Number.isFinite(r)?r:0,beerUpkeepAccumulator:0,heatTracker:s}}const or="deepwood",ar="Deepwood Wardens",rr="Reclusive guardians attuned to sauna spirits.",ir=[{id:"warding-circle",label:"Warding Circle",weight:2,units:[{unit:"soldier",level:1,quantity:2},{unit:"archer",level:1,quantity:1}],items:["spirit-oak-charm","sauna-incense"],modifiers:["barkskin-ritual"]},{id:"spirit-strike",label:"Spirit Strike",weight:1,units:[{unit:"archer",level:2,quantity:2}],items:["emberglass-arrow"],modifiers:["searing-chant","windstep"]}],el={id:or,name:ar,description:rr,bundles:ir},tl=Object.freeze(Object.defineProperty({__proto__:null,bundles:ir,default:el,description:rr,id:or,name:ar},Symbol.toStringTag,{value:"Module"})),cr="enemy",lr="Avanto Marauders",dr="Frostbitten raiders who harry the sauna frontier.",ur=[{id:"iceblade-scouts",label:"Iceblade Scouts",weight:3,units:[{unit:"avanto-marauder",level:1,quantity:1}],items:["cracked-ice-amulet"],modifiers:["frost-resilience"]},{id:"raiding-party",label:"Raiding Party",weight:2,units:[{unit:"avanto-marauder",level:1,quantity:2}],items:["stolen-sauna-tokens"],modifiers:["berserker-drift"]},{id:"frost-champion",label:"Frost Champion",weight:1,units:[{unit:"avanto-marauder",level:2,quantity:1}],items:["glacier-brand"],modifiers:["glacial-ward"]}],nl={id:cr,name:lr,description:dr,bundles:ur},sl=Object.freeze(Object.defineProperty({__proto__:null,bundles:ur,default:nl,description:dr,id:cr,name:lr},Symbol.toStringTag,{value:"Module"})),ol=Object.assign({"../content/factions/deepwood.json":tl,"../content/factions/enemy.json":sl}),Xn=new Map;for(const[e,t]of Object.entries(ol)){const n=al(t),s=cl(n,e);if(Xn.has(s.id))throw new Error(`Duplicate faction bundle id: ${s.id}`);Xn.set(s.id,s)}function al(e){return typeof e=="object"&&e!==null&&"default"in e?e.default:e}function co(e){return typeof e=="object"&&e!==null}function Hs(e,t){if(typeof e!="string")throw new Error(`Expected string at ${t}`);const n=e.trim();if(!n)throw new Error(`Expected non-empty string at ${t}`);return n}function Gs(e){if(typeof e!="string")return;const t=e.trim();return t||void 0}function Jo(e,t){if(e===void 0)return Object.freeze([]);if(!Array.isArray(e))throw new Error(`Expected array at ${t}`);const n=e.map((s,o)=>{if(typeof s!="string")throw new Error(`Expected string at ${t}[${o}]`);const a=s.trim();if(!a)throw new Error(`Expected non-empty string at ${t}[${o}]`);return a});return Object.freeze(n)}function fr(e,t){const n=typeof e=="number"?e:Number(e);return!Number.isFinite(n)||n<=0?t:n}function Zo(e,t){const n=Math.floor(fr(e,t));return n>0?n:t}function rl(e,t){if(!co(e))throw new Error(`Expected object at ${t}`);const n=Hs(e.unit,`${t}.unit`),s=Zo(e.level,1),o=Zo(e.quantity,1);return Object.freeze({unit:n,level:s,quantity:o})}function il(e,t,n){if(!co(e))throw new Error(`Expected object at ${t}`);const s=Gs(e.id)??`${n}-bundle`,o=Gs(e.label)??s,a=fr(e.weight,1),r=e.units;if(!Array.isArray(r)||r.length===0)throw new Error(`Expected non-empty units array at ${t}.units`);const i=r.map((d,u)=>rl(d,`${t}.units[${u}]`)),c=Jo(e.items,`${t}.items`),l=Jo(e.modifiers,`${t}.modifiers`);return Object.freeze({id:s,label:o,weight:a,units:Object.freeze(i),items:c,modifiers:l})}function cl(e,t){if(!co(e))throw new Error(`Expected object at ${t}`);const n=Hs(e.id,`${t}.id`),s=Hs(e.name,`${t}.name`),o=Gs(e.description);if(!Array.isArray(e.bundles)||e.bundles.length===0)throw new Error(`Expected non-empty bundles array at ${t}.bundles`);const a=e.bundles.map((r,i)=>il(r,`${t}.bundles[${i}]`,`${n}-${i}`));return Object.freeze({id:n,name:s,description:o,bundles:Object.freeze(a)})}Object.freeze(Array.from(Xn.keys()));function ll(e){return Xn.get(e)??null}function dl(e){return ll(e)?.bundles??Object.freeze([])}function ul(e){return typeof e=="function"?e:Math.random}function fl(e){const t=e();return!Number.isFinite(t)||t<0||t>=1?Math.random():t}function hl(e,t){const n=dl(e);if(n.length===0)throw new Error(`No bundles found for faction: ${e}`);const s=ul(t),o=n.reduce((i,c)=>i+c.weight,0);if(!Number.isFinite(o)||o<=0)throw new Error(`Invalid bundle weights for faction: ${e}`);const a=fl(s)*o;let r=0;for(const i of n)if(r+=i.weight,a<r)return i;return n[n.length-1]}function ml(){return`e${Date.now()}-${Math.floor(Math.random()*1e6)}`}function gl(e){return{level:e}}function pl(e){let t=Math.max(0,Math.floor(e.availableSlots));const n=[];if(t<=0)return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers};const s=e.makeId??ml,o=typeof e.random=="function"?e.random:Math.random,a=Math.max(0,Math.min(.95,typeof e.eliteOdds=="number"?e.eliteOdds:0));for(const r of e.bundle.units){const i=Math.min(r.quantity,t),c=r.unit;for(let l=0;l<i;l+=1){const d=o()<a?1:0,u=gl(Math.max(1,r.level+d)),f=e.pickEdge();if(!f)return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers};const h=Va(c,s(),f,e.factionId,u);if(h&&(e.addUnit(h),n.push(h),t-=1,t<=0))return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers}}}return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers}}class Al{timer;interval;factionId;random;makeId;difficulty;eliteOdds;constructor(t={}){this.factionId=t.factionId??"enemy",this.random=typeof t.random=="function"?t.random:Math.random;const n=Number.isFinite(t.difficulty)?Number(t.difficulty):1;this.difficulty=Math.max(.5,n);const s=typeof t.eliteOdds=="number"?t.eliteOdds:0;this.eliteOdds=Math.max(0,Math.min(.95,s));const o=Math.max(10,30/this.difficulty);this.interval=o,this.timer=o;const a=(()=>{let r=0;return()=>`e${Date.now()}-${r+=1}`})();this.makeId=typeof t.idFactory=="function"?t.idFactory:a}update(t,n,s,o){if(this.timer-=t,this.timer>0)return;const a=n.filter(c=>c.faction===this.factionId&&!c.isDead()).length,r=Ec-a;if(r>0){const c=hl(this.factionId,this.random);pl({bundle:c,factionId:this.factionId,pickEdge:o,addUnit:s,makeId:this.makeId,availableSlots:r,eliteOdds:this.eliteOdds,random:this.random})}const i=Math.pow(.95,this.difficulty);this.interval=Math.max(8,this.interval*i),this.timer=this.interval}}function us(e){let t=e.querySelector(".hud-top-row");t||(t=document.createElement("div"),t.className="hud-top-row",e.prepend(t));let n=t.querySelector(".hud-actions");n||(n=document.createElement("div"),n.className="hud-actions",t.appendChild(n));let s=t.querySelector(".hud-right-column");if(!s){s=document.createElement("div"),s.className="hud-right-column",t.appendChild(s);const r=e.querySelector("#resource-bar");r&&s.prepend(r)}const o=e.querySelector("#build-menu");o&&o.parentElement!==n&&n.appendChild(o);let a=e.querySelector(".hud-mobile-bar__tray");if(!a){const r=document.createElement("div");r.className="hud-mobile-bar",a=document.createElement("div"),a.className="hud-mobile-bar__tray",r.appendChild(a),e.appendChild(r)}return{container:t,actions:n,side:s,mobileBar:a}}function yl(e,t={}){const n=document.getElementById("ui-overlay");if(!n)return()=>{};const s=document.createElement("div");s.classList.add("sauna-control"),s.dataset.tutorialTarget="heat";const o=document.createElement("button");o.type="button",o.textContent="Sauna ",o.classList.add("topbar-button","sauna-toggle"),o.setAttribute("aria-expanded","false"),s.appendChild(o);const a=document.createElement("div");a.classList.add("sauna-card","hud-card"),a.hidden=!0;const r=document.createElement("div");r.classList.add("sauna-progress");const i=document.createElement("div");i.classList.add("sauna-progress__fill"),r.appendChild(i),a.appendChild(r);const c=document.createElement("div");c.classList.add("sauna-roster");const l=document.createElement("div");l.classList.add("sauna-roster__header");const d=document.createElement("span");d.textContent="Roster Cap",d.classList.add("sauna-roster__title"),l.appendChild(d);const u=document.createElement("span");u.classList.add("sauna-roster__value"),u.setAttribute("aria-live","polite"),l.appendChild(u),c.appendChild(l);const f=document.createElement("p");f.classList.add("sauna-roster__description"),f.textContent="Tune how many attendants may be active before new recruits wait in the steam.",c.appendChild(f);const h=`sauna-roster-${Math.floor(Math.random()*1e5)}`,m=document.createElement("label");m.classList.add("sauna-roster__label"),m.htmlFor=h,m.textContent="Active attendants";const g=document.createElement("input");g.type="range",g.id=h,g.min="0",g.step="1",g.classList.add("sauna-roster__slider");const p=document.createElement("input");p.type="number",p.min="0",p.step="1",p.inputMode="numeric",p.classList.add("sauna-roster__number");const y=document.createElement("div");y.classList.add("sauna-roster__controls"),y.appendChild(m),y.appendChild(g),y.appendChild(p),c.appendChild(y),a.appendChild(c);const M=document.createElement("label");M.classList.add("sauna-option");const v=document.createElement("input");v.type="checkbox",v.classList.add("sauna-option__input"),v.checked=e.rallyToFront,v.addEventListener("change",()=>{e.rallyToFront=v.checked}),M.appendChild(v);const D=document.createElement("span");D.textContent="Rally to Front",D.classList.add("sauna-option__label"),M.appendChild(D),a.appendChild(M),s.appendChild(a);const{actions:b}=us(n),I=()=>{const A=t.getRosterCapLimit?.();return typeof A=="number"&&Number.isFinite(A)?Math.max(0,Math.floor(A)):Math.max(0,Math.floor(e.maxRosterSize))},k=(A,P)=>{const N=Math.max(0,Math.min(A,Math.floor(P)));g.max=String(A),g.value=String(N),g.setAttribute("aria-valuemax",g.max),g.setAttribute("aria-valuenow",g.value),p.max=String(A),p.value=String(N),u.textContent=N===0?"Paused":`${N}`,u.dataset.state=N===0?"paused":"active",p.setAttribute("aria-label",`Roster cap set to ${N}`)},T=(A,P)=>{const N=Number(A),R=I(),B=Number.isFinite(N)?Math.max(0,Math.floor(N)):0;let j=Math.max(0,Math.min(R,B));return t.updateMaxRosterSize?j=t.updateMaxRosterSize(j,{persist:P}):e.maxRosterSize=j,k(R,j),j};g.addEventListener("input",()=>{T(Number(g.value),!1)}),g.addEventListener("change",()=>{T(Number(g.value),!0)});const w=A=>{T(Number(p.value),A)};p.addEventListener("input",()=>{w(!1)}),p.addEventListener("change",()=>{w(!0)}),p.addEventListener("blur",()=>{w(!0)}),T(e.maxRosterSize,!1);const x=()=>{s.parentElement!==b&&b.appendChild(s);const A=b.querySelector("#topbar");return A&&A.parentElement===b?(A.nextSibling!==s&&b.insertBefore(s,A.nextSibling),!0):!1};if(!x()){const A=new MutationObserver(()=>{x()&&A.disconnect()});A.observe(b,{childList:!0})}return o.addEventListener("click",()=>{const A=!a.hidden;a.hidden=A,o.setAttribute("aria-expanded",String(!A))}),()=>{const A=e.playerSpawnCooldown>0?e.playerSpawnCooldown:1,P=1-e.playerSpawnTimer/A;i.style.width=`${Math.max(0,Math.min(P,1))*100}%`,v.checked=e.rallyToFront;const N=I(),R=Math.max(0,Math.min(N,Math.floor(e.maxRosterSize)));if(R!==e.maxRosterSize)if(t.updateMaxRosterSize){const B=t.updateMaxRosterSize(R,{persist:!0});k(N,B)}else e.maxRosterSize=R,k(N,R);else k(N,R)}}const Ml=["/assets/sounds/sauna-forest.ogg","/assets/sounds/sauna-forest.mp3"],hr="audio_enabled",mr="audio_volume",Us=new Set,fs=new Set;let Mt=null,zn=null,je=null,on=null;function gr(e){if(typeof localStorage>"u")return null;try{return localStorage.getItem(e)}catch(t){return console.warn("Unable to read ambience preference",e,t),null}}const pr=gr(hr);let Je=pr==="true",an=pr!==null;const Wo=gr(mr);let kt=bl(Wo?Number(Wo):NaN,.65),vt=!1,ct=Rs();const zt=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null;let Ar=zt?.matches??!1;if(zt){const e=t=>{Ar=t.matches};typeof zt.addEventListener=="function"?zt.addEventListener("change",e):typeof zt.addListener=="function"&&zt.addListener(e)}if(typeof window<"u"&&!an){const e=()=>{an||(an=!0,vr(!0),Ht())};window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})}nc(e=>{ct=e,e?wr():Je?Ht():Qt(!0),An()});function bl(e,t){return Number.isFinite(e)?e<0?0:e>1?1:e:t}function An(){const e=Gn();for(const t of Us)t(e)}function wl(e){if(!(typeof localStorage>"u"))try{localStorage.setItem(hr,e?"true":"false")}catch(t){console.warn("Unable to persist ambience preference",t)}}function vl(e){if(!(typeof localStorage>"u"))try{localStorage.setItem(mr,e.toFixed(3))}catch(t){console.warn("Unable to persist ambience volume",t)}}function yr(e){if(je)return je;const t=e.createGain();return t.gain.value=Je&&!ct?kt:0,t.connect(e.destination),je=t,t}function Qt(e=!1){if(!je)return;const t=je.context,n=Je&&!ct?kt:0,s=t.currentTime;je.gain.cancelScheduledValues(s),e?je.gain.setValueAtTime(n,s):je.gain.setTargetAtTime(n,s,.25)}function Sl(){return Ar?.6:4.2}function Mr(){on!==null&&(clearTimeout(on),on=null)}function Fs(e){try{e.source.stop()}catch{}e.source.disconnect(),e.gain.disconnect(),fs.delete(e)}function El(){for(const e of[...fs])Fs(e)}async function Cl(e){return Mt||(zn||(zn=(async()=>{for(const t of Ml)try{const n=await fetch(t);if(!n.ok)continue;const s=await n.arrayBuffer();return await e.decodeAudioData(s)}catch(n){console.warn("Failed to fetch ambience source",t,n)}throw new Error("No ambience sources available")})().then(t=>(Mt=t,t)).catch(t=>{throw zn=null,t})),zn)}function Bl(e,t){if(!vt)return;Mr();const n=Math.max(0,e-t.currentTime-.05);on=setTimeout(()=>{on=null,vt&&br(e)},n*1e3)}function br(e){const t=je?.context??fn();if(!t||!Mt)return;const n=t.createGain(),s=t.createBufferSource();s.buffer=Mt,s.loop=!1,s.connect(n),n.connect(yr(t));const o=Math.min(Sl(),Mt.duration/2),a=Number.isFinite(o)&&o>0?o:.25,r=Math.max(t.currentTime,e);n.gain.setValueAtTime(0,r),n.gain.linearRampToValueAtTime(1,r+a);const i=e+Mt.duration,c=i-a;c>r&&n.gain.setValueAtTime(1,c),n.gain.linearRampToValueAtTime(.001,i+.1);const l={source:s,gain:n,stopTime:i};fs.add(l),s.addEventListener("ended",()=>{Fs(l)});try{s.start(e)}catch(d){console.warn("Failed to start ambience layer",d),Fs(l);return}Bl(i-a,t)}async function Ht(){if(vt||!Je||ct){Qt();return}const e=fn();if(e){yr(e),Qt();try{const t=await Cl(e);if(!Je||ct)return;await e.resume().catch(()=>{}),vt=!0;const n=Math.max(e.currentTime+.12,e.currentTime);br(n),An()}catch(t){console.warn("Unable to start ambience",t)}}}function wr(){if(!vt&&fs.size===0){Qt(!0);return}vt=!1,Mr(),El(),Qt(!0),An()}function vr(e){Je===e&&an||(Je=e,an=!0,wl(e),e?ct||Ht():wr(),An())}function xl(e){const t=Math.max(0,Math.min(1,e));t!==kt&&(kt=t,vl(kt),Qt(),An())}function Gn(){return{enabled:Je,playing:vt,volume:kt,globallyMuted:ct}}function zl(e){return Us.add(e),()=>{Us.delete(e)}}Je&&!ct&&Ht();const In=10,Il=1.5,Nl=1.5,Vo=1,Pl=.6,_o=" +50% attack   Barrier   Immortal",rn=5,cn=3;let V=null;function Dl(){V&&(V.tickTimer&&clearInterval(V.tickTimer),V.timeout&&clearTimeout(V.timeout),V=null)}function lo(){return V!==null}function kl(){return V?Math.max(0,V.endTime-performance.now())/1e3:0}function Tl(e,t){if(lo()||!e.spendResource(rn,C.SISU))return!1;const n=[];for(const o of t){if(o.faction!=="player"||o.isDead())continue;const a=`sisu-burst-${o.id}`,r={unit:o,attackDelta:0,movementDelta:0,shieldBonusApplied:Vo,shieldBonusRemaining:Vo,wasImmortal:o.isImmortal()};rc({id:a,duration:In,data:r,onApply:()=>{const i=o.stats.attackDamage,c=Math.round(i*Il);r.attackDelta=Math.max(0,c-i),r.attackDelta!==0&&(o.stats.attackDamage=i+r.attackDelta);const l=o.stats.movementRange,d=Math.max(1,Math.round(l*Nl));r.movementDelta=Math.max(0,d-l),r.movementDelta!==0&&(o.stats.movementRange=l+r.movementDelta),r.shieldBonusRemaining=r.shieldBonusApplied,o.setShield(o.getShield()+r.shieldBonusApplied),o.setImmortal(!0),o.fearless=!0},onExpire:()=>{let i=!1;if(r.attackDelta!==0){const l=o.stats.attackDamage,d=Math.max(0,l-r.attackDelta);d!==l&&(o.stats.attackDamage=d,i=!0)}if(r.movementDelta!==0){const l=o.stats.movementRange,d=Math.max(0,l-r.movementDelta);d!==l&&(o.stats.movementRange=d,i=!0)}o.setImmortal(r.wasImmortal);const c=Math.max(0,Math.min(r.shieldBonusApplied,r.shieldBonusRemaining));c>0&&o.setShield(Math.max(0,o.getShield()-c)),delete o.fearless,i&&z.emit("unit:stats:changed",{unitId:o.id,stats:{...o.stats}}),V&&(V.affected=V.affected.filter(l=>l.modifierId!==a))},hooks:{"combat:onHit":i=>{const c=i;if(c.source!=="defender"||c.defender.id!==o.id||c.shieldDamage<=0||r.shieldBonusRemaining<=0)return;const l=Math.min(r.shieldBonusRemaining,c.shieldDamage);r.shieldBonusRemaining=Math.max(0,r.shieldBonusRemaining-l)}}}),n.push({unit:o,modifierId:a,state:r})}return V={endTime:performance.now()+In*1e3,status:_o,affected:n,tickTimer:null,timeout:null},z.emit("sisuBurstStart",{remaining:In,status:_o}),V.tickTimer=setInterval(()=>{if(!V)return;const o=Math.max(0,Math.ceil(kl()));o>0&&z.emit("sisuBurstTick",{remaining:o,status:V.status})},1e3),V.timeout=setTimeout(()=>{Ll()},In*1e3),!0}function Ll(){if(V){for(const e of V.affected)ic(e.modifierId);Dl(),z.emit("sisuBurstEnd",{})}}function Rl(e,t,n,s){const o=t.filter(a=>a.faction==="player"&&!a.isDead());if(o.length===0||!e.spendResource(cn,C.SISU))return!1;for(const a of o){const r=sr(n,3,t)??{...n};a.coord=r;const i=Math.round(a.getMaxHealth()*Pl);a.stats.health=Math.min(a.getMaxHealth(),Math.max(a.stats.health,i))}return s.revealAround(n,3,{autoFrame:!1}),z.emit("torilleRecalled",{count:o.length}),!0}const jl="(max-width: 820px)",Sr="is-mobile",Er="is-desktop";let be=null,qn=null,ze=!1,Nn=0;const Jn=new Set,Ks=new Set,Zn=e=>{for(const t of Ks)t.classList.toggle(Sr,e),t.classList.toggle(Er,!e),t.dataset.viewport=e?"mobile":"desktop"},Ol=e=>{if(ze!==e){ze=e,Zn(ze);for(const t of Array.from(Jn))try{t(ze)}catch(n){console.error("Failed to notify mobile listener",n)}}},Cr=()=>{if(be||typeof window>"u")return;be=window.matchMedia(jl),ze=be.matches,Zn(ze);const e=t=>{Ol(t.matches)};typeof be.addEventListener=="function"?(be.addEventListener("change",e),qn=()=>be?.removeEventListener("change",e)):(be.addListener(e),qn=()=>be?.removeListener(e))},Ql=()=>{be&&(qn?.(),qn=null,be=null)},uo=(e,{immediate:t=!0}={})=>(Cr(),Jn.add(e),t&&e(ze),()=>{Jn.delete(e)}),Hl=({root:e,onChange:t,immediate:n=!0}={})=>{Cr();const s=e??(typeof document<"u"?document.documentElement:null);s&&(Ks.add(s),Zn(ze)),Nn+=1;let o=null;return t?o=uo(t,{immediate:n}):n&&be&&Zn(ze),{matches:()=>ze,dispose:()=>{s&&(Ks.delete(s),s.classList.remove(Sr,Er),(s.dataset.viewport==="mobile"||s.dataset.viewport==="desktop")&&delete s.dataset.viewport),o&&(o(),o=null),Nn=Math.max(0,Nn-1),Nn===0&&Jn.size===0&&Ql()}}};function qt(e,t={}){const{iconSrc:n,description:s,srLabel:o}=t,a=document.createElement("div");if(a.classList.add("topbar-badge"),a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true"),n){const u=document.createElement("img");u.src=n,u.alt=e,u.decoding="async",u.classList.add("topbar-badge-icon"),a.appendChild(u)}const r=document.createElement("div");r.classList.add("badge-text");const i=document.createElement("span");i.textContent=e,i.classList.add("badge-label"),r.appendChild(i);const c=document.createElement("span");c.textContent="0",c.classList.add("badge-value"),c.setAttribute("aria-hidden","true"),r.appendChild(c);const l=document.createElement("span");l.classList.add("badge-delta"),l.style.opacity="0",l.style.transform="translateY(-6px)",l.style.transition="opacity 0.5s ease, transform 0.5s ease",l.setAttribute("aria-hidden","true"),a.append(r,l),s&&(a.title=s);const d=o??e;return a.dataset.label=d,a.setAttribute("aria-label",`${d}: 0`),{container:a,value:c,delta:l,label:d}}function Gl(e,t={},n={}){const s=document.getElementById("ui-overlay");if(!s)return{update:()=>{},dispose:()=>{}};const{actions:o,mobileBar:a}=us(s),r=document.createElement("div");r.id="topbar",o.prepend(r);const i=document.createElement("div");i.className="topbar-badge-row",r.appendChild(i);const c=document.createElement("div");c.className="topbar-action-tray",c.setAttribute("role","group"),c.setAttribute("aria-label","Combat and audio controls"),c.dataset.tutorialTarget="combat";const l={[C.SAUNA_BEER]:"Sauna beer bottles chilled for construction crews and eager recruits.",[C.SAUNAKUNNIA]:"Saunakunniaprestige earned from sauna rituals and triumphant battles.",[C.SISU]:"Sisuthe relentless grit forged when your warriors triumph on the snow."},d=qt("Sauna Beer",{iconSrc:t.saunaBeer,description:l[C.SAUNA_BEER],srLabel:"Sauna beer reserves"});d.container.classList.add("badge-sauna-beer");const u=qt("Sisu",{iconSrc:t.sisu,description:l[C.SISU],srLabel:"Sisu reserves"});u.container.classList.add("badge-sisu"),u.container.dataset.tutorialTarget="sisu";const f=qt("Saunakunnia",{iconSrc:t.saunakunnia,description:l[C.SAUNAKUNNIA],srLabel:"Saunakunnia"});f.container.classList.add("badge-sauna"),f.container.dataset.tutorialTarget="victory";const h=qt("Burst ",{srLabel:"Sisu burst countdown"});h.container.classList.add("badge-sisu"),h.container.style.display="none",h.delta.style.display="none";const m=qt("Time");m.container.classList.add("badge-time"),m.delta.style.display="none",i.appendChild(d.container),i.appendChild(u.container),i.appendChild(f.container),i.appendChild(h.container),i.appendChild(m.container);let g=null,p=null;n.useSisuBurst&&(g=document.createElement("button"),g.type="button",g.classList.add("topbar-button","sisu-button"),g.textContent=`Sisu Burst ${rn}`,g.title="Spend SISU to ignite a short-lived surge in allied attack and movement.",g.addEventListener("click",()=>{n.useSisuBurst?.(),y()}),g.classList.add("topbar-action"),c.appendChild(g)),n.torille&&(p=document.createElement("button"),p.type="button",p.classList.add("topbar-button","torille-button"),p.textContent=`Torille! ${cn}`,p.title="Call every surviving fighter back to the sauna to regroup.",p.addEventListener("click",()=>{n.torille?.(),y()}),p.classList.add("topbar-action"),c.appendChild(p));function y(){const E=e.getResource(C.SISU);if(g){const O=E>=rn,q=lo();g.disabled=!O||q;const U=["Spend SISU to ignite a short-lived surge in allied attack and movement."];O||U.push(`Requires ${rn} SISU.`),q&&U.push("Burst already active."),g.title=U.join(" ")}if(p){const O=E>=cn;p.disabled=!O,p.title=O?"Call every surviving fighter back to the sauna to regroup.":`Requires ${cn} SISU to rally everyone home.`}}y();const M=document.createElement("button");M.type="button",M.title="Toggle sound",M.classList.add("topbar-button","sound-button");const v=document.createElement("span");if(v.textContent="Sound",t.sound){const E=document.createElement("img");E.src=t.sound,E.alt="",E.decoding="async",E.setAttribute("aria-hidden","true"),M.appendChild(E)}M.appendChild(v);function D(){const E=Rs();v.textContent=E?"Muted":"Sound",M.setAttribute("aria-pressed",E?"true":"false"),M.classList.toggle("is-muted",E)}M.addEventListener("click",()=>{tc(!Rs()),D()}),D(),M.classList.add("topbar-action","topbar-action--sound"),c.appendChild(M);const b=document.createElement("div");b.className="topbar-ambience";const I=document.createElement("div");I.className="topbar-ambience__header";const k=document.createElement("span");k.className="topbar-ambience__icon",k.textContent="",k.setAttribute("aria-hidden","true");const T=document.createElement("span");T.className="topbar-ambience__title",T.textContent="Sauna ambience";const w=document.createElement("button");w.type="button",w.className="ambience-toggle",w.setAttribute("role","switch"),w.setAttribute("aria-label","Toggle sauna ambience soundscape");const x=document.createElement("span");x.className="ambience-toggle__track";const A=document.createElement("span");A.className="ambience-toggle__thumb";const P=document.createElement("span");P.className="ambience-toggle__label",w.append(x,A,P),I.append(k,T,w);const N=document.createElement("div");N.className="topbar-ambience__slider";const R=document.createElement("span");R.className="topbar-ambience__caption",R.textContent="Volume";const B=document.createElement("span");B.className="topbar-ambience__value";const j=document.createElement("input");j.type="range",j.min="0",j.max="100",j.step="1",j.className="topbar-ambience__range",j.setAttribute("aria-label","Ambient volume"),N.append(R,j,B);const H=document.createElement("p");H.className="topbar-ambience__status",H.setAttribute("aria-live","polite"),b.append(I,N,H),r.appendChild(b);const le=uo(E=>{E?(a.appendChild(c),c.classList.add("topbar-action-tray--mobile")):(r.appendChild(c),c.classList.remove("topbar-action-tray--mobile"))});let K=Gn();const Y=(E=K)=>{K=E;const O=Math.round(E.volume*100);j.value=String(O),j.title=`Ambient volume ${O}%`,j.style.setProperty("--value",`${O}`),B.textContent=`${O}%`,j.disabled=!E.enabled||E.globallyMuted,w.setAttribute("aria-checked",E.enabled?"true":"false"),w.classList.toggle("is-on",E.enabled),w.classList.toggle("is-muted",E.globallyMuted),P.textContent=E.enabled?"On":"Off",w.title=E.enabled?"Disable sauna ambience":"Enable sauna ambience",b.classList.toggle("is-off",!E.enabled),b.classList.toggle("is-globally-muted",E.globallyMuted),E.globallyMuted?H.textContent="Muted by master toggle":E.enabled?E.playing?H.textContent="Forest loop playing":H.textContent="Ambience ready":H.textContent="Ambience paused"};w.addEventListener("click",()=>{const E=!K.enabled;vr(E),K=Gn(),E&&!K.globallyMuted&&Ht(),Y(K)}),j.addEventListener("input",()=>{const E=j.valueAsNumber/100;xl(E),K=Gn(),K.enabled&&!K.globallyMuted&&Ht(),Y(K)}),Y(K);const ie=zl(E=>{Y(E)});function de(E,O){const q=Math.max(0,Math.ceil(E));h.container.style.display="block",h.value.textContent=String(q),O?(h.delta.style.display="block",h.delta.textContent=O,h.container.title=`Sisu burst active: ${O}`):(h.delta.style.display="none",h.delta.textContent="",h.container.removeAttribute("title"));const U=[`Sisu burst active  ${q} seconds remaining`];O&&U.push(O),h.container.setAttribute("aria-label",U.join("  "))}const We=({remaining:E,status:O})=>{de(E,O),y()},X=({remaining:E,status:O})=>{de(E,O)},dt=()=>{h.container.style.display="none",h.value.textContent="0",h.delta.textContent="",h.delta.style.display="none",h.container.removeAttribute("title"),y()};z.on("sisuBurstStart",We),z.on("sisuBurstTick",X),z.on("sisuBurstEnd",dt);const se=new Intl.NumberFormat("en-US"),Pe=new Intl.NumberFormat("en-US",{signDisplay:"exceptZero"}),Ve={[C.SAUNA_BEER]:"Sauna Beer",[C.SAUNAKUNNIA]:"Saunakunnia",[C.SISU]:"Sisu"},_e={[C.SAUNA_BEER]:{singular:"bottle",plural:"bottles"},[C.SAUNAKUNNIA]:{singular:"Saunakunnia",plural:"Saunakunnia"},[C.SISU]:{singular:"Sisu",plural:"Sisu"}},ut={[C.SAUNA_BEER]:"",[C.SAUNAKUNNIA]:"",[C.SISU]:""},ft={[C.SAUNA_BEER]:d,[C.SAUNAKUNNIA]:f,[C.SISU]:u},De={};function St(E,O){const q=Number.isFinite(O)?O:0;return E===C.SAUNA_BEER?Math.trunc(q):Math.max(0,Math.round(q))}function me(E,O){return se.format(St(E,O))}function Ft(E,O){return O===0?"":`${Pe.format(O)}${ut[E]}`}function $e(E,O){if(O===0)return"";const q=O>0?"gained":"spent",U=se.format(Math.abs(O)),Te=_e[E];if(Te){const tt=Math.abs(O)===1?Te.singular:Te.plural,Le=Ve[E],Ce=[Le];tt&&tt!==Le&&Ce.push(tt);const ge=Ce.filter(Boolean).join(" ");return`${q} ${U}${ge?` ${ge}`:""}`}const et=Ve[E];return`${q} ${U}${et?` ${et}`:""}`}function ke(E,O,q=0){const U=ft[E];if(!U)return;const Te=St(E,O),et=me(E,O);U.value.textContent=et;const tt=E===C.SAUNA_BEER&&Te<0;if(U.container.classList.toggle("topbar-badge--debt",tt),q!==0){U.delta.textContent=Ft(E,q),U.delta.style.opacity="1",U.delta.style.transform="translateY(0)";const ge=De[E];ge&&clearTimeout(ge),De[E]=setTimeout(()=>{U.delta.style.opacity="0",U.delta.style.transform="translateY(-6px)",delete De[E]},1e3)}else U.delta.textContent="",U.delta.style.opacity="0",U.delta.style.transform="translateY(-6px)";const Le=$e(E,q),Ce=[`${U.label} ${et}`];if(tt){const ge=se.format(Math.abs(Te)),Et=_e[E];if(Et){const Kt=Math.abs(Te)===1?Et.singular:Et.plural,mt=Kt&&Kt!==Ve[E];Ce.push(mt?`Debt of ${ge} ${Kt}`:`Debt of ${ge}`)}else Ce.push(`Debt of ${ge}`)}Le&&Ce.push(Le),U.container.setAttribute("aria-label",Ce.join("  "))}ke(C.SAUNA_BEER,e.getResource(C.SAUNA_BEER)),ke(C.SAUNAKUNNIA,e.getResource(C.SAUNAKUNNIA)),ke(C.SISU,e.getResource(C.SISU));const ht=({resource:E,amount:O,total:q})=>{ft[E]&&(ke(E,q,O),E===C.SISU&&y())};z.on("resourceChanged",ht);let te=0;return{update(E){te+=E;const O=Math.floor(te/1e3),q=Math.floor(O/60),U=O%60;m.value.textContent=`${q}:${U.toString().padStart(2,"0")}`},dispose(){z.off("sisuBurstStart",We),z.off("sisuBurstTick",X),z.off("sisuBurstEnd",dt),z.off("resourceChanged",ht),Object.values(De).forEach(E=>{E&&clearTimeout(E)}),ie(),le(),c.remove(),r.remove()}}}function Ul(e){const t=[e.name];return e.description&&t.push(e.description),e.rarity&&t.push(`Rarity: ${e.rarity}`),e.quantity>1&&t.push(`Quantity: ${e.quantity}`),t.join("  ")}function Fl(e){const t=document.createElement("span");t.classList.add("item-icon__fallback");const n=e.trim();return t.textContent=n?n[0]?.toUpperCase()??"?":"?",t.setAttribute("aria-hidden","true"),t}function Kl(e,t){const n=document.createElement("img");return n.src=e,n.alt="",n.decoding="async",n.loading="lazy",n.classList.add("item-icon__image"),n.setAttribute("aria-hidden","true"),n.title=t,n}function Yl(e){const t=document.createElement("li");t.classList.add("item-icon"),t.dataset.itemId=e.id;const n=Ul(e);if(t.title=n,t.setAttribute("aria-label",n),t.setAttribute("role","listitem"),e.rarity&&(t.dataset.rarity=e.rarity.toLowerCase()),e.icon&&e.icon.trim().length>0?t.appendChild(Kl(e.icon,e.name)):t.appendChild(Fl(e.name)),e.quantity>1){const s=document.createElement("span");s.classList.add("item-icon__quantity"),s.textContent=`${e.quantity}`,s.setAttribute("aria-hidden","true"),t.appendChild(s)}return t}const Xl=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Ys(e){return e===1/0?"":!Number.isFinite(e)||e<=0?"0s":`${Xl.format(Math.ceil(e))}s`}function ql(e){const t=[e.name];return e.description&&t.push(e.description),e.source&&t.push(`Source: ${e.source}`),e.duration!==1/0&&t.push(`Duration: ${Ys(e.duration)}`),t.push(`Remaining: ${Ys(e.remaining)}`),e.stacks&&e.stacks>1&&t.push(`Stacks: ${e.stacks}`),t.join("  ")}function Jl(e){const t=document.createElement("li");t.classList.add("mod-pill"),t.dataset.modifierId=e.id,t.title=ql(e),t.setAttribute("aria-label",t.title),t.setAttribute("role","listitem"),t.dataset.duration=e.duration===1/0?"infinite":String(e.duration),t.dataset.remaining=e.remaining===1/0?"infinite":String(e.remaining),e.appliedAt!==void 0&&(t.dataset.appliedAt=String(e.appliedAt)),e.stacks&&e.stacks>1&&(t.dataset.stacks=String(e.stacks));const n=document.createElement("span");if(n.classList.add("mod-pill__name"),n.textContent=e.name,n.setAttribute("aria-hidden","true"),t.appendChild(n),e.stacks&&e.stacks>1){const o=document.createElement("span");o.classList.add("mod-pill__stacks"),o.textContent=`${e.stacks}`,o.setAttribute("aria-hidden","true"),t.appendChild(o)}const s=document.createElement("span");return s.classList.add("mod-pill__timer"),s.textContent=Ys(e.remaining),s.setAttribute("aria-hidden","true"),t.appendChild(s),e.remaining!==1/0&&e.remaining<=5&&(t.dataset.urgent="true"),t}const Xs={engaged:"Engaged on the field",reserve:"On reserve duty",downed:"Recovering from battle"},W=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),$o="panel-roster-title";function Zl(e){return e.length===0?"No defining traits yet":e.join("  ")}function Bt(e,t){const s=Math.round(e-(typeof t=="number"?t:0));if(s===0)return"";const o=W.format(Math.abs(s));return s>0?` (+${o})`:` (-${o})`}function Wl(e){if(!e)return"No stat changes";const t=[],n=(s,o)=>{if(typeof o=="number"&&o!==0){const a=o>0?"+":"";t.push(`${s} ${a}${W.format(Math.abs(o))}`)}};return n("HP",e.health),n("ATK",e.attackDamage),n("RNG",e.attackRange),n("MOV",e.movementRange),n("DEF",e.defense),n("Shield",e.shield),t.length===0?"No stat changes":t.join(", ")}function Vl(e){const{stats:t,baseStats:n}=e,s=[`HP ${W.format(t.health)}/${W.format(t.maxHealth)}${Bt(t.maxHealth,n.maxHealth)}`];return t.shield&&t.shield>0&&s.push(`Shield ${W.format(t.shield)}${Bt(t.shield,n.shield)}`),s.push(`ATK ${W.format(t.attackDamage)}${Bt(t.attackDamage,n.attackDamage)}`),s.push(`RNG ${W.format(t.attackRange)}${Bt(t.attackRange,n.attackRange)}`),t.defense&&t.defense>0&&s.push(`DEF ${W.format(t.defense)}${Bt(t.defense,n.defense)}`),s.push(`MOV ${W.format(t.movementRange)}${Bt(t.movementRange,n.movementRange)}`),s.push(`Upkeep ${W.format(e.upkeep)} beer`),s.join("  ")}function _l(e){const{stats:t}=e,n=[e.name,Xs[e.status]];n.push(`health ${W.format(t.health)} of ${W.format(t.maxHealth)}`),t.shield&&t.shield>0&&n.push(`shield ${W.format(t.shield)}`),n.push(`attack ${W.format(t.attackDamage)}`),t.defense&&t.defense>0&&n.push(`defense ${W.format(t.defense)}`),t.attackRange>0&&n.push(`attack range ${W.format(t.attackRange)}`),n.push(`movement ${W.format(t.movementRange)}`),n.push(`upkeep ${W.format(e.upkeep)} beer`);const s=e.equipment.filter(o=>o.item).length;return s>0&&n.push(`${s} equipped item${s===1?"":"s"}`),e.modifiers.length>0&&n.push(`${e.modifiers.length} active modifier${e.modifiers.length===1?"":"s"}`),n.join(", ")}function $l(e,t){const n=t.filter(i=>i.status==="engaged").length,s=t.filter(i=>i.status==="reserve").length,o=t.filter(i=>i.status==="downed").length,a=(i,c,l)=>{const d=document.createElement("span");return d.classList.add("panel-roster__metric"),d.dataset.status=l,d.textContent=`${W.format(c)} ${i}`,d.setAttribute("aria-label",d.textContent),d},r=document.createElement("div");r.classList.add("panel-roster__metrics"),r.append(a("engaged",n,"engaged"),a("reserve",s,"reserve"),a("downed",o,"downed")),e.appendChild(r)}function ed(e,t,n){const s=document.createElement("div");s.classList.add("panel-roster__loadout");const o=document.createElement("ul");o.classList.add("panel-roster__slots"),o.setAttribute("role","list"),o.setAttribute("aria-label",`${t.name} equipment slots`);for(const a of t.equipment){const r=document.createElement("li");r.classList.add("panel-roster__slot"),r.dataset.slot=a.id;const i=document.createElement("div");i.classList.add("panel-roster__slot-header");const c=document.createElement("span");c.classList.add("panel-roster__slot-label"),c.textContent=a.label,c.title=a.description,i.appendChild(c);const l=document.createElement("span");if(l.classList.add("panel-roster__slot-summary"),l.textContent=a.item?a.item.name:"Empty",l.title=a.description,i.appendChild(l),r.appendChild(i),a.item){const m=document.createElement("ul");m.classList.add("panel-roster__slot-icons"),m.setAttribute("role","list"),m.appendChild(Yl(a.item)),r.appendChild(m)}const d=document.createElement("span");d.classList.add("panel-roster__slot-modifiers"),d.textContent=Wl(a.modifiers),d.title=d.textContent,r.appendChild(d);const u=document.createElement("div");u.classList.add("panel-roster__slot-actions");const f=document.createElement("button");f.type="button",f.classList.add("panel-roster__slot-action"),f.textContent=a.item?"Replace":"Equip",f.setAttribute("aria-label",`Equip ${a.label} for ${t.name}`),f.addEventListener("click",m=>{m.stopPropagation(),n.onEquipSlot?.(t.id,a.id)}),u.appendChild(f);const h=document.createElement("button");h.type="button",h.classList.add("panel-roster__slot-action"),h.textContent="Unequip",h.disabled=a.item===null,h.setAttribute("aria-label",`Unequip ${a.label} from ${t.name}`),h.addEventListener("click",m=>{m.stopPropagation(),h.disabled||n.onUnequipSlot?.(t.id,a.id)}),u.appendChild(h),r.appendChild(u),o.appendChild(r)}if(s.appendChild(o),t.modifiers.length>0){const a=document.createElement("ul");a.classList.add("panel-roster__mods"),a.setAttribute("role","list"),a.setAttribute("aria-label",`${t.name} active modifiers`),a.title=t.modifiers.map(r=>r.name).join(", ");for(const r of t.modifiers)a.appendChild(Jl(r));s.appendChild(a)}e.appendChild(s)}function td(e,t={}){return{render:s=>{e.innerHTML="",e.dataset.count=String(s.length),e.classList.add("panel-roster");const o=document.createElement("div");o.classList.add("panel-roster__header");const a=document.createElement("h4");a.classList.add("panel-roster__title"),a.textContent="Battalion Roster",a.id=$o,o.appendChild(a),e.setAttribute("aria-labelledby",$o);const r=s.length===0?"No attendants mustered yet":`${W.format(s.length)} attendant${s.length===1?"":"s"} enlisted`,i=document.createElement("span");if(i.classList.add("panel-roster__count"),i.textContent=r,o.appendChild(i),e.appendChild(o),s.length===0){const l=document.createElement("p");l.classList.add("panel-roster__empty"),l.textContent="No attendants have rallied to the sauna yet.",e.appendChild(l);return}$l(e,s);const c=document.createElement("ul");c.classList.add("panel-roster__list"),c.setAttribute("role","list");for(const l of s){const d=document.createElement("li");d.classList.add("panel-roster__row");const u=document.createElement("button");u.type="button",u.classList.add("panel-roster__item"),u.dataset.unitId=l.id,u.dataset.status=l.status,u.setAttribute("aria-pressed",l.selected?"true":"false"),u.setAttribute("aria-label",_l(l)),u.title=`${l.name}  ${Xs[l.status]}`,l.selected&&u.classList.add("is-selected"),l.status==="downed"&&u.classList.add("is-downed");const f=document.createElement("div");f.classList.add("panel-roster__name-row");const h=document.createElement("span");h.classList.add("panel-roster__name"),h.textContent=l.name,h.title=l.name,f.appendChild(h);const m=document.createElement("span");m.classList.add("panel-roster__status"),m.dataset.status=l.status,m.textContent=Xs[l.status],f.appendChild(m);const g=document.createElement("div");g.classList.add("panel-roster__meta");const p=Vl(l);g.textContent=p,g.title=p;const y=document.createElement("div");y.classList.add("panel-roster__health");const M=document.createElement("div");M.classList.add("panel-roster__health-fill");const v=l.stats.maxHealth>0?Math.max(0,Math.min(100,Math.round(l.stats.health/l.stats.maxHealth*100))):0;M.style.width=`${v}%`,M.dataset.percent=`${v}`,y.appendChild(M);const D=document.createElement("div");D.classList.add("panel-roster__traits");const b=Zl(l.traits);D.textContent=b,D.title=b,u.append(f,g,y,D),ed(u,l,t),typeof t.onSelect=="function"&&u.addEventListener("click",()=>t.onSelect?.(l.id)),d.appendChild(u),c.appendChild(d)}e.appendChild(c)}}}const ea=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function nd(e,t={}){const n=document.getElementById("ui-overlay");if(!n)return{log:()=>{},addEvent:()=>{},renderRoster:()=>{},dispose:()=>{}};const{actions:s,side:o,mobileBar:a}=us(n),r=n.querySelector("#right-panel");r&&r.remove();const i=n.querySelector(".right-panel-slide");i&&i.remove();const c=n.querySelector("#right-panel-toggle");c&&c.remove();const l=document.createElement("div");l.id="right-panel",l.classList.add("hud-card"),l.setAttribute("role","complementary"),l.setAttribute("aria-label","Sauna command console"),l.tabIndex=-1;const d=document.createElement("div");d.className="right-panel-slide",d.setAttribute("aria-hidden","true");const u=document.createElement("div");u.className="right-panel-slide__backdrop",u.setAttribute("aria-hidden","true");const f=document.createElement("div");f.className="right-panel-slide__sheet",f.appendChild(l),d.append(u,f);const h=window.matchMedia("(max-width: 1040px)"),m=[],g=document.createElement("button");g.type="button",g.id="right-panel-toggle",g.classList.add("hud-panel-toggle"),g.setAttribute("aria-controls",l.id);const p=document.createElement("span");p.classList.add("hud-panel-toggle__icon"),p.setAttribute("aria-hidden","true");const y=document.createElement("span");y.classList.add("hud-panel-toggle__icon-bars"),p.appendChild(y);const M=document.createElement("span");M.classList.add("hud-panel-toggle__text");const v=document.createElement("span");v.classList.add("hud-panel-toggle__title"),v.textContent="Command Console";const D=document.createElement("span");D.classList.add("hud-panel-toggle__state"),M.append(v,D),g.append(p,M);const b=()=>{const S=s.querySelector("#topbar");S&&S.parentElement===s?S.insertAdjacentElement("afterend",g):s.prepend(g)};let I=!1,k=!1,T=!1,w=!1;const x="is-mobile-panel-open",A=()=>{T?D.textContent=w?"Close":"Menu":D.textContent=I?"Open":"Close"},P=()=>{if(T){g.setAttribute("aria-expanded",w?"true":"false");const S=w?"Close command console panel":"Open command console panel";g.setAttribute("aria-label",S),g.title=w?"Close the sauna command console overlay":"Open the sauna command console overlay"}else{g.setAttribute("aria-expanded",I?"false":"true");const S=I?"Open command console panel":"Close command console panel";g.setAttribute("aria-label",S),g.title=I?"Open the sauna command console overlay":"Close the sauna command console overlay"}},N=()=>{A(),P()},R=(S,L=h.matches)=>{if(T)return;const G=I;L&&(k=S);const _=S&&L;I=_,l.classList.toggle("right-panel--collapsed",_),l.setAttribute("aria-hidden",_?"true":"false"),N(),G&&!_&&L&&l.focus({preventScroll:!0})},B=S=>{!T||!w||S.key==="Escape"&&(S.preventDefault(),Y())};let j=!1;const H=()=>{j||(document.addEventListener("keydown",B),j=!0)},le=()=>{j&&(document.removeEventListener("keydown",B),j=!1)},K=()=>{!T||w||(w=!0,d.classList.add("right-panel-slide--open"),d.setAttribute("aria-hidden","false"),l.setAttribute("aria-hidden","false"),document.body.classList.add(x),d.style.setProperty("--panel-drag-progress","1"),N(),H(),requestAnimationFrame(()=>{l.focus({preventScroll:!0})}))},Y=({skipFocus:S=!1}={})=>{!T||!w||(Pe(),w=!1,d.classList.remove("right-panel-slide--open"),d.setAttribute("aria-hidden","true"),l.setAttribute("aria-hidden","true"),document.body.classList.remove(x),d.style.setProperty("--panel-drag-progress","0"),N(),le(),S||g.focus({preventScroll:!0}))},ie=S=>{if(T)return;const L=S.matches;g.hidden=!L,R(L?k:!1,L)};typeof h.addEventListener=="function"?(h.addEventListener("change",ie),m.push(()=>h.removeEventListener("change",ie))):(h.addListener(ie),m.push(()=>h.removeListener(ie)));const de=()=>{if(T){w?Y():K();return}R(!I)};g.addEventListener("click",de),m.push(()=>g.removeEventListener("click",de));const We=()=>{Y()};u.addEventListener("click",We),m.push(()=>u.removeEventListener("click",We));let X=null,dt=0,se=0;const Pe=()=>{X!==null&&(f.releasePointerCapture(X),X=null),f.style.transition="",f.style.transform="",d.style.setProperty("--panel-drag-progress",w?"1":"0")},Ve=S=>{!T||!w||S.pointerType==="mouse"&&S.button!==0||(X=S.pointerId,dt=S.clientX,se=0,f.style.transition="none",f.setPointerCapture(S.pointerId))},_e=S=>{if(!T||S.pointerId!==X||!w)return;se=Math.max(0,S.clientX-dt);const L=f.offsetWidth||1,G=Math.min(se,L);f.style.transform=`translateX(${G}px)`,d.style.setProperty("--panel-drag-progress",String(1-G/L))},ut=S=>{Pe(),S&&Y()},ft=S=>{if(S.pointerId!==X)return;const L=f.offsetWidth||1,G=se>L*.35;ut(G)},De=()=>{ut(!1)};f.addEventListener("pointerdown",Ve),f.addEventListener("pointermove",_e),f.addEventListener("pointerup",ft),f.addEventListener("pointercancel",De),m.push(()=>{f.removeEventListener("pointerdown",Ve),f.removeEventListener("pointermove",_e),f.removeEventListener("pointerup",ft),f.removeEventListener("pointercancel",De)});const St=uo(S=>{T=S,T?(f.appendChild(l),d.isConnected||n.appendChild(d),a.appendChild(g),g.classList.add("hud-panel-toggle--mobile"),g.hidden=!1,w||(l.setAttribute("aria-hidden","true"),d.setAttribute("aria-hidden","true"),d.style.setProperty("--panel-drag-progress","0"))):(Y({skipFocus:!0}),d.style.setProperty("--panel-drag-progress","1"),d.remove(),o.appendChild(l),b(),g.classList.remove("hud-panel-toggle--mobile"),g.hidden=!h.matches,l.setAttribute("aria-hidden","false"),R(k,h.matches)),N()});m.push(St);const me=document.createElement("div");me.classList.add("panel-tabs"),l.appendChild(me);const Ft=document.createElement("div");Ft.classList.add("panel-content"),l.appendChild(Ft);const $e=document.createElement("div");$e.id="right-panel-roster",$e.setAttribute("role","region"),$e.setAttribute("aria-live","polite"),$e.setAttribute("aria-label","Battalion roster");const ke=document.createElement("div");ke.id="right-panel-policies";const ht=document.createElement("div");ht.id="right-panel-events";const te=document.createElement("div");te.id="event-log",te.setAttribute("role","log"),te.setAttribute("aria-live","polite");const E={Roster:$e,Policies:ke,Events:ht,Log:te},{onRosterSelect:O,onRosterRendererReady:q,onRosterEquipSlot:U,onRosterUnequipSlot:Te}=t;for(const[S,L]of Object.entries(E))L.classList.add("panel-section","panel-section--scroll"),L.dataset.tab=S,L.hidden=!0;te.classList.add("panel-section--log");function et(S){for(const[L,G]of Object.entries(E))G.hidden=L!==S;for(const L of Array.from(me.children)){const G=L,_=G.textContent===S;G.disabled=_,G.setAttribute("aria-pressed",_?"true":"false")}}for(const S of Object.keys(E)){const L=document.createElement("button");L.type="button",L.textContent=S;const G=E[S];G?.id&&L.setAttribute("aria-controls",G.id),L.setAttribute("aria-pressed","false");const _=()=>et(S);L.addEventListener("click",_),m.push(()=>L.removeEventListener("click",_)),me.appendChild(L),Ft.appendChild(E[S])}const tt=td($e,{onSelect:O,onEquipSlot:U,onUnequipSlot:Te}),Le=S=>{tt.render(S)};Le([]),typeof q=="function"&&q(Le);const Ce={[C.SAUNA_BEER]:"Sauna Beer Bottles",[C.SAUNAKUNNIA]:"Saunakunnia"},ge=[{id:"eco",name:"Eco Policy",description:"Increase passive sauna beer brewing by 1 bottle per tick",cost:15,resource:C.SAUNAKUNNIA,prerequisite:()=>!0},{id:"temperance",name:"Temperance",description:"+5% work speed at night",cost:25,resource:C.SAUNAKUNNIA,prerequisite:()=>!0},{id:"steam-diplomats",name:"Steam Diplomats",description:"Import +2 sauna beer bottles per tick through diplomatic envoys",cost:8,resource:C.SAUNAKUNNIA,prerequisite:()=>!0}],Et={};function Kt(){ke.innerHTML="";for(const S of ge){const L=document.createElement("button"),G=S.resource;L.textContent=`${S.name} (${ea.format(S.cost)} ${Ce[G]})`,L.title=`${S.description}. Costs ${ea.format(S.cost)} ${Ce[G]}.`,L.classList.add("panel-action"),L.disabled=!S.prerequisite(e)||e.hasPolicy(S.id)||!e.canAfford(S.cost,G);const _=()=>{e.applyPolicy(S.id,S.cost,G)&&mt()};L.addEventListener("click",_),m.push(()=>L.removeEventListener("click",_)),ke.appendChild(L),Et[S.id]=L}}function mt(){for(const S of ge){const L=Et[S.id];if(L){const G=S.resource;L.disabled=!S.prerequisite(e)||e.hasPolicy(S.id)||!e.canAfford(S.cost,G)}}}Kt(),z.on("resourceChanged",mt),z.on("policyApplied",mt),m.push(()=>{z.off("resourceChanged",mt),z.off("policyApplied",mt)});const Mn=[];function wo(){ht.innerHTML="";for(const S of Mn){const L=document.createElement("div");L.classList.add("panel-event");const G=document.createElement("h4");G.textContent=S.headline;const _=document.createElement("p");_.textContent=S.body;const bn=document.createElement("button");bn.textContent=S.buttonText??"Acknowledge",bn.classList.add("panel-action"),bn.addEventListener("click",()=>{const Bo=Mn.findIndex(bi=>bi.id===S.id);Bo!==-1&&(Mn.splice(Bo,1),wo())}),L.appendChild(G),L.appendChild(_),L.appendChild(bn),ht.appendChild(L)}}function Ai(S){Mn.push(S),wo(),Co(`Event  ${S.headline}`)}const vo="autobattles:panel-log",Ct=100,Yt=[];let ps=!1;const gt=[],yi=()=>{if(typeof window>"u"||typeof window.localStorage>"u")return[];try{const S=window.localStorage.getItem(vo);if(!S)return[];const L=JSON.parse(S);if(!Array.isArray(L))return[];const G=L.filter(_=>typeof _=="string");return G.length>Ct?G.slice(-Ct):G}catch{return[]}},So=S=>{if(!(typeof window>"u"||typeof window.localStorage>"u"))try{const L=S.length>Ct?S.slice(-Ct):S;window.localStorage.setItem(vo,JSON.stringify(L))}catch{}},Eo=S=>{const L=document.createElement("div");L.textContent=S,L.classList.add("panel-log-entry"),te.appendChild(L)};(()=>{const S=yi();if(S.length!==0){for(const L of S)Eo(L),gt.push(L);te.scrollTop=te.scrollHeight}})();function Mi(){for(const S of Yt)Eo(S);if(Yt.length>0&&(gt.push(...Yt),gt.length>Ct)){const S=gt.length-Ct;gt.splice(0,S);for(let L=0;L<S;L+=1)te.firstChild&&te.removeChild(te.firstChild)}te.scrollTop=te.scrollHeight,Yt.length=0,ps=!1,gt.length>0?So(gt):So([])}function Co(S){Yt.push(S),ps||(ps=!0,(typeof requestAnimationFrame=="function"?requestAnimationFrame:L=>setTimeout(L,16))(Mi))}return et("Roster"),{log:Co,addEvent:Ai,renderRoster:Le,dispose:()=>{for(const S of m.splice(0))try{S()}catch(L){console.warn("Failed to dispose HUD listener",L)}le(),Pe(),document.body.classList.remove(x),d.remove(),g.remove(),l.remove()}}}const sd=e=>`[data-tutorial-target="${e}"]`,Be=16,Pn=12,ta="is-tutorial-highlighted",od=[{id:"heat",target:"heat",title:"Heat the Sauna",description:"Keep the sauna fires roaring. This control shows when the next warrior emerges from the steam."},{id:"upkeep",target:"upkeep",title:"Mind Your Upkeep",description:"Every attendant draws upkeep. Track totals and see a featured roster member to balance your economy."},{id:"sisu",target:"sisu",title:"Stockpile SISU",description:"SISU fuels heroic bursts. Watch this meter to know when your grit reserves can power signature moves."},{id:"combat",target:"combat",title:"Command the Fight",description:"Trigger a Sisu Burst to supercharge allied attacks or rally everyone home with a Torille call."},{id:"victory",target:"victory",title:"Claim Victory",description:"Saunakunnia measures renown. Push it ever higher to unlock triumphs and close the campaign in glory."}];function ad(e,t,n){return Math.max(t,Math.min(n,e))}function rd(e={}){const t=e.steps??od;if(t.length===0)throw new Error("Tutorial requires at least one step.");let n=-1,s=null,o=!1;const a=document.createElement("div");a.className="tutorial-overlay";const r=document.createElement("div");r.className="tutorial-overlay__spotlight",r.setAttribute("aria-hidden","true");const i=document.createElement("section");i.className="tutorial-card",i.setAttribute("role","dialog"),i.setAttribute("aria-modal","false"),i.tabIndex=-1;const c=document.createElement("header");c.className="tutorial-card__header";const l=document.createElement("h2");l.className="tutorial-card__title";const d=document.createElement("button");d.type="button",d.className="tutorial-card__close",d.setAttribute("aria-label","Dismiss tutorial"),d.textContent="",c.append(l,d);const u=document.createElement("p");u.className="tutorial-card__description";const f=document.createElement("p");f.className="tutorial-card__progress";const h=document.createElement("div");h.className="tutorial-card__controls";const m=document.createElement("button");m.type="button",m.className="tutorial-card__button tutorial-card__button--secondary",m.textContent="Back";const g=document.createElement("button");g.type="button",g.className="tutorial-card__button",g.textContent="Next";const p=document.createElement("button");p.type="button",p.className="tutorial-card__skip",p.textContent="Skip tutorial",h.append(m,g),i.append(c,u,f,h,p),a.append(r,i);const y=typeof ResizeObserver<"u"?new ResizeObserver(()=>{n>=0&&k()}):null,M=()=>{n>=0&&k()};function v(){o||(document.body.appendChild(a),window.addEventListener("resize",k),document.addEventListener("scroll",M,!0),y?.observe(i),o=!0)}function D(){o&&(window.removeEventListener("resize",k),document.removeEventListener("scroll",M,!0),y?.disconnect(),a.remove(),o=!1)}function b(B){if(s&&s!==B&&(s.classList.remove(ta),s.removeAttribute("data-tutorial-highlight")),s=B,!B){r.style.opacity="0";return}B.classList.add(ta),B.setAttribute("data-tutorial-highlight","true"),r.style.opacity="1"}function I(){if(!s)return null;const B=s.getBoundingClientRect();return B.width===0&&B.height===0?null:{top:B.top,left:B.left,width:B.width,height:B.height}}function k(){const B=I();if(!B){i.style.top=`${Be}px`,i.style.left=`${Be}px`,i.classList.add("tutorial-card--floating"),r.style.opacity="0";return}i.classList.remove("tutorial-card--floating"),r.style.opacity="1";const j=B.top-Pn,H=B.left-Pn,le=B.width+Pn*2,K=B.height+Pn*2;r.style.top=`${j}px`,r.style.left=`${H}px`,r.style.width=`${le}px`,r.style.height=`${K}px`;const Y=i.getBoundingClientRect();let de=window.innerHeight-B.top-B.height>=B.top?B.top+B.height+Be:B.top-Y.height-Be;de<Be?de=Be:de+Y.height>window.innerHeight-Be&&(de=window.innerHeight-Be-Y.height);let X=B.left+B.width/2-Y.width/2;X=ad(X,Be,window.innerWidth-Y.width-Be),i.style.top=`${Math.round(de)}px`,i.style.left=`${Math.round(X)}px`}function T(){requestAnimationFrame(()=>{i.focus({preventScroll:!0})})}function w(B){if(B<0||B>=t.length)return;v(),n=B;const j=t[B];l.textContent=j.title,u.textContent=j.description,f.textContent=`Step ${B+1} of ${t.length}`,m.disabled=B===0,g.textContent=B===t.length-1?"Finish":"Next";const H=document.querySelector(sd(j.target));b(H??null),k(),T()}function x(){if(n===-1){w(0);return}if(n>=t.length-1){R();return}w(n+1)}function A(){n<=0||w(n-1)}function P(){b(null),D(),n=-1}function N(){e.onSkip?.(),P()}function R(){e.onComplete?.(),P()}return m.addEventListener("click",()=>{A()}),g.addEventListener("click",()=>{x()}),p.addEventListener("click",()=>{N()}),d.addEventListener("click",()=>{N()}),i.addEventListener("keydown",B=>{B.defaultPrevented||(B.key==="ArrowRight"?(B.preventDefault(),x()):B.key==="ArrowLeft"?(B.preventDefault(),A()):B.key==="Escape"&&(B.preventDefault(),N()))}),{start(){n===-1&&w(0)},next:x,previous:A,skip:N,finish:R,destroy(){P()}}}const id=Math.sqrt(3),cd=2;function Wn(e){return{width:e*id,height:e*cd}}const Qe=16,Dn=2;function ld(){return typeof window<"u"&&window.devicePixelRatio||1}function dd(e,t){const n=Math.max(e.qMin,t.minQ),s=Math.min(e.qMax,t.maxQ),o=Math.max(e.rMin,t.minR),a=Math.min(e.rMax,t.maxR);return n>s||o>a?null:{qMin:n,qMax:s,rMin:o,rMax:a}}function ud(e,t){const n=ld(),s=t.width/(n*e.zoom),o=t.height/(n*e.zoom);return{x:e.x-s/2,y:e.y-o/2,width:s,height:o}}function fd(e,t){const n=[$t(e.x,e.y,t),$t(e.x+e.width,e.y,t),$t(e.x,e.y+e.height,t),$t(e.x+e.width,e.y+e.height,t)];let s=1/0,o=-1/0,a=1/0,r=-1/0;for(const i of n)s=Math.min(s,i.q),o=Math.max(o,i.q),a=Math.min(a,i.r),r=Math.max(r,i.r);return{qMin:Math.floor(s)-Dn,qMax:Math.ceil(o)+Dn,rMin:Math.floor(a)-Dn,rMax:Math.ceil(r)+Dn}}function hd(e,t,n,s){if(!n||typeof n.width!="number"||typeof n.height!="number")return{qMin:e.minQ,qMax:e.maxQ,rMin:e.minR,rMax:e.maxR};if(n.width===0||n.height===0)return{qMin:e.minQ,qMax:e.maxQ,rMin:e.minR,rMax:e.maxR};const o=ud(t,n);return dd(fd(o,s),e)}function Nt(e){return Math.floor(e/Qe)}function Br(e){return`${e.q},${e.r}`}function md(e,t){return Br({q:Nt(e),r:Nt(t)})}function gd(e){return{qMin:Nt(e.qMin),qMax:Nt(e.qMax),rMin:Nt(e.rMin),rMax:Nt(e.rMax)}}function xr(e){const t=[];for(let n=e.rMin;n<=e.rMax;n++)for(let s=e.qMin;s<=e.qMax;s++)t.push({q:s,r:n});return t}function pd(e,t){const n=t.q*Qe,s=t.r*Qe,o=n+Qe-1,a=s+Qe-1,r=Math.max(n,e.minQ),i=Math.min(o,e.maxQ),c=Math.max(s,e.minR),l=Math.min(a,e.maxR);if(!(r>i||c>l))for(let d=c;d<=l;d++)for(let u=r;u<=i;u++)e.ensureTile(u,d)}function Ad(e,t){for(const n of xr(t))pd(e,n)}const yd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3ePlains%20Tile%3c/title%3e%3cdesc%20id='desc'%3eRolling%20plains%20with%20sunrise%20gradients%20and%20glowing%20grasses.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='plains-bg'%20cx='50%25'%20cy='50%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%230f172a'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23111827'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='plains-field'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='0%25'%3e%3cstop%20offset='0%25'%20stop-color='%23facc15'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23eab308'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='plains-haze'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23fde68a'%20stop-opacity='0.8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23f59e0b'%20stop-opacity='0.2'%20/%3e%3c/linearGradient%3e%3cfilter%20id='plains-glow'%20x='-30%25'%20y='-30%25'%20width='160%25'%20height='160%25'%3e%3cfeDropShadow%20dx='0'%20dy='5'%20stdDeviation='6'%20flood-color='%23facc15'%20flood-opacity='0.35'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23plains-bg)'%20/%3e%3cg%20filter='url(%23plains-glow)'%3e%3cpath%20d='M16%2088c20-18%2036-22%2048-22s28%204%2048%2022'%20fill='url(%23plains-field)'%20stroke='%23fef9c3'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cpath%20d='M24%20102c16-14%2032-18%2040-18s24%204%2040%2018'%20fill='none'%20stroke='%23fde68a'%20stroke-width='5'%20stroke-linecap='round'%20opacity='0.5'%20/%3e%3cpath%20d='M32%2070c12-10%2024-14%2032-14s20%204%2032%2014'%20fill='url(%23plains-haze)'%20opacity='0.7'%20/%3e%3cpath%20d='M52%2078l4%2012m8-12l4%2012m8-12l4%2012'%20stroke='%23fef3c7'%20stroke-width='3'%20stroke-linecap='round'%20opacity='0.8'%20/%3e%3c/g%3e%3ccircle%20cx='40'%20cy='36'%20r='8'%20fill='%23fef08a'%20opacity='0.7'%20/%3e%3c/svg%3e",Md="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eForest%20Tile%3c/title%3e%3cdesc%20id='desc'%3eStylised%20evergreen%20trees%20glowing%20against%20a%20deep%20night%20backdrop.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='forest-bg'%20cx='50%25'%20cy='40%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%230f172a'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230b1120'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='forest-leaf'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%234ade80'%20/%3e%3cstop%20offset='100%25'%20stop-color='%2315803d'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='forest-trunk'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23a855f7'%20/%3e%3cstop%20offset='100%25'%20stop-color='%237c3aed'%20/%3e%3c/linearGradient%3e%3cfilter%20id='forest-glow'%20x='-40%25'%20y='-40%25'%20width='180%25'%20height='180%25'%3e%3cfeDropShadow%20dx='0'%20dy='6'%20stdDeviation='6'%20flood-color='%234ade80'%20flood-opacity='0.25'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23forest-bg)'%20/%3e%3cg%20filter='url(%23forest-glow)'%20stroke='%23bbf7d0'%20stroke-width='2'%3e%3cpath%20fill='url(%23forest-leaf)'%20d='M64%2026L32%2080h18l-12%2022h28l-10-22h16l-10%2022h28l-12-22h18z'%20/%3e%3crect%20x='58'%20y='74'%20width='12'%20height='18'%20rx='3'%20fill='url(%23forest-trunk)'%20/%3e%3cpath%20fill='none'%20stroke-linecap='round'%20stroke-opacity='0.5'%20d='M44%2086c6-4%2012-6%2020-6s14%202%2020%206'%20/%3e%3c/g%3e%3ccircle%20cx='40'%20cy='40'%20r='6'%20fill='%23fef3c7'%20opacity='0.6'%20/%3e%3ccircle%20cx='88'%20cy='32'%20r='4'%20fill='%23fef3c7'%20opacity='0.4'%20/%3e%3c/svg%3e",bd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eMountain%20Tile%3c/title%3e%3cdesc%20id='desc'%3eJagged%20alpine%20peaks%20with%20luminous%20snowcaps.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='mountain-bg'%20cx='50%25'%20cy='45%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23111827'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23020617'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='mountain-rock'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%2364748b'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23334155'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='mountain-snow'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23f8fafc'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23cbd5f5'%20/%3e%3c/linearGradient%3e%3cfilter%20id='mountain-glow'%20x='-30%25'%20y='-30%25'%20width='160%25'%20height='160%25'%3e%3cfeDropShadow%20dx='0'%20dy='6'%20stdDeviation='6'%20flood-color='%23f8fafc'%20flood-opacity='0.2'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23mountain-bg)'%20/%3e%3cg%20filter='url(%23mountain-glow)'%20stroke='%23cbd5f5'%20stroke-width='2'%20stroke-linejoin='round'%3e%3cpath%20fill='url(%23mountain-rock)'%20d='M24%20100l32-52%2014%2022%2012-18%2022%2048z'%20/%3e%3cpath%20fill='url(%23mountain-snow)'%20d='M56%2048l14%2022%2012-18%2010%2022H48z'%20opacity='0.85'%20/%3e%3cpath%20fill='none'%20stroke-linecap='round'%20opacity='0.6'%20d='M32%2094c10-6%2020-9%2032-9s22%203%2032%209'%20/%3e%3c/g%3e%3ccircle%20cx='92'%20cy='32'%20r='6'%20fill='%23f1f5f9'%20opacity='0.5'%20/%3e%3c/svg%3e",wd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eWater%20Tile%3c/title%3e%3cdesc%20id='desc'%3eGlowing%20waves%20surrounding%20a%20crystalline%20droplet.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='water-bg'%20cx='50%25'%20cy='45%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%230b1120'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23020617'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='water-wave'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%2338bdf8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230ea5e9'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='water-drop'%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23e0f2fe'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230284c7'%20/%3e%3c/linearGradient%3e%3cfilter%20id='water-glow'%20x='-30%25'%20y='-30%25'%20width='160%25'%20height='160%25'%3e%3cfeDropShadow%20dx='0'%20dy='4'%20stdDeviation='8'%20flood-color='%2338bdf8'%20flood-opacity='0.3'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23water-bg)'%20/%3e%3cg%20filter='url(%23water-glow)'%3e%3cpath%20d='M32%2076c12-10%2024-15%2032-15s20%205%2032%2015'%20fill='none'%20stroke='url(%23water-wave)'%20stroke-width='8'%20stroke-linecap='round'%20/%3e%3cpath%20d='M28%2092c14-12%2030-18%2040-18s26%206%2040%2018'%20fill='none'%20stroke='url(%23water-wave)'%20stroke-width='6'%20stroke-linecap='round'%20opacity='0.7'%20/%3e%3cpath%20d='M40%2060c10-8%2018-12%2024-12s14%204%2024%2012'%20fill='none'%20stroke='url(%23water-wave)'%20stroke-width='4'%20stroke-linecap='round'%20opacity='0.5'%20/%3e%3cpath%20d='M64%2030c-12%2020-18%2032-18%2042%200%2011%208%2020%2018%2020s18-9%2018-20c0-10-6-22-18-42z'%20fill='url(%23water-drop)'%20stroke='%23e0f2fe'%20stroke-width='2'%20/%3e%3c/g%3e%3ccircle%20cx='94'%20cy='34'%20r='6'%20fill='%23f8fafc'%20opacity='0.45'%20/%3e%3c/svg%3e",vd=.01;function zr(e){return!Number.isFinite(e)||e<=vd?1:e}function Sd(e,t){return e/zr(t)}function Ie(e,t){const n=zr(t);return Math.round(e*n)/n}const na={[ye.Plains]:{baseColor:"#d8b869",icon:yd},[ye.Forest]:{baseColor:"#237a55",icon:Md},[ye.Hills]:{baseColor:"#b57c57",icon:bd},[ye.Lake]:{baseColor:"#3185d5",icon:wd}},Ed=[255,255,255],fo=[12,18,28],Cd=[0,0,0],sa="rgba(56, 189, 248, 0.85)",oa="rgba(56, 189, 248, 0.45)";let Jt=null,Zt=null;const Bd=e=>Math.min(1,Math.max(0,e));function xd(e){let t=e.trim().replace("#","");t.length===3&&(t=t.split("").map(s=>s+s).join(""));const n=Number.parseInt(t,16);return[n>>16&255,n>>8&255,n&255]}function Vn(e,t,n){const s=Bd(n);return[Math.round(e[0]+(t[0]-e[0])*s),Math.round(e[1]+(t[1]-e[1])*s),Math.round(e[2]+(t[2]-e[2])*s)]}function aa(e){return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}function _n(e,t=1){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${t})`}function $n(e,t=1){return _n(Vn(fo,Ed,e),t)}function Tt(e,t=1){return _n(Vn(fo,Cd,e),t)}const zd={terrain:.05,hover:.065,selection:.085},Id={terrain:1,hover:1.35,selection:2.1};function es(e,t,n="terrain"){const s=e*zd[n],o=Sd(s,t);return Math.max(Id[n],o)}function Nd(){if(Jt&&Zt)return{stroke:Jt,glow:Zt};if(typeof window<"u"){const e=getComputedStyle(document.documentElement),t=e.getPropertyValue("--tile-highlight-ring").trim(),n=e.getPropertyValue("--tile-highlight-glow").trim();Jt=t||sa,Zt=n||oa}else Jt=sa,Zt=oa;return{stroke:Jt,glow:Zt}}function Ir(e){return Math.min(1,Math.max(0,e))}function hs(e){let t=e.trim();if(t.startsWith("#")&&(t=t.slice(1)),t.length===3){const n=Number.parseInt(t[0]+t[0],16),s=Number.parseInt(t[1]+t[1],16),o=Number.parseInt(t[2]+t[2],16);return[n,s,o]}if(t.length===6){const n=Number.parseInt(t,16),s=n>>16&255,o=n>>8&255,a=n&255;return[s,o,a]}return[0,0,0]}function Pd(e,t,n){const s=Ir(n),o=(a,r)=>Math.round(a+(r-a)*s);return[o(e[0],t[0]),o(e[1],t[1]),o(e[2],t[2])]}function Dd([e,t,n],s){return`rgba(${e}, ${t}, ${n}, ${Ir(s)})`}function lt(e,t,n,s){return Dd(Pd(e,t,n),s)}function kd(e){const{ctx:t,x:n,y:s,width:o,height:a,radius:r,baseColor:i}=e,c=hs(i);t.save(),t.lineCap="round",t.lineJoin="round";const l=lt(c,[255,255,255],.35,.24);t.strokeStyle=l,t.lineWidth=Math.max(1,r*.06);const d=3,u=6,f=n+o*.12,h=n+o*.88;for(let y=0;y<d;y++){const M=y/Math.max(1,d-1),v=s+a*.28+M*a*.32,D=r*(.18-M*.05);t.beginPath();for(let b=0;b<=u;b++){const I=b/u,k=f+(h-f)*I,T=Math.sin(I*Math.PI*1.6+y*.8)*D,w=v-Math.abs(T)*.55;b===0?t.moveTo(k,w):t.lineTo(k,w)}t.stroke()}const m=lt(c,[18,54,32],.4,.2);t.strokeStyle=m,t.lineWidth=Math.max(.75,r*.035);const g=5,p=r*.22;for(let y=0;y<g;y++){const M=n+o*(.2+y/Math.max(1,g-1)*.6),v=s+a*.55-Math.cos(y*.9)*r*.08;t.beginPath(),t.arc(M,v,p,Math.PI*.2,Math.PI*.85),t.stroke(),t.beginPath(),t.arc(M+p*.35,v-p*.1,p*.55,Math.PI*.15,Math.PI*.95),t.stroke()}t.restore()}function Td(e){const{ctx:t,centerX:n,centerY:s,radius:o,baseColor:a}=e,r=hs(a);t.save(),t.lineCap="round";const i=lt(r,[255,235,214],.45,.22);t.strokeStyle=i,t.lineWidth=Math.max(1,o*.05);const c=4;for(let u=0;u<c;u++){const f=u/Math.max(1,c-1),h=o*(1.25-f*.45),m=o*(.72-f*.18),g=s+o*.18*(f-.5);t.beginPath(),t.ellipse(n,g,h,m,0,Math.PI*.12,Math.PI*.88),t.stroke()}const l=lt(r,[60,36,20],.35,.18);t.strokeStyle=l,t.lineWidth=Math.max(.85,o*.032),t.setLineDash([o*.22,o*.18]);const d=3;for(let u=0;u<d;u++){const f=o*(.75-u*.1),h=s+o*.28+u*o*.08;t.beginPath(),t.arc(n+o*.08,h,f,Math.PI*.28,Math.PI*.76),t.stroke()}t.setLineDash([]),t.restore()}function Ld(e){const{ctx:t,x:n,y:s,width:o,height:a,radius:r,baseColor:i}=e,c=hs(i);t.save(),t.lineCap="round",t.lineJoin="round";const l=lt(c,[255,255,255],.55,.28);t.strokeStyle=l,t.lineWidth=Math.max(1,r*.045);const d=4,u=7,f=n+o*.12,h=n+o*.88,m=r*.16;for(let y=0;y<d;y++){const M=y/Math.max(1,d-1),v=s+a*.3+M*a*.4;t.beginPath();for(let D=0;D<=u;D++){const b=D/u,I=f+(h-f)*b,k=Math.sin(b*Math.PI*2+y*.6)*m*(.75-M*.2),T=v+k;D===0?t.moveTo(I,T):t.lineTo(I,T)}t.stroke()}const g=lt(c,[12,52,94],.4,.2);t.strokeStyle=g,t.lineWidth=Math.max(.8,r*.03);const p=3;for(let y=0;y<p;y++){const M=y/Math.max(1,p-1),v=s+a*.35+M*a*.35;t.beginPath();for(let D=0;D<=u;D++){const b=D/u,I=f+(h-f)*b,k=Math.sin(b*Math.PI*2+y)*m*.35,T=v+k;D===0?t.moveTo(I,T):t.lineTo(I,T)}t.stroke()}t.restore()}function Nr(e){const{ctx:t,x:n,y:s,width:o,height:a,radius:r,baseColor:i}=e,c=hs(i);t.save(),t.lineCap="round";const l=lt(c,[255,255,255],.42,.18);t.strokeStyle=l,t.lineWidth=Math.max(.85,r*.03);const d=r*.55;for(let h=-1;h<=2;h++){const m=d*h;t.beginPath(),t.moveTo(n+m,s+a*.25),t.lineTo(n+m+o*.75,s+a*.85),t.stroke()}const u=lt(c,[112,82,32],.3,.16);t.strokeStyle=u,t.lineWidth=Math.max(.7,r*.025),t.setLineDash([r*.24,r*.34]);const f=r*.48;for(let h=0;h<3;h++){const m=f*h;t.beginPath(),t.moveTo(n+o*.18+m,s+a*.78),t.lineTo(n+o*.7+m,s+a*.38),t.stroke()}t.setLineDash([]),t.restore()}const ra=new Map;let pt=null;function Rd(){if(pt)return pt;const e="/";if(/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e))return pt=e,pt;const n=e.startsWith("/")?e:`/${e}`;return typeof window<"u"&&typeof window.location?.origin=="string"?pt=`${window.location.origin}${n}`:pt=`http://localhost${n}`,pt}function jd(e){let t=ra.get(e);if(!t){t=new Image,t.decoding="async";const n=new URL(e,Rd()).href;t.src=n,ra.set(e,t)}if(t.complete&&t.naturalWidth>0&&t.naturalHeight>0)return t}const Od={[ye.Plains]:Nr,[ye.Forest]:kd,[ye.Hills]:Td,[ye.Lake]:Ld};function Pr(e,t,n,s){e.beginPath();for(let o=0;o<6;o++){const a=Math.PI/180*(60*o-30),r=t+s*Math.cos(a),i=n+s*Math.sin(a);o===0?e.moveTo(r,i):e.lineTo(r,i)}e.closePath()}function Qd(e,t,n,s){Pr(e,t,n,s),e.save(),e.lineJoin="round",e.lineCap="round",e.lineWidth=es(s,1,"terrain"),e.strokeStyle=$n(.16,.6),e.stroke(),e.restore()}function Hd(e,t,n,s,o,a,r,i){const c=na[t.terrain]??na[ye.Plains],l=xd(c.baseColor),d=s+a/2,u=o+r/2;e.save(),Pr(e,d,u,i),e.clip();const f=e.createRadialGradient(d,u,i*.2,d,u,i*1.05);f.addColorStop(0,aa(Vn(l,[255,255,255],.3))),f.addColorStop(.7,c.baseColor),f.addColorStop(1,aa(Vn(l,fo,.4))),e.fillStyle=f,e.shadowColor=_n(l,.35),e.shadowBlur=i*.9,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillRect(s-i*.1,o-i*.1,a+i*.2,r+i*.2);const h={ctx:e,x:s,y:o,width:a,height:r,radius:i,centerX:d,centerY:u,baseColor:c.baseColor};(Od[t.terrain]??Nr)(h),e.globalCompositeOperation="lighter";const g=e.createRadialGradient(d,u,i*.85,d,u,i*1.18);g.addColorStop(0,"rgba(255, 255, 255, 0)"),g.addColorStop(1,_n(l,.18)),e.fillStyle=g,e.fillRect(s-i*.1,o-i*.1,a+i*.2,r+i*.2),e.globalCompositeOperation="source-over",e.restore();const p=jd(c.icon);if(p){const y=Math.min(a,r)*.62,M=d-y/2,v=u-y/2;e.save(),e.globalAlpha*=.92,e.drawImage(p,M,v,y,y),e.restore()}if(t.building){const y=n[`building-${t.building}`]??n.placeholder;e.drawImage(y,s,o,a,r)}}function Gd(e,t){const n=Math.max(e.q*Qe,t.minQ),s=Math.min(n+Qe-1,t.maxQ),o=Math.max(e.r*Qe,t.minR),a=Math.min(o+Qe-1,t.maxR);return{qStart:n,qEnd:s,rStart:o,rEnd:a}}class Ud{constructor(t){this.map=t,this.unsubscribe=t.addTileChangeListener((n,s,o)=>{this.onTileChange(n,o)})}chunkCanvases=new Map;dirtyChunks=new Set;cachedImages;unsubscribe;dispose(){this.unsubscribe(),this.chunkCanvases.clear(),this.dirtyChunks.clear(),this.cachedImages=void 0}invalidate(){this.chunkCanvases.clear(),this.dirtyChunks.clear(),this.cachedImages=void 0}markChunkDirty(t){this.dirtyChunks.add(t)}markTileDirty(t,n){this.dirtyChunks.add(md(t,n))}getRenderableChunks(t,n,s,o){this.refreshAssets(s);const a=[],{width:r,height:i}=Wn(n);for(const c of xr(t)){const l=Br(c),d=this.ensureChunk(l,c,n,r,i,s,o);d&&a.push(d)}return a}refreshAssets(t){if(this.cachedImages!==t){this.cachedImages=t;for(const n of this.chunkCanvases.keys())this.dirtyChunks.add(n)}}onTileChange(t,n){(n==="created"||n==="terrain"||n==="building"||n==="fog")&&this.markTileDirty(t.q,t.r)}ensureChunk(t,n,s,o,a,r,i){const c=this.chunkCanvases.get(t);if(!c||this.dirtyChunks.has(t)){const l=this.renderChunk(t,n,s,o,a,r,i,c);return this.dirtyChunks.delete(t),l?(this.chunkCanvases.set(t,l),l):(this.chunkCanvases.delete(t),null)}return c}renderChunk(t,n,s,o,a,r,i,c){if(typeof document>"u")return null;const{qStart:l,qEnd:d,rStart:u,rEnd:f}=Gd(n,this.map);if(l>d||u>f)return null;const h=o/2,m=a/2;let g=1/0,p=1/0,y=-1/0,M=-1/0;const v=[];for(let T=l;T<=d;T++)for(let w=u;w<=f;w++){const x=this.map.getTile(T,w);if(!x||x.isFogged)continue;const{x:A,y:P}=Ne({q:T,r:w},s),N=A-i.x-h,R=P-i.y-m;g=Math.min(g,N),p=Math.min(p,R),y=Math.max(y,N+o),M=Math.max(M,R+a),v.push({tile:x,x:N,y:R})}if(!Number.isFinite(g)||!Number.isFinite(p)||!Number.isFinite(y)||!Number.isFinite(M))return null;const D=Math.max(1,Math.ceil(y-g)),b=Math.max(1,Math.ceil(M-p));let I=c?.canvas;(!I||I.width!==D||I.height!==b)&&(I=document.createElement("canvas"),I.width=D,I.height=b);const k=I.getContext("2d");if(!k)throw new Error("Canvas 2D context not available for chunk rendering");k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,D,b);for(const{tile:T,x:w,y:x}of v){const A=w-g,P=x-p;k.save(),Hd(k,T,r,A,P,o,a,s),Qd(k,A+o/2,P+a/2,s),k.restore()}return{key:t,canvas:I,origin:{x:g,y:p},width:D,height:b}}}const Fd=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Re=new Array(512);for(let e=0;e<512;e++)Re[e]=Fd[e%256];const ia=new Map,ca=e=>e*e*e*(e*(e*6-15)+10),Es=(e,t,n)=>e+n*(t-e),kn=(e,t,n)=>{switch(e&3){case 0:return t+n;case 1:return-t+n;case 2:return t-n;default:return-t-n}};function Kd(e,t){const n=Math.floor(e)&255,s=Math.floor(t)&255,o=e-Math.floor(e),a=t-Math.floor(t),r=Re[Re[n+1]+s+1],i=Re[Re[n]+s+1],c=Re[Re[n+1]+s],l=Re[Re[n]+s],d=ca(o),u=ca(a),f=Es(kn(l,o,a),kn(c,o-1,a),d),h=Es(kn(i,o,a-1),kn(r,o-1,a-1),d);return Es(f,h,u)}function Yd(e,t,n=4){let s=0,o=1,a=1,r=0;for(let i=0;i<n;i++)s+=Kd(e*o,t*o)*a,r+=a,a*=.5,o*=2;return r>0?s/r:0}function Xd(e){const t=Math.max(32,Math.min(512,Math.round(e))),n=t,s=ia.get(n);if(s)return s;if(typeof document>"u")return null;const o=document.createElement("canvas");o.width=t,o.height=t;const a=o.getContext("2d");if(!a)return null;const r=a.createImageData(t,t),i=t/48;let c=0;for(let l=0;l<t;l++)for(let d=0;d<t;d++){const u=Yd(d/i,l/i,5),f=Math.pow((u+1)/2,1.35),h=Math.round(f*255);r.data[c]=255,r.data[c+1]=255,r.data[c+2]=255,r.data[c+3]=h,c+=4}return a.putImageData(r,0,0),ia.set(n,o),o}function la(e,t,n,s){e.beginPath();for(let o=0;o<6;o++){const a=Math.PI/180*(60*o-30),r=t+s*Math.cos(a),i=n+s*Math.sin(a);o===0?e.moveTo(r,i):e.lineTo(r,i)}e.closePath()}function qd(e,t,n,s){const o=e.createRadialGradient(t,n,s*.08,t,n,s*1.12);return o.addColorStop(0,$n(.4,.35)),o.addColorStop(.35,$n(.2,.55)),o.addColorStop(.6,Tt(.1,.78)),o.addColorStop(.82,Tt(.2,.88)),o.addColorStop(1,Tt(.35,.95)),o}function Jd(e,t,n,s,o){if(s<=0)return;const a=Xd(s*2.2),r=s*2.5,i=t-r/2,c=n-r/2;e.save(),la(e,t,n,s),e.clip();const l=qd(e,t,n,s);e.fillStyle=l,e.fillRect(i,c,r,r),a&&(e.save(),e.globalCompositeOperation="lighter",e.globalAlpha*=.32,e.drawImage(a,t-s,n-s,s*2,s*2),e.restore()),e.restore(),e.save(),la(e,t,n,s*.99),e.lineJoin="round",e.lineCap="round",e.lineWidth=es(s,o,"hover"),e.strokeStyle=Tt(.3,.88),e.shadowColor=Tt(.45,.42),e.shadowBlur=Math.max(3,s*.45/Math.max(o,.1)),e.stroke(),e.restore()}class Zd{constructor(t){this.mapRef=t,this.terrainCache=new Ud(t),this.cachedHexSize=t.hexSize}terrainCache;cachedHexSize;get hexSize(){return this.mapRef.hexSize}getOrigin(){return Ne({q:this.mapRef.minQ,r:this.mapRef.minR},this.hexSize)}invalidateCache(){this.terrainCache.invalidate()}dispose(){this.terrainCache.dispose()}draw(t,n,s){this.ensureHexSize();const o=t.canvas??null,a=hd(this.mapRef,Q,o,this.hexSize);if(!a)return;const r=gd(a);Ad(this.mapRef,r);const i=this.getOrigin(),c=this.terrainCache.getRenderableChunks(r,this.hexSize,n,i);this.drawChunks(t,c),this.drawFogLayer(t,i,a),s&&this.drawSelection(t,i,s)}drawToCanvas(t,n,s){const o=t.getContext("2d");if(!o)throw new Error("Canvas 2D context not available");this.draw(o,n,s)}ensureHexSize(){this.cachedHexSize!==this.hexSize&&(this.cachedHexSize=this.hexSize,this.terrainCache.invalidate())}drawChunks(t,n){if(n.length!==0)for(const s of n)t.drawImage(s.canvas,s.origin.x,s.origin.y)}drawSelection(t,n,s){const{width:o,height:a}=Wn(this.hexSize),{x:r,y:i}=Ne(s,this.hexSize),c=r-n.x-o/2,l=i-n.y-a/2;this.strokeHex(t,c+o/2,l+a/2,this.hexSize,!0)}drawFogLayer(t,n,s){const{width:o,height:a}=Wn(this.hexSize),r=o/2,i=a/2;for(let c=s.rMin;c<=s.rMax;c++)for(let l=s.qMin;l<=s.qMax;l++){const d=this.mapRef.getTile(l,c);if(!d||!d.isFogged)continue;const{x:u,y:f}=Ne({q:l,r:c},this.hexSize),h=u-n.x-r,m=f-n.y-i,g=this.hexSize,p=h+o/2,y=m+a/2;Jd(t,p,y,g,Q.zoom)}}strokeHex(t,n,s,o,a=!1){const{stroke:r,glow:i}=Nd();this.hexPath(t,n,s,o),t.save(),t.lineJoin="round",t.lineCap="round",a?(t.shadowColor=i,t.shadowBlur=Math.max(6,o*.65/Math.max(Q.zoom,.1)),t.lineWidth=es(o,Q.zoom,"selection"),t.strokeStyle=r,t.stroke()):(t.lineWidth=es(o,Q.zoom,"hover"),t.shadowColor=$n(.1,.45),t.shadowBlur=Math.max(2,o*.4/Math.max(Q.zoom,.1)),t.strokeStyle=Tt(.1,.72),t.stroke()),t.restore()}hexPath(t,n,s,o){t.beginPath();for(let a=0;a<6;a++){const r=Math.PI/180*(60*a-30),i=n+o*Math.cos(r),c=s+o*Math.sin(r);a===0?t.moveTo(i,c):t.lineTo(i,c)}t.closePath()}}const st={accent:"#38bdf8",accentSoft:"rgba(56, 189, 248, 0.2)",warm:"#fbbf24",surface:"rgba(15, 23, 42, 0.92)",border:"rgba(148, 163, 184, 0.34)",text:"#e2e8f0"};let ot=null;function xt(e,t){const n=e.trim();return n.length>0?n:t}function Wd(){if(ot)return ot;if(typeof window>"u"||typeof document>"u")return ot=st,ot;try{const e=getComputedStyle(document.documentElement);return ot={accent:xt(e.getPropertyValue("--color-accent"),st.accent),accentSoft:xt(e.getPropertyValue("--color-accent-soft"),st.accentSoft),warm:xt(e.getPropertyValue("--color-warning"),st.warm),surface:xt(e.getPropertyValue("--color-surface-strong"),st.surface),border:xt(e.getPropertyValue("--hud-border-strong"),st.border),text:xt(e.getPropertyValue("--color-foreground"),st.text)},ot}catch(e){return console.warn("Failed to read sauna palette tokens from computed styles",e),ot=st,ot}}function Vd(e,t){const n=Math.max(0,e.auraRadius),s=Ne(e.pos,t),o=s.x+t,a=s.y+t;let r=t;if(n<=0)return t*1.6;for(const i of La){const c=Ne({q:e.pos.q+i.q*n,r:e.pos.r+i.r*n},t),l=c.x+t,d=c.y+t,u=Math.hypot(l-o,d-a);u>r&&(r=u)}return r+t*.65}function _d(e,t,n,s,o,a){const r=Math.max(0,Math.min(a,Math.min(s,o)/2));e.moveTo(t+r,n),e.lineTo(t+s-r,n),e.quadraticCurveTo(t+s,n,t+s,n+r),e.lineTo(t+s,n+o-r),e.quadraticCurveTo(t+s,n+o,t+s-r,n+o),e.lineTo(t+r,n+o),e.quadraticCurveTo(t,n+o,t,n+o-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath()}function $d(e,t,{origin:n,hexSize:s,timestamp:o}){if(!t)return;const a=Wd(),r=Number.isFinite(o)?o:typeof performance<"u"?performance.now():Date.now(),i=.5+.5*Math.sin(r*.0035),c=Ne(t.pos,s),l=c.x-n.x+s,d=c.y-n.y+s,u=Vd(t,s);e.save(),e.globalCompositeOperation="screen";const f=u+s*(.4+i*.3),h=Math.max(s*.6,u*.58),m=e.createRadialGradient(l,d,h,l,d,f);m.addColorStop(0,a.accentSoft),m.addColorStop(.55,`rgba(56, 189, 248, ${.18+i*.12})`),m.addColorStop(1,"rgba(2, 6, 23, 0)"),e.fillStyle=m,e.beginPath(),e.arc(l,d,f,0,Math.PI*2),e.fill(),e.restore(),e.save(),e.globalCompositeOperation="lighter",e.lineWidth=Math.max(s*.28,6),e.strokeStyle=`rgba(56, 189, 248, ${(.35+i*.2).toFixed(3)})`,e.shadowColor=`rgba(56, 189, 248, ${.45+i*.1})`,e.shadowBlur=s*(.9+i*.45),e.beginPath(),e.arc(l,d,u+s*.12,0,Math.PI*2),e.stroke(),e.restore();const g=s*.9;e.save(),e.beginPath(),e.arc(l,d,g,0,Math.PI*2),e.fillStyle=a.surface,e.globalAlpha*=.96,e.fill(),e.lineWidth=Math.max(1.5,s*.06),e.strokeStyle=a.border,e.shadowColor="rgba(8, 25, 53, 0.6)",e.shadowBlur=s*.45,e.stroke(),e.restore();const p=g*.78,y=Math.max(s*.22,5);e.save(),e.lineWidth=y,e.strokeStyle="rgba(148, 163, 184, 0.24)",e.beginPath(),e.arc(l,d,p,0,Math.PI*2),e.stroke(),e.restore();const M=t.playerSpawnCooldown>0?t.playerSpawnCooldown:1,D=1-Math.min(1,Math.max(0,t.playerSpawnTimer/M)),b=-Math.PI/2,I=b+Math.PI*2*D;if(D>0){e.save(),e.lineWidth=y,e.lineCap="round";const ie=e.createLinearGradient(l,d-p,l,d+p);ie.addColorStop(0,a.accent),ie.addColorStop(1,a.warm),e.strokeStyle=ie,e.shadowColor=`rgba(56, 189, 248, ${.42+i*.18})`,e.shadowBlur=s*(.65+i*.35),e.beginPath(),e.arc(l,d,p,b,I,!1),e.stroke(),e.restore()}const k=Math.max(0,t.playerSpawnTimer),T=Math.ceil(k);e.save(),e.font=`600 ${Math.max(12,s*.9)}px "Inter", "Manrope", "Segoe UI", sans-serif`,e.fillStyle=a.text,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(2, 6, 23, 0.6)",e.shadowBlur=s*.35,e.fillText(String(T),l,d),e.restore(),e.save(),e.font=`500 ${Math.max(10,s*.36)}px "Inter", "Manrope", "Segoe UI", sans-serif`,e.fillStyle="rgba(148, 163, 184, 0.78)",e.textAlign="center",e.textBaseline="top",e.fillText("sec",l,d+p*.45),e.restore();const w="Sauna ",x=Math.max(12,s*.58);e.save(),e.font=`600 ${x}px "Inter", "Manrope", "Segoe UI", sans-serif`;const A=e.measureText(w),P=s*.58,N=s*.32,R=A.width+P*2,B=x+N*2,j=l-R/2,H=d-u-B-s*.35,le=B/2;e.beginPath(),_d(e,j,H,R,B,le);const K=e.createLinearGradient(j,H,j,H+B);K.addColorStop(0,"rgba(15, 23, 42, 0.94)"),K.addColorStop(.55,"rgba(15, 23, 42, 0.86)"),K.addColorStop(1,"rgba(30, 41, 59, 0.9)"),e.fillStyle=K,e.shadowColor="rgba(8, 25, 53, 0.6)",e.shadowBlur=s*.4,e.fill(),e.lineWidth=Math.max(1.5,s*.06);const Y=e.createLinearGradient(j,H,j+R,H);Y.addColorStop(0,`${a.accent}`),Y.addColorStop(1,`${a.warm}`),e.strokeStyle=Y,e.stroke(),e.fillStyle=a.text,e.shadowColor="rgba(8, 25, 53, 0.65)",e.shadowBlur=s*.3,e.textAlign="center",e.textBaseline="middle",e.fillText(w,l,H+B/2+x*.05),e.restore()}const Dr={nativeSize:{width:64,height:64},anchor:{x:.5,y:.92},scale:{x:1,y:1},nudge:{x:0,y:-.05}},eu={default:Dr,soldier:{nativeSize:{width:64,height:64},anchor:{x:.5,y:.94},scale:{x:1,y:1},nudge:{x:0,y:-.06}},archer:{nativeSize:{width:64,height:64},anchor:{x:.5,y:.88},scale:{x:1,y:1},nudge:{x:0,y:-.04}},"avanto-marauder":{nativeSize:{width:128,height:128},anchor:{x:.5,y:.86},scale:{x:1.08,y:1.12},nudge:{x:0,y:-.12}},saunoja:{nativeSize:{width:128,height:128},anchor:{x:.5,y:.66},scale:{x:1,y:1},nudge:{x:0,y:-.02}}};function kr(e){return eu[e]??Dr}function Tr(e,t,n,s){const{x:o,y:a}=Ne(e,t),r=s.nudge.x*t,i=s.nudge.y*t;return{x:o-n.x+r,y:a-n.y+i}}function tu({coord:e,hexSize:t,origin:n,zoom:s,type:o}){const a=kr(o),r=Tr(e,t,n,a);return{x:Ie(r.x,s),y:Ie(r.y,s)}}function nu({coord:e,hexSize:t,origin:n,zoom:s,type:o}){const a=kr(o),r=Tr(e,t,n,a),{width:i,height:c}=Wn(t),l=i*a.scale.x,d=c*a.scale.y,u=Ie(r.x-l*a.anchor.x,s),f=Ie(r.y-d*a.anchor.y,s),h=Ie(l,s),m=Ie(d,s),g=u+h*a.anchor.x,p=f+m*a.anchor.y;return{drawX:u,drawY:f,width:h,height:m,centerX:g,centerY:p,metadata:a}}function su(e,t,n,s,o,a){const r=window.devicePixelRatio||1,i=e.canvas.width,c=e.canvas.height;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i,c);const l=i/r,d=c/r;e.scale(r,r),e.translate(l/2,d/2),e.scale(Q.zoom,Q.zoom);const u=t.getOrigin();e.translate(-(Q.x-u.x),-(Q.y-u.y)),t.draw(e,n,o??void 0);const f=a?.saunojas;f&&Array.isArray(f.units)&&f.units.length>0&&f.draw(e,f.units,{originX:u.x,originY:u.y,hexRadius:t.hexSize,zoom:Q.zoom}),ou(e,t,n,s,u,a?.fx),a?.sauna&&$d(e,a.sauna,{origin:u,hexSize:t.hexSize}),e.restore()}function ou(e,t,n,s,o,a){const r=s.filter(i=>i.faction==="player"&&!i.isDead()).map(i=>({coord:i.coord,range:i.getVisionRange()}));for(const i of s){if(i.isDead()||i.faction==="enemy"&&!r.some(({coord:f,range:h})=>en(f,i.coord)<=h))continue;const c=n[`unit-${i.type}`]??n.placeholder,l=i.getMaxHealth();e.save();const d=a?.getUnitAlpha?.(i);if(typeof d=="number"){const f=Math.min(1,Math.max(0,d));if(f<=0){e.restore();continue}e.globalAlpha*=f}i.stats.health/l<.5&&(e.filter="saturate(0)");const u=nu({coord:i.coord,hexSize:t.hexSize,origin:o,zoom:Q.zoom,type:i.type});e.drawImage(c,u.drawX,u.drawY,u.width,u.height),lo()&&i.faction==="player"&&(e.strokeStyle="rgba(255,255,255,0.5)",e.lineWidth=2,e.strokeRect(u.drawX,u.drawY,u.width,u.height)),e.restore()}}const au=typeof matchMedia=="function"?matchMedia("(prefers-reduced-motion: reduce)"):null,ru=typeof matchMedia=="function"?matchMedia("(pointer: coarse)"):null,iu=900,cu=650;function lu(e){switch(e){case"down":return{x:0,y:36};case"left":return{x:-26,y:-18};case"right":return{x:26,y:-18};case"up":default:return{x:0,y:-40}}}function du(e){const t=document.createElement("div");t.className="ui-floater-layer",e.appendChild(t);const n=!!au?.matches,s=!!ru?.matches;return{spawn:({text:r,x:i,y:c,color:l,direction:d="up",durationMs:u,fontSize:f})=>{const h=document.createElement("span");h.className="ui-floater",h.textContent=r,h.style.left=`${Math.round(i)}px`,h.style.top=`${Math.round(c)}px`,l&&(h.style.color=l),f&&(h.style.fontSize=`${f}px`);const m=s?12:24;for(;t.childElementCount>=m;)t.firstElementChild?.remove();t.appendChild(h);const g=u??(s?cu:iu);if(n||!h.animate){h.style.opacity="0",h.style.transition=`opacity ${Math.round(g*.8)}ms ease-out`,requestAnimationFrame(()=>{h.style.opacity="1",requestAnimationFrame(()=>{h.style.opacity="0"})}),window.setTimeout(()=>{h.remove()},g);return}const p=lu(d),y=[{transform:"translate3d(-50%, -50%, 0) translate3d(0, 0, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0) translate3d(0, 0, 0)",opacity:1,offset:.18},{transform:`translate3d(-50%, -50%, 0) translate3d(${p.x}px, ${p.y}px, 0)`,opacity:0}],M=h.animate(y,{duration:g,easing:"cubic-bezier(0.18, 0.89, 0.32, 1.28)",fill:"forwards"});M.onfinish=()=>{h.remove()}},destroy:()=>{t.remove()}}}const da=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),uu=new Intl.NumberFormat("en-US",{maximumFractionDigits:1,minimumFractionDigits:0});function ua(e){return 1-(1-e)*(1-e)}function Tn(e,t,n){return Math.min(n,Math.max(t,e))}const fu="var(--color-danger)",hu="color-mix(in srgb, #34d399 88%, white 12%)",mu=720,gu=540,pu=220,Au=180,yu=6,Mu=3,bu="color-mix(in srgb, #fbbf24 82%, white 10%)",wu=typeof matchMedia=="function"?matchMedia("(prefers-reduced-motion: reduce)"):null,vu=typeof matchMedia=="function"?matchMedia("(pointer: coarse)"):null;function Su(e){const{canvas:t,overlay:n,mapRenderer:s,getUnitById:o,requestDraw:a}=e,r=du(n),i=new Map,c=new Map,l=[],d={x:0,y:0},u=!!wu?.matches,f=!!vu?.matches,h=f?gu:mu,m=f?Au:pu,g=f?Mu:yu,p=()=>{a&&(typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>a()):a())},y=x=>{const A=t.getBoundingClientRect(),P=n.getBoundingClientRect();if(A.width===0||A.height===0)return null;const{x:N,y:R}=Ne(x,s.hexSize),B=(N-Q.x)*Q.zoom+A.width/2,j=(R-Q.y)*Q.zoom+A.height/2,H=s.hexSize*Q.zoom*.75;return{x:B+(A.left-P.left),y:j+(A.top-P.top)-H}},M=(x,A,P,N="up")=>{const R=o(x);if(!R)return;const B=y(R.coord);B&&r.spawn({text:A,x:B.x,y:B.y,color:P,direction:N,fontSize:f?18:void 0})},v=x=>{if(!x||x.amount<=0)return;const A=da.format(Math.max(1,Math.round(x.amount)));if(M(x.targetId,`-${A}`,fu,"up"),!u){const P=typeof performance<"u"?performance.now():Date.now();l.push({start:P,duration:m,intensity:g,seedX:Math.random()*500,seedY:Math.random()*500})}p()},D=x=>{if(!x||x.amount<=0)return;const A=x.amount>=1?da.format(Math.round(x.amount)):uu.format(Tn(x.amount,0,9.9));M(x.unitId,`+${A}`,hu,"up"),p()},b=x=>{if(!x)return;const A=typeof performance<"u"?performance.now():Date.now();i.set(x.unitId,{start:A,duration:h}),M(x.unitId,"",bu,"down"),p()};return z.on("unitDamaged",v),z.on("unitHealed",D),z.on("unitDied",b),{step:x=>{if(u)d.x=0,d.y=0;else{let A=0,P=0;for(let N=l.length-1;N>=0;N--){const R=l[N],B=x-R.start;if(B>=R.duration){l.splice(N,1);continue}const j=Tn(B/R.duration,0,1),H=R.intensity*ua(1-j);A+=Math.sin((x+R.seedX)/16)*H,P+=Math.cos((x+R.seedY)/18)*H}d.x=A,d.y=P}for(const[A,P]of i){const N=x-P.start,R=Tn(N/P.duration,0,1),B=1-ua(R);if(R>=1){c.delete(A),i.delete(A);continue}c.set(A,Tn(B,0,1))}},getShakeOffset:()=>({x:d.x,y:d.y}),getUnitAlpha:x=>c.get(x)??1,dispose:()=>{z.off("unitDamaged",v),z.off("unitHealed",D),z.off("unitDied",b),l.length=0,i.clear(),c.clear(),r.destroy()}}}function Eu(){return`${"/".endsWith("/")?"/":"//"}${"assets/units/saunoja.svg".replace(/^\/+/,"")}`}const fa=Eu();let Pt=null,Wt=null;function qs(e){return!!(e&&e.complete&&e.naturalWidth>0&&e.naturalHeight>0)}function Cu(e,t){if(!t)return e;try{t(e)}catch(n){console.error("Saunoja icon onLoad callback failed",n)}return e}function Lr(e){const t=s=>e?s.then(o=>Cu(o,e)):s;if(qs(Pt))return t(Promise.resolve(Pt));if(Wt)return t(Wt);if(typeof Image>"u")return Promise.reject(new Error("Image constructor is not available in this environment."));const n=new Image;return n.decoding="async",Pt=n,Wt=new Promise((s,o)=>{const a=()=>{n.onload=null,n.onerror=null},r=()=>{a(),s(n)};n.onload=r,n.onerror=i=>{a(),Pt=null,Wt=null;const c=new Error(`Failed to load saunoja icon from ${fa}`);console.warn(c.message,i),o(c)},n.src=fa,qs(n)&&r()}),t(Wt)}function Bu(e,t,{originX:n=0,originY:s=0,hexRadius:o=Ot,zoom:a=1}={}){if(!e||!Array.isArray(t)||t.length===0)return;const r=qs(Pt)?Pt:null;if(!r)return;const i=Number.isFinite(o)&&o>0?o:Ot,c=i*.98,l=[...t].sort((d,u)=>d.coord.r!==u.coord.r?d.coord.r-u.coord.r:d.coord.q!==u.coord.q?d.coord.q-u.coord.q:d.id.localeCompare(u.id));for(const d of l){const{x:u,y:f}=tu({coord:d.coord,hexSize:i,origin:{x:n,y:s},zoom:a,type:"saunoja"});e.save(),sn(e,u,f,c),e.clip();const h=i*2.15/Math.max(r.naturalWidth,r.naturalHeight||1),m=Ie(r.naturalWidth*h,a),g=Ie(r.naturalHeight*h,a),p=Ie(u-m/2,a),y=Ie(f-g*.72,a);e.save(),e.filter="grayscale(100%) contrast(112%)",e.globalAlpha*=.96,e.drawImage(r,p,y,m,g),e.restore(),e.save(),e.globalCompositeOperation="multiply";const M=e.createRadialGradient(u,f+c*.38,c*.2,u,f+c*.38,c*1.05);M.addColorStop(0,"rgba(15, 23, 42, 0.55)"),M.addColorStop(1,"rgba(15, 23, 42, 0)"),e.fillStyle=M,e.fillRect(u-c,f-c,c*2,c*2),e.restore(),e.save(),e.globalCompositeOperation="soft-light";const v=e.createLinearGradient(u,f-c,u,f+c);v.addColorStop(0,"rgba(255, 232, 210, 0.18)"),v.addColorStop(.52,"rgba(255, 183, 124, 0.32)"),v.addColorStop(1,"rgba(212, 97, 54, 0.5)"),e.fillStyle=v,e.fillRect(u-c,f-c,c*2,c*2),e.restore(),e.save(),e.globalCompositeOperation="screen",e.globalAlpha=.75;const D=e.createRadialGradient(u,f-c*.68,c*.1,u,f,c*1.12);D.addColorStop(0,"rgba(255, 255, 255, 0.85)"),D.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=D,e.fillRect(u-c,f-c,c*2,c*2),e.restore();const I=performance.now()-d.lastHitAt,k=120;if(I<k){const x=1-I/k;Jc(e,{centerX:u,centerY:f,radius:c,progress:x})}e.restore(),Zc(e,{centerX:u,centerY:f-i*.18,radius:i*.94,intensity:d.steam});const T=i*.42,w=f+i*.34;qc(e,{centerX:u,centerY:w,hp:d.hp,maxHp:d.maxHp,radius:T})}}const xu=["Resolute Sauna Guardian","Steam Scholar","Frost-Hardened","Loyal Watchbearer","Aura Whisperer","Shield Brother","Stonefooted Scout","Sisu-Forged Veteran","Brewmaster Quartermaster","Icebreaker Herald","Runic Tactician","Torchbearer"],zu=["Heat Fickle","Soot Allergic","Slow to Spark","Overconfident","Distracted Dreamer","Stubborn Stoker","Thirsty Between Battles","Clumsy Footwork","Rust-Prone Gear","Echo-Lost Listener"];function ha(e,t,n){const s=[...e],o=[],a=Math.max(0,Math.min(t,s.length));for(let r=0;r<a;r++){const i=Math.floor(n()*s.length),[c]=s.splice(i,1);c&&o.push(c)}return o}function Iu(e,t){for(let n=e.length-1;n>0;n--){const s=Math.floor(t()*(n+1));[e[n],e[s]]=[e[s],e[n]]}return e}function Nu(e=Math.random){typeof e!="function"&&(e=Math.random);const t=ha(xu,2,e),n=ha(zu,1,e),s=[...t,...n];return Iu(s,e).map(o=>o.trim()).filter(o=>o.length>0)}const Pu=1;function Vt(e,t=0){return Number.isFinite(e)?e:t}function Du(e){const{heat:t,pickSpawnTile:n,spawnUnit:s,maxSpawns:o}=e,a=Math.max(Pu,Dt),r=Math.max(0,Vt(e.minUpkeepReserve??a,a));let i=Math.max(0,Vt(e.availableUpkeep,0));const c=Math.max(0,Math.floor(Vt(o??Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY))),l=Vt(e.rosterCap??Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),d=Number.isFinite(l)?Math.max(0,Math.floor(l)):Number.POSITIVE_INFINITY,u=typeof e.getRosterCount=="function"?e.getRosterCount:()=>0;let f=0,h=0,m=0,g=0,p=0,y=0,M=0;for(;t.hasTriggerReady()&&f<c;){if(f+=1,Math.max(0,Math.floor(Vt(u()??0,0)))>=d){y+=1,h+=t.vent(.25);break}if(i<r){g+=1,h+=t.vent(.5);break}const D=n();if(!D){p+=1,h+=t.vent(.25);break}if(!s(D)){M+=1,h+=t.vent(.25);break}if(!t.consumeTrigger()){M+=1;break}m+=1,i=Math.max(0,i-r)}return{spawned:m,blockedByUpkeep:g,blockedByPosition:p,blockedByRoster:y,failedSpawns:M,ventedHeat:h,remainingUpkeep:i}}function Cs(e,t=0){return Number.isFinite(e)?e:t}function ku(e){const t=Math.max(0,Cs(e.dt,0)),{addedHeat:n,cooledHeat:s}=e.heat.advance(t);let o=0;for(const h of e.units){if(h.isDead()||h.faction!=="player")continue;const m=Math.max(0,Cs(e.getUnitUpkeep(h),0));m>0&&(o+=m)}const a=5;let i=Math.max(0,Cs(e.sauna.beerUpkeepAccumulator,0)),c=0;if(o>0){if(i+=t,i>=a){const h=Math.floor(i/a);c=o*h,i-=h*a}}else i=0;e.sauna.beerUpkeepAccumulator=i,c>0&&e.state.addResource(C.SAUNA_BEER,-c);const l=e.state.getResource(C.SAUNA_BEER),d=Du({heat:e.heat,availableUpkeep:l,pickSpawnTile:e.pickSpawnTile,spawnUnit:e.spawnBaseUnit,minUpkeepReserve:e.minUpkeepReserve,maxSpawns:e.maxSpawns,rosterCap:e.rosterCap,getRosterCount:e.getRosterCount}),u=e.heat.getCooldownSeconds(),f=e.heat.timeUntilNextTrigger();return e.sauna.heat=e.heat.getHeat(),e.sauna.playerSpawnThreshold=e.heat.getThreshold(),e.sauna.playerSpawnCooldown=Number.isFinite(u)?u:0,e.sauna.playerSpawnTimer=Number.isFinite(f)?f:0,e.sauna.heatPerTick=e.heat.getBuildRate(),{addedHeat:n,cooledHeat:s,upkeepDrain:c,spawn:d,beerRemaining:e.state.getResource(C.SAUNA_BEER),availableUpkeep:d.remainingUpkeep}}function Tu(){try{return globalThis.localStorage??null}catch(e){return console.warn("Unable to access localStorage for inventory persistence",e),null}}function Lu(e,t){const n=e.getItem(t);if(n)try{return JSON.parse(n)}catch(s){console.warn(`Failed to parse persisted inventory for "${t}", clearing.`,s),e.removeItem(t);return}}function Ln(e,t,n){const s=Number.isFinite(e.quantity)?e.quantity:1,o=Math.max(1,Math.round(s)),a=typeof e.rarity=="string"?e.rarity.trim():void 0,r=typeof e.icon=="string"?e.icon:void 0,i=typeof e.description=="string"?e.description:void 0;return{id:e.id,name:e.name,description:i,icon:r,rarity:a,quantity:o,acquiredAt:t,sourceTableId:n?.tableId,sourceEntryId:n?.entryId}}class Ru{listeners=new Set;storageKey;now;maxStashSize;storage;autoEquip;stash=[];inventory=[];constructor(t={}){this.storageKey=t.storageKey??"autobattles:inventory",this.now=typeof t.now=="function"?t.now:()=>Date.now(),this.maxStashSize=Math.max(1,Math.floor(t.maxStashSize??24)),this.storage=Tu(),this.autoEquip=t.autoEquip??!0,this.load()}load(){if(!this.storage)return;const t=Lu(this.storage,this.storageKey);if(t){if(typeof t.autoEquip=="boolean"&&(this.autoEquip=t.autoEquip),Array.isArray(t.stash)){const n=[];for(const s of t.stash){if(!s||typeof s!="object")continue;const{id:o,name:a,quantity:r}=s;if(typeof o!="string"||typeof a!="string")continue;const i=Number.isFinite(s.acquiredAt)?s.acquiredAt:this.now();n.push(Ln({id:o,name:a,description:s.description,icon:s.icon,rarity:s.rarity,quantity:r},i,{tableId:s.sourceTableId,entryId:s.sourceEntryId}))}this.stash=n.slice(0,this.maxStashSize)}if(Array.isArray(t.inventory)){const n=[];for(const s of t.inventory){if(!s||typeof s!="object")continue;const{id:o,name:a,quantity:r}=s;if(typeof o!="string"||typeof a!="string")continue;const i=Number.isFinite(s.acquiredAt)?s.acquiredAt:this.now();n.push(Ln({id:o,name:a,description:s.description,icon:s.icon,rarity:s.rarity,quantity:r},i,{tableId:s.sourceTableId,entryId:s.sourceEntryId}))}this.inventory=n}}}persist(){if(!this.storage)return;const t={autoEquip:this.autoEquip,stash:this.stash.map(n=>({...n})),inventory:this.inventory.map(n=>({...n}))};try{this.storage.setItem(this.storageKey,JSON.stringify(t))}catch(n){console.warn("Failed to persist inventory state",n)}}emit(t){for(const n of this.listeners)n(t)}normalizeEquipResult(t){return typeof t=="boolean"?{success:t}:!t||typeof t!="object"?{success:!1}:{success:!!t.success,comparison:t.comparison,reason:t.reason}}on(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}isAutoEquipEnabled(){return this.autoEquip}setAutoEquip(t){this.autoEquip!==t&&(this.autoEquip=t,this.persist(),this.emit({type:"settings-updated",autoEquip:this.autoEquip}))}getStash(){return this.stash.map(t=>({...t}))}getStashSize(){return this.stash.length}getInventory(){return this.inventory.map(t=>({...t}))}getInventorySize(){return this.inventory.length}addLoot(t,n={}){return this.addItem({...t.item},{...n,sourceTableId:n.sourceTableId,sourceEntryId:n.sourceEntryId??t.entryId})}addItem(t,n={}){const s=Math.max(0,Math.round(this.now())),o=Ln(t,s,{tableId:n.sourceTableId,entryId:n.sourceEntryId}),a=n.autoEquip??this.autoEquip;let r={success:!1};if(a&&n.unitId&&typeof n.equip=="function"){try{r=this.normalizeEquipResult(n.equip(n.unitId,o))}catch(i){console.warn("Failed to auto-equip inventory item",{item:o,error:i}),r={success:!1}}if(r.success)return this.persist(),this.emit({type:"item-acquired",item:o,equipped:!0,location:"equipped",unitId:n.unitId,stashSize:this.stash.length,inventorySize:this.inventory.length}),{item:o,equipped:!0,location:"equipped"}}if(this.stash.push(o),this.stash.length>this.maxStashSize){const i=this.stash.splice(0,this.stash.length-this.maxStashSize);i.length>0&&console.warn("Inventory stash full, trimming oldest items",i)}return this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-acquired",item:o,equipped:!1,unitId:n.unitId,location:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),{item:o,equipped:!1,location:"stash",stashIndex:this.stash.length-1}}equipFromStash(t,n,s){if(t<0||t>=this.stash.length)return!1;const o=this.stash[t];let a={success:!1};try{a=this.normalizeEquipResult(s(n,o))}catch(i){console.warn("Failed to equip stash item",{item:o,error:i}),a={success:!1}}if(!a.success)return!1;const[r]=this.stash.splice(t,1);return this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-equipped",item:r,unitId:n,from:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length,comparison:a.comparison}),!0}equipFromInventory(t,n,s){if(t<0||t>=this.inventory.length)return!1;const o=this.inventory[t];let a={success:!1};try{a=this.normalizeEquipResult(s(n,o))}catch(i){console.warn("Failed to equip inventory item",{item:o,error:i}),a={success:!1}}if(!a.success)return!1;const[r]=this.inventory.splice(t,1);return this.persist(),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"item-equipped",item:r,unitId:n,from:"inventory",stashSize:this.stash.length,inventorySize:this.inventory.length,comparison:a.comparison}),!0}moveToInventory(t){if(t<0||t>=this.stash.length)return null;const[n]=this.stash.splice(t,1);return this.inventory.push(n),this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"item-moved",item:n,from:"stash",to:"inventory",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}moveToStash(t){if(this.stash.length>=this.maxStashSize||t<0||t>=this.inventory.length)return null;const[n]=this.inventory.splice(t,1);return this.stash.push(n),this.stash.length>this.maxStashSize&&this.stash.splice(0,this.stash.length-this.maxStashSize),this.persist(),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-moved",item:n,from:"inventory",to:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}discardFromInventory(t){if(t<0||t>=this.inventory.length)return null;const[n]=this.inventory.splice(t,1);return this.persist(),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"item-discarded",item:n,location:"inventory",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}unequipToStash(t,n,s){if(this.stash.length>=this.maxStashSize)return!1;let o=null;try{o=s(t,n)??null}catch(i){console.warn("Failed to unequip item",{unitId:t,slot:n,error:i}),o=null}if(!o)return!1;const a=Math.max(0,Math.round(this.now())),r=Ln(o,a);return this.stash.push(r),this.stash.length>this.maxStashSize&&this.stash.splice(0,this.stash.length-this.maxStashSize),this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-unequipped",item:r,unitId:t,slot:n,to:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),!0}discardFromStash(t){if(t<0||t>=this.stash.length)return null;const[n]=this.stash.splice(t,1);return this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-discarded",item:n,location:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}}const ju={stash:"Quartermaster Stash",inventory:"Ready Inventory"},Ou={stash:"Your stash is empty. Conquer enemy elites to gather new equipment.",inventory:"No gear staged. Move items into the ready inventory for quick equipping."},Qu={mythic:6,legendary:5,epic:4,rare:3,uncommon:2,common:1},Hu=["health","attackDamage","attackRange","movementRange","defense","shield"],Gu={"birch-sap-satchel":["healing","support"],"steamed-bandages":["restoration","shielding"],"aurora-distillate":["damage","defense"],"stolen-sauna-tokens":["mobility"],"midnight-bloodwine":["healing","damage"],"sauna-incense":["range","focus"],"glacier-brand":["damage"],"emberglass-arrow":["damage","range"],"aurora-lattice":["damage","range"],"emberglass-shard":["damage","mobility"],"windstep-totem":["mobility","defense"],"searing-chant-censer":["damage","shielding"],"cracked-ice-amulet":["defense"],"myrsky-charm":["range","defense"],"frostwyrm-signet":["shielding"],"spirit-oak-charm":["healing","defense"]};function He(e){return(e??"").trim().toLowerCase()}function Bs(e){const t=new Set;for(const n of e){const s=He(n);s&&t.add(s)}return t}function xs(e,t){return{id:e.id,name:e.name,quantity:typeof t=="number"?t:e.quantity,rarity:e.rarity}}function Rn(e){return e?{id:e.id,name:e.name,quantity:e.quantity,rarity:e.rarity}:null}function ma(e){return Gu[e]??[]}function ga(e){const t=He(e)||"common",n=t.charAt(0).toUpperCase()+t.slice(1);return{key:t,label:n,rank:Qu[t]??0}}function Uu(e){const t=pn(e.id);if(!t){const o=ga(e.rarity);return{slot:null,slotLabel:"Unassigned",rarity:o.key,rarityRank:o.rank,tags:ma(e.id),acquiredAt:e.acquiredAt}}const n=gn(t.slot),s=ga(e.rarity);return{slot:t.slot,slotLabel:n.label,rarity:s.key,rarityRank:s.rank,tags:ma(e.id),acquiredAt:e.acquiredAt}}function Fu(e,t,n,s,o){return{id:e.id,name:e.name,description:e.description,icon:e.icon,rarity:e.rarity,quantity:o,slot:t,maxStacks:n,modifiers:s??{}}}function pa(e,t){const n=e[t];return typeof n=="number"&&Number.isFinite(n)?Math.round(n):0}function Ku(e,t){const n=pn(e.item.id);if(!n)return{slot:null,canEquip:!1,reason:"unknown-item",equipped:null,projected:xs(e.item),stats:[]};const s=n.slot,o=gn(s),a=t.loadout.find(p=>p.slot===s)??null,r=Math.max(1,Math.round(e.item.quantity)),i=Math.max(1,Math.floor(n.maxStacks??o.maxStacks)),c=(a?.quantity??0)+r,l=c>i;if(a&&a.id!==e.item.id)return{slot:s,canEquip:!1,reason:"slot-occupied",equipped:Rn(a),projected:xs(e.item),stats:[]};if(l&&(!a||a.id!==e.item.id))return{slot:s,canEquip:!1,reason:"stack-limit",equipped:Rn(a),projected:xs(e.item,Math.min(i,c)),stats:[]};const d=Math.min(i,c),u=[];for(const p of t.loadout)p.slot!==s&&u.push({...p});const f=a&&a.id===e.item.id?{...a,quantity:d}:Fu(e.item,s,i,n.modifiers,d);u.push(f);const h=t.currentStats??Yn(t.baseStats,t.loadout),m=Yn(t.baseStats,u),g=Hu.map(p=>{const y=pa(h,p),M=pa(m,p);return{stat:p,current:y,projected:M,delta:M-y}});return{slot:s,canEquip:!0,equipped:Rn(a),projected:Rn(f),stats:g}}function Aa(e,t){return e.map((n,s)=>({item:n,index:s,location:t,metadata:Uu(n)}))}function Yu(e,t){const n=new Map,s=new Map,o=new Map;for(const c of e){const{metadata:l}=c;if(l.slot){const h=l.slot,m=n.get(h);m?m.count+=1:n.set(h,{label:l.slotLabel,count:1})}const d=l.rarity,u=d.charAt(0).toUpperCase()+d.slice(1),f=s.get(d);f?f.count+=1:s.set(d,{label:u,count:1,rank:l.rarityRank});for(const h of l.tags){const m=He(h);if(!m)continue;const g=h.split(/[-_]/g).map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),p=o.get(m);p?p.count+=1:o.set(m,{label:g,count:1})}}const a=Array.from(n.entries()).sort((c,l)=>{const d=jt.indexOf(c[0]),u=jt.indexOf(l[0]);return d-u}).map(([c,l])=>({id:c,label:l.label,count:l.count,active:t.slots.has(He(c))})),r=Array.from(s.entries()).sort((c,l)=>(l[1].rank??0)-(c[1].rank??0)).map(([c,l])=>({id:c,label:l.label,count:l.count,active:t.rarities.has(He(c))})),i=Array.from(o.entries()).sort((c,l)=>c[1].label.localeCompare(l[1].label)).map(([c,l])=>({id:c,label:l.label,count:l.count,active:t.tags.has(He(c))}));return{slots:a,rarities:r,tags:i}}function Xu(e,t){if(t.slots.size>0){const n=e.metadata.slot?He(e.metadata.slot):"";if(!n||!t.slots.has(n))return!1}return!(t.rarities.size>0&&!t.rarities.has(e.metadata.rarity)||t.tags.size>0&&!e.metadata.tags.map(o=>He(o)).some(o=>t.tags.has(o)))}function qu(e,t){return t?[e.item.name,e.item.description??"",e.metadata.tags.join(" ")].join(" ").toLowerCase().includes(t):!0}function Ju(e,t){switch(t){case"oldest":e.sort((n,s)=>n.metadata.acquiredAt-s.metadata.acquiredAt);break;case"rarity":e.sort((n,s)=>s.metadata.rarityRank!==n.metadata.rarityRank?s.metadata.rarityRank-n.metadata.rarityRank:s.metadata.acquiredAt-n.metadata.acquiredAt);break;case"name":e.sort((n,s)=>n.item.name.localeCompare(s.item.name));break;case"newest":default:e.sort((n,s)=>s.metadata.acquiredAt-n.metadata.acquiredAt);break}}function ya(e){const t={slots:Bs(e.filters.slots??new Set),rarities:Bs(e.filters.rarities??new Set),tags:Bs(e.filters.tags??new Set)},n=He(e.search),s=Math.max(1,Math.floor(e.page||1)),o=Math.max(1,Math.floor(e.pageSize||24)),a=e.collection??"stash",r=Aa(e.stash,"stash"),i=Aa(e.inventory,"inventory"),c=[...r,...i],l=Yu(c,t),d=a==="stash"?r:i,f=[...d.filter(v=>Xu(v,t)&&qu(v,n))];Ju(f,e.sort??"newest");const h=Math.min(f.length,s*o),m=f.slice(0,h),g=f.length>h,p=e.comparisonContext??null,y=m.map(v=>({item:v.item,index:v.index,location:v.location,metadata:v.metadata,comparison:p?Ku(v,p):null})),M=["stash","inventory"].map(v=>({id:v,label:ju[v],count:v==="stash"?e.stash.length:e.inventory.length,active:v===a}));return{collection:a,collections:M,filters:l,items:y,total:d.length,filteredTotal:f.length,search:e.search,sort:e.sort??"newest",hasMore:g,emptyMessage:Ou[a]}}function Zu(){return{slots:new Set,rarities:new Set,tags:new Set}}const Wu="_panel_lf1io_1",Vu="_header_lf1io_30",_u="_title_lf1io_40",$u="_meta_lf1io_47",ef="_close_lf1io_52",tf="_controls_lf1io_72",nf="_collections_lf1io_80",sf="_collectionButton_lf1io_88",of="_searchRow_lf1io_117",af="_search_lf1io_117",rf="_searchIcon_lf1io_149",cf="_sortSelect_lf1io_159",lf="_body_lf1io_169",df="_grid_lf1io_175",uf="_empty_lf1io_184",ff="_footer_lf1io_195",hf="_loadMore_lf1io_200",$={panel:Wu,header:Vu,title:_u,meta:$u,close:ef,controls:tf,collections:nf,collectionButton:sf,searchRow:of,search:af,searchIcon:rf,sortSelect:cf,body:lf,grid:df,empty:uf,footer:ff,loadMore:hf},mf="_group_18afl_1",gf="_label_18afl_11",pf="_row_18afl_19",Af="_chip_18afl_25",yf="_count_18afl_55",ln={group:mf,label:gf,row:pf,chip:Af,count:yf},Mf="_card_1o0cv_1",bf="_header_1o0cv_26",wf="_icon_1o0cv_32",vf="_details_1o0cv_44",Sf="_titleRow_1o0cv_51",Ef="_title_1o0cv_51",Cf="_rarity_1o0cv_63",Bf="_slot_1o0cv_70",xf="_tags_1o0cv_75",zf="_tag_1o0cv_75",If="_compare_1o0cv_91",Nf="_tooltip_1o0cv_113",Pf="_statList_1o0cv_144",Df="_stat_1o0cv_144",kf="_actions_1o0cv_169",Tf="_action_1o0cv_169",Lf="_primary_1o0cv_198",Rf="_danger_1o0cv_209",jf="_badge_1o0cv_224",Z={card:Mf,header:bf,icon:wf,details:vf,titleRow:Sf,title:Ef,rarity:Cf,slot:Bf,tags:xf,tag:zf,compare:If,tooltip:Nf,statList:Pf,stat:Df,actions:kf,action:Tf,primary:Lf,danger:Rf,badge:jf},Of={health:"HP",attackDamage:"ATK",attackRange:"Range",movementRange:"Move",defense:"Defense",shield:"Shield"},Ma={"slot-occupied":"Slot occupied. Unequip the current item first.","stack-limit":"Stack limit reached for this item.","unknown-item":"This item cannot be equipped yet."},Un=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Qf(e,t){if(t.item.icon){const s=document.createElement("img");s.src=t.item.icon,s.alt="",s.loading="lazy",s.decoding="async",s.width=48,s.height=48,e.appendChild(s);return}const n=document.createElement("span");n.textContent=t.item.name.trim()[0]?.toUpperCase()??"?",e.appendChild(n)}function Rr(e){if(!(!e||e.canEquip))return e.reason&&Ma[e.reason]?Ma[e.reason]:"Unable to equip this item right now."}function Hf(e,t){const n=document.createElement("div");n.className=Z.tooltip;const s=document.createElement("h4");if(t.projected?s.textContent=t.canEquip?"Projected stats":"Current loadout":s.textContent="Stats",n.appendChild(s),!t.canEquip){const a=Rr(t);if(a){const r=document.createElement("p");r.textContent=a,r.style.margin="0 0 0.5rem",r.style.fontSize="0.78rem",n.appendChild(r)}}const o=document.createElement("ul");o.className=Z.statList;for(const a of e){const r=document.createElement("li");r.className=Z.stat,a.delta>0?r.dataset.delta="positive":a.delta<0&&(r.dataset.delta="negative");const i=document.createElement("span");i.textContent=Of[a.stat]??a.stat;const c=document.createElement("span"),l=Un.format(a.current),d=Un.format(a.projected),u=a.delta,f=u===0?"0":`${u>0?"+":""}${Un.format(Math.abs(u))}`;c.textContent=`${l}  ${d} (${f})`,r.append(i,c),o.appendChild(r)}return n.appendChild(o),n}function Gf(e){const t=e.comparison;if(!t)return null;const n=document.createElement("div"),s=document.createElement("button");s.type="button",s.className=Z.compare,s.textContent=t.canEquip?"Compare stats":"View details";const o=`${e.item.id}-compare-${e.location}-${e.index}`;s.setAttribute("aria-controls",o),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-describedby",o),s.addEventListener("focus",()=>{s.setAttribute("aria-expanded","true")}),s.addEventListener("blur",()=>{s.setAttribute("aria-expanded","false")}),n.appendChild(s);const a=Hf(t.stats,t);return a.id=o,n.appendChild(a),n}function Uf(e,t){if(t&&!t.canEquip){e.disabled=!0;const n=Rr(t);n&&(e.title=n)}}function Ff(e){return e.map(t=>{const n=t.trim();return n&&n.split(/[-_\s]/g).map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")})}function Kf(e,t,n){const s=document.createElement("div");s.className=Z.actions;const o=document.createElement("button");o.type="button",o.className=`${Z.action} ${Z.primary}`,o.textContent="Equip",Uf(o,t.comparison),o.addEventListener("click",()=>{n.onEquip?.()}),s.appendChild(o);const a=document.createElement("button");a.type="button",a.className=Z.action,a.textContent=t.location==="stash"?"Send to inventory":"Return to stash",a.addEventListener("click",()=>{n.onTransfer?.()}),s.appendChild(a);const r=document.createElement("button");r.type="button",r.className=`${Z.action} ${Z.danger}`,r.textContent="Trash";let i=null;const c=()=>{i!==null&&(window.clearTimeout(i),i=null),r.dataset.confirm="false",r.textContent="Trash"};r.addEventListener("click",()=>{if(i!==null){c(),n.onTrash?.();return}r.dataset.confirm="true",r.textContent="Confirm trash",i=window.setTimeout(()=>{c()},2600)}),s.appendChild(r),e.appendChild(s)}function Yf(e,t){const n=document.createElement("li");n.className=Z.card,n.dataset.location=e.location,n.setAttribute("role","listitem");const s=document.createElement("div");s.className=Z.header;const o=document.createElement("div");o.className=Z.icon,Qf(o,e),s.appendChild(o);const a=document.createElement("div");a.className=Z.details;const r=document.createElement("div");r.className=Z.titleRow;const i=document.createElement("h4");i.className=Z.title,i.textContent=e.item.name,r.appendChild(i);const c=document.createElement("span");c.className=Z.rarity,c.textContent=e.metadata.rarity.toUpperCase(),r.appendChild(c),a.appendChild(r);const l=document.createElement("span");if(l.className=Z.slot,l.textContent=e.metadata.slot?e.metadata.slotLabel:"No slot",a.appendChild(l),e.metadata.tags.length>0){const u=document.createElement("div");u.className=Z.tags;for(const f of Ff(e.metadata.tags)){const h=document.createElement("span");h.className=Z.tag,h.textContent=f,u.appendChild(h)}a.appendChild(u)}const d=Gf(e);if(d&&a.appendChild(d),s.appendChild(a),n.appendChild(s),e.item.quantity>1){const u=document.createElement("span");u.className=Z.badge,u.textContent=`${Un.format(e.item.quantity)}`,n.appendChild(u)}return Kf(n,e,t),n}const Xf={newest:"Newest",oldest:"Oldest",rarity:"Rarity",name:"Name A-Z"};function zs(e){const t=document.createElement("div");t.className=ln.row;const n=document.createElement("div");n.className=ln.label,n.textContent=e;const s=document.createElement("div");return s.className=ln.group,t.append(n,s),{row:t,group:s}}function qf(e){const t=document.createElement("section");t.className=$.panel,t.tabIndex=-1,t.dataset.open="false",t.setAttribute("aria-label","Quartermaster stash");const n=document.createElement("header");n.className=$.header;const s=document.createElement("div"),o=document.createElement("h2");o.className=$.title,o.textContent="Quartermaster Stash",s.appendChild(o);const a=document.createElement("div");a.className=$.meta,a.textContent="Loading",s.appendChild(a);const r=document.createElement("button");r.type="button",r.className=$.close,r.textContent="Close",r.addEventListener("click",()=>e.onClose?.()),n.append(s,r),t.appendChild(n);const i=document.createElement("div");i.className=$.controls;const c=document.createElement("div");c.className=$.collections;const l={stash:document.createElement("button"),inventory:document.createElement("button")};l.stash.type="button",l.stash.className=$.collectionButton,l.stash.textContent="Stash",l.stash.addEventListener("click",()=>e.onCollectionChange?.("stash")),l.inventory.type="button",l.inventory.className=$.collectionButton,l.inventory.textContent="Ready",l.inventory.addEventListener("click",()=>e.onCollectionChange?.("inventory")),c.append(l.stash,l.inventory),i.appendChild(c);const d=document.createElement("div");d.className=$.searchRow;const u=document.createElement("div");u.className=$.search;const f=document.createElement("input");f.type="search",f.placeholder="Search stash",f.addEventListener("input",()=>e.onSearchChange?.(f.value));const h=document.createElement("span");h.className=$.searchIcon,h.textContent="",u.append(h,f),d.appendChild(u);const m=document.createElement("select");m.className=$.sortSelect,["newest","oldest","rarity","name"].forEach(w=>{const x=document.createElement("option");x.value=w,x.textContent=Xf[w],m.appendChild(x)}),m.addEventListener("change",()=>e.onSortChange?.(m.value)),d.appendChild(m),i.appendChild(d);const g=document.createElement("div"),p={slots:zs("Slots"),rarities:zs("Rarity"),tags:zs("Tags")};g.append(p.slots.row,p.rarities.row,p.tags.row),i.appendChild(g),t.appendChild(i);const y=document.createElement("div");y.className=$.body;const M=document.createElement("ul");M.className=$.grid;const v=document.createElement("div");v.className=$.empty,v.textContent="No items match the current filters.",v.hidden=!0,y.append(M,v),t.appendChild(y);const D=document.createElement("div");D.className=$.footer;const b=document.createElement("button");b.type="button",b.className=$.loadMore,b.textContent="Show more",b.addEventListener("click",()=>e.onLoadMore?.()),D.appendChild(b),t.appendChild(D);function I(w,x,A){w.group.innerHTML="",w.row.hidden=A.length===0;for(const P of A){const N=document.createElement("button");if(N.type="button",N.className=ln.chip,N.dataset.active=P.active?"true":"false",N.textContent=P.label,P.count>0){const R=document.createElement("span");R.className=ln.count,R.textContent=String(P.count),N.appendChild(R)}N.addEventListener("click",()=>e.onFilterToggle?.(x,P.id)),w.group.appendChild(N)}}function k(w){M.replaceChildren();const x=document.createDocumentFragment();for(const A of w.items){const P={onEquip:()=>e.onItemEquip?.(A),onTransfer:()=>e.onItemTransfer?.(A),onTrash:()=>e.onItemTrash?.(A)};x.appendChild(Yf(A,P))}M.appendChild(x),v.hidden=w.filteredTotal!==0,v.hidden||(v.textContent=w.emptyMessage)}return{element:t,render(w){a.textContent=w.total===0?"No items yet":`${w.filteredTotal} of ${w.total} item${w.total===1?"":"s"}`;for(const[x,A]of Object.entries(l))A.dataset.active=x===w.collection?"true":"false";f.value!==w.search&&(f.value=w.search),m.value!==w.sort&&(m.value=w.sort),I(p.slots,"slots",w.filters.slots),I(p.rarities,"rarities",w.filters.rarities),I(p.tags,"tags",w.filters.tags),k(w),b.hidden=!w.hasMore},setOpen(w){t.dataset.open=w?"true":"false"},focus(){t.focus({preventScroll:!0})},destroy(){t.remove()}}}const Is=24,Jf=4500,Zf=400,Wf={health:"HP",attackDamage:"ATK",attackRange:"RNG",movementRange:"MOV",defense:"DEF",shield:"Shield"};function Vf(e){const t=e.querySelector(".loot-toast-stack");if(t)return t;const n=document.createElement("div");return n.classList.add("loot-toast-stack"),n.setAttribute("aria-live","polite"),n.setAttribute("role","status"),e.appendChild(n),n}function pe(e,t,n){const s=document.createElement("div");s.classList.add("loot-toast"),s.dataset.variant=n,s.textContent=t,e.appendChild(s);const o=window.setTimeout(()=>{s.classList.add("loot-toast--exit"),window.setTimeout(()=>s.remove(),Zf)},Jf);s.addEventListener("click",()=>{window.clearTimeout(o),s.remove()})}function _f(e,t){e.has(t)?e.delete(t):e.add(t)}function $f(e){const t=e.comparison?.deltas??[];return t.length===0?null:t.map(s=>{const o=Wf[s.stat]??s.stat;return`${s.delta>0?"+":""}${s.delta} ${o}`}).join(", ")}function Ns(e){switch(e){case"inventory":return"ready inventory";case"stash":return"stash";case"equipped":default:return"loadout"}}function eh(){const e=document.createElement("button");e.type="button",e.classList.add("inventory-badge"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls","inventory-stash-panel"),e.setAttribute("aria-label","Open quartermaster stash");const t=document.createElement("span");t.classList.add("inventory-badge__icon"),t.setAttribute("aria-hidden","true"),e.appendChild(t);const n=document.createElement("span");n.classList.add("inventory-badge__text"),n.textContent="Stash",e.appendChild(n);const s=document.createElement("span");return s.classList.add("inventory-badge__count"),s.textContent="0",s.setAttribute("aria-hidden","true"),e.appendChild(s),{button:e,count:s}}function th(e,t={}){const n=document.getElementById("ui-overlay");if(!n)return{destroy:()=>{}};const{actions:s}=us(n),o=Vf(n);n.querySelectorAll(".inventory-badge").forEach(A=>A.remove());const{button:a,count:r}=eh();a.dataset.autoequip=e.isAutoEquipEnabled()?"on":"off",s.appendChild(a),n.querySelector("#inventory-stash-panel")?.remove();const c=qf({onClose:()=>g(!1),onCollectionChange:A=>{d!==A&&(d=A,m=1,y())},onFilterToggle:(A,P)=>{const N=u[A];_f(N,P),m=1,y()},onSearchChange:A=>{f=A,m=1,y()},onSortChange:A=>{h=A,m=1,y()},onLoadMore:()=>{m+=1,y()},onItemEquip:A=>{v(A)},onItemTransfer:A=>{D(A)},onItemTrash:A=>{b(A)}});c.element.id="inventory-stash-panel",n.appendChild(c.element);let l=!1,d="stash";const u=Zu();let f="",h="newest",m=1;function g(A){l!==A&&(l=A,c.setOpen(l),a.setAttribute("aria-expanded",l?"true":"false"),a.setAttribute("aria-label",l?"Close quartermaster stash":"Open quartermaster stash"),l?(c.focus(),n.classList.add("inventory-panel-open")):n.classList.remove("inventory-panel-open"))}function p(){const A=t.getComparisonContext?.()??null;let P=ya({stash:e.getStash(),inventory:e.getInventory(),filters:u,search:f,sort:h,page:m,pageSize:Is,collection:d,comparisonContext:A});if(P.filteredTotal>0){const N=Math.max(1,Math.ceil(P.filteredTotal/Is));m>N&&(m=N,P=ya({stash:e.getStash(),inventory:e.getInventory(),filters:u,search:f,sort:h,page:m,pageSize:Is,collection:d,comparisonContext:A}))}return P}function y(){const A=p(),N=A.collections.find(R=>R.id==="stash")?.count??0;r.textContent=String(N),a.dataset.count=String(N),c.render(A)}function M(){const A=t.getSelectedUnitId?.()??null;return A||(pe(o,"Select an attendant before equipping an item.","warn"),null)}function v(A){const P=M();if(!P)return;const N=t.onEquip??(()=>({success:!1}));(A.location==="stash"?e.equipFromStash(A.index,P,(j,H)=>N(j,H,"stash")):e.equipFromInventory(A.index,P,(j,H)=>N(j,H,"inventory")))||pe(o,"Unable to equip that item right now.","warn")}function D(A){const P=A.location==="stash"?e.moveToInventory(A.index):e.moveToStash(A.index);if(!P){pe(o,"Unable to move that item right now.","warn");return}const N=A.location==="stash"?"ready inventory":"stash";pe(o,`Moved ${P.name} to the ${N}.`,"info"),m=1,y()}function b(A){const P=A.location==="stash"?e.discardFromStash(A.index):e.discardFromInventory(A.index);if(!P){pe(o,"That item was already removed.","warn");return}const N=A.location==="stash"?"stash":"ready inventory";pe(o,`${P.name} discarded from the ${N}.`,"warn"),y()}function I(A){switch(A.type){case"stash-updated":case"inventory-updated":y();break;case"item-acquired":if(A.equipped)pe(o,`${A.item.name} auto-equipped successfully.`,"info");else{const P=Ns(A.location);pe(o,`New item secured: ${A.item.name} (${P}).`,"loot")}break;case"item-equipped":{const P=$f(A),N=P?` (${P})`:"";pe(o,`Equipped ${A.item.name}${N}.`,"info");break}case"item-unequipped":pe(o,`${A.item.name} returned to the stash from slot ${A.slot}.`,"info");break;case"item-moved":{const P=Ns(A.to);pe(o,`Moved ${A.item.name} to the ${P}.`,"info");break}case"item-discarded":{const P=Ns(A.location);pe(o,`${A.item.name} discarded from the ${P}.`,"warn");break}case"settings-updated":a.dataset.autoequip=A.autoEquip?"on":"off";break}}const k=e.on(A=>I(A)),T=()=>{g(!l)};a.addEventListener("click",T);const w=A=>{A.defaultPrevented||A.code==="KeyI"&&!A.metaKey&&!A.ctrlKey&&!A.altKey&&(A.preventDefault(),g(!l))};return window.addEventListener("keydown",w),y(),{destroy:()=>{k(),a.removeEventListener("click",T),window.removeEventListener("keydown",w),a.remove(),c.destroy(),n.classList.remove("inventory-panel-open"),o.hasChildNodes()||o.remove()}}}const nh=Object.freeze({common:1,uncommon:.6,rare:.35,epic:.18,legendary:.08,mythic:.03}),sh=Object.freeze({id:"general-salvage",label:"General Salvage",entries:Object.freeze([{id:"birch-sap-satchel",name:"Birch Sap Satchel",description:"Soothing birch sap that doubles as a brisk field tonic.",rarity:"common",quantity:{min:1,max:3},weight:6},{id:"steamed-bandages",name:"Steamed Linen Bandages",description:"Freshly steamed bandages infused with pine oils.",rarity:"common",quantity:1,weight:5},{id:"emberglass-shard",name:"Emberglass Shard",description:"A radiant shard used to kindle sauna braziers.",rarity:"uncommon",quantity:1,weight:3},{id:"aurora-distillate",name:"Aurora Distillate",description:"Vials of shimmering condensation that empower sauna rituals.",rarity:"rare",quantity:1,weight:1.5},{id:"myrsky-charm",name:"Myrsky Charm",description:"Storm-forged charm rumored to call down aurora flares.",rarity:"epic",quantity:1,weight:.7}])}),oh=Object.freeze({base:Object.freeze({id:"enemy-raiders",label:"Avanto Marauder Spoils",entries:Object.freeze([{id:"cracked-ice-amulet",name:"Cracked Ice Amulet",description:"Necklace of frostbitten charms that hum when danger nears.",rarity:"common",quantity:1,weight:5},{id:"stolen-sauna-tokens",name:"Stolen Sauna Tokens",description:"Pilfered entrance tokens, gladly accepted back at any sauna hall.",rarity:"uncommon",quantity:{min:2,max:5},weight:3},{id:"glacier-brand",name:"Glacier Brand",description:"A cleaver chilled in glacial meltwater that never dulls.",rarity:"rare",quantity:1,weight:1.25}])}),elite:Object.freeze({id:"enemy-champions",label:"Avanto Champion Cache",entries:Object.freeze([{id:"frostwyrm-signet",name:"Frostwyrm Signet",description:"An icy signet ring that wreathes its bearer in frozen vapour.",rarity:"epic",quantity:1,weight:1.1},{id:"aurora-lattice",name:"Aurora Lattice",description:"Filigree latticework that channels auroral light into focused beams.",rarity:"legendary",quantity:1,weight:.4},{id:"midnight-bloodwine",name:"Midnight Bloodwine",description:"A mythical draught said to rekindle a warrior's lost resolve.",rarity:"mythic",quantity:1,weight:.12}])})}),ah=Object.freeze({base:Object.freeze({id:"deepwood-offerings",label:"Deepwood Offerings",entries:Object.freeze([{id:"spirit-oak-charm",name:"Spirit Oak Charm",description:"Carved from living oak, it whispers guidance between sauna rounds.",rarity:"uncommon",quantity:1,weight:4},{id:"sauna-incense",name:"Sauna Incense Pouches",description:"Fragrant blends that steady breathing before the next engagement.",rarity:"common",quantity:{min:1,max:4},weight:5},{id:"emberglass-arrow",name:"Emberglass Arrow Bundle",description:"Arrowheads that glow amber when a perfect shot reveals itself.",rarity:"rare",quantity:{min:1,max:2},weight:1.75}])}),elite:Object.freeze({id:"deepwood-ritual-cache",label:"Deepwood Ritual Cache",entries:Object.freeze([{id:"windstep-totem",name:"Windstep Totem",description:"Totem etched with gale sigils that lighten every cautious stride.",rarity:"epic",quantity:1,weight:.9},{id:"searing-chant-censer",name:"Searing Chant Censer",description:"An ornate censer that empowers allies with smouldering hymns.",rarity:"legendary",quantity:1,weight:.35}])})}),rh=Object.freeze({enemy:oh,deepwood:ah});function ih(e){return rh[e]??{base:sh}}function ch(e,t=!1){const n=ih(e);return t&&n.elite?n.elite:n.base}function lh(e){if(!Number.isFinite(e))return 1;const t=Math.floor(e);return t<=0?0:Math.min(10,t)}function dh(e,t){if(typeof e=="number"&&Number.isFinite(e))return Math.max(1,Math.round(e));if(!e)return 1;const n=e,s=Math.max(1,Math.round(n.min)),a=Math.max(s,Math.round(n.max))-s+1,r=Math.floor(Math.max(0,Math.min(.999999,t()))*a);return s+r}function uh(e){const t=nh[e.rarity]??1,n=typeof e.weight=="number"?e.weight:1;return Math.max(0,n)*Math.max(0,t)}function fh(e,t){const n=e.map(r=>({entry:r,weight:uh(r)})).filter(r=>r.weight>0);if(n.length===0)return null;const s=n.reduce((r,i)=>r+i.weight,0),o=Math.max(0,Math.min(.999999,t()))*s;let a=0;for(const r of n)if(a+=r.weight,o<a)return r.entry;return n[n.length-1]?.entry??null}function hh(e,t){return{id:e.id,name:e.name,description:e.description,icon:e.icon,rarity:e.rarity,quantity:t}}function mh(e){const t=typeof e.random=="function"?e.random:Math.random,n=!!e.elite,s=e.table??ch(e.factionId,n),o=lh(e.rolls),a=[];if(o<=0||s.entries.length===0)return{factionId:e.factionId,elite:n,tableId:s.id,tableLabel:s.label,rolls:a};for(let r=0;r<o;r+=1){const i=fh(s.entries,t);if(!i)break;const c=dh(i.quantity,t);a.push({entryId:i.id,rarity:i.rarity,quantity:c,item:hh(i,c)})}return{factionId:e.factionId,elite:n,tableId:s.id,tableLabel:s.label,rolls:a}}const gh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23a4d67a'%20/%3e%3cpolygon%20points='16,48%2032,16%2048,48'%20fill='%23d2691e'%20/%3e%3crect%20x='24'%20y='32'%20width='16'%20height='16'%20fill='%23f4a460'%20/%3e%3c/svg%3e",ph="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23c0c0c0'%20/%3e%3crect%20x='8'%20y='24'%20width='48'%20height='24'%20fill='%23808080'%20/%3e%3crect%20x='24'%20y='16'%20width='16'%20height='8'%20fill='%23606060'%20/%3e%3c/svg%3e",Ah="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23e0e0e0'%20/%3e%3crect%20x='10'%20y='22'%20width='12'%20height='30'%20fill='%23a9a9a9'%20/%3e%3crect%20x='26'%20y='14'%20width='12'%20height='38'%20fill='%23808080'%20/%3e%3crect%20x='42'%20y='26'%20width='12'%20height='26'%20fill='%23a9a9a9'%20/%3e%3c/svg%3e",yh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%238b4513'%20/%3e%3cpolygon%20points='32,10%2042,22%2022,22'%20fill='%23555'%20/%3e%3crect%20x='30'%20y='22'%20width='4'%20height='32'%20fill='%23ccc'%20/%3e%3c/svg%3e",Mh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%234682b4'%20/%3e%3ccircle%20cx='32'%20cy='24'%20r='12'%20fill='%23fff'%20/%3e%3crect%20x='28'%20y='36'%20width='8'%20height='16'%20fill='%23fff'%20/%3e%3c/svg%3e",bh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23556b2f'%20/%3e%3cline%20x1='16'%20y1='16'%20x2='48'%20y2='48'%20stroke='%23fff'%20stroke-width='4'%20/%3e%3cpolygon%20points='48,48%2044,36%2036,44'%20fill='%23fff'%20/%3e%3c/svg%3e",wh="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eAvanto%20Marauder%3c/title%3e%3cdesc%20id='desc'%3eFrost-clad%20marauder%20icon%20with%20jagged%20pauldrons,%20icy%20beard,%20and%20polar%20glow.%3c/desc%3e%3cdefs%3e%3clinearGradient%20id='bg'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23082f49'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230f172a'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='armor'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23e2e8f0'%20/%3e%3cstop%20offset='60%25'%20stop-color='%2394a3b8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%231f2937'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='beard'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23e0f2fe'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23bae6fd'%20/%3e%3c/linearGradient%3e%3cradialGradient%20id='glow'%20cx='50%25'%20cy='20%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20stop-color='rgba(191,%20219,%20254,%200.85)'%20/%3e%3cstop%20offset='100%25'%20stop-color='rgba(14,%20116,%20144,%200)'%20/%3e%3c/radialGradient%3e%3c/defs%3e%3crect%20width='128'%20height='128'%20rx='20'%20fill='url(%23bg)'%20/%3e%3ccircle%20cx='64'%20cy='46'%20r='38'%20fill='url(%23glow)'%20opacity='0.85'%20/%3e%3cpath%20d='M64%2018c-14%200-26%208-32%2020l10%204c6-8%2014-12%2022-12s16%204%2022%2012l10-4C90%2026%2078%2018%2064%2018z'%20fill='%23cffafe'%20opacity='0.4'%20/%3e%3cpath%20d='M64%2036c-14%200-28%2010-28%2028v10l-12%2016%2018%2010%2022-10%2022%2010%2018-10-12-16V64c0-18-14-28-28-28z'%20fill='url(%23armor)'%20stroke='%230f172a'%20stroke-width='2'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M48%2090l-12%206-10%2020%2020-8%2018%208%2018-8%2020%208-10-20-12-6'%20fill='%230f172a'%20opacity='0.85'%20/%3e%3cpath%20d='M64%2046c-10%200-18%208-18%2018v10c12-8%2024-8%2036%200V64c0-10-8-18-18-18z'%20fill='%230f172a'%20/%3e%3cpath%20d='M64%2050c-8%200-14%206-14%2014%206-4%2012-6%2014-6s8%202%2014%206c0-8-6-14-14-14z'%20fill='%23bae6fd'%20opacity='0.85'%20/%3e%3cpath%20d='M58%2084c-4%200-8%202-10%206%204%200%208%200%2010-2s4-2%206-2%204%200%206%202%206%202%2010%202c-2-4-6-6-10-6h-12z'%20fill='%23f8fafc'%20opacity='0.75'%20/%3e%3cpath%20d='M64%2086c-6%200-12%204-14%2010%204%202%2010%204%2014%204s10-2%2014-4c-2-6-8-10-14-10z'%20fill='url(%23beard)'%20stroke='%23bae6fd'%20stroke-width='1.4'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M42%2064c-4-8-6-18-6-28-6%208-10%2018-10%2030%204-2%2010-2%2016-2z'%20fill='%230ea5e9'%20opacity='0.5'%20/%3e%3cpath%20d='M86%2064c4-8%206-18%206-28%206%208%2010%2018%2010%2030-4-2-10-2-16-2z'%20fill='%230ea5e9'%20opacity='0.5'%20/%3e%3cpath%20d='M34%2098c-6%202-12%206-14%2012%206%200%2012-2%2018-4'%20stroke='%23bae6fd'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cpath%20d='M94%20106c6%202%2012%204%2018%204-2-6-8-10-14-12'%20stroke='%23bae6fd'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3c/svg%3e",_t="/",Ge={saunaBeer:`${_t}assets/ui/sauna-beer.svg`,saunojaRoster:`${_t}assets/ui/saunoja-roster.svg`,resource:`${_t}assets/ui/resource.svg`,sisu:`${_t}assets/ui/resource.svg`,sound:`${_t}assets/ui/sound.svg`},vh={images:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=","building-farm":gh,"building-barracks":ph,"building-city":Ah,"building-mine":yh,"unit-soldier":Mh,"unit-archer":bh,"unit-avanto-marauder":wh,"icon-sauna-beer":Ge.saunaBeer,"icon-saunoja-roster":Ge.saunojaRoster,"icon-resource":Ge.resource,"icon-sound":Ge.sound}};let jr=null;function Sh(e){jr=e}function Or(){return jr}const Eh=["city"],Ch=1e4,Bh=12e3;function xh(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function ba(e){return Object.freeze({strongholds:{...e.strongholds},roster:{...e.roster},economy:{...e.economy},startedAt:e.startedAt})}function wa(e){const t={[C.SAUNA_BEER]:0,[C.SAUNAKUNNIA]:0,[C.SISU]:0};return Object.values(C).forEach(n=>{t[n]=e.getResource(n)}),t}class zh{timeSource;state;map;getRosterCount;strongholdTypes;rosterGraceMs;bankruptcyGraceMs;progress;startResources;strongholds=new Map;progressListeners=new Set;resolutionListeners=new Set;mapDisposer=null;rosterTimeout=null;bankruptcyTimeout=null;bankruptSince=null;wipeSince=null;resolution=null;disposed=!1;constructor(t){this.timeSource=typeof t.timeSource=="function"?t.timeSource:xh,this.state=t.state,this.map=t.map,this.getRosterCount=t.getRosterCount;const n=t.strongholdTypes?.length?t.strongholdTypes:Eh;this.strongholdTypes=new Set(n),this.rosterGraceMs=Math.max(0,t.rosterWipeGraceMs??Ch),this.bankruptcyGraceMs=Math.max(0,t.bankruptcyGraceMs??Bh),this.startResources=wa(this.state);const s=this.state.getResource(C.SAUNA_BEER),o=Math.max(0,Math.round(this.getRosterCount()))||0;this.progress={strongholds:{total:0,destroyed:0,remaining:0},roster:{active:o,totalDeaths:0,wipeSince:null,wipeDurationMs:0},economy:{beer:s,worstBeer:s,bankruptSince:null,bankruptDurationMs:0},startedAt:this.timeSource()},this.bootstrapStrongholds(),this.attachMapListener(),this.attachEventListeners(),this.emitProgress()}onProgress(t){this.progressListeners.add(t)}offProgress(t){this.progressListeners.delete(t)}onResolution(t){if(this.resolution){t(this.resolution);return}this.resolutionListeners.add(t)}offResolution(t){this.resolutionListeners.delete(t)}getProgress(){return ba(this.progress)}dispose(){if(!this.disposed){if(this.disposed=!0,this.clearRosterTimer(),this.clearBankruptcyTimer(),this.mapDisposer){try{this.mapDisposer()}catch(t){console.warn("Failed to detach map listener",t)}this.mapDisposer=null}z.off("unitDied",this.handleUnitDied),z.off("unitSpawned",this.handleUnitSpawned),z.off("resourceChanged",this.handleResourceChanged)}}bootstrapStrongholds(){this.map.forEachTile((t,n)=>{if(this.isStronghold(t.building)){const s=this.coordKey(n);this.strongholds.set(s,{alive:!0})}}),this.updateStrongholdTotals()}attachMapListener(){this.mapDisposer=this.map.addTileChangeListener((t,n,s)=>{if(s!=="building"&&s!=="created")return;const o=this.coordKey(t),a=this.strongholds.get(o);this.isStronghold(n.building)?a?a.alive||(a.alive=!0):this.strongholds.set(o,{alive:!0}):a?.alive&&(a.alive=!1),this.updateStrongholdTotals(),this.emitProgress(),this.evaluateResolution()})}attachEventListeners(){z.on("unitDied",this.handleUnitDied),z.on("unitSpawned",this.handleUnitSpawned),z.on("resourceChanged",this.handleResourceChanged)}handleUnitDied=({unitFaction:t})=>{t==="player"&&(this.progress.roster.totalDeaths+=1,this.refreshRosterStatus(),this.emitProgress(),this.evaluateResolution())};handleUnitSpawned=({unit:t})=>{t.faction==="player"&&(this.refreshRosterStatus(),this.emitProgress())};handleResourceChanged=({resource:t,total:n})=>{t===C.SAUNA_BEER&&(this.progress.economy.beer=n,n<this.progress.economy.worstBeer&&(this.progress.economy.worstBeer=n),n<0?this.bankruptSince===null&&(this.bankruptSince=this.timeSource(),this.progress.economy.bankruptSince=this.bankruptSince,this.startBankruptcyTimer()):(this.updateBankruptcyDuration(),this.bankruptSince=null,this.progress.economy.bankruptSince=null,this.clearBankruptcyTimer()),this.emitProgress())};startBankruptcyTimer(){if(this.bankruptcyTimeout===null){if(this.bankruptcyGraceMs<=0){this.resolve("lose","bankruptcy");return}this.bankruptcyTimeout=setTimeout(()=>{this.updateBankruptcyDuration(),this.resolve("lose","bankruptcy")},this.bankruptcyGraceMs)}}clearBankruptcyTimer(){this.bankruptcyTimeout!==null&&(clearTimeout(this.bankruptcyTimeout),this.bankruptcyTimeout=null)}startRosterTimer(){if(this.rosterTimeout===null){if(this.rosterGraceMs<=0){this.resolve("lose","rosterWipe");return}this.rosterTimeout=setTimeout(()=>{this.updateRosterDuration(),this.resolve("lose","rosterWipe")},this.rosterGraceMs)}}clearRosterTimer(){this.rosterTimeout!==null&&(clearTimeout(this.rosterTimeout),this.rosterTimeout=null)}updateStrongholdTotals(){const t=this.strongholds.size;let n=0;for(const s of this.strongholds.values())s.alive&&(n+=1);this.progress.strongholds.total=t,this.progress.strongholds.remaining=n,this.progress.strongholds.destroyed=Math.max(0,t-n)}refreshRosterStatus(){const t=Math.max(0,Math.round(this.getRosterCount()));this.progress.roster.active=t,t<=0?(this.wipeSince===null&&(this.wipeSince=this.timeSource(),this.progress.roster.wipeSince=this.wipeSince),this.startRosterTimer()):(this.updateRosterDuration(),this.wipeSince=null,this.progress.roster.wipeSince=null,this.clearRosterTimer())}updateBankruptcyDuration(){if(this.bankruptSince===null)return;const t=this.timeSource()-this.bankruptSince;t>this.progress.economy.bankruptDurationMs&&(this.progress.economy.bankruptDurationMs=t)}updateRosterDuration(){if(this.wipeSince===null)return;const t=this.timeSource()-this.wipeSince;t>this.progress.roster.wipeDurationMs&&(this.progress.roster.wipeDurationMs=t)}evaluateResolution(){if(!this.resolution){if(this.progress.strongholds.total>0&&this.progress.strongholds.remaining===0){this.resolve("win","strongholds");return}if(this.wipeSince!==null&&this.rosterGraceMs<=0){this.resolve("lose","rosterWipe");return}this.bankruptSince!==null&&this.bankruptcyGraceMs<=0&&this.resolve("lose","bankruptcy")}}resolve(t,n){if(this.resolution)return;this.updateRosterDuration(),this.updateBankruptcyDuration();const s=this.timeSource(),o=Math.max(0,s-this.progress.startedAt),a=ba({...this.progress,roster:{...this.progress.roster,wipeSince:this.wipeSince},economy:{...this.progress.economy,bankruptSince:this.bankruptSince}}),r=this.computeRewards();this.resolution=Object.freeze({outcome:t,cause:n,timestamp:s,durationMs:o,summary:a,rewards:r}),this.emitResolution(),this.dispose()}emitProgress(){const t=this.getProgress();for(const n of this.progressListeners)try{n(t)}catch(s){console.error("Objective progress listener failed",s)}}emitResolution(){if(!this.resolution)return;const t=this.resolution;for(const n of this.resolutionListeners)try{n(t)}catch(s){console.error("Objective resolution listener failed",s)}this.resolutionListeners.clear()}computeRewards(){const t=wa(this.state);return{resources:{[C.SAUNA_BEER]:{final:t[C.SAUNA_BEER],delta:t[C.SAUNA_BEER]-this.startResources[C.SAUNA_BEER]},[C.SAUNAKUNNIA]:{final:t[C.SAUNAKUNNIA],delta:t[C.SAUNAKUNNIA]-this.startResources[C.SAUNAKUNNIA]},[C.SISU]:{final:t[C.SISU],delta:t[C.SISU]-this.startResources[C.SISU]}}}}coordKey(t){return`${t.q},${t.r}`}isStronghold(t){return t?this.strongholdTypes.has(t):!1}}function Ih(e){return new zh(e)}const Qr="autobattles:saunojas";function Hr(){try{return globalThis.localStorage??null}catch{return null}}function Nh(){const e=Hr();if(!e)return[];try{const t=e.getItem(Qr);if(!t)return[];const n=JSON.parse(t);if(!Array.isArray(n))return[];const s=[];for(const o of n){if(!o||typeof o!="object")continue;const a=o,r=a.id;if(typeof r!="string"||r.length===0)continue;const i=a.coord,c=i&&typeof i=="object"&&typeof i.q=="number"&&Number.isFinite(i.q)&&typeof i.r=="number"&&Number.isFinite(i.r)?{q:i.q,r:i.r}:void 0,l=a.traits,d=Array.isArray(l)?l.filter(h=>typeof h=="string"):void 0,u=typeof a.upkeep=="number"?a.upkeep:void 0,f=typeof a.xp=="number"?a.xp:void 0;s.push(ro({id:r,name:typeof a.name=="string"?a.name:void 0,coord:c,maxHp:typeof a.maxHp=="number"?a.maxHp:void 0,hp:typeof a.hp=="number"?a.hp:void 0,steam:typeof a.steam=="number"?a.steam:void 0,traits:d,upkeep:u,xp:f,selected:!!a.selected,items:Array.isArray(a.items)?a.items:void 0,baseStats:a.baseStats,effectiveStats:a.effectiveStats,equipment:a.equipment,modifiers:Array.isArray(a.modifiers)?a.modifiers:void 0}))}return s}catch(t){return console.warn("Failed to load Saunoja units from storage",t),[]}}function Ph(e){const t=Hr();if(t)try{const n=e.map(s=>({id:s.id,name:s.name,coord:{q:s.coord.q,r:s.coord.r},maxHp:s.maxHp,hp:s.hp,steam:s.steam,traits:[...s.traits],upkeep:s.upkeep,xp:s.xp,selected:s.selected,baseStats:{health:s.baseStats.health,attackDamage:s.baseStats.attackDamage,attackRange:s.baseStats.attackRange,movementRange:s.baseStats.movementRange,...typeof s.baseStats.defense=="number"&&Number.isFinite(s.baseStats.defense)?{defense:s.baseStats.defense}:{},...typeof s.baseStats.shield=="number"&&Number.isFinite(s.baseStats.shield)?{shield:s.baseStats.shield}:{},...typeof s.baseStats.visionRange=="number"&&Number.isFinite(s.baseStats.visionRange)?{visionRange:s.baseStats.visionRange}:{}},effectiveStats:{health:s.effectiveStats.health,attackDamage:s.effectiveStats.attackDamage,attackRange:s.effectiveStats.attackRange,movementRange:s.effectiveStats.movementRange,...typeof s.effectiveStats.defense=="number"&&Number.isFinite(s.effectiveStats.defense)?{defense:s.effectiveStats.defense}:{},...typeof s.effectiveStats.shield=="number"&&Number.isFinite(s.effectiveStats.shield)?{shield:s.effectiveStats.shield}:{},...typeof s.effectiveStats.visionRange=="number"&&Number.isFinite(s.effectiveStats.visionRange)?{visionRange:s.effectiveStats.visionRange}:{}},equipment:jt.reduce((o,a)=>{const r=s.equipment?.[a]??null;return o[a]=r?{id:r.id,name:r.name,description:r.description,icon:r.icon,rarity:r.rarity,quantity:r.quantity,slot:r.slot}:null,o},{}),items:s.items.map(o=>({id:o.id,name:o.name,description:o.description,icon:o.icon,rarity:o.rarity,quantity:o.quantity})),modifiers:s.modifiers.map(o=>({id:o.id,name:o.name,description:o.description,remaining:o.remaining,duration:o.duration,appliedAt:o.appliedAt,stacks:o.stacks,source:o.source}))}));t.setItem(Qr,JSON.stringify(n))}catch(n){console.warn("Failed to persist Saunoja units",n)}}const Gr="autobattles:sauna-settings";function Ur(){try{return globalThis.localStorage??null}catch{return null}}function It(e,t){const n=typeof e=="number"&&Number.isFinite(e)?e:t,s=Math.max(0,Math.floor(n)),o=1+$s;return Math.max(0,Math.min(o,s))}function Dh(e){const t=Ur();if(!t)return{maxRosterSize:It(e,e)};try{const n=t.getItem(Gr);if(!n)return{maxRosterSize:It(e,e)};const s=JSON.parse(n);return!s||typeof s!="object"?{maxRosterSize:It(e,e)}:{maxRosterSize:It(s.maxRosterSize,e)}}catch(n){return console.warn("Failed to load sauna settings from storage",n),{maxRosterSize:It(e,e)}}}function Fr(e){const t=Ur();if(!t)return;const n={maxRosterSize:It(e.maxRosterSize,e.maxRosterSize)};try{t.setItem(Gr,JSON.stringify(n))}catch(s){console.warn("Failed to persist sauna settings",s)}}const kh=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),Th=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Lh(e,t){const{rosterIcon:n,summaryLabel:s="Saunoja Roster"}=t;e.classList.add("sauna-roster"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("title","Active sauna battalion on the field"),e.dataset.tutorialTarget="upkeep",e.replaceChildren();const o=document.createElement("div");o.classList.add("sauna-roster__summary");const a=document.createElement("img");a.src=n,a.alt="Saunoja roster crest",a.decoding="async",a.classList.add("sauna-roster__icon");const r=document.createElement("div");r.classList.add("sauna-roster__text");const i=document.createElement("span");i.textContent=s,i.classList.add("sauna-roster__label");const c=document.createElement("span");c.textContent="0",c.classList.add("sauna-roster__value"),r.append(i,c),o.append(a,r);const l=document.createElement("div");l.classList.add("saunoja-card"),l.setAttribute("aria-live","polite"),l.hidden=!0;const d=document.createElement("h3");d.classList.add("saunoja-card__name"),d.textContent="Saunoja";const u=document.createElement("p");u.classList.add("saunoja-card__traits");const f=document.createElement("p");f.classList.add("saunoja-card__upkeep"),l.append(d,u,f),e.append(o,l);let h=null,m=null;function g(b){if(!b){l.hidden=!0;return}l.hidden=!1,l.dataset.unitId=b.id,d.textContent=b.name||"Saunoja";const I=b.traits.filter(x=>x.length>0),k=I.length>0?I.join(", "):"No notable traits yet";u.textContent=k,u.title=k;const T=Math.max(0,Math.round(b.upkeep)),w=`Upkeep: ${Th.format(T)} Beer`;f.textContent=w,f.title=w}function p(b){return b===1/0?"inf":!Number.isFinite(b)||b<=0?"0":String(Math.ceil(b))}function y(b){return[b.id,b.name,b.icon??"",b.rarity??"",b.description??"",b.quantity].join("^")}function M(b){return[b.id,b.name,b.description??"",p(b.duration),p(b.remaining),b.appliedAt??"",b.stacks??1,b.source??""].join("^")}function v(b){const{stats:I}=b,k=b.traits.join("|"),T=b.items.map(y).join("|"),w=b.modifiers.map(M).join("|");return[b.id,b.name,b.upkeep,b.status,b.selected?1:0,I.health,I.maxHealth,I.attackDamage,I.attackRange,I.movementRange,I.defense??0,I.shield??0,k,T,w].join("~")}function D(b){return`${b.length}:${b.map(v).join("||")}`}return{updateSummary(b){const I=Math.max(0,Math.floor(b.count)),k=kh.format(I);c.textContent=k,e.setAttribute("aria-label",`Saunoja roster: ${k} active attendants`),e.setAttribute("title",`Saunoja roster  ${k} active attendants`),g(b.card)},installRenderer(b){m=null,h=b},renderRoster(b){if(!h)return;const I=D(b);I!==m&&(m=I,h(b))},destroy(){h=null,m=null,e.replaceChildren()}}}const Rh={[C.SAUNA_BEER]:"Sauna Beer",[C.SAUNAKUNNIA]:"Saunakunnia",[C.SISU]:"Sisu"},jh='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';function Oh(e){if(!Number.isFinite(e)||e<=0)return"0:00";const t=Math.round(e/1e3),n=Math.max(0,t%60).toString().padStart(2,"0"),s=Math.floor(t/60),o=(s%60).toString().padStart(2,"0"),a=Math.floor(s/60);return a>0?`${a}:${o}:${n}`:`${s}:${n}`}function Qh(e){switch(e.cause){case"strongholds":return"All rival strongholds have fallen.";case"rosterWipe":return"Every attendant is downno one remains to hold the line.";case"bankruptcy":return"Upkeep debts have exhausted the steam reserves.";default:return""}}function Hh(e){if(!Number.isFinite(e)||e===0)return"0";const t=Math.round(e*100)/100;return`${t>0?"+":""}${t}`}function Gh(e,t){const n=document.createElement("ul");n.className="end-screen__rewards-list";for(const s of Object.values(C)){const o=e.rewards.resources[s];if(!o)continue;const a=document.createElement("li");a.className="end-screen__reward-item";const r=document.createElement("span");r.className="end-screen__reward-label",r.textContent=t[s]??s;const i=document.createElement("span");i.className="end-screen__reward-value",i.textContent=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(Math.round(o.final));const c=document.createElement("span");c.className="end-screen__reward-delta",c.textContent=Hh(o.delta),c.dataset.polarity=o.delta>=0?"positive":"negative",a.append(r,i,c),n.append(a)}return n}function Uh(e,t,n){const s=o=>{if(o.key==="Escape"){o.preventDefault(),n?.();return}if(o.key!=="Tab")return;const a=t.querySelectorAll(jh);if(a.length===0){o.preventDefault(),t.focus();return}const r=a[0],i=a[a.length-1],c=document.activeElement;o.shiftKey?(c===r||!t.contains(c))&&(o.preventDefault(),i.focus()):(c===i||!t.contains(c))&&(o.preventDefault(),r.focus())};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}function Fh(e){const{container:t,resolution:n,onNewRun:s,onDismiss:o,currentNgPlusLevel:a}=e;if(!t)return{destroy(){},focusPrimary(){}};const r={...Rh,...e.resourceLabels??{}},i=document.createElement("div");i.className="end-screen",i.setAttribute("role","presentation");const c=document.createElement("section");c.className="end-screen__panel",c.setAttribute("role","dialog"),c.setAttribute("aria-modal","true");const l=`end-screen-title-${Date.now()}`;c.setAttribute("aria-labelledby",l),c.tabIndex=-1,c.dataset.outcome=n.outcome;const d=document.createElement("h2");d.className="end-screen__title",d.id=l,d.textContent=n.outcome==="win"?"Steamforged Victory":"Sauna Lost";const u=document.createElement("p");u.className="end-screen__subtitle",u.textContent=Qh(n);const f=document.createElement("dl");f.className="end-screen__metrics";const h=(T,w)=>{const x=document.createElement("dt");x.textContent=T,x.className="end-screen__metric-label";const A=document.createElement("dd");A.textContent=w,A.className="end-screen__metric-value",f.append(x,A)};h("Run time",Oh(n.durationMs)),h("Strongholds",`${n.summary.strongholds.destroyed}/${n.summary.strongholds.total}`),h("Roster losses",`${n.summary.roster.totalDeaths}`),h("Deepest beer reserve",`${Math.round(n.summary.economy.worstBeer)}`);const m=document.createElement("div");m.className="end-screen__badges";const g=document.createElement("span");g.className="end-screen__badge",g.textContent=`NG+ ${Math.max(0,a)}`,m.append(g);const p=document.createElement("h3");p.className="end-screen__section-title",p.textContent="Rewards";const y=Gh(n,r),M=document.createElement("div");M.className="end-screen__actions";const v=document.createElement("button");v.type="button",v.className="end-screen__button end-screen__button--primary",v.textContent="New run (NG+)",v.addEventListener("click",()=>{s()});const D=document.createElement("button");D.type="button",D.className="end-screen__button",D.textContent="Review battlefield",D.addEventListener("click",()=>{o?.()}),M.append(v,D),c.append(d,u,m,f,p,y,M),i.append(c),t.append(i);const b=Uh(i,c,o),I=()=>{b(),i.remove()},k=()=>{requestAnimationFrame(()=>{v.focus({preventScroll:!0})})};return k(),{destroy:I,focusPrimary:k}}const Kr="autobattles4x.flags";function Yr(){if(typeof window>"u")return null;try{if("localStorage"in window&&window.localStorage)return window.localStorage}catch(e){console.warn("Unable to access localStorage for local flags",e)}return null}function Xr(){const e=Yr();if(!e)return{};try{const t=e.getItem(Kr);if(!t)return{};const n=JSON.parse(t);if(n&&typeof n=="object")return n}catch(t){console.warn("Failed to parse local flags, resetting.",t)}return{}}function Kh(e){const t=Yr();if(t)try{const n={};e.tutorial_done&&(n.tutorial_done=!0),t.setItem(Kr,JSON.stringify(n))}catch(n){console.warn("Failed to persist local flags",n)}}function Yh(){return Xr().tutorial_done===!0}function va(e){const t={...Xr()};t.tutorial_done=!0,Kh(t)}const Sa=200,Ea=3,Xh=2,Js={[C.SAUNA_BEER]:"Sauna Beer",[C.SAUNAKUNNIA]:"Saunakunnia",[C.SISU]:"Sisu"};function qr(e,t){const n=Number.isFinite(t)?Math.max(0,Math.floor(t)):0;if(!Number.isFinite(e))return n;const s=Math.max(0,Math.floor(e));return Math.max(0,Math.min(n,s))}let he=Oe(Ni()),Jr=1,ho=0,Ut=1,Zr=1,Wr=Math.random,Vr=Math.random;function ts(e){he=Oe(e),Jr=Di(he),ho=ki(he),Ut=Li(he),Zr=Ti(he),Wr=zo(he.runSeed,1),Vr=zo(he.runSeed,2)}ts(he);let ns=null,F=[];const Xe=new Map,at=new Map,Gt=new Map;let Ca=0,ss=null,Se=()=>{},bt=null,ae=null,os=null,rt=null,it=null,wt=!1,Ae=null,as=null,xe=null,dn=null;function qh(e){const t=at.get(e.id);return t?Gt.get(t)??null:null}function _r(e,t){e.effectiveStats={...t},e.maxHp=Math.max(1,Math.round(t.health)),e.hp=Math.min(e.maxHp,Math.max(0,Math.round(e.hp))),e.defense=typeof t.defense=="number"?Math.max(0,t.defense):void 0,e.shield=typeof t.shield=="number"?Math.max(0,t.shield):0;const n=qh(e);if(n){const s={health:e.effectiveStats.health,attackDamage:e.effectiveStats.attackDamage,attackRange:e.effectiveStats.attackRange,movementRange:e.effectiveStats.movementRange};typeof e.effectiveStats.defense=="number"&&(s.defense=e.effectiveStats.defense),typeof e.effectiveStats.visionRange=="number"&&(s.visionRange=e.effectiveStats.visionRange),n.updateStats(s),typeof e.effectiveStats.shield=="number"?n.setShield(e.effectiveStats.shield):e.shield<=0&&n.setShield(0)}}function mo(e,t){const n=t??ve(e.equipment),s=Yn(e.baseStats,n);return _r(e,s),s}const Jh=Object.freeze(["health","attackDamage","attackRange","movementRange","defense","shield"]);function Ba(e){return e?{id:e.id,name:e.name,quantity:e.quantity,rarity:e.rarity}:null}function xa(e,t){const n=e[t];return typeof n=="number"&&Number.isFinite(n)?Math.round(n):0}function Zh(e,t){const n=[];for(const s of Jh){const o=xa(t,s),a=xa(e,s),r=o-a;r!==0&&n.push({stat:s,delta:r})}return n}function Wh(e,t){if(!t||ve(e.equipment).length>0)return;const s={health:Math.max(1,Math.round(t.getMaxHealth())),attackDamage:Math.max(0,Math.round(t.stats.attackDamage)),attackRange:Math.max(0,Math.round(t.stats.attackRange)),movementRange:Math.max(0,Math.round(t.stats.movementRange)),defense:typeof t.stats.defense=="number"&&Number.isFinite(t.stats.defense)?Math.max(0,t.stats.defense):e.baseStats.defense,shield:e.baseStats.shield??0,visionRange:typeof t.stats.visionRange=="number"&&Number.isFinite(t.stats.visionRange)?Math.max(0,t.stats.visionRange):e.baseStats.visionRange};e.baseStats=s,mo(e)}function tn(){dn&&(dn.destroy(),dn=null)}function Vh(){if(Yh()){tn();return}tn(),dn=rd({onComplete:()=>{va(),tn()},onSkip:()=>{va(),tn()}}),dn.start()}function za(e){os=e,ae&&(ae.installRenderer(e),rt&&(ae.renderRoster(rt),rt=null))}function _h(){return Nh()}function Ze(){Ph(F)}function $h(e=Math.random){typeof e!="function"&&(e=Math.random);const t=Math.max(0,Math.floor(Dt)),n=Math.max(t,Math.floor(Hn));if(n===t)return Math.max(Dt,Math.min(Hn,t));const s=n-t+1,o=Math.floor(e()*s)+t;return Math.max(Dt,Math.min(Hn,o))}function em(e){const n=(Array.isArray(e.traits)?e.traits:[]).length>=3,s=Number.isFinite(e.upkeep),o=Number.isFinite(e.xp);return!n||!s||!o}function $r(e){e.traits=Nu(),e.upkeep=$h(),e.xp=0}function tm(e,t,n){ns=e,Ae&&(Ae.dispose(),Ae=null),Ae=Su({canvas:e,overlay:n,mapRenderer:go,getUnitById:s=>Gt.get(s),requestDraw:()=>{re()}}),ae&&ae.destroy(),ae=Lh(t,{rosterIcon:Ge.saunojaRoster}),os&&ae.installRenderer(os),rt&&(ae.renderRoster(rt),rt=null),Ee()}const ce=new Ui(10,10,32),nm=new Cc(ce),go=new Zd(ce),rs=()=>{go.invalidateCache(),re()};z.on("buildingPlaced",rs);z.on("buildingRemoved",rs);ce.forEachTile(e=>e.setFogged(!0));xi();const ee=[];function Ia(e){return`${e.q},${e.r}`}function sm(){const e=new Set;for(const c of ee)c.isDead()||e.add(Ia(c.coord));const t=[],{minQ:n,maxQ:s,minR:o,maxR:a}=ce,r=c=>{const l=Ia(c);e.has(l)||(ce.ensureTile(c.q,c.r),t.push(c))};for(let c=n;c<=s;c++)r({q:c,r:o}),a!==o&&r({q:c,r:a});for(let c=o+1;c<=a-1;c++)r({q:n,r:c}),s!==n&&r({q:s,r:c});if(t.length===0)return;const i=Math.floor(Math.random()*t.length);return t[i]}function om(e){const t=Xe.get(e);t&&(Xe.delete(e),at.get(t.id)===e&&at.delete(t.id))}function am(e){const t=Xe.get(e.id);if(t)return{saunoja:t,created:!1,attached:!1};let n=F.find(r=>r.id===e.id);n||(n=F.find(r=>!at.has(r.id)));let s=!1;n||(n=ro({id:`saunoja-${F.length+1}`,coord:{q:e.coord.q,r:e.coord.r}}),F.push(n),s=!0);const o=at.get(n.id);o&&o!==e.id&&Xe.delete(o),Xe.set(e.id,n),at.set(n.id,e.id),Wh(n,e),_r(n,n.effectiveStats);const a=em(n);return(s||a)&&$r(n),{saunoja:n,created:s,attached:!0}}function ei(){let e=!1;for(const t of ee){if(t.faction!=="player"||t.isDead())continue;const{saunoja:n,created:s,attached:o}=am(t);(s||o)&&(e=!0);const a=Number.isFinite(t.stats.health)?Math.max(0,t.stats.health):0;n.hp!==a&&(n.hp=a,e=!0);const r=Number.isFinite(t.getMaxHealth())?Math.max(1,t.getMaxHealth()):1;n.maxHp!==r&&(n.maxHp=r,e=!0);const i=t.getShield(),c=Number.isFinite(i)?Math.max(0,i):0;n.shield!==c&&(n.shield=c,e=!0);const d=t?.lastHitAt;Number.isFinite(d)&&n.lastHitAt!==d&&(n.lastHitAt=d,e=!0);const{q:u,r:f}=t.coord;(n.coord.q!==u||n.coord.r!==f)&&(n.coord={q:u,r:f},e=!0,n.selected&&Ao(n.coord))}return e&&Ze(),e}function ti(e,t){if(e.faction==="player"){const a=(t??Xe.get(e.id)??null)?.name?.trim();if(a)return a}return`${(e.constructor?.name??"Unit").replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase()} ${e.id}`.trim()}function ms(e){if(Gt.has(e.id))return;ee.push(e),Gt.set(e.id,e);let t=null;e.faction==="player"&&(ei()||yn(),t=Xe.get(e.id)??null),ns&&re(),e.faction==="player"&&(Se(`Our ${ti(e,t)} emerges from the steam.`),Ee())}const ni=({unit:e})=>{ms(e)};z.on("unitSpawned",ni);const si=()=>{yn()},Lt=()=>{yn()};z.on("inventoryChanged",si);z.on("modifierAdded",Lt);z.on("modifierRemoved",Lt);z.on("modifierExpired",Lt);const oi=()=>{Ee()};z.on("unit:stats:changed",oi);function rm(e){const t=Xe.get(e.id);if(!t)return 0;const n=Number.isFinite(t.upkeep)?t.upkeep:0;return n>0?n*Jr:0}const J=new ji(1e3),un=new Ru,po=J.load(ce);if(po){const e=J.getNgPlusState();ts(e),Ts(e)}else{const e=J.setNgPlusState(he);ts(e),Ts(e)}if(!po&&he.ngPlusLevel>0){const e=Math.round(75*he.ngPlusLevel);e>0&&J.addResource(C.SAUNA_BEER,e)}const ai=Dh(Ut),is=qr(ai.maxRosterSize,Ut);is!==ai.maxRosterSize&&Fr({maxRosterSize:is});const Me=$c({q:Math.floor(ce.width/2),r:Math.floor(ce.height/2)},void 0,{maxRosterSize:is});let Na=is;const ri=(e,t={})=>{const n=qr(e,Ut);return n!==Me.maxRosterSize&&(Me.maxRosterSize=n),t.persist&&n!==Na&&(Fr({maxRosterSize:n}),Na=n),n},im=e=>{Ca+=1;const t=`p${Date.now()}-${Ca}`,n=oo(J,"soldier",t,e,"player");return n&&ms(n),n??null},cm=new Al({difficulty:Zr,random:Wr,eliteOdds:ho}),ii=new Oi(1e3,e=>{const t=e/1e3;J.tick();const n=ri(Me.maxRosterSize);ku({dt:t,state:J,sauna:Me,heat:Me.heatTracker,units:ee,getUnitUpkeep:rm,pickSpawnTile:()=>sr(Me.pos,ee),spawnBaseUnit:im,minUpkeepReserve:Math.max(1,Dt),maxSpawns:Ut,rosterCap:n,getRosterCount:Mo}),cm.update(t,ee,ms,sm),nm.tick(ee,t),cc(t),ei()&&Ee(),J.save();for(const s of ee)s.isDead()||s.faction!=="player"||ce.revealAround(s.coord,s.getVisionRange(),{autoFrame:!1});re()}),lm=e=>{wt&&(wt=!1),ii.stop(),it!==null&&(cancelAnimationFrame(it),it=null),re();const t=document.getElementById("ui-overlay");if(!t)return;xe&&(xe.destroy(),xe=null);const n=he.ngPlusLevel,s=Pi(he,{outcome:e.outcome});Ts(s),J.setNgPlusState(s),ts(s),xe=Fh({container:t,resolution:e,currentNgPlusLevel:n,resourceLabels:Js,onNewRun:()=>{try{typeof window<"u"&&window.localStorage?.removeItem?.("gameState")}catch(a){console.warn("Failed to reset saved game state for NG+",a)}typeof window<"u"&&typeof window.location?.reload=="function"&&window.setTimeout(()=>window.location.reload(),75)},onDismiss:()=>{xe&&(xe.destroy(),xe=null)}})};F=_h();if(F.length===0){const e=ro({id:"saunoja-1",coord:Me.pos,selected:!0,upkeep:0});$r(e),e.upkeep=0,F.push(e),Ze()}else{let e=!1,t=!1;for(const n of F)n.selected&&(e?(n.selected=!1,t=!0):e=!0);t&&Ze()}const dm=ee.some(e=>e.faction==="player"&&!e.isDead());if(!dm){J.canAfford(Ko,C.SAUNA_BEER)||J.addResource(C.SAUNA_BEER,Ko);const e=`u${ee.length+1}`,t=oo(J,"soldier",e,Me.pos,"player");t&&ms(t)}ce.revealAround(Me.pos,3);as=Ih({state:J,map:ce,getRosterCount:Mo,rosterWipeGraceMs:8e3,bankruptcyGraceMs:12e3});as.onResolution(lm);const um=yl(Me,{getRosterCapLimit:()=>Ut,updateMaxRosterSize:(e,t)=>ri(e,{persist:t?.persist})}),{update:fm,dispose:hm}=Gl(J,{saunakunnia:Ge.resource,sisu:Ge.sisu,saunaBeer:Ge.saunaBeer,sound:Ge.sound},{useSisuBurst:()=>{const e=Tl(J,ee);return e?(Ye("sisu"),Se(`Sisu bursts forth, spending ${rn} grit to steel our attendants.`)):Ye("error"),e},torille:()=>{const e=Rl(J,ee,Me.pos,ce);return e?Se(`Torille! Our warriors regroup at the sauna to rally their spirits for ${cn} SISU.`):Ye("error"),e}});function mm(){const e=F.find(t=>t.selected)??null;return e?{baseStats:{...e.baseStats},loadout:ve(e.equipment),currentStats:{...e.effectiveStats}}:null}const gm=th(un,{getSelectedUnitId:()=>F.find(e=>e.selected)?.id??null,getComparisonContext:()=>mm(),onEquip:(e,t,n)=>yo(e,t)});function pm(){bt&&(bt(),bt=null);const e=nd(J,{onRosterSelect:bm,onRosterRendererReady:za,onRosterEquipSlot:vm,onRosterUnequipSlot:Sm});Se=e.log,e.addEvent,za(e.renderRoster),bt=e.dispose}pm();Ee();Vh();po||(J.addResource(C.SAUNA_BEER,Sa),Se(`Quartermaster stocks ${Sa} bottles of ${Js[C.SAUNA_BEER]} to launch your campaign.`),J.addResource(C.SAUNAKUNNIA,Ea),Se(`Sauna elders honor your leadership with ${Ea} ${Js[C.SAUNAKUNNIA]} to celebrate your arrival.`));const Ps=F.find(e=>e.selected);Ps&&(ss={q:Ps.coord.q,r:Ps.coord.r});function Am(e,t){return!e||!t?e===t:e.q===t.q&&e.r===t.r}function Ao(e){return Am(ss,e)?!1:(ss=e?{q:e.q,r:e.r}:null,!0)}function ci(e){let t=!1;for(const n of F)e&&n===e||n.selected&&(n.selected=!1,t=!0);return t}function ym(){let e=!1;return ci()&&(e=!0),Ao(null)&&(e=!0),e}function Mm(e){if(!e)return!1;const t=so(e.type);if(!t)return!1;const n=mn(t,1),s=e.stats;return s.health>n.health||s.attackDamage>n.attackDamage||s.attackRange>n.attackRange||s.movementRange>n.movementRange}function li(e){let t=!1;return e.selected||(e.selected=!0,t=!0),ci(e)&&(t=!0),Ao(e.coord)&&(t=!0),t}function bm(e){const t=F.find(n=>n.id===e);t&&li(t)&&(Ze(),Ee(),re())}function di(e){const t=vi(e.x,e.y,ce.hexSize),n=F.find(o=>o.coord.q===t.q&&o.coord.r===t.r);(n?li(n):ym())&&(Ze(),Ee(),re())}function yo(e,t){const n=F.find(l=>l.id===e);if(!n)return{success:!1,reason:"unit-missing"};const s=ve(n.equipment),o=Yn(n.baseStats,s),a=jc(n,t);if(!a.success)return{success:!1,reason:a.reason};const r=mo(n,a.loadout);z.emit("unit:stats:changed",{unitId:n.id,stats:r}),z.emit("inventoryChanged",{}),Ze(),Ee();const i=s.find(l=>l.slot===a.slot)??null;return{success:!0,comparison:{slot:a.slot,previous:Ba(i),next:Ba(a.item??null),deltas:Zh(o,r)}}}function wm(e,t){const n=F.find(u=>u.id===e);if(!n)return null;const s=Oc(n,t);if(!s.success||!s.removed)return null;const o=mo(n,s.loadout);z.emit("unit:stats:changed",{unitId:n.id,stats:o}),z.emit("inventoryChanged",{}),Ze(),Ee();const{id:a,name:r,description:i,icon:c,rarity:l,quantity:d}=s.removed;return{id:a,name:r,description:i,icon:c,rarity:l,quantity:d}}function vm(e,t){const s=un.getStash().findIndex(o=>Qc(o.id,t));return s===-1?!1:un.equipFromStash(s,e,yo)}function Sm(e,t){return un.unequipToStash(e,t,wm)}function re(){if(!ns)return;const e=ns.getContext("2d"),t=Or();if(!e||!t)return;if(Ae){const o=typeof performance<"u"?performance.now():Date.now();Ae.step(o)}const n=Ae?.getShakeOffset()??{x:0,y:0},s=Ae?{getUnitAlpha:o=>Ae.getUnitAlpha(o.id)}:void 0;e.save(),(n.x!==0||n.y!==0)&&e.translate(n.x,n.y),su(e,go,t.images,ee,ss,{saunojas:{units:F,draw:Bu},sauna:Me,fx:s}),e.restore()}const ui=({policy:e})=>{Se(`Sauna council toasts a fresh keg for policy: ${e}.`)};z.on("policyApplied",ui);const fi=({unitId:e,attackerFaction:t,unitFaction:n})=>{const s=ee.findIndex(d=>d.id===e),o=s!==-1?ee[s]:null,a=o?{q:o.coord.q,r:o.coord.r}:null,r=n==="player"?Xe.get(e)??null:null;let i=!1;if(n==="player"){const d=r??F.find(u=>at.get(u.id)===e||u.id===e)??null;d&&(d.hp!==0&&(d.hp=0,i=!0),d.shield!==0&&(d.shield=0,i=!0))}const c=o?ti(o,r):`unit ${e}`;if(s!==-1&&(ee.splice(s,1),Gt.delete(e),om(e),re()),i&&Ze(),n==="player"&&Ee(),t==="player"&&n&&n!=="player"){const d=Mm(o??null)||Vr()<ho,u=mh({factionId:n,elite:d});if(u.rolls.length>0){const f=F.find(h=>h.selected)??null;for(const h of u.rolls)if(un.addLoot(h,{unitId:f?.id,sourceTableId:u.tableId,equip:yo}).equipped){const g=f?.name??"our champion";Se(`Quartermaster fastens ${h.item.name} to ${g}.`)}else Se(`Quartermaster stores ${h.item.name} recovered from ${c}.`)}}t==="player"&&n&&n!=="player"&&(J.addResource(C.SAUNAKUNNIA,Xh),J.addResource(C.SISU,1),Se("Our grit surges  +1 SISU earned for the vanquished foe.")),a&&ce.revealAround(a,1,{autoFrame:!1}),Se(`The steam hushes as ${n==="player"?"our":"a rival"} ${c} grows still.`)};z.on("unitDied",fi);function Zs(){wt=!1,as?.dispose(),as=null,xe&&(xe.destroy(),xe=null),it!==null&&(cancelAnimationFrame(it),it=null);try{J.save()}catch(e){console.warn("Failed to persist game state during cleanup",e)}try{Ze()}catch(e){console.warn("Failed to persist Saunoja roster during cleanup",e)}Ae&&(Ae.dispose(),Ae=null),z.off("policyApplied",ui),z.off("unitDied",fi),z.off("unitSpawned",ni),z.off("inventoryChanged",si),z.off("modifierAdded",Lt),z.off("modifierRemoved",Lt),z.off("modifierExpired",Lt),z.off("unit:stats:changed",oi),z.off("buildingPlaced",rs),z.off("buildingRemoved",rs),bt&&(bt(),bt=null),gm.destroy(),hm(),ae&&(ae.destroy(),ae=null),rt=null,os=null,tn()}async function Em(){if(wt)return;if(!Or()){console.error("Cannot start game without loaded assets.");return}wt=!0,Ee(),re();try{await Lr(()=>{re()}).then(()=>{re()})}catch(s){console.warn("Failed to preload Saunoja icon before starting the game",s)}let t=performance.now();function n(s){if(!wt)return;const o=s-t;t=s,ii.tick(o),um(),fm(o),yn(),re(),wt&&(it=requestAnimationFrame(n))}it=requestAnimationFrame(n)}function Mo(){const e=new Set;for(const t of ee)t.faction==="player"&&!t.isDead()&&e.add(t.id);for(const t of F)e.add(t.id);return e.size}function Cm(){const e={engaged:0,reserve:1,downed:2},t=F.map(n=>{const s=at.get(n.id),o=s?Gt.get(s):void 0,a=o?!o.isDead()&&o.stats.health>0:!1,r=n.effectiveStats,i=n.baseStats,c=Math.round(o?Math.max(0,o.stats.health):Math.max(0,n.hp)),l=Math.round(o?Math.max(1,o.getMaxHealth()):Math.max(1,r.health)),d=Math.round(o?Math.max(0,o.stats.attackDamage):Math.max(0,r.attackDamage)),u=Math.round(o?Math.max(0,o.stats.attackRange):Math.max(0,r.attackRange)),f=Math.round(o?Math.max(0,o.stats.movementRange):Math.max(0,r.movementRange)),h=o?.stats.defense??r.defense??0,m=Math.round(Math.max(0,h)),g=o?o.getShield():r.shield??n.shield,p=Math.round(Math.max(0,g)),y=Math.max(0,Math.round(n.upkeep)),M=c<=0?"downed":a?"engaged":"reserve",v=n.items.map(k=>({...k})),D=n.modifiers.map(k=>({...k})),b=jt.map(k=>{const T=gn(k),w=n.equipment[k],x=w?{id:w.id,name:w.name,description:w.description,icon:w.icon,rarity:w.rarity,quantity:w.quantity,slot:k}:null,A=w?xm(w.modifiers,w.quantity):null;return{id:k,label:T.label,description:T.description,maxStacks:T.maxStacks,item:x,modifiers:A}}),I={health:Math.round(Math.max(0,i.health)),maxHealth:Math.round(Math.max(1,i.health)),attackDamage:Math.round(Math.max(0,i.attackDamage)),attackRange:Math.round(Math.max(0,i.attackRange)),movementRange:Math.round(Math.max(0,i.movementRange)),defense:typeof i.defense=="number"&&i.defense>0?Math.round(i.defense):void 0,shield:typeof i.shield=="number"&&i.shield>0?Math.round(i.shield):void 0};return{id:n.id,name:n.name,upkeep:y,status:M,selected:!!n.selected,traits:[...n.traits],stats:{health:c,maxHealth:l,attackDamage:d,attackRange:u,movementRange:f,defense:m>0?m:void 0,shield:p>0?p:void 0},baseStats:I,equipment:b,items:v,modifiers:D}});return t.sort((n,s)=>{const o=e[n.status]-e[s.status];return o!==0?o:n.name.localeCompare(s.name,"en")}),t}function Bm(){return F.length===0?null:F.find(e=>e.selected)??F.find(e=>e.hp>0)??F[0]}function xm(e,t){const n=Math.max(1,Math.round(t)),s={};return typeof e.health=="number"&&(s.health=e.health*n),typeof e.attackDamage=="number"&&(s.attackDamage=e.attackDamage*n),typeof e.attackRange=="number"&&(s.attackRange=e.attackRange*n),typeof e.movementRange=="number"&&(s.movementRange=e.movementRange*n),typeof e.defense=="number"&&(s.defense=e.defense*n),typeof e.shield=="number"&&(s.shield=e.shield*n),s}function zm(){const e=Mo(),t=Bm();let n=null;return t&&(n={id:t.id,name:t.name||"Saunoja",traits:[...t.traits],upkeep:Math.max(0,Math.round(t.upkeep))}),{count:e,card:n}}function yn(e){const t=Cm();rt=t,ae&&ae.renderRoster(t)}function Ee(){const e=zm();ae&&ae.updateSummary(e),yn()}function hi(e){if(!e)return{showLoader:()=>({update:()=>{},clear:()=>{},dispose:()=>{}}),showBanner:()=>null,removeTransientUI:()=>{}};const t=()=>{let r=e.querySelector(".hud-banner-stack");return r||(r=document.createElement("div"),r.className="hud-banner-stack",e.append(r)),r},n=(r,i,c)=>{let l=!1;const d=()=>{l||(l=!0,r.removeEventListener("transitionend",d),c())};r.addEventListener("transitionend",d),requestAnimationFrame(()=>{r.classList.add(i)}),window.setTimeout(d,400)};return{showLoader:(r="Heating the sauna stones")=>{const i=document.createElement("div");i.className="hud-loader",i.setAttribute("role","status"),i.setAttribute("aria-live","polite");const c=document.createElement("div");c.className="hud-loader__card";const l=document.createElement("div");l.className="hud-loader__spinner",l.setAttribute("aria-hidden","true");const d=document.createElement("p");d.className="hud-loader__message",d.textContent=r,c.append(l,d),i.append(c),e.append(i);let u=!1;return{update(f){d.textContent=f},clear(){u||n(i,"hud-loader--hidden",()=>{u=!0,i.remove()})},dispose(){u||(u=!0,i.remove())}}},showBanner:(r,i)=>{const c=t(),l=document.createElement("section");l.className=`hud-banner hud-banner--${r}`,l.setAttribute("role",r==="error"?"alert":"status"),l.setAttribute("aria-live",r==="error"?"assertive":"polite");const d=document.createElement("header");d.className="hud-banner__header";const u=document.createElement("p");u.className="hud-banner__title",u.textContent=i.title??(r==="error"?"Attention required":r==="warning"?"Heads up":"Status update"),d.append(u);const f=document.createElement("ul");f.className="hud-banner__list";for(const p of i.messages){const y=document.createElement("li");y.textContent=p,f.append(y)}if(l.append(d),i.messages.length&&l.append(f),i.actions?.length){const p=document.createElement("div");p.className="hud-banner__actions";for(const y of i.actions){const M=document.createElement("button");M.type="button",M.className=y.variant==="secondary"?"hud-banner__button hud-banner__button--secondary":"hud-banner__button",M.textContent=y.label,M.addEventListener("click",()=>{y.onClick()}),p.append(M)}l.append(p)}let h,m=!1;const g=()=>{m||(m=!0,h&&window.clearTimeout(h),n(l,"hud-banner--hide",()=>{l.remove(),c.hasChildNodes()||c.remove()}))};if(i.dismissible!==!1){const p=document.createElement("button");p.type="button",p.className="hud-banner__close",p.setAttribute("aria-label","Dismiss notification"),p.textContent="",p.addEventListener("click",()=>{g()}),d.append(p)}return c.append(l),i.autoCloseMs&&i.autoCloseMs>0&&(h=window.setTimeout(()=>g(),i.autoCloseMs)),{element:l,dismiss:g}},removeTransientUI:()=>{e.querySelectorAll(".hud-loader").forEach(r=>{r.remove()}),e.querySelectorAll(".hud-banner-stack").forEach(r=>{r.remove()})}}}async function Im(e){const t=Object.entries(e),n=await Promise.allSettled(t.map(([r,i])=>i.load().then(c=>({key:r,descriptor:i,value:c})))),s={},o=[],a=[];return n.forEach((r,i)=>{const[c,l]=t[i],d=l.label??String(c);if(r.status==="fulfilled"){const{value:f}=r.value;if(s[c]=f.value,f.warnings?.length)for(const h of f.warnings)o.push(d?`${d}: ${h}`:h);if(f.errors?.length)for(const h of f.errors)a.push(d?`${d}: ${h}`:h);return}const u=Nm(r.reason);a.push(d?`${d}: ${u}`:u)}),{resources:s,warnings:o,errors:a}}function Nm(e){if(e instanceof Error)return e.message;if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}const Pm="Heating the sauna stones",Dm="Polishing sauna ambience";function km(e){if(e instanceof Error&&e.message)return e.message;if(typeof e=="string"&&e.trim().length>0)return e;try{return JSON.stringify(e)}catch{return String(e)}}function Tm(e){const t=new Set,n=r=>{t.forEach(i=>i(r))},s=e.formatError??km;return{run:async r=>{n({type:"status",phase:"start",message:Pm});try{const{resources:i,warnings:c,errors:l}=await Im({assets:{label:"Core assets",load:async()=>{const u=await e.loadAssets(e.assetPaths);return{value:u.assets,errors:u.failures}}},saunojaIcon:{label:"Saunoja icon",load:async()=>{try{return await e.preloadSaunojaIcon(),{value:!0}}catch(u){return{value:!1,warnings:[`Unable to preload Saunoja icon (${s(u)})`]}}}}});if(e.shouldAbort?.(r)){n({type:"cancelled"});return}n({type:"status",phase:"progress",message:Dm});const d=i.assets;if(!d){const u=l.length?[...l]:["Critical assets were unavailable. Please refresh to try again."];n({type:"fatal",messages:u});return}if(l.length&&n({type:"errors",errors:l}),c.length&&n({type:"warnings",warnings:c}),e.setAssets(d),e.shouldAbort?.(r)){n({type:"cancelled"});return}e.startGame(),n({type:"ready",assets:d,warnings:c,errors:l})}catch(i){if(e.shouldAbort?.(r)){n({type:"cancelled"});return}n({type:"failure",error:i,message:s(i)})}},subscribe:r=>(t.add(r),()=>{t.delete(r)})}}const Lm="grabbing";function Rm(e,t){const n=t.dragCursor??Lm;let s=!1,o=null,a=0,r=0,i=null;const c=h=>{h.pointerType!=="mouse"||h.button!==0||(s=!0,o=h.pointerId,a=h.clientX,r=h.clientY,i=e.style.cursor??"",e.setPointerCapture?.(h.pointerId),e.style.cursor=n,t.onPanStart?.(h))},l=h=>{if(!s||o!==h.pointerId)return;const m=h.clientX-a,g=h.clientY-r;a=h.clientX,r=h.clientY,t.onPan(m,g,h)},d=h=>{!s||o!==h.pointerId||(s=!1,o=null,e.releasePointerCapture?.(h.pointerId),e.style.cursor=i??"",t.onPanEnd?.(h))},u=h=>{d(h)},f=h=>{d(h)};return e.addEventListener("pointerdown",c),e.addEventListener("pointermove",l),e.addEventListener("pointerup",u),e.addEventListener("pointercancel",f),e.addEventListener("pointerleave",f),()=>{e.removeEventListener("pointerdown",c),e.removeEventListener("pointermove",l),e.removeEventListener("pointerup",u),e.removeEventListener("pointercancel",f),e.removeEventListener("pointerleave",f),s&&o!==null&&e.releasePointerCapture?.(o),e.style.cursor=i??""}}const jm=10,Om=250;function At(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function Qm(e,t){const n=t.tapMaxMovement??jm,s=t.tapMaxDuration??Om;let o=null;const a=u=>{if(u.touches.length===1){const f=u.touches[0];o={mode:"pan",lastX:f.clientX,lastY:f.clientY,startX:f.clientX,startY:f.clientY,startTime:At(),moved:!1};return}if(u.touches.length>=2){const[f,h]=[u.touches[0],u.touches[1]];o={mode:"pinch",lastCenterX:(f.clientX+h.clientX)/2,lastCenterY:(f.clientY+h.clientY)/2,lastDistance:Math.hypot(f.clientX-h.clientX,f.clientY-h.clientY),startTime:At(),moved:!1}}},r=(u,f)=>{if(!o||o.mode!=="pan")return;const h=u.clientX-o.lastX,m=u.clientY-o.lastY;!o.moved&&Math.hypot(h,m)>1&&(o.moved=!0),o.lastX=u.clientX,o.lastY=u.clientY,t.onPan(h,m,f)},i=(u,f,h)=>{const m=(u.clientX+f.clientX)/2,g=(u.clientY+f.clientY)/2,p=Math.hypot(u.clientX-f.clientX,u.clientY-f.clientY);let y=1,M=0,v=0;o&&o.mode==="pinch"?(y=p/o.lastDistance,M=m-o.lastCenterX,v=g-o.lastCenterY):o={mode:"pinch",lastCenterX:m,lastCenterY:g,lastDistance:p,startTime:At(),moved:!1},!(!o||o.mode!=="pinch")&&(o.lastCenterX=m,o.lastCenterY=g,o.lastDistance=p,o.moved=!0,t.onPinch({centerX:m,centerY:g,scale:y,deltaCenterX:M,deltaCenterY:v},h))},c=u=>{if(!o||u.touches.length===0)return;if(u.preventDefault(),u.touches.length===1){const m=u.touches[0];o.mode!=="pan"&&(o={mode:"pan",lastX:m.clientX,lastY:m.clientY,startX:m.clientX,startY:m.clientY,startTime:At(),moved:!0}),r(m,u);return}const[f,h]=[u.touches[0],u.touches[1]];i(f,h,u)},l=()=>!o||o.mode!=="pan"||Math.hypot(o.lastX-o.startX,o.lastY-o.startY)>n?!1:At()-o.startTime<=s,d=u=>{if(o){if(u.touches.length===0){o.mode==="pan"&&t.onTap&&l()&&t.onTap({x:o.startX,y:o.startY},u),o=null;return}if(u.touches.length===1){const f=u.touches[0];o={mode:"pan",lastX:f.clientX,lastY:f.clientY,startX:f.clientX,startY:f.clientY,startTime:At(),moved:!0};return}if(u.touches.length>=2){const[f,h]=[u.touches[0],u.touches[1]];o={mode:"pinch",lastCenterX:(f.clientX+h.clientX)/2,lastCenterY:(f.clientY+h.clientY)/2,lastDistance:Math.hypot(f.clientX-h.clientX,f.clientY-h.clientY),startTime:At(),moved:!0}}}};return e.addEventListener("touchstart",a,{passive:!1}),e.addEventListener("touchmove",c,{passive:!1}),e.addEventListener("touchend",d),e.addEventListener("touchcancel",d),()=>{e.removeEventListener("touchstart",a),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",d),e.removeEventListener("touchcancel",d),o=null}}const Hm=.5,Gm=3.5;function Ws(e,t,n,s,o){const a=e.getBoundingClientRect(),r=t-a.left,i=n-a.top,c=a.width/2,l=a.height/2;return{x:o.x+(r-c)/s,y:o.y+(i-l)/s}}function Um(e){return Math.min(Gm,Math.max(Hm,e))}function mi(e,t,n,s=Q.zoom,o=Q){return Ws(e,t,n,s,o)}function gi(e,t,n,s){const o=Um(s);if(o===Q.zoom)return;const a={x:Q.x,y:Q.y},r=Ws(e,t,n,Q.zoom,a),i=Ws(e,t,n,o,a);Q.x+=r.x-i.x,Q.y+=r.y-i.y,Q.zoom=o,re()}function Ds(e,t){e===0&&t===0||(Q.x-=e/Q.zoom,Q.y-=t/Q.zoom,re())}function Fm(e){const t=window.devicePixelRatio||1,n=Math.max(window.innerWidth,1),s=Math.max(window.innerHeight,1);e.style.width=`${n}px`,e.style.height=`${s}px`,e.width=Math.round(n*t),e.height=Math.round(s*t);const o=e.getContext("2d");o&&o.setTransform(1,0,0,1,0,0),re()}const Km=.0015,Vs=[];let bo=0,qe=null,gs=hi(null),ne=null;function Ym(){if(typeof document>"u")return;const e=document.querySelector("[data-build-commit]");if(!e)return;const t="fddb28c".trim(),n=t.length>0&&t!=="unknown",s=n?`#${t}`:"DEV BUILD";e.textContent=s,e.dataset.state=n?"commit":"dev";const o=e.closest("#build-id");if(o){const a=n?`Build commit ${t}`:"Development build";o.setAttribute("aria-label",a),o.title=n?`Autobattles build ${t}`:"Unversioned development build",o.dataset.buildState=n?"release":"development"}}Ym();function Ue(e){Vs.push(e)}function Xm(){for(;Vs.length;){const e=Vs.pop();try{e?.()}catch(t){console.error("Error during cleanup",t)}}}function qm(e){Ue(()=>e.dispose())}function jn(e,t){const n=gs.showBanner(e,t);n&&Ue(()=>n.dismiss())}function Jm(e){switch(e.type){case"status":if(e.phase==="start"){ne?.dispose();const t=gs.showLoader(e.message);ne=t,qm(t)}else ne&&(ne.update(e.message),ne.clear(),ne=null);break;case"ready":ne?.clear(),ne=null;break;case"warnings":e.warnings.length&&(console.warn("Resource loader warnings",e.warnings),jn("warning",{title:"Heads up",messages:e.warnings,autoCloseMs:12e3}));break;case"errors":e.errors.length&&(console.error("Resource loader errors",e.errors),jn("error",{title:"Some resources failed to load",messages:e.errors,actions:[{label:"Reload",onClick:()=>window.location.reload(),variant:"primary"}]}));break;case"fatal":console.error("Critical assets failed to load",e.messages),ne?.clear(),ne=null,jn("error",{title:"Unable to start the sauna battle",messages:e.messages,actions:[{label:"Reload",onClick:()=>window.location.reload(),variant:"primary"}],dismissible:!1});break;case"failure":console.error("Failed to initialize resources",e.error),ne?.clear(),ne=null,jn("error",{title:"Failed to initialize",messages:[e.message],actions:[{label:"Reload",onClick:()=>window.location.reload(),variant:"primary"}]});break;case"cancelled":ne?.dispose(),ne=null;break}}const pi=Tm({assetPaths:vh,loadAssets:zi,preloadSaunojaIcon:Lr,setAssets:Sh,startGame:Em,shouldAbort:e=>e!==bo});pi.subscribe(Jm);function Pa(e){if(!qe)return;e.preventDefault();const t=Math.exp(-e.deltaY*Km),n=Q.zoom*t;gi(qe,e.clientX,e.clientY,n)}function Da(e){if(!qe)return;const t=mi(qe,e.clientX,e.clientY);di(t)}function Zm(e){e.addEventListener("click",Da),Ue(()=>e.removeEventListener("click",Da)),e.addEventListener("wheel",Pa,{passive:!1}),Ue(()=>e.removeEventListener("wheel",Pa));const t=Rm(e,{onPan:(s,o)=>{Ds(s,o)},dragCursor:"grabbing"});Ue(t);const n=Qm(e,{onPan:(s,o)=>{Ds(s,o)},onPinch:({centerX:s,centerY:o,scale:a,deltaCenterX:r,deltaCenterY:i})=>{gi(e,s,o,Q.zoom*a),Ds(r,i)},onTap:s=>{const o=mi(e,s.x,s.y);di(o)}});Ue(n)}function Wm(){bo+=1,Xm(),ne?.dispose(),ne=null,qe&&(qe.style.cursor=""),qe=null,gs.removeTransientUI(),Zs()}function Vm(){const e=document.getElementById("game-canvas"),t=document.getElementById("resource-bar"),n=document.getElementById("ui-overlay");if(!e||!t||!n){console.error("Autobattles4xFinsauna shell is missing the required canvas, overlay, or resource bar elements.",{hasCanvas:!!e,hasResourceBar:!!t,hasOverlay:!!n});return}qe&&Wm();const s=++bo;qe=e,gs=hi(n);const o=Hl();Ue(()=>o.dispose()),tm(e,t,n),Zm(e);const a=()=>Fm(e);window.addEventListener("resize",a),Ue(()=>window.removeEventListener("resize",a)),window.addEventListener("beforeunload",Zs),Ue(()=>window.removeEventListener("beforeunload",Zs)),a(),import.meta.vitest||pi.run(s)}function _m(){if(typeof document>"u")return;const e=()=>{document.removeEventListener("DOMContentLoaded",e),Vm()};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",e);return}e()}import.meta.vitest||_m();
