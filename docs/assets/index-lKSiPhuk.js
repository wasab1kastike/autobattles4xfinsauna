(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();class zi{listeners=new Map;on(t,n){const s=this.listeners.get(t)??[];s.push(n),this.listeners.set(t,s)}off(t,n){const s=this.listeners.get(t);if(!s)return;const a=s.indexOf(n);a!==-1&&(s.splice(a,1),s.length===0?this.listeners.delete(t):this.listeners.set(t,s))}emit(t,n){const s=this.listeners.get(t);if(s)for(const a of s)a(n)}}const E=new zi;class ta{type="farm";cost=50;beerPerTick=1}class Qo{type="barracks";cost=100;trainingCapacity=1}const Ho=Math.sqrt(3),Go=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}];function Ye(e,t){return{x:t*Ho*(e.q+e.r/2),y:t*(3/2)*e.r}}function tn(e,t,n){const s=(Ho/3*e-.3333333333333333*t)/n,a=2/3*t/n;return{q:s,r:a}}function Di(e,t,n){return Ii(tn(e,t,n))}function Xn(e){return Go.map(t=>({q:e.q+t.q,r:e.r+t.r}))}function nn(e,t){const n=-e.q-e.r,s=-t.q-t.r;return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(n-s))}function Ii(e){let t=e.q,n=e.r,s=-t-n,a=Math.round(t),o=Math.round(s),r=Math.round(n);const i=Math.abs(a-t),c=Math.abs(o-s),l=Math.abs(r-n);return i>c&&i>l?a=-o-r:c>l?o=-a-r:r=-a-o,{q:a,r}}const qn=new Set;let Gn=32;function Ni(e){return`${e.q},${e.r}`}function Rs(e,t){Gn=t,qn.add(Ni(e))}function Pi(e){if(qn.size===0)return{center:{x:0,y:0},zoom:1};const t=Gn*Math.sqrt(3),n=Gn*2,s=t/2,a=n/2;let o=1/0,r=1/0,i=-1/0,c=-1/0;for(const v of qn){const[P,b]=v.split(",").map(Number),{x:N,y:C}=Ye({q:P,r:b},Gn),I=N-s,w=C-a;o=Math.min(o,I),r=Math.min(r,w),i=Math.max(i,I+t),c=Math.max(c,w+n)}const l=i-o,d=c-r,u=96,h={x:o+l/2,y:r+d/2},f=Math.max(0,Math.min(e.safeRight??0,e.width)),p=Math.max(e.width-f,1)/(l+u*2),g=e.height/(d+u*2),A=Math.min(p,g);return{center:{x:A>0?h.x-f/(2*A):h.x,y:h.y},zoom:A}}const H={x:0,y:0,zoom:1};function ki(e,t=300){const n=H.x,s=H.y,a=H.zoom,o=typeof performance<"u"?performance.now():Date.now(),r=i=>{const c=Math.min((i-o)/t,1);H.x=n+(e.center.x-n)*c,H.y=s+(e.center.y-s)*c,H.zoom=a+(e.zoom-a)*c,c<1&&(typeof requestAnimationFrame<"u"?requestAnimationFrame(r):setTimeout(()=>r(typeof performance<"u"?performance.now():Date.now()),16))};typeof requestAnimationFrame<"u"?requestAnimationFrame(r):setTimeout(()=>r(typeof performance<"u"?performance.now():Date.now()),0)}function Li(){qn.clear()}async function Ti(e){const t={},n={},s=[],a=Object.entries(e.images??{}).map(([r,i])=>new Promise(c=>{const l=new Image;l.onload=()=>{t[r]=l,c()},l.onerror=()=>{const d=`Failed to load image: ${i}`;console.error(d),s.push(d),c()},l.src=i})),o=Object.entries(e.sounds??{}).map(([r,i])=>new Promise(c=>{const l=new Audio;l.oncanplaythrough=()=>{n[r]=l,c()},l.onerror=()=>{const d=`Failed to load sound: ${i}`;console.error(d),s.push(d),c()},l.src=i,l.load()}));return await Promise.all([...a,...o]),{assets:{images:t,sounds:n},failures:s}}function Ri(e){if(typeof globalThis.localStorage>"u")return;const t=globalThis.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){console.warn(`Failed to parse data for "${e}", clearing`,n),globalThis.localStorage.removeItem(e);return}}const Uo="progression:ngPlusState",na=5,Fo=1831565813,Un=Object.freeze({runSeed:0,ngPlusLevel:0,unlockSlots:0});function Ko(){if(typeof window>"u")return null;try{return window.localStorage??null}catch(e){return console.warn("Local storage unavailable for NG+ state",e),null}}function Ia(e,t,n){const s=Number.isFinite(e)?e:Number(e);if(!Number.isFinite(s))return t;const a=Math.trunc(s);return Math.min(n,Math.max(t,a))}function Yo(e){const t=Number.isFinite(e)?e:Number(e);return!Number.isFinite(t)||t===0?0:Math.trunc(Math.abs(t))}function Xo(e=Math.random){let t=e();(!Number.isFinite(t)||t<=0||t>=1)&&(t=Math.random());const n=Math.floor(t*4294967295);return n===0?Fo:n}function tt(e={}){const t=Un,n=Yo(e.runSeed??t.runSeed),s=Ia(e.ngPlusLevel??t.ngPlusLevel,0,Number.MAX_SAFE_INTEGER),a=Ia(e.unlockSlots??t.unlockSlots,0,na);return{runSeed:n,ngPlusLevel:s,unlockSlots:a}}function Ve(e,t=Math.random){const n=tt(e);return n.runSeed!==0?n:tt({...n,runSeed:Xo(t)})}function ji(e=Math.random){const t=Ko();if(!t)return Ve(Un,e);const n=t.getItem(Uo);if(!n)return Ve(Un,e);try{const s=JSON.parse(n);return Ve(tt(s),e)}catch(s){return console.warn("Failed to parse NG+ state",s),Ve(Un,e)}}function js(e){const t=Ko();if(!t)return;const n=tt(e);t.setItem(Uo,JSON.stringify(n))}function Oi(e,t){const n=tt(e),s=typeof t.random=="function"?t.random:Math.random;let a=n.ngPlusLevel,o=n.unlockSlots;if(t.outcome==="win"){a+=1;const i=Math.max(0,Math.trunc(t.bonusUnlocks??1));i>0&&(o=Math.min(na,o+i))}const r=Xo(s);return Ve(tt({runSeed:r,ngPlusLevel:a,unlockSlots:o}),s)}function Qi(e){const t=Math.max(0,e.ngPlusLevel),n=Math.max(0,e.unlockSlots)*.02;return Math.min(3,1+t*.12+n)}function Hi(e){const t=Math.max(0,e.ngPlusLevel),n=Math.max(0,e.unlockSlots)*.01,s=.1+t*.05+n;return Math.max(0,Math.min(.85,s))}function Gi(e){const t=Math.max(0,e.ngPlusLevel);return Math.max(.5,1+t*.25)}function Ui(e){return 1+Math.max(0,e.unlockSlots)}function Na(e,t=0){let n=Yo(e)^(t|0);return n===0&&(n=Fo^(t|0)),()=>{n=n+1831565813|0;let s=Math.imul(n^n>>>15,1|n);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}}function bs(e){return`${e.q},${e.r}`}const qo={farm:()=>new ta,barracks:()=>new Qo};function Fi(e){return qo[e]?.()}var D=(e=>(e.SAUNA_BEER="sauna-beer",e.SAUNAKUNNIA="saunakunnia",e.SISU="sisu",e))(D||{});const En={"sauna-beer":1,saunakunnia:0,sisu:0};class Ki{constructor(t,n="gameState"){this.tickInterval=t,this.storageKey=n}resources={"sauna-beer":0,saunakunnia:0,sisu:0};passiveGeneration={...En};lastSaved=Date.now();buildings={};buildingPlacements=new Map;policies=new Set;nightWorkSpeedMultiplier=1;ngPlus=tt();tick(){Object.keys(this.passiveGeneration).forEach(t=>{this.addResource(t,this.passiveGeneration[t])})}save(){this.lastSaved=Date.now();const t={};this.buildingPlacements.forEach((a,o)=>{t[o]=a.type});const n={resources:this.resources,lastSaved:this.lastSaved,buildings:this.buildings,buildingPlacements:t,policies:Array.from(this.policies),passiveGeneration:{...this.passiveGeneration},nightWorkSpeedMultiplier:this.nightWorkSpeedMultiplier,ngPlus:this.ngPlus},s=typeof localStorage<"u"&&localStorage?localStorage:void 0;if(!s){console.warn("GameState.save: localStorage is unavailable, skipping persistence.");return}try{s.setItem(this.storageKey,JSON.stringify(n))}catch(a){console.warn("GameState.save: Failed to persist state to localStorage.",a)}}load(t){const n=Ri(this.storageKey);if(!n)return this.lastSaved=Date.now(),!1;this.resources={...this.resources,...n.resources??{}},Object.keys(this.resources).forEach(c=>{Number.isFinite(this.resources[c])||(this.resources[c]=0)});const s={};Object.entries(n.buildings??{}).forEach(([c,l])=>{qo[c]&&(s[c]=l)}),this.buildings=s,this.buildingPlacements.clear(),n.buildingPlacements&&Object.entries(n.buildingPlacements).forEach(([c,l])=>{const d=Fi(l);if(!d)return;this.buildingPlacements.set(c,d);const[u,h]=c.split(",").map(Number);if(t){const f=t.ensureTile(u,h);f.placeBuilding(d.type),f.reveal(),Rs({q:u,r:h},t.hexSize)}E.emit("buildingPlaced",{building:d,coord:{q:u,r:h},state:this})}),this.lastSaved=n.lastSaved??Date.now();const a=n.ngPlus?tt(n.ngPlus):this.ngPlus;if(this.ngPlus=Ve(a),this.policies=new Set,this.passiveGeneration={...En},this.nightWorkSpeedMultiplier=1,(Array.isArray(n.policies)?n.policies.filter(c=>typeof c=="string"):[]).forEach(c=>{this.policies.add(c)}),this.policies.forEach(c=>{E.emit("policyApplied",{policy:c,state:this})}),n.passiveGeneration){const c={...En};Object.keys(En).forEach(l=>{const d=n.passiveGeneration?.[l];typeof d=="number"&&Number.isFinite(d)&&(c[l]=d)}),this.passiveGeneration=c}typeof n.nightWorkSpeedMultiplier=="number"&&Number.isFinite(n.nightWorkSpeedMultiplier)&&(this.nightWorkSpeedMultiplier=n.nightWorkSpeedMultiplier);const r=Date.now()-this.lastSaved,i=Math.floor(r/this.tickInterval);return Object.keys(this.passiveGeneration).forEach(c=>{this.resources[c]+=i*this.passiveGeneration[c]}),!0}getResource(t){return this.resources[t]}canAfford(t,n="sauna-beer"){return this.resources[n]>=t}spendResource(t,n="sauna-beer"){return this.spend(t,n)}spend(t,n="sauna-beer"){return this.canAfford(t,n)?(this.resources[n]-=t,E.emit("resourceChanged",{resource:n,amount:-t,total:this.resources[n]}),!0):!1}addResource(t,n){this.resources[t]+=n,E.emit("resourceChanged",{resource:t,amount:n,total:this.resources[t]})}modifyPassiveGeneration(t,n){this.passiveGeneration[t]=(this.passiveGeneration[t]??0)+n}construct(t,n,s="sauna-beer"){return this.spend(n,s)?(this.buildings[t]=(this.buildings[t]??0)+1,!0):!1}placeBuilding(t,n,s,a="sauna-beer"){const o=s.getTile(n.q,n.r);return!o||o.building||!this.construct(t.type,t.cost,a)?!1:(this.buildingPlacements.set(bs(n),t),o.placeBuilding(t.type),E.emit("buildingPlaced",{building:t,coord:n,state:this}),!0)}getBuildingAt(t){return this.buildingPlacements.get(bs(t))}removeBuilding(t,n){const s=bs(t),a=this.buildingPlacements.get(s);return a?(this.buildingPlacements.delete(s),n.getTile(t.q,t.r)?.placeBuilding(null),this.buildings[a.type]!==void 0&&(this.buildings[a.type]-=1,this.buildings[a.type]<=0&&delete this.buildings[a.type]),E.emit("buildingRemoved",{building:a,coord:t,state:this}),!0):!1}upgrade(t,n,s="sauna-beer"){return this.construct(`upgrade:${t}`,n,s)}applyPolicy(t,n,s="saunakunnia"){return this.spend(n,s)?(this.policies.add(t),E.emit("policyApplied",{policy:t,state:this}),!0):!1}hasPolicy(t){return this.policies.has(t)}getNgPlusState(){return{...this.ngPlus}}setNgPlusState(t){const n=tt({...this.ngPlus,...t});return this.ngPlus=Ve(n),this.ngPlus}}class Yi{constructor(t,n){this.baseInterval=t,this.onTick=n}timer=null;speed=1;lastTick=0;accumulator=0;start(){this.stop(),this.lastTick=Date.now();const t=this.baseInterval/this.speed;this.timer=setInterval(()=>{const n=Date.now(),s=n-this.lastTick;this.lastTick=n,this.onTick(s)},t)}stop(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)}setSpeed(t){if(t<=0)throw new Error("Speed multiplier must be positive");this.speed=t,this.timer!==null&&this.start()}getSpeed(){return this.speed}getBaseInterval(){return this.baseInterval}tick(t){for(this.accumulator+=t*this.speed;this.accumulator>=this.baseInterval;)this.accumulator-=this.baseInterval,this.onTick(this.baseInterval)}}var Ie=(e=>(e[e.Plains=0]="Plains",e[e.Forest=1]="Forest",e[e.Hills=2]="Hills",e[e.Lake=3]="Lake",e))(Ie||{});function Xi(e,t,n){let s=e*374761393+t*668265263+n*0x14057b7ef7678100;return s=(s^s>>13)*1274126177,s^=s>>16,(s>>>0)/4294967295}function qi(e,t,n=0){const s=Xi(e,t,n);return s<.1?3:s<.3?1:s<.5?2:0}class Ji{_terrain;_building;_isFogged;listeners=new Set;constructor(t=Ie.Plains,n=null,s=!0){this._terrain=t,this._building=n,this._isFogged=s}get terrain(){return this._terrain}set terrain(t){this._terrain!==t&&(this._terrain=t,this.notify("terrain"))}get building(){return this._building}set building(t){this._building!==t&&(this._building=t,this.notify("building"))}get isFogged(){return this._isFogged}set isFogged(t){this._isFogged!==t&&(this._isFogged=t,this.notify("fog"))}reveal(){this.isFogged=!1}placeBuilding(t){this.building=t}setFogged(t){this.isFogged=t}addMutationListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notify(t){for(const n of this.listeners)n(t)}}class Zi{constructor(t=10,n=10,s=32,a=0){this.hexSize=s,this.seed=a,this.minQ=0,this.minR=0,this.maxQ=t-1,this.maxR=n-1}tiles=new Map;tileSubscriptions=new Map;changeListeners=new Set;minQ;maxQ;minR;maxR;get width(){return this.maxQ-this.minQ+1}get height(){return this.maxR-this.minR+1}key(t,n){return`${t},${n}`}addTileChangeListener(t){return this.changeListeners.add(t),()=>this.changeListeners.delete(t)}notifyTileChange(t,n,s){for(const a of this.changeListeners)a(t,n,s)}attachTileListener(t,n,s){const a=n.addMutationListener(o=>{this.notifyTileChange(s,n,o)});this.tileSubscriptions.set(t,a)}ensureTile(t,n){const s=this.key(t,n);let a=this.tiles.get(s);return a||(a=new Ji(qi(t,n,this.seed)),this.tiles.set(s,a),this.minQ=Math.min(this.minQ,t),this.maxQ=Math.max(this.maxQ,t),this.minR=Math.min(this.minR,n),this.maxR=Math.max(this.maxR,n),this.attachTileListener(s,a,{q:t,r:n}),this.notifyTileChange({q:t,r:n},a,"created"),a.isFogged||Rs({q:t,r:n},this.hexSize)),a}getTile(t,n){return this.tiles.get(this.key(t,n))}forEachTile(t){for(const[n,s]of this.tiles){const[a,o]=n.split(",").map(Number);t(s,{q:a,r:o})}}getNeighbors(t,n){return Xn({q:t,r:n}).map(s=>this.ensureTile(s.q,s.r))}revealAround(t,n,s={}){const{autoFrame:a=!0}=s;for(let i=-n;i<=n;i++){const c=Math.max(-n,-i-n),l=Math.min(n,-i+n);for(let d=c;d<=l;d++){const u={q:t.q+i,r:t.r+d};this.ensureTile(u.q,u.r).reveal(),Rs(u,this.hexSize)}}if(!a)return;const o=typeof window<"u"?(()=>{const i=Math.max(window.innerWidth,0),c=Math.max(window.innerHeight,0);let l=0;if(typeof document<"u"){const u=document.getElementById("right-panel");if(u){const h=u.getBoundingClientRect();if(h.width>0){const f=u.closest("#ui-overlay");if(f){const m=f.getBoundingClientRect(),p=window.getComputedStyle(f),g=Number.parseFloat(p.paddingRight||"0"),A=m.right-h.left,M=h.width+(Number.isFinite(g)?g:0);l=Math.max(0,Math.max(A,M))}else l=Math.max(0,h.width)}}}const d=Math.min(Math.max(l,0),i);return{width:i,height:c,safeRight:d}})():{width:0,height:0,safeRight:0},r=Pi(o);ki(r,300)}}const Jo=({policy:e,state:t})=>{e==="eco"&&(t.modifyPassiveGeneration(D.SAUNA_BEER,1),E.off("policyApplied",Jo))},Zo=({policy:e,state:t})=>{e==="temperance"&&(t.nightWorkSpeedMultiplier*=1.05,E.off("policyApplied",Zo))},Wo=({policy:e,state:t})=>{e==="steam-diplomats"&&(t.modifyPassiveGeneration(D.SAUNA_BEER,2),E.off("policyApplied",Wo))};E.on("policyApplied",Jo);E.on("policyApplied",Zo);E.on("policyApplied",Wo);const Wi="modulepreload",Vi=function(e){return"/"+e},Pa={},_i=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=r?.nonce||r?.getAttribute("nonce");a=c(n.map(l=>{if(l=Vi(l),l in Pa)return;Pa[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Wi,d||(h.as="script"),h.crossOrigin="",h.href=l,i&&h.setAttribute("nonce",i),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return a.then(r=>{for(const i of r||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},$i=({building:e,coord:t,state:n})=>{e instanceof ta?n.modifyPassiveGeneration(D.SAUNA_BEER,e.beerPerTick):e instanceof Qo&&_i(async()=>{const{spawnUnit:s}=await Promise.resolve().then(()=>Uc);return{spawnUnit:s}},void 0).then(({spawnUnit:s})=>{s(n,"soldier",`barracks-${t.q}-${t.r}`,t,"player")})},ec=({building:e,state:t})=>{e instanceof ta&&t.modifyPassiveGeneration(D.SAUNA_BEER,-e.beerPerTick)};E.on("buildingPlaced",$i);E.on("buildingRemoved",ec);const ws={attack:`
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
  `,death:`
UklGRkZWAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YSJWAAAAAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkS
PRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2
NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0v
YS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcC
vQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/T
g9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTI
YsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbp
Y+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMc
ih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5
QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgo
iSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3
cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN
78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL
88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPy
RPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk
5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5
dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYg
ax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rt
dewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJ
AMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQ
MNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39
hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgs
CC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4
zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYX
TBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLk
GePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH
1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW
79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H
0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEy
uDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0
XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QN
dAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3b
qtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/G
gMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e
99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR
2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42
xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEw
PS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbAD
NwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLU
b9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DH
BMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7n
Bulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfca
QxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4
EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEp
mCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/5
6Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17O
o83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHK
Vcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx
0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8j
xSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5
ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9oh
piBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv
2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJ
dckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofP
WNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7
Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiEr
GCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4
JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0Y
phdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57Dl
YuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0TH
B8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V
4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUF
XQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEEx
ATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY1
9jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP
5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbc
zduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjG
b8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3d
v9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQ
chHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1
TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4w
ETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikF
sAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3V
YtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XH
sMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5Vnm
rucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ
9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs4
3DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6Mq
oSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6
X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLP
Xs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXK
wcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjv
ZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMi
nyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5
ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj
2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7w
Q+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK
88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/O
h89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6
k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMq
ISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4
djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa
/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APn
sOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rH
RMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U
3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E
5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kw
QTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02
hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0Q
Ug/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe
9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrG
aMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hc
jd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwO
CBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81
yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx
3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEG
KQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/W
XdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTH
ZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnl
Weau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIY
pxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4
mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4r
oyqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD8
1/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/P
Is9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJ
NcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u
+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEh
cyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5
mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMk
CiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzy
rvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrL
esrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/N
v86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4
G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4p
IyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4
vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4b
UBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06Vro
A+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnH
isdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT
39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMC
bQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgv
eTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2
DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYS
vRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4Frf
Jt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbG
asZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvb
YdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0N
nA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0
PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10y
ojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgI
oQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjX
X9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3G
JMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3j
CeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoW
UhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3
UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEs
niujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9
UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ
788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJ
ssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yft
ju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkg
QSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5
kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYl
MyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9Izz
HPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPL
Cst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN
/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33
o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEo
HikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5
+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHucc
nhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67Tp
WugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI
2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS
6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB
8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAu
qC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3
izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsT
JhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXg
Wt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozG
dsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2Rva
O9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwL
LQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00
qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEz
XTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44J
GAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfY
aNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G
7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804Xbi
veMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V
+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543
/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0t
kSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/
yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/R
w9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnI
OcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPr
J+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcwe
CSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5
gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3Im
ViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70
jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXM
o8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nM
SM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1
Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4m
ESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5
Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe
5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPr
tOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTI
MsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS
+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAA
egHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt
0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3
ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0U
ixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49Th
leBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvG
jMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZ
G9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgK
vAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4Mmcz
DTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLsz
ETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAIL
jgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Z
d9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvG
v8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zTh
duK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0U
nRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3
njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2Eu
fS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0A
Q//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PS
n9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLI
ycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPq
w+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIod
zB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5
ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIkn
ciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2
/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/M
RcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PL
mcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0
uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl
/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5
VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsf
LB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXs
E+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJ
lMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDR
ENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+
AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt
8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43
bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW
7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj
1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XG
q8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/X
Atkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MI
SAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgy
ZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00
uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQM
AguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26ra
jtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDG
m8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vff
NOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkS
PRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2
NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0v
YS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcC
vQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/T
g9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTI
YsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbp
Y+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMc
ih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5
QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgo
iSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3
cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN
78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL
88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPy
RPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk
5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5
dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYg
ax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rt
dewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJ
AMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQ
MNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39
hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfcaQxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgs
CC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4
zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEpmCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYX
TBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/56Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLk
GePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17Oo83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH
1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHKVcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW
79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H
0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8jxSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEy
uDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0
XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9ohpiBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QN
dAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3b
qtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJdckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/G
gMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofPWNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e
99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR
2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiErGCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42
xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEw
PS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0YphdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbAD
NwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57DlYuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLU
b9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0THB8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DH
BMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7n
Bulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4AAHoB8wJtBOUFXQfTCEgKvAstDZwOCBByEdkSPRSdFfoWUhinGfca
QxyKHcweCSBBIXMinyPFJOUl/iYRKB4pIyohKxgsCC3wLdAuqC95MEExATK4MmczDTSrND81yzVONsc2NzeeN/w3UDibONw4
EzlBOWU5gDmROZg5ljmKOXQ5VTkrOfk4vDh2OCc4zjdsNwA3izYNNoY19jRdNLszETNdMqIx3jARMD0vYS59LZEsniujKqEp
mCiJJ3ImViUzJAoj2iGmIGsfLB7nHJ4bUBr9GKYXTBbtFIsTJhK9EFIP5A10DAILjgkYCKEGKQWwAzcCvQBD/8n9UPzX+l/5
6Pdy9v70jPMc8q7wQ+/a7XXsE+u06VroA+ew5WLkGePU4ZXgWt8m3vbczduq2o7Zd9ho11/WXdVi1G/Tg9Kf0cPQ788iz17O
o83vzEXMo8sKy3rK88l1yQDJlMgyyNnHisdExwfH1carxozGdsZqxmjGb8aAxpvGv8btxiTHZcewxwTIYsjJyDnJssk1ysHK
Vcvzy5nMSM3/zb/Oh89Y0DDRENL40ujT39Td1eLW79cC2RvaO9th3I3dv9733zThduK94wnlWeau5wbpY+rD6yftju7472Tx
0/JE9Lj1Lfej+Bv6k/sN/Yb+AAB6AfMCbQTlBV0H0whICrwLLQ2cDggQchHZEj0UnRX6FlIYpxn3GkMcih3MHgkgQSFzIp8j
xSTlJf4mESgeKSMqISsYLAgt8C3QLqgveTBBMQEyuDJnMw00qzQ/Ncs1TjbHNjc3njf8N1A4mzjcOBM5QTllOYA5kTmYOZY5
ijl0OVU5Kzn5OLw4djgnOM43bDcAN4s2DTaGNfY0XTS7MxEzXTKiMd4wETA9L2EufS2RLJ4royqhKZgoiSdyJlYlMyQKI9oh
piBrHywe5xyeG1Aa/RimF0wW7RSLEyYSvRBSD+QNdAwCC44JGAihBikFsAM3Ar0AQ//J/VD81/pf+ej3cvb+9IzzHPKu8EPv
2u117BPrtOla6APnsOVi5Bnj1OGV4FrfJt723M3bqtqO2XfYaNdf1l3VYtRv04PSn9HD0O/PIs9ezqPN78xFzKPLCst6yvPJ
dckAyZTIMsjZx4rHRMcHx9XGq8aMxnbGasZoxm/GgMabxr/G7cYkx2XHsMcEyGLIycg5ybLJNcrBylXL88uZzEjN/82/zofP
WNAw0RDS+NLo09/U3dXi1u/XAtkb2jvbYdyN3b/e99804XbiveMJ5VnmrucG6WPqw+sn7Y7u+O9k8dPyRPS49S33o/gb+pP7
Df2G/gAAegHzAm0E5QVdB9MISAq8Cy0NnA4IEHIR2RI9FJ0V+hZSGKcZ9xpDHIodzB4JIEEhcyKfI8Uk5SX+JhEoHikjKiEr
GCwILfAt0C6oL3kwQTEBMrgyZzMNNKs0PzXLNU42xzY3N543/DdQOJs43DgTOUE5ZTmAOZE5mDmWOYo5dDlVOSs5+Ti8OHY4
JzjON2w3ADeLNg02hjX2NF00uzMRM10yojHeMBEwPS9hLn0tkSyeK6MqoSmYKIknciZWJTMkCiPaIaYgax8sHuccnhtQGv0Y
phdMFu0UixMmEr0QUg/kDXQMAguOCRgIoQYpBbADNwK9AEP/yf1Q/Nf6X/no93L2/vSM8xzyrvBD79rtdewT67TpWugD57Dl
YuQZ49ThleBa3ybe9tzN26rajtl32GjXX9Zd1WLUb9OD0p/Rw9DvzyLPXs6jze/MRcyjywrLesrzyXXJAMmUyDLI2ceKx0TH
B8fVxqvGjMZ2xmrGaMZvxoDGm8a/xu3GJMdlx7DHBMhiyMnIOcmyyTXKwcpVy/PLmcxIzf/Nv86Hz1jQMNEQ0vjS6NPf1N3V
4tbv1wLZG9o722Hcjd2/3vffNOF24r3jCeVZ5q7nBulj6sPrJ+2O7vjvZPHT8kT0uPUt96P4G/qT+w39hv4=
  `,sisu:`
UklGRrh4AABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YZR4AAAAAAAAAQADAAUACAAMABAAFQAZAB4AJAApAC4A
MgA3ADsAPgBBAEQARQBGAEYARgBFAEMAQAA9ADkANQAwACsAJgAhABsAFgARAA0ACQAFAAIAAAD+//z//P/7//v//P/9////
AAABAAMABAAFAAYABgAFAAQAAQD+//n/8//s/+P/2f/N/8D/sv+j/5P/gv9x/1//Tf87/yr/Gf8J//r+7P7h/tf+z/7K/sj+
yP7L/tL+2/7n/vf+Cv8f/zj/U/9w/5D/sf/U//j/HABBAGcAjACwANMA9QAUATIBTQFlAXoBiwGZAaQBqwGuAa4BqgGjAZgB
iwF6AWcBUwE8ASQBCgHwANYAvACiAIoAcgBcAEcANAAkABUACQAAAPn/9P/x//D/8P/y//b/+v///wMACAAMAA8AEQARABAA
DAAFAP3/8f/i/9D/uv+i/4f/af9I/yX/Af/b/rT+jf5m/j/+Gv72/dX9tv2c/YX9cv1l/V39W/1e/Wj9eP2O/av9zf32/ST+
WP6Q/s3+Df9R/5f/3/8nAHEAugACAUcBigHKAQYCPQJuApoCwALgAvkCCwMWAxoDGAMPAwED7ALSArMCjwJoAj4CEgLjAbQB
hAFVAScB+gDQAKgAgwBiAEQAKgAUAAMA9v/t/+f/5P/l/+j/7f/0//z/AwALABIAGAAcAB0AGwAWAAwA///t/9X/uf+Y/3P/
SP8a/+j+sv56/j/+A/7H/Yr9T/0V/d/8rPx9/FT8MfwV/AH89fvx+/b7Bfwd/D78afyd/Nr8IP1t/cL9Hf59/uL+S/+2/yIA
jwD8AGYBzgExApAC6AI5A4MDxAP8AysEUARrBHwEgwSABHQEXwRBBBsE7wO8A4MDRwMGA8QCfwI6AvYBswFyATUB+wDFAJUA
aQBDACQACQD2/+f/3v/Z/9n/3f/k/+3/9/8CAA0AGAAgACYAKAAnACAAFAACAOv/zf+o/3z/Sv8S/9T+kf5J/v39r/1e/Qz9
u/xr/B380/uO+0/7F/vn+sD6o/qR+ov6kfqj+sH67Pok+2j7uPsT/Hn86Pxg/d/9Zf7w/n7/DQCdAC0BugFEAsgCRQO7AycE
igThBC0FbAWeBcQF3AXnBeUF1wW8BZcFZwUuBewEpARVBAIEqwNSA/gCnwJHAvIBoQFVAQ4BzQCUAGEANwATAPj/5P/W/8//
zv/R/9n/5P/y/wAADgAbACcALwAzADIALAAeAAkA7f/J/5z/Zv8p/+P+l/5D/ur9i/0p/cT8Xvz4+5P7MfvT+nv6K/rj+aX5
c/lN+TT5Kvku+UL5ZvmZ+dz5LvqP+v/6e/sE/Jj8Nf3a/YX+Nf/o/5sATgH+AakCTgPrA38EBwWDBfIFUgajBuQGFQc1B0YH
Rgc3BxkH7Qa1BnAGIQbJBWkFAwWZBCsEvQNPA+MCeQIVArYBXQENAcQAhABOACEA/v/j/9D/xv/C/8b/zv/b/+v//P8NAB4A
LAA3AD4APgA3ACkAEgDy/8j/lP9V/w3/vP5h/v79lP0k/a/8Nvy7+0D7xvpQ+t75dPkR+bn4bfgt+P333PfN98/34/cK+ET4
kfjw+GH54/l1+hb7xPt+/EH9DP7e/rP/iABeATAC/gLEA4EEMwXZBW8G9gZsB88HIAheCIkIoAikCJUIdQhECAQItQdZB/IG
ggYKBo0FDAWJBAcEhgMIA5ACHgKzAVIB+gCsAGoAMgAFAOT/zP+9/7j/uv/C/9D/4v/2/woAHwAxAD8ARwBJAEQANQAcAPn/
yv+Q/0r/+P6b/jP+wv1I/cb8P/yz+yT7lPoG+nv59vh3+AP4mfc+9/H2tfaL9nX2c/aH9rD27/ZE9673LfjB+Gf5Hvrl+rr7
m/yG/Xf+bv9lAF0BUwJCAyoECAXZBZsGTQftB3kI8QhTCZ8J1Qn0Cf0J8QnPCZoJUwn7CJQIIAigBxgHiAb0BV0FxgQwBJ4D
EgONAhACnQE2AdoAigBHABAA5//J/7b/rf+u/7b/xf/Z//D/BwAeADMARQBQAFUAUABBACgAAgDQ/5D/Q//o/oH+Df6O/QX9
cvzZ+zr7mPr0+VH5svgY+Ib3//aE9hj2vfV19UH1I/Uc9S31V/Wa9fX1afb19pj3Ufge+f357Prp+/H8A/4a/zMATQFlAncD
gAR+BW8GTwcdCNcIegkHCnwK1woZC0ILUQtICycL8AqjCkQK0glRCcMIKgiJB+IGOAaMBeMEPAScAwMDdALvAXcBDAGvAGAA
HwDt/8j/sP+k/6L/qv+5/87/5/8BABwANQBKAFgAXwBcAE4ANAANANj/lP9A/97+bf7u/WL9yvwo/H37zPoX+l/5qPj190f3
ofYG9nr1/fST9D30/vPX88rz1/MA9EX0pvQi9bn1avY09xX4CvkS+ir7UPyA/bf+8v8tAWcCmwPGBOUF9Qb0B94IswlvChIL
mgsGDFYMigyhDJwMfQxEDPQLjQsSC4YK6glCCZAI1wcZB1oGnAXiBC0EgQPeAkgCvwFEAdkAfQAyAPf/yv+s/5z/l/+e/63/
w//e//z/GQA1AE0AXwBpAGgAXABCABoA4/+a/0L/2P5e/tX9Pf2X/Ob7K/to+qD51fgL+EP3gPbH9Rn1evTs83HzDvPC8pHy
ffKF8qzy8fJV89jzefQ39RH2BPcO+C75YPqi++/8Rv6h//0AWQKuA/sEOwZsB4kIkQmBClcLEQyuDCwNiw3KDeoN7A3QDZcN
RA3XDFUMvgsWC18KnQnSCAIILwddBo4FxgQFBFADpwINAoIBCAGfAEgAAgDO/6r/lP+N/5H/oP+3/9T/9P8UADMATwBlAHIA
dABpAFAAKADv/6T/R//X/lX+w/0f/W38rfvj+g/6NflX+Hj3nPbG9fj0N/SE8+TyWvLn8Y7xUvE18TfxWvGf8QXyjfI38wD0
5/Tr9Qr3QPiL+ef6UvzG/UL/vwA7ArIDIQWCBtMHEAk2CkILMgwEDbcNSA63DgMPLg83Dx8P6A6TDiIOmQ34DEUMgAuuCtMJ
8AgLCCUHQgZlBZEEyQMNA2ECxgE9AcYAYgASANX/qv+P/4P/hf+T/6r/yP/q/w0AMQBQAGkAeQB/AHYAXwA3AP7/sP9P/9r+
Uv62/Qn9Svx9+6P6v/nT+OP38fYB9hb1NfRf85ry5/FM8cnwYvAa8PPv7u8M8E/wtvBC8fHxxPK488z0/fVI96v4Ifqn+zn9
1P5xAA4CpwM2BbkGKgiHCcwK9QsADesNtA5ZD9oPNRBrEH0QaxA2EOEPbQ/eDjUOdw2mDMUL2QrlCe0I9Af9Bg0GJQVIBHoD
vAIQAnYB8QCBACYA3/+s/4v/ev96/4b/nf+8/+D/BgAsAE8AbACAAIkAgwBuAEcADAC//1v/4f5T/q/9+Pwv/FX7bfp5+Xz4
efd19nH1cvR985PyuvH18EfwtO8/7+rut+6p7sLuAe9n7/XvqvCF8YXyp/Pp9Ej2wPdP+fD6n/xX/hQA0gGLAzwF4AZyCO8J
UwuaDMENxg6mD2AQ8xBfEaIRvRGyEYERLRG4ECQQdA+sDs8N4QzlC+EK1gnKCMAHuwa/Bc8E7gMdA18CtgEiAaQAPQDs/7D/
iP9z/27/ef+P/67/1P/+/yYATQBuAIYAkgCQAH0AVwAeAM//af/s/lj+rv3u/Br8NPs/+jz5Lvga9wP27PTa89Dy0vHl8A3w
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
YADiAFIBpwHYAdwBrAE/AZIAoP9m/uH8Evv7+J/2AfQo8Rvu4uqH5xXkl+AZ3afZUNYe0yHQY83yytjIIMfUxfzEnsTBxGjF
lcZIyIHKPM110CXURNjK3Krh2eZK7O7xuPeX/XsDVwkbD7YUGho6HwkkeiiELB0wPTPeNf03lTmoOjQ7PTvIOtk5eDitNoI0
AjI4LzEs+SidJSoirR4yG8UXchRDEUEOdQvlCJcGjwTQAloBLgBK/6r+Sv4j/jD+aP7C/jb/uf9BAMQAOQGVAc4B3QG5AVsB
vgDe/7b+RP2I+4X5O/ev9Ofx6u6/62/oB+WP4RXepNpL1xTUDtFFzsXLmcnNx2rGeMX/xATFi8WYxivIQsrdzPXPhdOG1+/b
tODL5SbruPBy9kb8IQL5B7oNWBPCGOsdxiJHJ2MrES9IMgM1PDfxOCA6yjrxOpg6xTl/OM42uzRRMpsvpSx7KSsmwSJKH9Mb
ZxgSFd8R1g4BDGcJDQf4BCoDpgFrAHn/yv5d/ir+LP5a/q3+G/+b/yIApgAfAYABwgHbAcQBdAHnABYAAf+i/fr7CfrS91j1
ofK075fsVOn15YXiD9+g20XYCtX80SjPmsxeyn7IBMf5xWXFTcW2xaPGFcgMyoXMfc/t0tDWHNvG38TkCeqI7zL1+frLAJwG
XAz7EWoXnByDIRImQCoCLlAxJDR3Nkg4kzlaOp46YjqrOYA46TbvNJsy+S8ULfoptiZWI+YfchwIGbIVexJsD48M6gmFB2MF
iAP1AasAqv/u/nL+M/4q/k7+mv4C/37/AwCIAAMBagG0AdcBywGJAQsBSwBH//v9ZvyI+mT4/PVX83nwa+006t/md+MH4Jrc
PtkA1uvSDdByzSXLMsmix3/G0cWcxefFtcYHyN3JNcwNz17SIdZQ2t/exOPz6F7u9/Ow+Xr/QwUAC58QExZMGz4g2yQaKfAs
VDA/M601mTcAOeQ5RTomOos5fDj/Nhw13zJSMH8tdSo+J+gjfyAQHagZURYXEwIQHg1wCv8H0AXoA0cC7wDf/xT/i/4//ir+
Rf6I/ur+Yf/l/2oA5wBTAaQB0AHPAZsBKwF8AIr/T/7N/AL78fic9gj0OvE67hHrx+dn5Pzgk9032vXW2tPz0EvO78vqyUXI
C8dCxvLFH8bOxgDItsnuy6TO1tF71YzZAN7L4uPnOe3B8mz4K/7tA6YJRQ+8FPwZ+B6jI/In2itUL1cy3jTkNmg4aDnmOeM5
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
gNXv1sHY89qB3WfgneMc59vq0u718jv3
  `},Vo={click:{loader:e=>nc(e),debounceMs:30},spawn:{loader:e=>sc(e),debounceMs:120},error:{loader:e=>ac(e)},attack:{loader:e=>vs(ws.attack,e),debounceMs:70},death:{loader:e=>vs(ws.death,e),debounceMs:180},sisu:{loader:e=>vs(ws.sisu,e),debounceMs:800}};let lt=null,an=null;const ka=new Map,Cn=new Map,La=new Map;let nt=!1;typeof localStorage<"u"&&(nt=localStorage.getItem("sfx-muted")==="true");const Os=new Set;function tc(){for(const e of Os)e(nt)}function _o(e){if(an)return an;const t=e.createGain();return t.gain.value=nt?0:1,t.connect(e.destination),an=t,t}function sa(e,t,n){const s=Math.floor(e.sampleRate*t),a=e.createBuffer(1,s,e.sampleRate),o=a.getChannelData(0);for(let r=0;r<s;r++){const i=r/e.sampleRate;o[r]=n(i)}return a}function nc(e){return sa(e,.05,t=>Math.sin(2*Math.PI*1e3*t)*Math.exp(-40*t))}function sc(e){return sa(e,.2,t=>(Math.sin(2*Math.PI*440*t)+Math.sin(2*Math.PI*660*t))*.5*Math.exp(-6*t))}function ac(e){return sa(e,.3,t=>Math.sin(2*Math.PI*110*t)*Math.exp(-8*t))}function oc(e){const t=globalThis;if(typeof t.atob=="function"){const n=t.atob(e),s=n.length,a=new Uint8Array(s);for(let o=0;o<s;o++)a[o]=n.charCodeAt(o);return a}if(t.Buffer){const n=t.Buffer.from(e,"base64"),s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n[a];return s}throw new Error("No base64 decoder available for sound payloads.")}async function vs(e,t){const n=oc(e),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);return await t.decodeAudioData(s)}function gn(){if(lt||typeof window>"u")return lt;const e=window.AudioContext||window.webkitAudioContext;if(!e)return console.warn("Web Audio API not supported"),null;try{lt=new e,_o(lt)}catch(t){return console.warn("Unable to create AudioContext",t),lt=null,null}if(lt.state==="suspended"){const t=()=>{lt?.resume()};window.addEventListener("pointerdown",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})}return lt}function rc(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function ic(e){const t=ka.get(e);if(t)return Promise.resolve(t);const n=Cn.get(e);if(n)return n;const s=gn();if(!s)return Promise.reject(new Error("Audio context unavailable"));const a=Vo[e];if(!a)return Promise.reject(new Error(`No sound registered for ${e}`));const o=Promise.resolve(a.loader(s)).then(r=>(ka.set(e,r),Cn.delete(e),r)).catch(r=>{throw Cn.delete(e),r});return Cn.set(e,o),o}function st(e){if(nt)return;const t=Vo[e];if(!t)return;const n=rc(),s=t.debounceMs??0,a=La.get(e)??0;s>0&&n-a<s||(La.set(e,n),ic(e).then(o=>{if(nt)return;const r=gn();if(!r)return;const i=_o(r),c=r.createBufferSource();c.buffer=o,c.connect(i);try{c.start()}catch(l){console.warn("Unable to start sound",l)}}).catch(o=>{o instanceof Error&&o.message==="Audio context unavailable"||console.warn("Failed to play sound",e,o)}))}function Qs(){return nt}function cc(e){nt=e,an&&(an.gain.value=nt?0:1),typeof localStorage<"u"&&localStorage.setItem("sfx-muted",nt?"true":"false"),tc()}function lc(e){return Os.add(e),()=>{Os.delete(e)}}typeof document<"u"&&document.addEventListener("click",e=>{e.target instanceof HTMLButtonElement&&st("click")});gn();const Ta="__autobattlesAudioEvents__",Ra=globalThis;Ra[Ta]||(E.on("unitDamaged",e=>{!e||e.amount<=0||st("attack")}),E.on("unitDied",()=>{st("death")}),E.on("sisuBurstStart",()=>{st("sisu")}),Ra[Ta]=!0);function dc(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function uc(e){const t={};if(!e)return t;for(const[n,s]of Object.entries(e))typeof s=="function"&&(t[n]=s);return t}class hc{constructor(t=E){this.emitter=t}modifiers=new Map;hookIndex=new Map;listeners=new Map;add(t){if(typeof t.id!="string"||t.id.length===0)throw new Error("Modifier id must be a non-empty string");if((typeof t.duration!="number"||!Number.isFinite(t.duration))&&t.duration!==1/0)throw new Error("Modifier duration must be a positive number or Infinity");if(Number.isFinite(t.duration)&&t.duration<=0)throw new Error("Modifier duration must be greater than zero");const n=uc(t.hooks),s=dc();this.modifiers.has(t.id)&&this.remove(t.id,"replaced");const a={...t,hooks:n,remaining:t.duration,appliedAt:s};this.modifiers.set(a.id,a),this.indexHooks(a);const o={runtime:this,modifier:a};return t.onApply?.(o),this.emit("modifierAdded",{modifier:a}),this.emitter?.emit("modifierAdded",{modifier:a}),Number.isFinite(a.remaining)&&a.remaining<=0&&this.remove(a.id,"expired"),a}has(t){return this.modifiers.has(t)}list(){return Array.from(this.modifiers.values()).map(t=>({...t,hooks:{...t.hooks}}))}remove(t,n="manual"){const s=this.modifiers.get(t);if(!s)return!1;this.modifiers.delete(t),this.unindexHooks(s);const a={runtime:this,modifier:s,reason:n};return s.onExpire?.(a),n==="expired"&&(this.emit("modifierExpired",{modifier:s}),this.emitter?.emit("modifierExpired",{modifier:s})),this.emit("modifierRemoved",{modifier:s,reason:n}),this.emitter?.emit("modifierRemoved",{modifier:s,reason:n}),!0}advance(t){if(typeof t!="number"||t<=0)return;const n=[];for(const s of this.modifiers.values())Number.isFinite(s.remaining)&&(s.remaining=Math.max(0,s.remaining-t),s.remaining<=0&&n.push(s.id));for(const s of n)this.remove(s,"expired")}trigger(t,n){const s=this.hookIndex.get(t);if(!s||s.size===0)return;const a=Array.from(s);for(const o of a){const r=this.modifiers.get(o);if(!r){s.delete(o);continue}const i=r.hooks[t];if(!i){s.delete(o);continue}i(n,{runtime:this,modifier:r})}}clear(){const t=Array.from(this.modifiers.keys());for(const n of t)this.remove(n,"manual")}on(t,n){const s=this.listeners.get(t)??new Set;s.add(n),this.listeners.set(t,s)}off(t,n){const s=this.listeners.get(t);s&&(s.delete(n),s.size===0&&this.listeners.delete(t))}emit(t,n){const s=this.listeners.get(t);if(!(!s||s.size===0))for(const a of Array.from(s))a(n)}indexHooks(t){for(const n of Object.keys(t.hooks)){const s=this.hookIndex.get(n)??new Set;s.add(t.id),this.hookIndex.set(n,s)}}unindexHooks(t){for(const n of Object.keys(t.hooks)){const s=this.hookIndex.get(n);s&&(s.delete(t.id),s.size===0&&this.hookIndex.delete(n))}}}const us=new hc,fc=e=>us.add(e),mc=(e,t="manual")=>us.remove(e,t),gc=e=>{us.advance(e)},xn=(e,t)=>{us.trigger(e,t)};class pc{constructor(t,n,s){this.owner=t,this.entries=n,this.log=s}runTick(t,n){for(const{definition:s,state:a}of this.entries){if(!s.onTick)continue;const o=s.onTick({owner:this.owner,state:a,self:t,opponent:n}),r=vt(o?.shieldDamage??0);if(r>0){const c=Math.min(t.shield,r);c>0&&(t.shield-=c,this.log.tickShieldDamage+=c)}const i=vt(o?.hpDamage??0);if(i>0){const c=Math.min(t.health,i);c>0&&(t.health-=c,this.log.tickHpDamage+=c)}}}grantShield(t,n){let s=0;for(const{definition:a,state:o}of this.entries){if(!a.onGrantShield)continue;const r=vt(a.onGrantShield({owner:this.owner,state:o,self:t,opponent:n})??0);r>0&&(s+=r)}return s>0&&(t.shield+=s,this.log.shieldGranted+=s),s}consumeShield(t,n,s){let a=vt(t);if(a<=0)return 0;let o=0;for(const{definition:r,state:i}of this.entries){if(!r.onConsumeShield||a<=0)continue;const c=vt(r.onConsumeShield({owner:this.owner,state:i,self:n,opponent:s,amount:a})??0);if(c<=0)continue;const l=Math.min(a,c);o+=l,a-=l}return o>0&&(this.log.shieldConsumed+=o),o}applyHit(t,n,s){if(t<=0)return 0;let a=0;for(const{definition:i,state:c}of this.entries){if(!i.onHit)continue;const l=vt(i.onHit({owner:this.owner,state:c,self:n,opponent:s,hpDamage:t})??0);l>0&&(a+=l)}if(a<=0)return 0;const o=Math.max(0,n.maxHealth-n.health);if(o<=0)return 0;const r=Math.min(o,a);return r>0&&(n.health+=r,this.log.lifesteal+=r),r}getShieldValue(){let t=0;for(const{definition:n,state:s}of this.entries){if(!n.onGrantShield||s.keyword!=="Shield")continue;const a=Hs(s);if(a<=0)continue;const o=Math.max(0,Number.isFinite(s.stacks)?s.stacks:0);o<=0||(t+=o*a)}return t}}function Ac(){return{attacker:Oa(),defender:Oa()}}function ja(e,t,n){const s=yc(e);if(s.length===0)return null;const a=[];for(const o of s){const r=$o.get(o.keyword);r&&a.push({state:o,definition:r})}return a.length===0?null:new pc(t,a,n)}const $o=new Map;function hs(e,t){$o.set(e,t)}function Oa(){return{tickHpDamage:0,tickShieldDamage:0,shieldGranted:0,shieldConsumed:0,lifesteal:0,keywordShieldRemaining:0}}function vt(e){return typeof e!="number"||!Number.isFinite(e)?0:e>0?e:0}function Qt(e){return typeof e!="number"||!Number.isFinite(e)?0:e>0?e:0}function pn(e){return typeof e!="number"||!Number.isFinite(e)?0:e>0?e:0}function yc(e){if(!e)return[];const t=[],n=e;if(typeof n[Symbol.iterator]=="function"){for(const s of n){const a=Qa(s);a&&t.push(a)}return t}if(typeof e=="object")for(const s of Object.values(e)){const a=Qa(s);a&&t.push(a)}return t}function Qa(e){if(!e||typeof e!="object")return null;const t=e;if(!Object.prototype.hasOwnProperty.call(t,"stacks"))return null;const n=Mc(t.keyword);if(!n)return null;const s=t;return s.keyword=n,s.stacks=Qt(s.stacks),Object.prototype.hasOwnProperty.call(t,"potency")&&s.potency!==void 0&&(s.potency=pn(s.potency)),s}function Mc(e){if(typeof e!="string")return null;switch(e.trim().toLowerCase()){case"bleed":return"Bleed";case"burn":return"Burn";case"lifesteal":case"life-steal":return"Lifesteal";case"shield":return"Shield";default:return null}}function Hs(e){const t=e.potency!==void 0?pn(e.potency):1;return t>0?t:0}function bc(e){if(e.potency!==void 0){const s=pn(e.potency);return s>0?s:0}const t=Qt(e.stacks);if(t<=0)return 0;const n=t*.2;return n>0?n:0}hs("Bleed",{onTick({state:e,self:t}){const n=Qt(e.stacks);if(n<=0||t.health<=0){e.stacks=n;return}const s=e.potency!==void 0?pn(e.potency):1,a=n*s;if(a<=0)return;const o=Math.min(t.health,a);return e.stacks=Math.max(0,n-1),{hpDamage:o}}});hs("Burn",{onTick({state:e,self:t}){const n=Qt(e.stacks);if(n<=0){e.stacks=n;return}const s=e.potency!==void 0?pn(e.potency):1,a=n*s;if(a<=0)return;const o=Math.min(t.shield,a),r=a-o,i=Math.min(t.health,r);return e.stacks=Math.max(0,n-1),{shieldDamage:o,hpDamage:i}}});hs("Shield",{onGrantShield({state:e}){const t=Qt(e.stacks);if(t<=0)return e.stacks=t,0;const n=t*Hs(e);return n>0?n:0},onConsumeShield({state:e,amount:t}){const n=Qt(e.stacks);if(n<=0)return e.stacks=0,0;const s=Hs(e);if(s<=0)return e.stacks=0,0;const a=n*s;if(a<=0)return e.stacks=0,0;const o=Math.min(a,vt(t)),r=o/s;return e.stacks=Math.max(0,n-r),o>0?o:0}});hs("Lifesteal",{onHit({state:e,hpDamage:t}){if(t<=0)return 0;const n=bc(e);if(n<=0)return 0;const s=t*n;return s>0?s:0}});function Te(e){return Number.isFinite(e)?Math.max(0,e):0}function Ha(e,t){const n=Te(t?.health??e?.health??0),s=Te(t?.shield??e?.shield??0);return{id:e?.id??"unknown",faction:e?.faction,health:n,maxHealth:e?.maxHealth,shield:s}}function Ga(e){if(!e)return!1;const t=e;return typeof t.onHit=="function"||typeof t.onKill=="function"||Array.isArray(t.onHit)||Array.isArray(t.onKill)}function Ua(e){return e?Array.isArray(e)?e.filter(t=>typeof t=="function"):typeof e=="function"?[e]:[]:[]}function wc(e){if(!e)return[];if(typeof e[Symbol.iterator]=="function"){const n=[];for(const s of e)Ga(s)&&n.push(s);return n}return Object.values(e).filter(n=>Ga(n))}function Bn(e,t,n){if(!e)return;const s=Ua(e.hooks?.[t]);for(const o of s)o(n);const a=wc(e.keywords);for(const o of a)for(const r of Ua(o[t]))r(n)}function Fa(e){const t=Te(e?.health??0),n=Te(e?.maxHealth??t);return{health:t,maxHealth:Math.max(n,t),shield:Te(e?.shield??0)}}function vc(){return{health:0,maxHealth:0,shield:0}}function Sc(e){const t=e.attacker??null,n=e.defender,s=e.baseDamage,a=Te(e.minimumDamage??1),o=Number.isFinite(s)?Te(s):Te(t?.attack??0),r=Te(n.defense??0),i=Ac(),c=Fa(n),l=t?Fa(t):null,d=ja(n.keywords??null,"defender",i.defender),u=t?ja(t.keywords??null,"attacker",i.attacker):null,h=l??vc();d&&d.runTick(c,h),u&&l&&u.runTick(l,c);const f=c.health>0,m=Te(c.shield);d&&d.grantShield(c,h);const p=Te(c.shield),g=f?Math.max(a,o-r):0,A=f?Math.min(p,g):0,M=f?Math.max(0,g-A):0;c.shield=Math.max(0,p-A);const v=Math.min(m,A),P=Math.max(0,A-v);d&&P>0&&d.consumeShield(P,c,h);const b=d?d.getShieldValue():0;i.defender.keywordShieldRemaining=b;const N=Math.max(0,m-v);c.shield=N+b;const C=c.health;c.health=Math.max(0,C-M);const I=c.health,w=I<=0;let z=0;u&&l?(z=u.applyHit(M,l,c),i.attacker.keywordShieldRemaining=u.getShieldValue()):i.attacker.keywordShieldRemaining=0;const y=Ha(t,l??void 0),k=Ha(n,{health:I,shield:N+b}),L={attacker:y,defender:k,damage:g,shieldDamage:A,hpDamage:M,lethal:w},R={...L,source:"defender"};if(Bn(n,"onHit",R),xn("combat:onHit",R),t){const x={...L,source:"attacker"};Bn(t,"onHit",x),xn("combat:onHit",x),w&&(Bn(t,"onKill",x),xn("combat:onKill",x))}return w&&(Bn(n,"onKill",R),xn("combat:onKill",R)),{damage:g,shieldDamage:A,hpDamage:M,lethal:w,remainingHealth:I,remainingShield:N+b,attackerHealing:z,attackerRemainingHealth:l?.health,attackerRemainingShield:l?.shield,keywordEffects:i}}const Ka=5;function ve(e){return`${e.q},${e.r}`}function Ya(e){const[t,n]=e.split(",").map(Number);return{q:t,r:n}}class Ec{constructor(t,n,s,a,o,r=[]){this.id=t,this.type=n,this.coord=s,this.faction=a,this.stats=o,this.priorityFactions=r,this.maxHealth=o.health}alive=!0;listeners={};maxHealth;healMarkerElapsed=0;healAmountBuffer=0;cachedTargetKey;cachedStartKey;cachedPath;movementCooldownSeconds=0;shield=0;immortal=!1;combatHooks=null;combatKeywords=null;onDeath(t){(this.listeners.death??=[]).push(t)}emitDeath(){for(const t of this.listeners.death??[])t()}isDead(){return!this.alive}getMaxHealth(){return this.maxHealth}distanceTo(t){return nn(this.coord,t)}getVisionRange(){const{visionRange:t}=this.stats;return Number.isFinite(t)?t:3}attack(t){return this.distanceTo(t.coord)>this.stats.attackRange?null:t.takeDamage(this.stats.attackDamage,this)}update(t,n){if(!(this.isDead()||!n))if(nn(this.coord,n.pos)<=n.auraRadius){const s=this.stats.health;if(this.stats.health=Math.min(this.stats.health+n.regenPerSec*t,this.maxHealth),this.stats.health>s){const a=this.stats.health-s;this.healMarkerElapsed+=t,this.healAmountBuffer+=a,(this.healMarkerElapsed>=.9||this.healAmountBuffer>=2)&&this.flushHealEvent()}}else this.healAmountBuffer>0&&this.flushHealEvent(),this.healMarkerElapsed=0,this.healAmountBuffer=0}flushHealEvent(){if(this.healAmountBuffer<=0){this.healMarkerElapsed=0;return}const t=Math.round(this.healAmountBuffer*10)/10;t>0&&E.emit("unitHealed",{unitId:this.id,amount:t,remainingHealth:this.stats.health}),this.healAmountBuffer=0,this.healMarkerElapsed=0}takeDamage(t,n){const s=Number.isFinite(t);if(s&&t<=0||!s&&!n)return null;const a=n?n.toCombatParticipant():null,o=this.toCombatParticipant(),r=Sc({attacker:a,defender:o,baseDamage:s?t:void 0});this.stats.health=r.remainingHealth,this.shield=r.remainingShield;let i=r;if(r.lethal&&this.alive&&this.immortal&&(this.stats.health=Math.max(1,this.stats.health),i={...r,lethal:!1,remainingHealth:this.stats.health,remainingShield:this.shield}),n&&r.attackerRemainingHealth!==void 0){const c=Math.min(n.getMaxHealth(),Math.max(0,r.attackerRemainingHealth));n.stats.health=c}return n&&r.attackerRemainingShield!==void 0&&n.setShield(r.attackerRemainingShield),i.damage>0&&E.emit("unitDamaged",{attackerId:n?.id,targetId:this.id,amount:i.damage,remainingHealth:this.stats.health}),i.lethal&&this.alive&&(this.stats.health=0,this.alive=!1,E.emit("unitDied",{unitId:this.id,attackerId:n?.id,unitFaction:this.faction,attackerFaction:n?.faction}),this.emitDeath()),i}getShield(){return this.shield}setShield(t){if(!Number.isFinite(t)||t<=0){this.shield=0;return}this.shield=t}updateStats(t){this.stats.attackDamage=t.attackDamage,this.stats.attackRange=t.attackRange,this.stats.movementRange=t.movementRange,typeof t.defense=="number"&&Number.isFinite(t.defense)?this.stats.defense=t.defense:delete this.stats.defense,typeof t.visionRange=="number"&&Number.isFinite(t.visionRange)&&(this.stats.visionRange=t.visionRange);const n=Math.max(1,Math.round(t.health));this.maxHealth=n,this.stats.health=Math.min(n,Math.max(0,this.stats.health))}isImmortal(){return this.immortal}setImmortal(t){this.immortal=!!t}toCombatParticipant(){return{id:this.id,faction:this.faction,attack:this.stats.attackDamage,defense:this.stats.defense,health:this.stats.health,maxHealth:this.maxHealth,shield:this.shield,hooks:this.combatHooks,keywords:this.combatKeywords}}addMovementTime(t){!Number.isFinite(t)||t<=0||(this.movementCooldownSeconds+=t)}canStep(t=Ka){return this.movementCooldownSeconds>=t}consumeMovementCooldown(t=Ka){return this.canStep(t)?(this.movementCooldownSeconds-=t,!0):!1}moveTowards(t,n,s){const a=this.getPathTo(t,n,s);if(a.length<2)return[];let o=0;const r=ve(t);for(let c=1;c<a.length;c++){const l=ve(a[c]);if(s.has(l)){l!==r&&this.clearPathCache();break}o=c}if(o===0)return[];const i=Math.min(this.stats.movementRange,o);return a.slice(0,i+1)}getPathTo(t,n,s){const a=ve(this.coord),o=ve(t);return(!this.cachedPath||this.cachedTargetKey!==o||this.cachedStartKey!==a)&&(this.cachedPath=this.findPath(t,n,s),this.cachedTargetKey=o,this.cachedStartKey=a),this.cachedPath}advancePathCache(t){!this.cachedPath||t<=0||(this.cachedPath=this.cachedPath.slice(t),this.cachedPath.length>0?this.cachedStartKey=ve(this.cachedPath[0]):(this.cachedPath=void 0,this.cachedStartKey=void 0,this.cachedTargetKey=void 0))}clearPathCache(){this.cachedPath=void 0,this.cachedStartKey=void 0,this.cachedTargetKey=void 0}findPath(t,n,s){const a=this.coord,o=ve(a),r=ve(t),i=new Set([o]),c=new Map([[o,null]]),l=new Map([[o,0]]),d=new Map([[o,nn(a,t)]]);for(;i.size>0;){let f=null,m=1/0;for(const A of i){const M=d.get(A)??1/0;M<m&&(m=M,f=A)}if(f===null||f===r)break;i.delete(f);const p=Ya(f),g=l.get(f)??1/0;for(const A of Xn(p)){const M=ve(A);if(M!==r&&!this.isPassable(A,n,s))continue;const v=g+1;v<(l.get(M)??1/0)&&(c.set(M,f),l.set(M,v),d.set(M,v+nn(A,t)),i.add(M))}}if(!c.has(r))return[a];const u=[];let h=r;for(;h;)u.push(Ya(h)),h=c.get(h)??null;return u.reverse()}seekNearestEnemy(t,n,s){const a=new Map;for(const i of t)a.set(ve(i.coord),i);const o=[this.coord],r=new Set([ve(this.coord)]);for(;o.length>0;){const i=o.shift(),c=ve(i),l=a.get(c);if(l)return l;for(const d of Xn(i)){const u=ve(d),h=a.get(u);if(h)return h;this.isPassable(d,n,s)&&(r.has(u)||(r.add(u),o.push(d)))}}return null}canTraverse(t,n,s){return this.isPassable(t,n,s)}isPassable(t,n,s){const a=n.getTile(t.q,t.r);return!a||s&&s.has(ve(t))?!1:a.terrain!==Ie.Lake}}class Cc{static selectTarget(t,n){let s=n.filter(o=>o.faction!==t.faction&&!o.isDead());if(s.length===0)return null;if(t.priorityFactions.length>0){const o=s.filter(r=>t.priorityFactions.includes(r.faction));o.length>0&&(s=o)}const a=s.filter(o=>t.distanceTo(o.coord)<=t.stats.attackRange);return a.length>0?(a.sort((o,r)=>o.stats.health-r.stats.health),a[0]):(s.sort((o,r)=>t.distanceTo(o.coord)-t.distanceTo(r.coord)),s[0]??null)}}const xc=4,Bc=8;class zc{buckets=[];bucketCount=0;currentBucket=0;minBuckets;maxBuckets;constructor(t={}){this.minBuckets=t.minBuckets??xc,this.maxBuckets=t.maxBuckets??Bc}reset(){this.buckets=[],this.bucketCount=0,this.currentBucket=0}next(t){const n=t.length;if(n===0)return this.reset(),[];const s=this.computeBucketCount(n);s!==this.bucketCount&&(this.bucketCount=s,this.currentBucket=this.currentBucket%Math.max(1,s)),this.rebuildBuckets(t);const a=this.buckets[this.currentBucket]??[];return this.bucketCount>0&&(this.currentBucket=(this.currentBucket+1)%this.bucketCount),a}rebuildBuckets(t){const n=this.bucketCount;this.buckets=Array.from({length:n},()=>[]);const s=[...t].sort((a,o)=>a.id.localeCompare(o.id));for(let a=0;a<s.length;a++){const o=a%n;this.buckets[o].push(s[a])}}computeBucketCount(t){if(t<=0)return 0;const n=Math.ceil(t/12);let s=Math.max(this.minBuckets,n);return s=Math.min(this.maxBuckets,s),s=Math.min(s,t),s=Math.max(1,s),s}}function Ss(e){return`${e.q},${e.r}`}const Dc=500;class Ic{cache=new Map;targetIndex=new Map;targetPositions=new Map;ttlMs;constructor(t=Dc){this.ttlMs=t}clearExpired(t=Date.now()){for(const[n,s]of this.cache.entries())if(s.expiresAt<=t&&(this.cache.delete(n),s.targetId)){const a=this.targetIndex.get(s.targetId);a?.delete(n),a&&a.size===0&&this.targetIndex.delete(s.targetId)}}trackUnit(t){this.invalidateIfTargetMoved(t.id,Ss(t.coord))}invalidateForUnit(t){const n=this.targetIndex.get(t);if(n){for(const s of n)this.cache.delete(s);this.targetIndex.delete(t)}this.targetPositions.delete(t)}getPath(t,n,s,a,o={}){const r=o.now??Date.now(),i=o.targetId,c=Ss(n);i&&this.invalidateIfTargetMoved(i,c);const l=this.hashObstacles(a),d=this.createCacheKey(Ss(t.coord),c,l),u=this.cache.get(d);if(u&&u.expiresAt>r)return u.path;t.clearPathCache();const h=t.getPathTo(n,s,a);if(this.cache.set(d,{path:h,expiresAt:r+this.ttlMs,targetId:i}),i){let f=this.targetIndex.get(i);f||(f=new Set,this.targetIndex.set(i,f)),f.add(d),this.targetPositions.set(i,c)}return h}invalidateIfTargetMoved(t,n){const s=this.targetPositions.get(t);if(!s){this.targetPositions.set(t,n);return}if(s===n)return;const a=this.targetIndex.get(t);if(a){for(const o of a)this.cache.delete(o);a.clear()}this.targetPositions.set(t,n)}hashObstacles(t){return t.size===0?"empty":Array.from(t).sort().join("|")}createCacheKey(t,n,s){return`${t}->${n}|${s}`}}const Nc={baseThreshold:50,heatPerSecond:50/30,thresholdGrowth:.05,coolingPerSecond:0};function me(e,t=0){return Number.isFinite(e)?e:t}class Pc{heat;threshold;baseThreshold;thresholdGrowthFactor;heatPerSecond;coolingPerSecond;maxStoredHeat;constructor(t={}){const n={...Nc,...t},s=Math.max(1,me(n.baseThreshold,50)),a=Math.max(1,me(t.initialThreshold??s,s));this.baseThreshold=s,this.threshold=a,this.thresholdGrowthFactor=1+Math.max(0,me(n.thresholdGrowth,0)),this.heatPerSecond=Math.max(0,me(n.heatPerSecond,0)),this.coolingPerSecond=Math.max(0,me(n.coolingPerSecond,0));const o=me(n.maxStoredHeat??Number.NaN,Number.NaN);this.maxStoredHeat=Number.isFinite(o)&&o>=0?o:null;const r=Math.max(0,me(t.initialHeat??0,0));this.heat=this.setHeatInternal(r)}getHeat(){return this.heat}getThreshold(){return this.threshold}getBuildRate(){return this.heatPerSecond}getCoolingRate(){return this.coolingPerSecond}reset(){this.heat=0,this.threshold=this.baseThreshold}setHeat(t){const n=Math.max(0,me(t,0));return this.heat=this.setHeatInternal(n),this.heat}setHeatInternal(t){const n=Math.max(0,me(t,0));return this.maxStoredHeat===null?(this.heat=n,this.heat):(this.heat=Math.min(n,this.maxStoredHeat),this.heat)}addHeat(t){const n=Math.max(0,me(t,0));if(n<=0)return 0;const s=this.heat,a=s+n;return this.heat=this.maxStoredHeat===null?a:Math.min(a,this.maxStoredHeat),this.heat-s}cool(t){const n=Math.max(0,me(t,0));if(n<=0||this.heat<=0)return 0;const s=this.heat;return this.heat=Math.max(0,this.heat-n),s-this.heat}vent(t=1){const n=Math.max(0,Math.min(1,me(t,1)));return n<=0?0:this.cool(this.threshold*n)}advance(t,n){const s=Math.max(0,me(t,0)),a=this.heatPerSecond,o=s>0?a*s:0,r=Math.max(0,me(n?.bonusHeat??0,0)),i=o+r,c=this.addHeat(i),l=Math.max(0,me(n?.coolingMultiplier??1,1)),d=s>0?this.coolingPerSecond*s*l:0,u=this.cool(d);return{addedHeat:c,cooledHeat:u,heat:this.heat}}hasTriggerReady(){return this.heat>=this.threshold-1e-6}consumeTrigger(){return this.hasTriggerReady()?(this.cool(this.threshold),this.threshold=Math.max(this.baseThreshold,this.threshold*this.thresholdGrowthFactor),!0):!1}timeUntilNextTrigger(){return this.hasTriggerReady()?0:this.heatPerSecond<=0?Number.POSITIVE_INFINITY:Math.max(0,this.threshold-this.heat)/this.heatPerSecond}getCooldownSeconds(){return this.heatPerSecond<=0?Number.POSITIVE_INFINITY:this.threshold/this.heatPerSecond}}function kc(e){return new Pc(e)}const Xa=500;function er(e,t,n){const s=typeof t=="number"?t:2,a=(typeof t=="number"?n:t)??[],o=[];for(let i=-s;i<=s;i++){const c=Math.max(-s,-i-s),l=Math.min(s,-i+s);for(let d=c;d<=l;d++){const u=Math.max(Math.abs(i),Math.abs(d),Math.abs(-i-d));if(u===0||u>s)continue;const h={q:e.q+i,r:e.r+d};a.some(m=>!m.isDead()&&m.coord.q===h.q&&m.coord.r===h.r)||o.push(h)}}if(o.length===0)return null;const r=Math.floor(Math.random()*o.length);return o[r]}function Lc(e,t,n={}){const s=kc(t),a=s.getBuildRate(),o=s.getCooldownSeconds(),r=s.timeUntilNextTrigger(),i=Number.isFinite(n.maxRosterSize)?Math.max(0,Math.floor(n.maxRosterSize??0)):0,c=Number.isFinite(n.maxHealth)?Math.max(1,Math.floor(n.maxHealth??Xa)):Xa,l=Number.isFinite(n.health)?Math.max(0,Math.min(c,Math.floor(n.health??c))):c;return{id:"sauna",pos:e,auraRadius:2,regenPerSec:1,rallyToFront:!1,maxRosterSize:i,maxHealth:c,health:l,destroyed:l<=0,heat:s.getHeat(),heatPerTick:a,playerSpawnThreshold:s.getThreshold(),playerSpawnCooldown:Number.isFinite(o)?o:0,playerSpawnTimer:Number.isFinite(r)?r:0,beerUpkeepAccumulator:0,heatTracker:s}}function Tc(e,t){if(!Number.isFinite(t)||t<=0||e.destroyed)return{amount:0,remainingHealth:Math.max(0,e.health),destroyed:e.destroyed};const n=Math.max(0,e.health),s=Math.min(n,Math.max(0,Math.floor(t))),a=Math.max(0,n-s);return e.health=a,a<=0&&(e.health=0,e.destroyed=!0),{amount:s,remainingHealth:e.health,destroyed:e.destroyed}}const Rc=30;function ge(e){return`${e.q},${e.r}`}class jc{constructor(t){this.map=t}scheduler=new zc;pathCache=new Ic;findExplorationGoal(t,n){const s=t.coord;if(this.map.ensureTile(s.q,s.r).isFogged&&t.canTraverse(s,this.map,n))return s;const o=new Set([ge(s)]),r=[s];for(;r.length>0;){const i=r.shift(),c=Xn(i),l=this.map.getNeighbors(i.q,i.r);for(let d=0;d<c.length;d++){const u=c[d],h=l[d],f=ge(u);if(!o.has(f)&&(o.add(f),!!t.canTraverse(u,this.map,n))){if(h.isFogged)return u;r.push(u)}}}return null}tick(t,n,s){const a=t.length,o=Date.now();if(this.pathCache.clearExpired(o),a===0){this.scheduler.reset();return}for(const l of t)l.addMovementTime(n);const r=new Set,i=[];for(const l of t){if(l.isDead()){l.clearPathCache(),this.pathCache.invalidateForUnit(l.id);continue}this.pathCache.trackUnit(l),i.push(l),r.add(ge(l.coord))}if(i.length===0){this.scheduler.reset();return}const c=this.scheduler.next(i);if(c.length!==0)for(const l of c){const d=ge(l.coord);if(r.delete(d),l.isDead()){l.clearPathCache(),this.pathCache.invalidateForUnit(l.id);continue}const u=Cc.selectTarget(l,t);if(!u&&s&&!s.destroyed&&this.tryAttackSauna(l,s)){const A=ge(l.coord);r.add(A);continue}if(!u){let g=null;if(s&&!s.destroyed&&(g=s.pos),g||(g=this.findExplorationGoal(l,r)),g){const M=this.computeMovementPath(l,g,r,o);if(M.length>1&&l.stats.movementRange>0){const v=M[1],P=ge(v);if(r.has(P))l.clearPathCache();else{if(!l.canStep()){r.add(d);continue}if(l.consumeMovementCooldown()){l.coord=v,l.advancePathCache(1);const b=ge(l.coord);b===ge(g)&&l.clearPathCache(),r.add(b);continue}}}else l.clearPathCache()}else l.clearPathCache();const A=ge(l.coord);r.add(A),s&&!s.destroyed&&this.tryAttackSauna(l,s);continue}if(u.isDead()){l.clearPathCache(),r.add(d);continue}const h=ge(u.coord),f=this.pathCache.getPath(l,u.coord,this.map,r,{now:o,targetId:u.id});if(f.length>1&&l.stats.movementRange>0){const g=f[1],A=ge(g),M=A===h;!r.has(A)||M?l.canStep()&&l.consumeMovementCooldown()&&(l.coord=g,l.advancePathCache(1)):l.clearPathCache()}const m=ge(l.coord);r.add(m);const p=ge(u.coord);p!==h&&l.clearPathCache(),l.distanceTo(u.coord)<=l.stats.attackRange&&!u.isDead()&&((l.attack(u)?.lethal??!1)||u.isDead())&&(r.delete(p),l.clearPathCache(),this.pathCache.invalidateForUnit(u.id))}}tryAttackSauna(t,n){if(t.faction==="player")return!1;const s=t.stats.attackRange;if(s<=0||t.distanceTo(n.pos)>s)return!1;const a=Tc(n,t.stats.attackDamage);if(a.amount<=0)return!1;const o={attackerId:t.id,attackerFaction:t.faction,amount:a.amount,remainingHealth:a.remainingHealth};if(E.emit("saunaDamaged",o),a.destroyed){const r={attackerId:t.id,attackerFaction:t.faction};E.emit("saunaDestroyed",r)}return!0}computeMovementPath(t,n,s,a){const o=this.pathCache.getPath(t,n,this.map,s,{now:a});if(o.length<2)return[];let r=0;const i=ge(n);for(let l=1;l<o.length;l++){const d=ge(o[l]);if(s.has(d)){d!==i&&t.clearPathCache();break}r=l}if(r===0)return[];const c=Math.min(t.stats.movementRange,r);return o.slice(0,c+1)}}function fs(e){if(!Number.isFinite(e??NaN))return 1;const t=Math.floor(e);return Math.max(1,t)}function Oc(e){return Math.max(0,fs(e)-1)}function Qc(e,t="linear"){const n=Oc(e);switch(t){case"accelerating":return n*(n+1)/2;case"diminishing":return n===0?0:Math.log2(n+1);case"linear":default:return n}}function Hc(e,t="round"){switch(t){case"floor":return Math.floor(e);case"ceil":return Math.ceil(e);case"none":return e;case"round":default:return Math.round(e)}}function Gc(e,t,n){let s=e;return Number.isFinite(t)&&(s=Math.max(s,t)),Number.isFinite(n)&&(s=Math.min(s,n)),s}function Jt(e,t){const n=fs(t),s=e.curve??"linear",a=Qc(n,s),o=e.base+e.growth*a,r=Gc(o,e.min,e.max);return Hc(r,e.round??"round")}function An(e,t){const n=fs(t),s=e.stats,a={health:Jt(s.health,n),attackDamage:Jt(s.attackDamage,n),attackRange:Jt(s.attackRange,n),movementRange:Jt(s.movementRange,n)};return s.visionRange&&(a.visionRange=Jt(s.visionRange,n)),a}function qa(e){if(typeof e=="number"&&Number.isFinite(e))return e}function Jn(e,t){let n=e.health,s=e.attackDamage,a=e.attackRange,o=e.movementRange,r=qa(e.defense),i=qa(e.shield);for(const l of t){const d=Math.max(1,Math.round(l.quantity)),u=l.modifiers;typeof u.health=="number"&&(n+=u.health*d),typeof u.attackDamage=="number"&&(s+=u.attackDamage*d),typeof u.attackRange=="number"&&(a+=u.attackRange*d),typeof u.movementRange=="number"&&(o+=u.movementRange*d),typeof u.defense=="number"&&(r=(r??0)+u.defense*d),typeof u.shield=="number"&&(i=(i??0)+u.shield*d)}const c={health:Math.max(1,Math.round(n)),attackDamage:Math.max(0,Math.round(s)),attackRange:Math.max(0,Math.round(a)),movementRange:Math.max(0,Math.round(o))};return r!==void 0&&(c.defense=Math.max(0,Math.round(r))),i!==void 0&&(c.shield=Math.max(0,Math.round(i))),typeof e.visionRange=="number"&&Number.isFinite(e.visionRange)&&(c.visionRange=Math.max(0,Math.round(e.visionRange))),c}const aa=Object.freeze({id:"soldier",displayName:"Sauna Soldier",cost:50,tags:["infantry","melee"],stats:{health:{base:20,growth:6,curve:"linear",round:"round"},attackDamage:{base:5,growth:1,curve:"linear",round:"round"},attackRange:{base:1,growth:0,round:"round"},movementRange:{base:1,growth:0,round:"round"},visionRange:{base:3,growth:0,round:"round"}}}),oa=Object.freeze({id:"archer",displayName:"Sauna Archer",cost:75,tags:["ranged"],stats:{health:{base:15,growth:4,curve:"linear",round:"round"},attackDamage:{base:3,growth:.4,curve:"accelerating",round:"ceil"},attackRange:{base:3,growth:.5,curve:"diminishing",round:"ceil",max:5},movementRange:{base:1,growth:0,round:"round"},visionRange:{base:3,growth:.25,curve:"linear",round:"round",max:5}}}),tr=Object.freeze({id:"avanto-marauder",displayName:"Avanto Marauder",cost:0,tags:["enemy","melee"],stats:{health:{base:12,growth:5,curve:"linear",round:"round"},attackDamage:{base:4,growth:.6,curve:"accelerating",round:"ceil"},attackRange:{base:1,growth:0,round:"round"},movementRange:{base:1,growth:.25,curve:"linear",round:"round",max:2},visionRange:{base:3,growth:0,round:"round"}}}),nr=Object.freeze({soldier:aa,archer:oa,"avanto-marauder":tr});function ra(e){return nr[e]??null}Object.freeze(Object.keys(nr));const Ja=aa.cost;Object.freeze(An(aa,1));oa.cost;Object.freeze(An(oa,1));Object.freeze(An(tr,1));function sr(e,t,n,s,a){const o=fs(a?.level),r=An(e,o);return new Ec(t,e.id,n,s,r,e.priorityFactions)}function ar(e,t,n,s,a){const o=ra(e);return o?sr(o,t,n,s,a):null}function ia(e,t,n,s,a,o){const r=ra(t);if(!r)return null;const i=r.cost;if(!e.canAfford(i,D.SAUNA_BEER))return st("error"),null;e.addResource(D.SAUNA_BEER,-i);const c=sr(r,n,s,a,o);return st("spawn"),E.emit("unitSpawned",{unit:c}),c}const Uc=Object.freeze(Object.defineProperty({__proto__:null,createUnit:ar,spawnUnit:ia},Symbol.toStringTag,{value:"Module"})),Fc=["Aino","Eero","Ilona","Kalevi","Lumi","Mika","Noora","Oskari","Saana","Tapio","Veera","Yrj"],Kc=["Emberguard","Frostwalker","Steamcaller","Dawnwatch","Gritforged","Stormchant","Snowborn","Torchbearer","Chillwarden","Sisuheart"],Yc=["Aalto","Halla","Karhu","Korhonen","Laine","Mets","Niemi","Salmi","Tuomi","Virta"];function Es(e,t){if(e.length===0)throw new Error("Cannot select a name from an empty collection.");const n=Math.floor(t()*e.length);return e[Math.min(n,e.length-1)]}function Xc(e=Math.random){const t=Es(Fc,e),n=Es(Kc,e),s=Es(Yc,e);return`${t} "${n}" ${s}`}const Ht=Object.freeze(["supply","weapon","focus","relic"]);function or(){return{supply:null,weapon:null,focus:null,relic:null}}const qc=Object.freeze({supply:Object.freeze({id:"supply",label:"Supply Satchel",description:"Consumables and restorative provisions carried into battle.",maxStacks:5}),weapon:Object.freeze({id:"weapon",label:"Primary Armament",description:"The attendant's main weapon or ranged kit.",maxStacks:1}),focus:Object.freeze({id:"focus",label:"Battle Focus",description:"Tools that sharpen aim, steps, or battlefield intuition.",maxStacks:1}),relic:Object.freeze({id:"relic",label:"Sauna Relic",description:"Charms and relics that empower the attendant's resolve.",maxStacks:1})}),Jc=Object.freeze({"birch-sap-satchel":Object.freeze({id:"birch-sap-satchel",slot:"supply",modifiers:{health:3},maxStacks:3}),"steamed-bandages":Object.freeze({id:"steamed-bandages",slot:"supply",modifiers:{shield:4},maxStacks:2}),"aurora-distillate":Object.freeze({id:"aurora-distillate",slot:"supply",modifiers:{attackDamage:2,defense:1},maxStacks:1}),"stolen-sauna-tokens":Object.freeze({id:"stolen-sauna-tokens",slot:"supply",modifiers:{movementRange:.5},maxStacks:5}),"midnight-bloodwine":Object.freeze({id:"midnight-bloodwine",slot:"supply",modifiers:{health:6,attackDamage:1},maxStacks:1}),"sauna-incense":Object.freeze({id:"sauna-incense",slot:"supply",modifiers:{attackRange:1},maxStacks:2}),"glacier-brand":Object.freeze({id:"glacier-brand",slot:"weapon",modifiers:{attackDamage:3},maxStacks:1}),"emberglass-arrow":Object.freeze({id:"emberglass-arrow",slot:"weapon",modifiers:{attackDamage:1,attackRange:2},maxStacks:1}),"aurora-lattice":Object.freeze({id:"aurora-lattice",slot:"focus",modifiers:{attackDamage:2,attackRange:1},maxStacks:1}),"emberglass-shard":Object.freeze({id:"emberglass-shard",slot:"focus",modifiers:{attackDamage:1,movementRange:1},maxStacks:1}),"windstep-totem":Object.freeze({id:"windstep-totem",slot:"focus",modifiers:{movementRange:1,defense:1},maxStacks:1}),"searing-chant-censer":Object.freeze({id:"searing-chant-censer",slot:"focus",modifiers:{attackDamage:2,shield:2},maxStacks:1}),"cracked-ice-amulet":Object.freeze({id:"cracked-ice-amulet",slot:"relic",modifiers:{defense:2},maxStacks:1}),"myrsky-charm":Object.freeze({id:"myrsky-charm",slot:"relic",modifiers:{attackRange:1,defense:1},maxStacks:1}),"frostwyrm-signet":Object.freeze({id:"frostwyrm-signet",slot:"relic",modifiers:{shield:5},maxStacks:1}),"spirit-oak-charm":Object.freeze({id:"spirit-oak-charm",slot:"relic",modifiers:{defense:1,health:2},maxStacks:1})});function yn(e){const t=qc[e];if(!t)throw new Error(`Unknown equipment slot: ${e}`);return t}function Mn(e){return Jc[e]}function rr(e){return Number.isFinite(e)?Math.max(1,Math.round(e)):1}function ir(e,t){return{id:e.id,name:e.name,description:e.description,icon:e.icon,rarity:e.rarity,quantity:t}}function cr(e,t,n,s){const a=yn(t),o=Math.max(1,Math.floor(n.maxStacks??a.maxStacks)),r=Math.min(o,s),i=n.modifiers??{};return{...ir(e,r),slot:t,maxStacks:o,modifiers:i}}function Gs(e){e.equipment||(e.equipment=or());for(const t of Ht)e.equipment[t]??=null;return e.equipment}function Re(e){const t=[];for(const n of Ht){const s=e[n];s&&t.push({...s})}return t}function ca(e){return Re(e).map(t=>ir(t,t.quantity))}function Cs(e){const t=or();for(const n of e){const s=Mn(n.id);if(!s)continue;const a=rr(n.quantity),o=t[s.slot];if(o&&o.id!==n.id)continue;const r=(o?.quantity??0)+a,i=cr(n,s.slot,s,r);t[s.slot]=i}return t}function Zc(e,t){const n=Mn(t.id);if(!n)return{success:!1,slot:"supply",loadout:Re(Gs(e)),item:null,reason:"unknown-item"};const s=Gs(e),a=n.slot,o=yn(a),r=rr(t.quantity),i=Math.max(1,Math.floor(n.maxStacks??o.maxStacks)),c=s[a];if(c&&c.id!==t.id)return{success:!1,slot:a,loadout:Re(s),item:c,reason:"slot-occupied"};const l=Math.min(i,(c?.quantity??0)+r);if((c?.quantity??0)+r>i)return{success:!1,slot:a,loadout:Re(s),item:c,reason:"stack-limit"};const d=cr(t,a,n,l);return s[a]=d,e.items=ca(s),{success:!0,slot:a,loadout:Re(s),item:d}}function Wc(e,t){const n=Gs(e),s=n[t];return s?(n[t]=null,e.items=ca(n),{success:!0,slot:t,loadout:Re(n),removed:s}):{success:!1,slot:t,loadout:Re(n),removed:null,reason:"empty-slot"}}function Vc(e,t){return Mn(e)?.slot===t}const _c={q:0,r:0},$c="Saunoja",Us=18,Za=0,Lt=0,Fn=10,Wa=1,zn={health:Us,attackDamage:4,attackRange:1,movementRange:1,defense:0,shield:0};function Dn(e,t,n){return Math.min(Math.max(e,t),n)}function In(e,t,n){const s=typeof e=="number"&&Number.isFinite(e)?e:t;return Math.max(n,s)}function xs(e,t,n=0){if(typeof e=="number"&&Number.isFinite(e))return Math.max(n,e);if(typeof t=="number"&&Number.isFinite(t))return Math.max(n,t)}function Va(e,t){if(!e||typeof e!="object")return{...t};const n=e,s=In(n.health,t.health,1),a=In(n.attackDamage,t.attackDamage,0),o=In(n.attackRange,t.attackRange,0),r=In(n.movementRange,t.movementRange,0),i=xs(n.defense,t.defense,0),c=xs(n.shield,t.shield,0),l=xs(n.visionRange,t.visionRange,0);return{health:s,attackDamage:a,attackRange:o,movementRange:r,defense:i,shield:c,visionRange:l}}function el(e,t){if(!e||typeof e!="object")return Cs(t);const n=e,s=[];for(const a of Object.values(n)){const o=lr(a);o&&s.push(o)}return s.length===0?Cs(t):Cs(s)}function lr(e){if(!e||typeof e!="object")return null;const t=e,n=typeof t.id=="string"?t.id.trim():"",s=typeof t.name=="string"?t.name.trim():"";if(!n||!s)return null;const a=typeof t.description=="string"?t.description.trim():void 0,o=typeof t.icon=="string"?t.icon.trim():void 0,r=typeof t.rarity=="string"?t.rarity.trim():void 0,i=typeof t.quantity=="number"?t.quantity:Number(t.quantity),c=Number.isFinite(i)?Math.max(1,Math.round(i)):1;return{id:n,name:s,description:a,icon:o,rarity:r,quantity:c}}function tl(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const s=lr(n);s&&t.push(s)}return t}function nl(e){if(!e||typeof e!="object")return null;const t=e,n=typeof t.id=="string"?t.id.trim():"",s=typeof t.name=="string"?t.name.trim():"";if(!n||!s)return null;const a=t.duration;let o=1/0;typeof a=="number"&&Number.isFinite(a)?o=Math.max(0,a):a!==1/0&&(o=1/0);const r=t.remaining;let i=o;typeof r=="number"&&Number.isFinite(r)?i=Math.max(0,r):r===1/0&&(i=1/0),o!==1/0&&i===1/0&&(i=o);const c=t.appliedAt,l=typeof c=="number"&&Number.isFinite(c)?Math.max(0,c):void 0,d=t.stacks,u=typeof d=="number"&&Number.isFinite(d)?Math.max(1,Math.round(d)):void 0,h=typeof t.description=="string"?t.description.trim():void 0,f=typeof t.source=="string"?t.source.trim():void 0;return{id:n,name:s,description:h,duration:o,remaining:i,appliedAt:l,stacks:u,source:f}}function sl(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const s=nl(n);s&&t.push(s)}return t}function al(e){if(typeof e=="string"){const t=e.trim();if(t.length>0)return t}try{return Xc()}catch(t){return console.warn("Falling back to default Saunoja name",t),$c}}function la(e){const{id:t,name:n,coord:s=_c,maxHp:a=Us,hp:o=a,steam:r=0,defense:i,shield:c=0,traits:l=[],upkeep:d=Wa,xp:u=0,lastHitAt:h=Za,selected:f=!1,items:m,modifiers:p,combatKeywords:g=null,combatHooks:A=null}=e,M=Number.isFinite(a)?Math.max(1,a):Us,v=Number.isFinite(o)?o:M,P=Dn(v,0,M),b=Number.isFinite(r)?r:0,N=Dn(b,0,1),I=(Array.isArray(l)?l:[]).filter($=>typeof $=="string").map($=>$.trim()).filter($=>$.length>0),w=Number.isFinite(d)?d:Wa,z=Dn(w,Lt,Fn),y=Number.isFinite(u)?u:0,k=Math.max(0,y),L=Number.isFinite(h)?h:Za,R=Math.max(0,L),x=Number.isFinite(c)?c:0,Q=Math.max(0,x),G=Number.isFinite(i)?i:void 0,ue=G!==void 0?Math.max(0,G):void 0,q=tl(m),Y=sl(p),se=el(e.equipment,q),he=ca(se),Ne={...zn,health:M,defense:ue??zn.defense,shield:zn.shield},X=Va(e.baseStats,Ne),Oe={...X,health:M,defense:ue??X.defense,shield:Q},oe=Va(e.effectiveStats,Oe),Ee=Math.max(1,oe.health),Pe=Dn(P,0,Ee),ye=typeof oe.defense=="number"?Math.max(0,oe.defense):ue??void 0,Qe=typeof oe.shield=="number"?Math.max(0,oe.shield):Q,Ce={...X,health:Math.max(1,X.health),defense:typeof X.defense=="number"?Math.max(0,X.defense):ue??void 0,shield:typeof X.shield=="number"?Math.max(0,X.shield):zn.shield},we={...oe,health:Ee,defense:ye,shield:Qe},xe=al(n);return{id:t,name:xe,coord:{q:s.q,r:s.r},maxHp:Ee,hp:Pe,defense:ye,shield:Qe,steam:N,traits:[...I],upkeep:z,xp:k,lastHitAt:R,selected:f,items:he,baseStats:Ce,effectiveStats:we,equipment:se,modifiers:Y,combatKeywords:g,combatHooks:A}}const Gt=32;function on(e,t,n,s){e.beginPath();for(let a=0;a<6;a++){const o=Math.PI/3*a,r=t+s*Math.cos(o),i=n+s*Math.sin(o);a===0?e.moveTo(r,i):e.lineTo(r,i)}e.closePath()}function da(e,t,n){return Math.min(Math.max(e,t),n)}function ol(e,{centerX:t,centerY:n,hp:s,maxHp:a,radius:o=Gt*.55}){const r=Number.isFinite(a)?Math.max(1,a):1,i=Number.isFinite(s)?s:r,c=da(i/r,0,1);if(e.save(),on(e,t,n,o),e.fillStyle="rgba(7, 11, 18, 0.72)",e.fill(),e.restore(),c>0){e.save(),on(e,t,n,o),e.clip();const l=e.createLinearGradient(t,n+o,t,n-o);l.addColorStop(0,"rgba(46, 160, 98, 0.35)"),l.addColorStop(1,"rgba(218, 255, 239, 0.95)"),e.fillStyle=l;const d=o*2*c,u=n+o-d;e.fillRect(t-o,u,o*2,d),e.restore()}e.save(),on(e,t,n,o),e.lineWidth=Math.max(1,o*.12),e.strokeStyle="rgba(255, 255, 255, 0.28)",e.stroke(),e.restore()}function rl(e,{centerX:t,centerY:n,radius:s=Gt,progress:a=0}){const o=da(a,0,1);if(o<=0)return;const r=Number.isFinite(s)&&s>0?s:Gt;e.save(),e.globalCompositeOperation="lighter",e.globalAlpha=o;const i=e.createRadialGradient(t,n,Math.max(1,r*.1),t,n,r);i.addColorStop(0,"rgba(255, 255, 255, 0.92)"),i.addColorStop(.45,"rgba(255, 255, 255, 0.68)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=i,e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),e.restore()}function il(e,{centerX:t,centerY:n,radius:s=Gt*.85,intensity:a=1}){const o=da(a,0,1);if(o<=0)return;e.save(),on(e,t,n,s),e.clip();const r=e.createLinearGradient(t,n+s,t,n-s);r.addColorStop(0,"rgba(255, 255, 255, 0)"),r.addColorStop(.55,`rgba(255, 255, 255, ${.12*o})`),r.addColorStop(1,`rgba(255, 255, 255, ${.35*o})`),e.globalCompositeOperation="lighter",e.fillStyle=r,e.fillRect(t-s,n-s,s*2,s*2),e.restore(),e.save(),e.globalCompositeOperation="lighter",e.lineCap="round",e.strokeStyle=`rgba(255, 255, 255, ${.25*o})`,e.lineWidth=Math.max(1,s*.08);const i=s*.75,c=s*.35;for(let l=0;l<3;l++){const d=n-s*.5+l*c;e.beginPath(),e.moveTo(t-i,d),e.bezierCurveTo(t-i*.4,d-s*.4,t+i*.4,d+s*.2,t+i,d-s*.45),e.stroke()}e.restore()}const dr="deepwood",ur="Deepwood Wardens",hr="Reclusive guardians attuned to sauna spirits.",fr=[{id:"warding-circle",label:"Warding Circle",weight:2,units:[{unit:"soldier",level:1,quantity:2},{unit:"archer",level:1,quantity:1}],items:["spirit-oak-charm","sauna-incense"],modifiers:["barkskin-ritual"]},{id:"spirit-strike",label:"Spirit Strike",weight:1,units:[{unit:"archer",level:2,quantity:2}],items:["emberglass-arrow"],modifiers:["searing-chant","windstep"]}],cl={id:dr,name:ur,description:hr,bundles:fr},ll=Object.freeze(Object.defineProperty({__proto__:null,bundles:fr,default:cl,description:hr,id:dr,name:ur},Symbol.toStringTag,{value:"Module"})),mr="enemy",gr="Avanto Marauders",pr="Frostbitten raiders who harry the sauna frontier.",Ar=[{id:"iceblade-scouts",label:"Iceblade Scouts",weight:3,units:[{unit:"avanto-marauder",level:1,quantity:1}],items:["cracked-ice-amulet"],modifiers:["frost-resilience"]},{id:"raiding-party",label:"Raiding Party",weight:2,units:[{unit:"avanto-marauder",level:1,quantity:2}],items:["stolen-sauna-tokens"],modifiers:["berserker-drift"]},{id:"frost-champion",label:"Frost Champion",weight:1,units:[{unit:"avanto-marauder",level:2,quantity:1}],items:["glacier-brand"],modifiers:["glacial-ward"]}],dl={id:mr,name:gr,description:pr,bundles:Ar},ul=Object.freeze(Object.defineProperty({__proto__:null,bundles:Ar,default:dl,description:pr,id:mr,name:gr},Symbol.toStringTag,{value:"Module"})),hl=Object.assign({"../content/factions/deepwood.json":ll,"../content/factions/enemy.json":ul}),Zn=new Map;for(const[e,t]of Object.entries(hl)){const n=fl(t),s=pl(n,e);if(Zn.has(s.id))throw new Error(`Duplicate faction bundle id: ${s.id}`);Zn.set(s.id,s)}function fl(e){return typeof e=="object"&&e!==null&&"default"in e?e.default:e}function ua(e){return typeof e=="object"&&e!==null}function Fs(e,t){if(typeof e!="string")throw new Error(`Expected string at ${t}`);const n=e.trim();if(!n)throw new Error(`Expected non-empty string at ${t}`);return n}function Ks(e){if(typeof e!="string")return;const t=e.trim();return t||void 0}function _a(e,t){if(e===void 0)return Object.freeze([]);if(!Array.isArray(e))throw new Error(`Expected array at ${t}`);const n=e.map((s,a)=>{if(typeof s!="string")throw new Error(`Expected string at ${t}[${a}]`);const o=s.trim();if(!o)throw new Error(`Expected non-empty string at ${t}[${a}]`);return o});return Object.freeze(n)}function yr(e,t){const n=typeof e=="number"?e:Number(e);return!Number.isFinite(n)||n<=0?t:n}function $a(e,t){const n=Math.floor(yr(e,t));return n>0?n:t}function ml(e,t){if(!ua(e))throw new Error(`Expected object at ${t}`);const n=Fs(e.unit,`${t}.unit`),s=$a(e.level,1),a=$a(e.quantity,1);return Object.freeze({unit:n,level:s,quantity:a})}function gl(e,t,n){if(!ua(e))throw new Error(`Expected object at ${t}`);const s=Ks(e.id)??`${n}-bundle`,a=Ks(e.label)??s,o=yr(e.weight,1),r=e.units;if(!Array.isArray(r)||r.length===0)throw new Error(`Expected non-empty units array at ${t}.units`);const i=r.map((d,u)=>ml(d,`${t}.units[${u}]`)),c=_a(e.items,`${t}.items`),l=_a(e.modifiers,`${t}.modifiers`);return Object.freeze({id:s,label:a,weight:o,units:Object.freeze(i),items:c,modifiers:l})}function pl(e,t){if(!ua(e))throw new Error(`Expected object at ${t}`);const n=Fs(e.id,`${t}.id`),s=Fs(e.name,`${t}.name`),a=Ks(e.description);if(!Array.isArray(e.bundles)||e.bundles.length===0)throw new Error(`Expected non-empty bundles array at ${t}.bundles`);const o=e.bundles.map((r,i)=>gl(r,`${t}.bundles[${i}]`,`${n}-${i}`));return Object.freeze({id:n,name:s,description:a,bundles:Object.freeze(o)})}Object.freeze(Array.from(Zn.keys()));function Al(e){return Zn.get(e)??null}function yl(e){return Al(e)?.bundles??Object.freeze([])}function Ml(e){return typeof e=="function"?e:Math.random}function bl(e){const t=e();return!Number.isFinite(t)||t<0||t>=1?Math.random():t}function wl(e,t){const n=yl(e);if(n.length===0)throw new Error(`No bundles found for faction: ${e}`);const s=Ml(t),a=n.reduce((i,c)=>i+c.weight,0);if(!Number.isFinite(a)||a<=0)throw new Error(`Invalid bundle weights for faction: ${e}`);const o=bl(s)*a;let r=0;for(const i of n)if(r+=i.weight,o<r)return i;return n[n.length-1]}function vl(){return`e${Date.now()}-${Math.floor(Math.random()*1e6)}`}function Sl(e){return{level:e}}function El(e){let t=Math.max(0,Math.floor(e.availableSlots));const n=[];if(t<=0)return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers};const s=e.makeId??vl,a=typeof e.random=="function"?e.random:Math.random,o=Math.max(0,Math.min(.95,typeof e.eliteOdds=="number"?e.eliteOdds:0)),r=Math.max(1,Number.isFinite(e.difficultyMultiplier)?e.difficultyMultiplier:1);for(const i of e.bundle.units){const c=Math.max(1,Math.round(i.quantity*r)),l=Math.min(c,t),d=i.unit,u=Math.max(1,Math.round(i.level*r));for(let h=0;h<l;h+=1){const f=a()<o?1:0,m=Math.max(1,u+f),p=Sl(m),g=e.pickEdge();if(!g)return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers};const A=ar(d,s(),g,e.factionId,p);if(A&&(e.addUnit(A),n.push(A),t-=1,t<=0))return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers}}}return{spawned:Object.freeze(n),items:e.bundle.items,modifiers:e.bundle.modifiers}}class Cl{timer;interval;spawnCycles;factionId;random;makeId;difficulty;eliteOdds;constructor(t={}){this.factionId=t.factionId??"enemy",this.random=typeof t.random=="function"?t.random:Math.random;const n=Number.isFinite(t.difficulty)?Number(t.difficulty):1;this.difficulty=Math.max(.5,n);const s=typeof t.eliteOdds=="number"?t.eliteOdds:0;this.eliteOdds=Math.max(0,Math.min(.95,s));const a=Math.max(10,30/this.difficulty);this.interval=a,this.timer=a,this.spawnCycles=0;const o=(()=>{let r=0;return()=>`e${Date.now()}-${r+=1}`})();this.makeId=typeof t.idFactory=="function"?t.idFactory:o}update(t,n,s,a){if(this.timer-=t,this.timer>0)return;const o=n.filter(d=>d.faction===this.factionId&&!d.isDead()).length,r=Rc-o;if(r>0){const d=wl(this.factionId,this.random),u=this.computeRampFactor(this.spawnCycles);El({bundle:d,factionId:this.factionId,pickEdge:a,addUnit:s,makeId:this.makeId,availableSlots:r,eliteOdds:this.eliteOdds,random:this.random,difficultyMultiplier:u}),this.spawnCycles+=1}const i=Math.pow(.95,this.difficulty);this.interval=Math.max(8,this.interval*i);const c=this.computeRampFactor(this.spawnCycles),l=Math.max(2,this.interval/c);this.timer=l}computeRampFactor(t){if(t<=0)return 1;const n=1+t*.05*Math.max(1,this.difficulty);return Math.max(1,n)}}function ms(e){let t=e.querySelector(".hud-top-row");t||(t=document.createElement("div"),t.className="hud-top-row",e.prepend(t));let n=t.querySelector(".hud-actions");n||(n=document.createElement("div"),n.className="hud-actions",t.appendChild(n));let s=t.querySelector(".hud-right-column");if(!s){s=document.createElement("div"),s.className="hud-right-column",t.appendChild(s);const r=e.querySelector("#resource-bar");r&&s.prepend(r)}const a=e.querySelector("#build-menu");a&&a.parentElement!==n&&n.appendChild(a);let o=e.querySelector(".hud-mobile-bar__tray");if(!o){const r=document.createElement("div");r.className="hud-mobile-bar",o=document.createElement("div"),o.className="hud-mobile-bar__tray",r.appendChild(o),e.appendChild(r)}return{container:t,actions:n,side:s,mobileBar:o}}const eo=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function xl(e,t={}){const n=document.getElementById("ui-overlay");if(!n)return{update:()=>{},dispose:()=>{}};const s=document.createElement("div");s.classList.add("sauna-control"),s.dataset.tutorialTarget="heat";const a=document.createElement("button");a.type="button",a.textContent="Sauna ",a.classList.add("topbar-button","sauna-toggle"),a.setAttribute("aria-expanded","false"),s.appendChild(a);const o=document.createElement("div");o.classList.add("sauna-card","hud-card"),o.hidden=!0;const r=document.createElement("section");r.classList.add("sauna-health");const i=`sauna-health-label-${Math.floor(Math.random()*1e5)}`,c=document.createElement("div");c.classList.add("sauna-health__header");const l=document.createElement("span");l.id=i,l.classList.add("sauna-health__title"),l.textContent="Sauna Integrity",c.appendChild(l);const d=document.createElement("span");d.classList.add("sauna-health__value"),d.setAttribute("aria-live","polite"),c.appendChild(d),r.appendChild(c);const u=document.createElement("div");u.classList.add("sauna-health__bar"),u.setAttribute("role","meter"),u.setAttribute("aria-valuemin","0"),u.setAttribute("aria-labelledby",i);const h=document.createElement("div");h.classList.add("sauna-health__fill"),u.appendChild(h),r.appendChild(u);const f=document.createElement("div");f.classList.add("sauna-health__destruction"),f.hidden=!0,u.appendChild(f);const m=document.createElement("div");m.classList.add("sauna-progress");const p=document.createElement("div");p.classList.add("sauna-progress__fill"),m.appendChild(p),o.appendChild(r),o.appendChild(m);const g=document.createElement("div");g.classList.add("sauna-roster");const A=document.createElement("div");A.classList.add("sauna-roster__header");const M=document.createElement("span");M.textContent="Roster Cap",M.classList.add("sauna-roster__title"),A.appendChild(M);const v=document.createElement("span");v.classList.add("sauna-roster__value"),v.setAttribute("aria-live","polite"),A.appendChild(v),g.appendChild(A);const P=document.createElement("p");P.classList.add("sauna-roster__description"),P.textContent="Tune how many attendants may be active before new recruits wait in the steam.",g.appendChild(P);const b=`sauna-roster-${Math.floor(Math.random()*1e5)}`,N=document.createElement("label");N.classList.add("sauna-roster__label"),N.htmlFor=b,N.textContent="Active attendants";const C=document.createElement("input");C.type="range",C.id=b,C.min="0",C.step="1",C.classList.add("sauna-roster__slider");const I=document.createElement("input");I.type="number",I.min="0",I.step="1",I.inputMode="numeric",I.classList.add("sauna-roster__number");const w=document.createElement("div");w.classList.add("sauna-roster__controls"),w.appendChild(N),w.appendChild(C),w.appendChild(I),g.appendChild(w),o.appendChild(g);const z=document.createElement("label");z.classList.add("sauna-option");const y=document.createElement("input");y.type="checkbox",y.classList.add("sauna-option__input"),y.checked=e.rallyToFront,y.addEventListener("change",()=>{e.rallyToFront=y.checked}),z.appendChild(y);const k=document.createElement("span");k.textContent="Rally to Front",k.classList.add("sauna-option__label"),z.appendChild(k),o.appendChild(z),s.appendChild(o);const{actions:L}=ms(n),R=typeof matchMedia=="function"?matchMedia("(prefers-reduced-motion: reduce)"):null;let x=!!R?.matches;const Q=(j,Z)=>{typeof j.addEventListener=="function"?j.addEventListener("change",Z):typeof j.addListener=="function"&&j.addListener(Z)},G=(j,Z)=>{typeof j.removeEventListener=="function"?j.removeEventListener("change",Z):typeof j.removeListener=="function"&&j.removeListener(Z)},ue=j=>{x=!!j.matches,r.dataset.motion=x?"reduced":"full"};r.dataset.motion=x?"reduced":"full",R&&Q(R,ue);const q=()=>{const j=t.getRosterCapLimit?.();return typeof j=="number"&&Number.isFinite(j)?Math.max(0,Math.floor(j)):Math.max(0,Math.floor(e.maxRosterSize))},Y=(j,Z)=>{const J=Math.max(0,Math.min(j,Math.floor(Z)));C.max=String(j),C.value=String(J),C.setAttribute("aria-valuemax",C.max),C.setAttribute("aria-valuenow",C.value),I.max=String(j),I.value=String(J),v.textContent=J===0?"Paused":`${J}`,v.dataset.state=J===0?"paused":"active",I.setAttribute("aria-label",`Roster cap set to ${J}`)},se=(j,Z)=>{const J=Number(j),V=q(),de=Number.isFinite(J)?Math.max(0,Math.floor(J)):0;let ee=Math.max(0,Math.min(V,de));return t.updateMaxRosterSize?ee=t.updateMaxRosterSize(ee,{persist:Z}):e.maxRosterSize=ee,Y(V,ee),ee},he=()=>{se(Number(C.value),!1)},Ne=()=>{se(Number(C.value),!0)};C.addEventListener("input",he),C.addEventListener("change",Ne);const X=j=>{se(Number(I.value),j)},Oe=()=>{X(!1)},oe=()=>{X(!0)},Ee=()=>{X(!0)};I.addEventListener("input",Oe),I.addEventListener("change",oe),I.addEventListener("blur",Ee),se(e.maxRosterSize,!1);const Pe=()=>{s.parentElement!==L&&L.appendChild(s);const j=L.querySelector("#topbar");return j&&j.parentElement===L?(j.nextSibling!==s&&L.insertBefore(s,j.nextSibling),!0):!1};let ye=null;Pe()||(ye=new MutationObserver(()=>{Pe()&&ye?.disconnect()}),ye.observe(L,{childList:!0}));const Qe=()=>{const j=!o.hidden;o.hidden=j,a.setAttribute("aria-expanded",String(!j))};a.addEventListener("click",Qe);const Ce=()=>{const j=Math.max(1,Math.floor(e.maxHealth)),Z=Math.max(0,Math.min(j,Math.floor(Number.isFinite(e.health)?e.health:0))),J=j>0?Z/j:0,V=Math.max(0,Math.min(J,1));h.style.width=`${V*100}%`;const de=eo.format(Z),ee=eo.format(j);d.textContent=`${de} / ${ee}`,u.setAttribute("aria-valuenow",String(Z)),u.setAttribute("aria-valuemax",String(j)),u.setAttribute("aria-valuetext",`${de} of ${ee} health`);const qe=e.destroyed?"offline":V<=.2?"critical":V<=.55?"warning":"stable";u.dataset.level=qe,d.dataset.state=qe,r.dataset.state=e.destroyed?"destroyed":"active"},we=()=>{f.classList.remove("sauna-health__destruction--active"),f.hidden=!0};let xe=null,$=null;const ct=()=>{xe!==null&&(window.clearTimeout(xe),xe=null),u.classList.remove("sauna-health__bar--impact")},ke=()=>{h.classList.remove("sauna-health__fill--damage")};h.addEventListener("animationend",ke);const Be=()=>{we()};f.addEventListener("animationend",Be);const He=()=>{ct(),u.classList.add("sauna-health__bar--impact"),x||(h.classList.remove("sauna-health__fill--damage"),h.offsetWidth,h.classList.add("sauna-health__fill--damage")),xe=window.setTimeout(()=>{u.classList.remove("sauna-health__bar--impact"),xe=null},x?360:560)},re=()=>{$!==null&&(window.clearTimeout($),$=null),f.hidden=!1,f.classList.remove("sauna-health__destruction--active"),f.offsetWidth,f.classList.add("sauna-health__destruction--active"),$=window.setTimeout(()=>{we(),$=null},x?720:1100)},B=()=>{Ce();const j=e.playerSpawnCooldown>0?e.playerSpawnCooldown:1,Z=1-e.playerSpawnTimer/j;p.style.width=`${Math.max(0,Math.min(Z,1))*100}%`,y.checked=e.rallyToFront;const J=q(),V=Math.max(0,Math.min(J,Math.floor(e.maxRosterSize)));if(V!==e.maxRosterSize)if(t.updateMaxRosterSize){const de=t.updateMaxRosterSize(V,{persist:!0});Y(J,de)}else e.maxRosterSize=V,Y(J,V);else Y(J,V)};return Ce(),{update:B,handleDamage:j=>{Ce(),He()},handleDestroyed:j=>{o.hidden=!1,a.setAttribute("aria-expanded","true"),Ce(),He(),re()},dispose:()=>{ye?.disconnect(),ye=null,a.removeEventListener("click",Qe),C.removeEventListener("input",he),C.removeEventListener("change",Ne),I.removeEventListener("input",Oe),I.removeEventListener("change",oe),I.removeEventListener("blur",Ee),R&&G(R,ue),h.removeEventListener("animationend",ke),f.removeEventListener("animationend",Be),ct(),$!==null&&(window.clearTimeout($),$=null),we(),s.remove()}}}const Bl=["/assets/sounds/sauna-forest.ogg","/assets/sounds/sauna-forest.mp3"],Mr="audio_enabled",br="audio_volume",Ys=new Set,gs=new Set;let St=null,Nn=null,Ze=null,rn=null;function wr(e){if(typeof localStorage>"u")return null;try{return localStorage.getItem(e)}catch(t){return console.warn("Unable to read ambience preference",e,t),null}}const vr=wr(Mr);let rt=vr==="true",cn=vr!==null;const to=wr(br);let Tt=zl(to?Number(to):NaN,.65),xt=!1,pt=Qs();const It=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null;let Sr=It?.matches??!1;if(It){const e=t=>{Sr=t.matches};typeof It.addEventListener=="function"?It.addEventListener("change",e):typeof It.addListener=="function"&&It.addListener(e)}if(typeof window<"u"&&!cn){const e=()=>{cn||(cn=!0,zr(!0),Ft())};window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0})}lc(e=>{pt=e,e?Br():rt?Ft():Ut(!0),bn()});function zl(e,t){return Number.isFinite(e)?e<0?0:e>1?1:e:t}function bn(){const e=Kn();for(const t of Ys)t(e)}function Dl(e){if(!(typeof localStorage>"u"))try{localStorage.setItem(Mr,e?"true":"false")}catch(t){console.warn("Unable to persist ambience preference",t)}}function Il(e){if(!(typeof localStorage>"u"))try{localStorage.setItem(br,e.toFixed(3))}catch(t){console.warn("Unable to persist ambience volume",t)}}function Er(e){if(Ze)return Ze;const t=e.createGain();return t.gain.value=rt&&!pt?Tt:0,t.connect(e.destination),Ze=t,t}function Ut(e=!1){if(!Ze)return;const t=Ze.context,n=rt&&!pt?Tt:0,s=t.currentTime;Ze.gain.cancelScheduledValues(s),e?Ze.gain.setValueAtTime(n,s):Ze.gain.setTargetAtTime(n,s,.25)}function Nl(){return Sr?.6:4.2}function Cr(){rn!==null&&(clearTimeout(rn),rn=null)}function Xs(e){try{e.source.stop()}catch{}e.source.disconnect(),e.gain.disconnect(),gs.delete(e)}function Pl(){for(const e of[...gs])Xs(e)}async function kl(e){return St||(Nn||(Nn=(async()=>{for(const t of Bl)try{const n=await fetch(t);if(!n.ok)continue;const s=await n.arrayBuffer();return await e.decodeAudioData(s)}catch(n){console.warn("Failed to fetch ambience source",t,n)}throw new Error("No ambience sources available")})().then(t=>(St=t,t)).catch(t=>{throw Nn=null,t})),Nn)}function Ll(e,t){if(!xt)return;Cr();const n=Math.max(0,e-t.currentTime-.05);rn=setTimeout(()=>{rn=null,xt&&xr(e)},n*1e3)}function xr(e){const t=Ze?.context??gn();if(!t||!St)return;const n=t.createGain(),s=t.createBufferSource();s.buffer=St,s.loop=!1,s.connect(n),n.connect(Er(t));const a=Math.min(Nl(),St.duration/2),o=Number.isFinite(a)&&a>0?a:.25,r=Math.max(t.currentTime,e);n.gain.setValueAtTime(0,r),n.gain.linearRampToValueAtTime(1,r+o);const i=e+St.duration,c=i-o;c>r&&n.gain.setValueAtTime(1,c),n.gain.linearRampToValueAtTime(.001,i+.1);const l={source:s,gain:n,stopTime:i};gs.add(l),s.addEventListener("ended",()=>{Xs(l)});try{s.start(e)}catch(d){console.warn("Failed to start ambience layer",d),Xs(l);return}Ll(i-o,t)}async function Ft(){if(xt||!rt||pt){Ut();return}const e=gn();if(e){Er(e),Ut();try{const t=await kl(e);if(!rt||pt)return;await e.resume().catch(()=>{}),xt=!0;const n=Math.max(e.currentTime+.12,e.currentTime);xr(n),bn()}catch(t){console.warn("Unable to start ambience",t)}}}function Br(){if(!xt&&gs.size===0){Ut(!0);return}xt=!1,Cr(),Pl(),Ut(!0),bn()}function zr(e){rt===e&&cn||(rt=e,cn=!0,Dl(e),e?pt||Ft():Br(),bn())}function Tl(e){const t=Math.max(0,Math.min(1,e));t!==Tt&&(Tt=t,Il(Tt),Ut(),bn())}function Kn(){return{enabled:rt,playing:xt,volume:Tt,globallyMuted:pt}}function Rl(e){return Ys.add(e),()=>{Ys.delete(e)}}rt&&!pt&&Ft();const Pn=10,jl=1.5,Ol=1.5,no=1,Ql=.6,so=" +50% attack   Barrier   Immortal",ln=5,dn=3;let ae=null;function Hl(){ae&&(ae.tickTimer&&clearInterval(ae.tickTimer),ae.timeout&&clearTimeout(ae.timeout),ae=null)}function ha(){return ae!==null}function Gl(){return ae?Math.max(0,ae.endTime-performance.now())/1e3:0}function Ul(e,t){if(ha()||!e.spendResource(ln,D.SISU))return!1;const n=[];for(const a of t){if(a.faction!=="player"||a.isDead())continue;const o=`sisu-burst-${a.id}`,r={unit:a,attackDelta:0,movementDelta:0,shieldBonusApplied:no,shieldBonusRemaining:no,wasImmortal:a.isImmortal()};fc({id:o,duration:Pn,data:r,onApply:()=>{const i=a.stats.attackDamage,c=Math.round(i*jl);r.attackDelta=Math.max(0,c-i),r.attackDelta!==0&&(a.stats.attackDamage=i+r.attackDelta);const l=a.stats.movementRange,d=Math.max(1,Math.round(l*Ol));r.movementDelta=Math.max(0,d-l),r.movementDelta!==0&&(a.stats.movementRange=l+r.movementDelta),r.shieldBonusRemaining=r.shieldBonusApplied,a.setShield(a.getShield()+r.shieldBonusApplied),a.setImmortal(!0),a.fearless=!0},onExpire:()=>{let i=!1;if(r.attackDelta!==0){const l=a.stats.attackDamage,d=Math.max(0,l-r.attackDelta);d!==l&&(a.stats.attackDamage=d,i=!0)}if(r.movementDelta!==0){const l=a.stats.movementRange,d=Math.max(0,l-r.movementDelta);d!==l&&(a.stats.movementRange=d,i=!0)}a.setImmortal(r.wasImmortal);const c=Math.max(0,Math.min(r.shieldBonusApplied,r.shieldBonusRemaining));c>0&&a.setShield(Math.max(0,a.getShield()-c)),delete a.fearless,i&&E.emit("unit:stats:changed",{unitId:a.id,stats:{...a.stats}}),ae&&(ae.affected=ae.affected.filter(l=>l.modifierId!==o))},hooks:{"combat:onHit":i=>{const c=i;if(c.source!=="defender"||c.defender.id!==a.id||c.shieldDamage<=0||r.shieldBonusRemaining<=0)return;const l=Math.min(r.shieldBonusRemaining,c.shieldDamage);r.shieldBonusRemaining=Math.max(0,r.shieldBonusRemaining-l)}}}),n.push({unit:a,modifierId:o,state:r})}return ae={endTime:performance.now()+Pn*1e3,status:so,affected:n,tickTimer:null,timeout:null},E.emit("sisuBurstStart",{remaining:Pn,status:so}),ae.tickTimer=setInterval(()=>{if(!ae)return;const a=Math.max(0,Math.ceil(Gl()));a>0&&E.emit("sisuBurstTick",{remaining:a,status:ae.status})},1e3),ae.timeout=setTimeout(()=>{Fl()},Pn*1e3),!0}function Fl(){if(ae){for(const e of ae.affected)mc(e.modifierId);Hl(),E.emit("sisuBurstEnd",{})}}function Kl(e,t,n,s){const a=t.filter(o=>o.faction==="player"&&!o.isDead());if(a.length===0||!e.spendResource(dn,D.SISU))return!1;for(const o of a){const r=er(n,3,t)??{...n};o.coord=r;const i=Math.round(o.getMaxHealth()*Ql);o.stats.health=Math.min(o.getMaxHealth(),Math.max(o.stats.health,i))}return s.revealAround(n,3,{autoFrame:!1}),E.emit("torilleRecalled",{count:a.length}),!0}const Yl="(max-width: 820px)",Dr="is-mobile",Ir="is-desktop";let Le=null,Wn=null,Fe=!1,kn=0;const Vn=new Set,qs=new Set,_n=e=>{for(const t of qs)t.classList.toggle(Dr,e),t.classList.toggle(Ir,!e),t.dataset.viewport=e?"mobile":"desktop"},Xl=e=>{if(Fe!==e){Fe=e,_n(Fe);for(const t of Array.from(Vn))try{t(Fe)}catch(n){console.error("Failed to notify mobile listener",n)}}},Nr=()=>{if(Le||typeof window>"u")return;Le=window.matchMedia(Yl),Fe=Le.matches,_n(Fe);const e=t=>{Xl(t.matches)};typeof Le.addEventListener=="function"?(Le.addEventListener("change",e),Wn=()=>Le?.removeEventListener("change",e)):(Le.addListener(e),Wn=()=>Le?.removeListener(e))},ql=()=>{Le&&(Wn?.(),Wn=null,Le=null)},fa=(e,{immediate:t=!0}={})=>(Nr(),Vn.add(e),t&&e(Fe),()=>{Vn.delete(e)}),Jl=({root:e,onChange:t,immediate:n=!0}={})=>{Nr();const s=e??(typeof document<"u"?document.documentElement:null);s&&(qs.add(s),_n(Fe)),kn+=1;let a=null;return t?a=fa(t,{immediate:n}):n&&Le&&_n(Fe),{matches:()=>Fe,dispose:()=>{s&&(qs.delete(s),s.classList.remove(Dr,Ir),(s.dataset.viewport==="mobile"||s.dataset.viewport==="desktop")&&delete s.dataset.viewport),a&&(a(),a=null),kn=Math.max(0,kn-1),kn===0&&Vn.size===0&&ql()}}};function Zt(e,t={}){const{iconSrc:n,description:s,srLabel:a}=t,o=document.createElement("div");if(o.classList.add("topbar-badge"),o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),n){const u=document.createElement("img");u.src=n,u.alt=e,u.decoding="async",u.classList.add("topbar-badge-icon"),o.appendChild(u)}const r=document.createElement("div");r.classList.add("badge-text");const i=document.createElement("span");i.textContent=e,i.classList.add("badge-label"),r.appendChild(i);const c=document.createElement("span");c.textContent="0",c.classList.add("badge-value"),c.setAttribute("aria-hidden","true"),r.appendChild(c);const l=document.createElement("span");l.classList.add("badge-delta"),l.style.opacity="0",l.style.transform="translateY(-6px)",l.style.transition="opacity 0.5s ease, transform 0.5s ease",l.setAttribute("aria-hidden","true"),o.append(r,l),s&&(o.title=s);const d=a??e;return o.dataset.label=d,o.setAttribute("aria-label",`${d}: 0`),{container:o,value:c,delta:l,label:d}}function Zl(e,t={},n={}){const s=document.getElementById("ui-overlay");if(!s)return{update:()=>{},dispose:()=>{}};const{actions:a,mobileBar:o}=ms(s),r=document.createElement("div");r.id="topbar",a.prepend(r);const i=document.createElement("div");i.className="topbar-badge-row",r.appendChild(i);const c=document.createElement("div");c.className="topbar-action-tray",c.setAttribute("role","group"),c.setAttribute("aria-label","Combat and audio controls"),c.dataset.tutorialTarget="combat";const l={[D.SAUNA_BEER]:"Sauna beer bottles chilled for construction crews and eager recruits.",[D.SAUNAKUNNIA]:"Saunakunniaprestige earned from sauna rituals and triumphant battles.",[D.SISU]:"Sisuthe relentless grit forged when your warriors triumph on the snow."},d=Zt("Sauna Beer",{iconSrc:t.saunaBeer,description:l[D.SAUNA_BEER],srLabel:"Sauna beer reserves"});d.container.classList.add("badge-sauna-beer");const u=Zt("Sisu",{iconSrc:t.sisu,description:l[D.SISU],srLabel:"Sisu reserves"});u.container.classList.add("badge-sisu"),u.container.dataset.tutorialTarget="sisu";const h=Zt("Saunakunnia",{iconSrc:t.saunakunnia,description:l[D.SAUNAKUNNIA],srLabel:"Saunakunnia"});h.container.classList.add("badge-sauna"),h.container.dataset.tutorialTarget="victory";const f=Zt("Burst ",{srLabel:"Sisu burst countdown"});f.container.classList.add("badge-sisu"),f.container.style.display="none",f.delta.style.display="none";const m=Zt("Time");m.container.classList.add("badge-time"),m.delta.style.display="none",i.appendChild(d.container),i.appendChild(u.container),i.appendChild(h.container),i.appendChild(f.container),i.appendChild(m.container);let p=null,g=null;n.useSisuBurst&&(p=document.createElement("button"),p.type="button",p.classList.add("topbar-button","sisu-button"),p.textContent=`Sisu Burst ${ln}`,p.title="Spend SISU to ignite a short-lived surge in allied attack and movement.",p.addEventListener("click",()=>{n.useSisuBurst?.(),A()}),p.classList.add("topbar-action"),c.appendChild(p)),n.torille&&(g=document.createElement("button"),g.type="button",g.classList.add("topbar-button","torille-button"),g.textContent=`Torille! ${dn}`,g.title="Call every surviving fighter back to the sauna to regroup.",g.addEventListener("click",()=>{n.torille?.(),A()}),g.classList.add("topbar-action"),c.appendChild(g));function A(){const B=e.getResource(D.SISU);if(p){const O=B>=ln,W=ha();p.disabled=!O||W;const F=["Spend SISU to ignite a short-lived surge in allied attack and movement."];O||F.push(`Requires ${ln} SISU.`),W&&F.push("Burst already active."),p.title=F.join(" ")}if(g){const O=B>=dn;g.disabled=!O,g.title=O?"Call every surviving fighter back to the sauna to regroup.":`Requires ${dn} SISU to rally everyone home.`}}A();const M=document.createElement("button");M.type="button",M.title="Toggle sound",M.classList.add("topbar-button","sound-button");const v=document.createElement("span");if(v.textContent="Sound",t.sound){const B=document.createElement("img");B.src=t.sound,B.alt="",B.decoding="async",B.setAttribute("aria-hidden","true"),M.appendChild(B)}M.appendChild(v);function P(){const B=Qs();v.textContent=B?"Muted":"Sound",M.setAttribute("aria-pressed",B?"true":"false"),M.classList.toggle("is-muted",B)}M.addEventListener("click",()=>{cc(!Qs()),P()}),P(),M.classList.add("topbar-action","topbar-action--sound"),c.appendChild(M);const b=document.createElement("div");b.className="topbar-ambience";const N=document.createElement("div");N.className="topbar-ambience__header";const C=document.createElement("span");C.className="topbar-ambience__icon",C.textContent="",C.setAttribute("aria-hidden","true");const I=document.createElement("span");I.className="topbar-ambience__title",I.textContent="Sauna ambience";const w=document.createElement("button");w.type="button",w.className="ambience-toggle",w.setAttribute("role","switch"),w.setAttribute("aria-label","Toggle sauna ambience soundscape");const z=document.createElement("span");z.className="ambience-toggle__track";const y=document.createElement("span");y.className="ambience-toggle__thumb";const k=document.createElement("span");k.className="ambience-toggle__label",w.append(z,y,k),N.append(C,I,w);const L=document.createElement("div");L.className="topbar-ambience__slider";const R=document.createElement("span");R.className="topbar-ambience__caption",R.textContent="Volume";const x=document.createElement("span");x.className="topbar-ambience__value";const Q=document.createElement("input");Q.type="range",Q.min="0",Q.max="100",Q.step="1",Q.className="topbar-ambience__range",Q.setAttribute("aria-label","Ambient volume"),L.append(R,Q,x);const G=document.createElement("p");G.className="topbar-ambience__status",G.setAttribute("aria-live","polite"),b.append(N,L,G),r.appendChild(b);const ue=fa(B=>{B?(o.appendChild(c),c.classList.add("topbar-action-tray--mobile")):(r.appendChild(c),c.classList.remove("topbar-action-tray--mobile"))});let q=Kn();const Y=(B=q)=>{q=B;const O=Math.round(B.volume*100);Q.value=String(O),Q.title=`Ambient volume ${O}%`,Q.style.setProperty("--value",`${O}`),x.textContent=`${O}%`,Q.disabled=!B.enabled||B.globallyMuted,w.setAttribute("aria-checked",B.enabled?"true":"false"),w.classList.toggle("is-on",B.enabled),w.classList.toggle("is-muted",B.globallyMuted),k.textContent=B.enabled?"On":"Off",w.title=B.enabled?"Disable sauna ambience":"Enable sauna ambience",b.classList.toggle("is-off",!B.enabled),b.classList.toggle("is-globally-muted",B.globallyMuted),B.globallyMuted?G.textContent="Muted by master toggle":B.enabled?B.playing?G.textContent="Forest loop playing":G.textContent="Ambience ready":G.textContent="Ambience paused"};w.addEventListener("click",()=>{const B=!q.enabled;zr(B),q=Kn(),B&&!q.globallyMuted&&Ft(),Y(q)}),Q.addEventListener("input",()=>{const B=Q.valueAsNumber/100;Tl(B),q=Kn(),q.enabled&&!q.globallyMuted&&Ft(),Y(q)}),Y(q);const se=Rl(B=>{Y(B)});function he(B,O){const W=Math.max(0,Math.ceil(B));f.container.style.display="block",f.value.textContent=String(W),O?(f.delta.style.display="block",f.delta.textContent=O,f.container.title=`Sisu burst active: ${O}`):(f.delta.style.display="none",f.delta.textContent="",f.container.removeAttribute("title"));const F=[`Sisu burst active  ${W} seconds remaining`];O&&F.push(O),f.container.setAttribute("aria-label",F.join("  "))}const Ne=({remaining:B,status:O})=>{he(B,O),A()},X=({remaining:B,status:O})=>{he(B,O)},Oe=()=>{f.container.style.display="none",f.value.textContent="0",f.delta.textContent="",f.delta.style.display="none",f.container.removeAttribute("title"),A()};E.on("sisuBurstStart",Ne),E.on("sisuBurstTick",X),E.on("sisuBurstEnd",Oe);const oe=new Intl.NumberFormat("en-US"),Ee=new Intl.NumberFormat("en-US",{signDisplay:"exceptZero"}),Pe={[D.SAUNA_BEER]:"Sauna Beer",[D.SAUNAKUNNIA]:"Saunakunnia",[D.SISU]:"Sisu"},ye={[D.SAUNA_BEER]:{singular:"bottle",plural:"bottles"},[D.SAUNAKUNNIA]:{singular:"Saunakunnia",plural:"Saunakunnia"},[D.SISU]:{singular:"Sisu",plural:"Sisu"}},Qe={[D.SAUNA_BEER]:"",[D.SAUNAKUNNIA]:"",[D.SISU]:""},Ce={[D.SAUNA_BEER]:d,[D.SAUNAKUNNIA]:h,[D.SISU]:u},we={};function xe(B,O){const W=Number.isFinite(O)?O:0;return B===D.SAUNA_BEER?Math.trunc(W):Math.max(0,Math.round(W))}function $(B,O){return oe.format(xe(B,O))}function ct(B,O){return O===0?"":`${Ee.format(O)}${Qe[B]}`}function ke(B,O){if(O===0)return"";const W=O>0?"gained":"spent",F=oe.format(Math.abs(O)),j=ye[B];if(j){const J=Math.abs(O)===1?j.singular:j.plural,V=Pe[B],de=[V];J&&J!==V&&de.push(J);const ee=de.filter(Boolean).join(" ");return`${W} ${F}${ee?` ${ee}`:""}`}const Z=Pe[B];return`${W} ${F}${Z?` ${Z}`:""}`}function Be(B,O,W=0){const F=Ce[B];if(!F)return;const j=xe(B,O),Z=$(B,O);F.value.textContent=Z;const J=B===D.SAUNA_BEER&&j<0;if(F.container.classList.toggle("topbar-badge--debt",J),W!==0){F.delta.textContent=ct(B,W),F.delta.style.opacity="1",F.delta.style.transform="translateY(0)";const ee=we[B];ee&&clearTimeout(ee),we[B]=setTimeout(()=>{F.delta.style.opacity="0",F.delta.style.transform="translateY(-6px)",delete we[B]},1e3)}else F.delta.textContent="",F.delta.style.opacity="0",F.delta.style.transform="translateY(-6px)";const V=ke(B,W),de=[`${F.label} ${Z}`];if(J){const ee=oe.format(Math.abs(j)),qe=ye[B];if(qe){const Xt=Math.abs(j)===1?qe.singular:qe.plural,yt=Xt&&Xt!==Pe[B];de.push(yt?`Debt of ${ee} ${Xt}`:`Debt of ${ee}`)}else de.push(`Debt of ${ee}`)}V&&de.push(V),F.container.setAttribute("aria-label",de.join("  "))}Be(D.SAUNA_BEER,e.getResource(D.SAUNA_BEER)),Be(D.SAUNAKUNNIA,e.getResource(D.SAUNAKUNNIA)),Be(D.SISU,e.getResource(D.SISU));const He=({resource:B,amount:O,total:W})=>{Ce[B]&&(Be(B,W,O),B===D.SISU&&A())};E.on("resourceChanged",He);let re=0;return{update(B){re+=B;const O=Math.floor(re/1e3),W=Math.floor(O/60),F=O%60;m.value.textContent=`${W}:${F.toString().padStart(2,"0")}`},dispose(){E.off("sisuBurstStart",Ne),E.off("sisuBurstTick",X),E.off("sisuBurstEnd",Oe),E.off("resourceChanged",He),Object.values(we).forEach(B=>{B&&clearTimeout(B)}),se(),ue(),c.remove(),r.remove()}}}function Wl(e){const t=[e.name];return e.description&&t.push(e.description),e.rarity&&t.push(`Rarity: ${e.rarity}`),e.quantity>1&&t.push(`Quantity: ${e.quantity}`),t.join("  ")}function Vl(e){const t=document.createElement("span");t.classList.add("item-icon__fallback");const n=e.trim();return t.textContent=n?n[0]?.toUpperCase()??"?":"?",t.setAttribute("aria-hidden","true"),t}function _l(e,t){const n=document.createElement("img");return n.src=e,n.alt="",n.decoding="async",n.loading="lazy",n.classList.add("item-icon__image"),n.setAttribute("aria-hidden","true"),n.title=t,n}function $l(e){const t=document.createElement("li");t.classList.add("item-icon"),t.dataset.itemId=e.id;const n=Wl(e);if(t.title=n,t.setAttribute("aria-label",n),t.setAttribute("role","listitem"),e.rarity&&(t.dataset.rarity=e.rarity.toLowerCase()),e.icon&&e.icon.trim().length>0?t.appendChild(_l(e.icon,e.name)):t.appendChild(Vl(e.name)),e.quantity>1){const s=document.createElement("span");s.classList.add("item-icon__quantity"),s.textContent=`${e.quantity}`,s.setAttribute("aria-hidden","true"),t.appendChild(s)}return t}const ed=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Js(e){return e===1/0?"":!Number.isFinite(e)||e<=0?"0s":`${ed.format(Math.ceil(e))}s`}function td(e){const t=[e.name];return e.description&&t.push(e.description),e.source&&t.push(`Source: ${e.source}`),e.duration!==1/0&&t.push(`Duration: ${Js(e.duration)}`),t.push(`Remaining: ${Js(e.remaining)}`),e.stacks&&e.stacks>1&&t.push(`Stacks: ${e.stacks}`),t.join("  ")}function nd(e){const t=document.createElement("li");t.classList.add("mod-pill"),t.dataset.modifierId=e.id,t.title=td(e),t.setAttribute("aria-label",t.title),t.setAttribute("role","listitem"),t.dataset.duration=e.duration===1/0?"infinite":String(e.duration),t.dataset.remaining=e.remaining===1/0?"infinite":String(e.remaining),e.appliedAt!==void 0&&(t.dataset.appliedAt=String(e.appliedAt)),e.stacks&&e.stacks>1&&(t.dataset.stacks=String(e.stacks));const n=document.createElement("span");if(n.classList.add("mod-pill__name"),n.textContent=e.name,n.setAttribute("aria-hidden","true"),t.appendChild(n),e.stacks&&e.stacks>1){const a=document.createElement("span");a.classList.add("mod-pill__stacks"),a.textContent=`${e.stacks}`,a.setAttribute("aria-hidden","true"),t.appendChild(a)}const s=document.createElement("span");return s.classList.add("mod-pill__timer"),s.textContent=Js(e.remaining),s.setAttribute("aria-hidden","true"),t.appendChild(s),e.remaining!==1/0&&e.remaining<=5&&(t.dataset.urgent="true"),t}const Zs={engaged:"Engaged on the field",reserve:"On reserve duty",downed:"Recovering from battle"},ne=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),ao="panel-roster-title";function sd(e){return e.length===0?"No defining traits yet":e.join("  ")}function zt(e,t){const s=Math.round(e-(typeof t=="number"?t:0));if(s===0)return"";const a=ne.format(Math.abs(s));return s>0?` (+${a})`:` (-${a})`}function ad(e){if(!e)return"No stat changes";const t=[],n=(s,a)=>{if(typeof a=="number"&&a!==0){const o=a>0?"+":"";t.push(`${s} ${o}${ne.format(Math.abs(a))}`)}};return n("HP",e.health),n("ATK",e.attackDamage),n("RNG",e.attackRange),n("MOV",e.movementRange),n("DEF",e.defense),n("Shield",e.shield),t.length===0?"No stat changes":t.join(", ")}function od(e){const{stats:t,baseStats:n}=e,s=[`HP ${ne.format(t.health)}/${ne.format(t.maxHealth)}${zt(t.maxHealth,n.maxHealth)}`];return t.shield&&t.shield>0&&s.push(`Shield ${ne.format(t.shield)}${zt(t.shield,n.shield)}`),s.push(`ATK ${ne.format(t.attackDamage)}${zt(t.attackDamage,n.attackDamage)}`),s.push(`RNG ${ne.format(t.attackRange)}${zt(t.attackRange,n.attackRange)}`),t.defense&&t.defense>0&&s.push(`DEF ${ne.format(t.defense)}${zt(t.defense,n.defense)}`),s.push(`MOV ${ne.format(t.movementRange)}${zt(t.movementRange,n.movementRange)}`),s.push(`Upkeep ${ne.format(e.upkeep)} beer`),s.join("  ")}function rd(e){const{stats:t}=e,n=[e.name,Zs[e.status]];n.push(`health ${ne.format(t.health)} of ${ne.format(t.maxHealth)}`),t.shield&&t.shield>0&&n.push(`shield ${ne.format(t.shield)}`),n.push(`attack ${ne.format(t.attackDamage)}`),t.defense&&t.defense>0&&n.push(`defense ${ne.format(t.defense)}`),t.attackRange>0&&n.push(`attack range ${ne.format(t.attackRange)}`),n.push(`movement ${ne.format(t.movementRange)}`),n.push(`upkeep ${ne.format(e.upkeep)} beer`);const s=e.equipment.filter(a=>a.item).length;return s>0&&n.push(`${s} equipped item${s===1?"":"s"}`),e.modifiers.length>0&&n.push(`${e.modifiers.length} active modifier${e.modifiers.length===1?"":"s"}`),n.join(", ")}function id(e,t){const n=t.filter(i=>i.status==="engaged").length,s=t.filter(i=>i.status==="reserve").length,a=t.filter(i=>i.status==="downed").length,o=(i,c,l)=>{const d=document.createElement("span");return d.classList.add("panel-roster__metric"),d.dataset.status=l,d.textContent=`${ne.format(c)} ${i}`,d.setAttribute("aria-label",d.textContent),d},r=document.createElement("div");r.classList.add("panel-roster__metrics"),r.append(o("engaged",n,"engaged"),o("reserve",s,"reserve"),o("downed",a,"downed")),e.appendChild(r)}function cd(e,t,n){const s=document.createElement("div");s.classList.add("panel-roster__loadout");const a=document.createElement("ul");a.classList.add("panel-roster__slots"),a.setAttribute("role","list"),a.setAttribute("aria-label",`${t.name} equipment slots`);for(const o of t.equipment){const r=document.createElement("li");r.classList.add("panel-roster__slot"),r.dataset.slot=o.id;const i=document.createElement("div");i.classList.add("panel-roster__slot-header");const c=document.createElement("span");c.classList.add("panel-roster__slot-label"),c.textContent=o.label,c.title=o.description,i.appendChild(c);const l=document.createElement("span");if(l.classList.add("panel-roster__slot-summary"),l.textContent=o.item?o.item.name:"Empty",l.title=o.description,i.appendChild(l),r.appendChild(i),o.item){const m=document.createElement("ul");m.classList.add("panel-roster__slot-icons"),m.setAttribute("role","list"),m.appendChild($l(o.item)),r.appendChild(m)}const d=document.createElement("span");d.classList.add("panel-roster__slot-modifiers"),d.textContent=ad(o.modifiers),d.title=d.textContent,r.appendChild(d);const u=document.createElement("div");u.classList.add("panel-roster__slot-actions");const h=document.createElement("button");h.type="button",h.classList.add("panel-roster__slot-action"),h.textContent=o.item?"Replace":"Equip",h.setAttribute("aria-label",`Equip ${o.label} for ${t.name}`),h.addEventListener("click",m=>{m.stopPropagation(),n.onEquipSlot?.(t.id,o.id)}),u.appendChild(h);const f=document.createElement("button");f.type="button",f.classList.add("panel-roster__slot-action"),f.textContent="Unequip",f.disabled=o.item===null,f.setAttribute("aria-label",`Unequip ${o.label} from ${t.name}`),f.addEventListener("click",m=>{m.stopPropagation(),f.disabled||n.onUnequipSlot?.(t.id,o.id)}),u.appendChild(f),r.appendChild(u),a.appendChild(r)}if(s.appendChild(a),t.modifiers.length>0){const o=document.createElement("ul");o.classList.add("panel-roster__mods"),o.setAttribute("role","list"),o.setAttribute("aria-label",`${t.name} active modifiers`),o.title=t.modifiers.map(r=>r.name).join(", ");for(const r of t.modifiers)o.appendChild(nd(r));s.appendChild(o)}e.appendChild(s)}function ld(e,t={}){return{render:s=>{e.innerHTML="",e.dataset.count=String(s.length),e.classList.add("panel-roster");const a=document.createElement("div");a.classList.add("panel-roster__header");const o=document.createElement("h4");o.classList.add("panel-roster__title"),o.textContent="Battalion Roster",o.id=ao,a.appendChild(o),e.setAttribute("aria-labelledby",ao);const r=s.length===0?"No attendants mustered yet":`${ne.format(s.length)} attendant${s.length===1?"":"s"} enlisted`,i=document.createElement("span");if(i.classList.add("panel-roster__count"),i.textContent=r,a.appendChild(i),e.appendChild(a),s.length===0){const l=document.createElement("p");l.classList.add("panel-roster__empty"),l.textContent="No attendants have rallied to the sauna yet.",e.appendChild(l);return}id(e,s);const c=document.createElement("ul");c.classList.add("panel-roster__list"),c.setAttribute("role","list");for(const l of s){const d=document.createElement("li");d.classList.add("panel-roster__row");const u=document.createElement("button");u.type="button",u.classList.add("panel-roster__item"),u.dataset.unitId=l.id,u.dataset.status=l.status,u.setAttribute("aria-pressed",l.selected?"true":"false"),u.setAttribute("aria-label",rd(l)),u.title=`${l.name}  ${Zs[l.status]}`,l.selected&&u.classList.add("is-selected"),l.status==="downed"&&u.classList.add("is-downed");const h=document.createElement("div");h.classList.add("panel-roster__name-row");const f=document.createElement("span");f.classList.add("panel-roster__name"),f.textContent=l.name,f.title=l.name,h.appendChild(f);const m=document.createElement("span");m.classList.add("panel-roster__status"),m.dataset.status=l.status,m.textContent=Zs[l.status],h.appendChild(m);const p=document.createElement("div");p.classList.add("panel-roster__meta");const g=od(l);p.textContent=g,p.title=g;const A=document.createElement("div");A.classList.add("panel-roster__health");const M=document.createElement("div");M.classList.add("panel-roster__health-fill");const v=l.stats.maxHealth>0?Math.max(0,Math.min(100,Math.round(l.stats.health/l.stats.maxHealth*100))):0;M.style.width=`${v}%`,M.dataset.percent=`${v}`,A.appendChild(M);const P=document.createElement("div");P.classList.add("panel-roster__traits");const b=sd(l.traits);P.textContent=b,P.title=b,u.append(h,p,A,P),cd(u,l,t),typeof t.onSelect=="function"&&u.addEventListener("click",()=>t.onSelect?.(l.id)),d.appendChild(u),c.appendChild(d)}e.appendChild(c)}}}const oo=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function dd(e,t={}){const n=document.getElementById("ui-overlay");if(!n)return{log:()=>{},addEvent:()=>{},renderRoster:()=>{},dispose:()=>{}};const{actions:s,side:a,mobileBar:o}=ms(n),r=n.querySelector("#right-panel");r&&r.remove();const i=n.querySelector(".right-panel-slide");i&&i.remove();const c=n.querySelector("#right-panel-toggle");c&&c.remove();const l=document.createElement("div");l.id="right-panel",l.classList.add("hud-card"),l.setAttribute("role","complementary"),l.setAttribute("aria-label","Sauna command console"),l.tabIndex=-1;const d=document.createElement("div");d.className="right-panel-slide",d.setAttribute("aria-hidden","true");const u=document.createElement("div");u.className="right-panel-slide__backdrop",u.setAttribute("aria-hidden","true");const h=document.createElement("div");h.className="right-panel-slide__sheet",h.appendChild(l),d.append(u,h);const f=window.matchMedia("(max-width: 1040px)"),m=[],p=document.createElement("button");p.type="button",p.id="right-panel-toggle",p.classList.add("hud-panel-toggle"),p.setAttribute("aria-controls",l.id);const g=document.createElement("span");g.classList.add("hud-panel-toggle__icon"),g.setAttribute("aria-hidden","true");const A=document.createElement("span");A.classList.add("hud-panel-toggle__icon-bars"),g.appendChild(A);const M=document.createElement("span");M.classList.add("hud-panel-toggle__text");const v=document.createElement("span");v.classList.add("hud-panel-toggle__title"),v.textContent="Command Console";const P=document.createElement("span");P.classList.add("hud-panel-toggle__state"),M.append(v,P),p.append(g,M);const b=()=>{const S=s.querySelector("#topbar");S&&S.parentElement===s?S.insertAdjacentElement("afterend",p):s.prepend(p)};let N=!1,C=!1,I=!1,w=!1;const z="is-mobile-panel-open",y=()=>{I?P.textContent=w?"Close":"Menu":P.textContent=N?"Open":"Close"},k=()=>{if(I){p.setAttribute("aria-expanded",w?"true":"false");const S=w?"Close command console panel":"Open command console panel";p.setAttribute("aria-label",S),p.title=w?"Close the sauna command console overlay":"Open the sauna command console overlay"}else{p.setAttribute("aria-expanded",N?"false":"true");const S=N?"Open command console panel":"Close command console panel";p.setAttribute("aria-label",S),p.title=N?"Open the sauna command console overlay":"Close the sauna command console overlay"}},L=()=>{y(),k()},R=(S,T=f.matches)=>{if(I)return;const U=N;T&&(C=S);const ie=S&&T;N=ie,l.classList.toggle("right-panel--collapsed",ie),l.setAttribute("aria-hidden",ie?"true":"false"),L(),U&&!ie&&T&&l.focus({preventScroll:!0})},x=S=>{!I||!w||S.key==="Escape"&&(S.preventDefault(),Y())};let Q=!1;const G=()=>{Q||(document.addEventListener("keydown",x),Q=!0)},ue=()=>{Q&&(document.removeEventListener("keydown",x),Q=!1)},q=()=>{!I||w||(w=!0,d.classList.add("right-panel-slide--open"),d.setAttribute("aria-hidden","false"),l.setAttribute("aria-hidden","false"),document.body.classList.add(z),d.style.setProperty("--panel-drag-progress","1"),L(),G(),requestAnimationFrame(()=>{l.focus({preventScroll:!0})}))},Y=({skipFocus:S=!1}={})=>{!I||!w||(Ee(),w=!1,d.classList.remove("right-panel-slide--open"),d.setAttribute("aria-hidden","true"),l.setAttribute("aria-hidden","true"),document.body.classList.remove(z),d.style.setProperty("--panel-drag-progress","0"),L(),ue(),S||p.focus({preventScroll:!0}))},se=S=>{if(I)return;const T=S.matches;p.hidden=!T,R(T?C:!1,T)};typeof f.addEventListener=="function"?(f.addEventListener("change",se),m.push(()=>f.removeEventListener("change",se))):(f.addListener(se),m.push(()=>f.removeListener(se)));const he=()=>{if(I){w?Y():q();return}R(!N)};p.addEventListener("click",he),m.push(()=>p.removeEventListener("click",he));const Ne=()=>{Y()};u.addEventListener("click",Ne),m.push(()=>u.removeEventListener("click",Ne));let X=null,Oe=0,oe=0;const Ee=()=>{X!==null&&(h.releasePointerCapture(X),X=null),h.style.transition="",h.style.transform="",d.style.setProperty("--panel-drag-progress",w?"1":"0")},Pe=S=>{!I||!w||S.pointerType==="mouse"&&S.button!==0||(X=S.pointerId,Oe=S.clientX,oe=0,h.style.transition="none",h.setPointerCapture(S.pointerId))},ye=S=>{if(!I||S.pointerId!==X||!w)return;oe=Math.max(0,S.clientX-Oe);const T=h.offsetWidth||1,U=Math.min(oe,T);h.style.transform=`translateX(${U}px)`,d.style.setProperty("--panel-drag-progress",String(1-U/T))},Qe=S=>{Ee(),S&&Y()},Ce=S=>{if(S.pointerId!==X)return;const T=h.offsetWidth||1,U=oe>T*.35;Qe(U)},we=()=>{Qe(!1)};h.addEventListener("pointerdown",Pe),h.addEventListener("pointermove",ye),h.addEventListener("pointerup",Ce),h.addEventListener("pointercancel",we),m.push(()=>{h.removeEventListener("pointerdown",Pe),h.removeEventListener("pointermove",ye),h.removeEventListener("pointerup",Ce),h.removeEventListener("pointercancel",we)});const xe=fa(S=>{I=S,I?(h.appendChild(l),d.isConnected||n.appendChild(d),o.appendChild(p),p.classList.add("hud-panel-toggle--mobile"),p.hidden=!1,w||(l.setAttribute("aria-hidden","true"),d.setAttribute("aria-hidden","true"),d.style.setProperty("--panel-drag-progress","0"))):(Y({skipFocus:!0}),d.style.setProperty("--panel-drag-progress","1"),d.remove(),a.appendChild(l),b(),p.classList.remove("hud-panel-toggle--mobile"),p.hidden=!f.matches,l.setAttribute("aria-hidden","false"),R(C,f.matches)),L()});m.push(xe);const $=document.createElement("div");$.classList.add("panel-tabs"),l.appendChild($);const ct=document.createElement("div");ct.classList.add("panel-content"),l.appendChild(ct);const ke=document.createElement("div");ke.id="right-panel-roster",ke.setAttribute("role","region"),ke.setAttribute("aria-live","polite"),ke.setAttribute("aria-label","Battalion roster");const Be=document.createElement("div");Be.id="right-panel-policies";const He=document.createElement("div");He.id="right-panel-events";const re=document.createElement("div");re.id="event-log",re.setAttribute("role","log"),re.setAttribute("aria-live","polite");const B={Roster:ke,Policies:Be,Events:He,Log:re},{onRosterSelect:O,onRosterRendererReady:W,onRosterEquipSlot:F,onRosterUnequipSlot:j}=t;for(const[S,T]of Object.entries(B))T.classList.add("panel-section","panel-section--scroll"),T.dataset.tab=S,T.hidden=!0;re.classList.add("panel-section--log");function Z(S){for(const[T,U]of Object.entries(B))U.hidden=T!==S;for(const T of Array.from($.children)){const U=T,ie=U.textContent===S;U.disabled=ie,U.setAttribute("aria-pressed",ie?"true":"false")}}for(const S of Object.keys(B)){const T=document.createElement("button");T.type="button",T.textContent=S;const U=B[S];U?.id&&T.setAttribute("aria-controls",U.id),T.setAttribute("aria-pressed","false");const ie=()=>Z(S);T.addEventListener("click",ie),m.push(()=>T.removeEventListener("click",ie)),$.appendChild(T),ct.appendChild(B[S])}const J=ld(ke,{onSelect:O,onEquipSlot:F,onUnequipSlot:j}),V=S=>{J.render(S)};V([]),typeof W=="function"&&W(V);const de={[D.SAUNA_BEER]:"Sauna Beer Bottles",[D.SAUNAKUNNIA]:"Saunakunnia"},ee=[{id:"eco",name:"Eco Policy",description:"Increase passive sauna beer brewing by 1 bottle per tick",cost:15,resource:D.SAUNAKUNNIA,prerequisite:()=>!0},{id:"temperance",name:"Temperance",description:"+5% work speed at night",cost:25,resource:D.SAUNAKUNNIA,prerequisite:()=>!0},{id:"steam-diplomats",name:"Steam Diplomats",description:"Import +2 sauna beer bottles per tick through diplomatic envoys",cost:8,resource:D.SAUNAKUNNIA,prerequisite:()=>!0}],qe={};function Xt(){Be.innerHTML="";for(const S of ee){const T=document.createElement("button"),U=S.resource;T.textContent=`${S.name} (${oo.format(S.cost)} ${de[U]})`,T.title=`${S.description}. Costs ${oo.format(S.cost)} ${de[U]}.`,T.classList.add("panel-action"),T.disabled=!S.prerequisite(e)||e.hasPolicy(S.id)||!e.canAfford(S.cost,U);const ie=()=>{e.applyPolicy(S.id,S.cost,U)&&yt()};T.addEventListener("click",ie),m.push(()=>T.removeEventListener("click",ie)),Be.appendChild(T),qe[S.id]=T}}function yt(){for(const S of ee){const T=qe[S.id];if(T){const U=S.resource;T.disabled=!S.prerequisite(e)||e.hasPolicy(S.id)||!e.canAfford(S.cost,U)}}}Xt(),E.on("resourceChanged",yt),E.on("policyApplied",yt),m.push(()=>{E.off("resourceChanged",yt),E.off("policyApplied",yt)});const vn=[];function Ea(){He.innerHTML="";for(const S of vn){const T=document.createElement("div");T.classList.add("panel-event");const U=document.createElement("h4");U.textContent=S.headline;const ie=document.createElement("p");ie.textContent=S.body;const Sn=document.createElement("button");Sn.textContent=S.buttonText??"Acknowledge",Sn.classList.add("panel-action"),Sn.addEventListener("click",()=>{const Da=vn.findIndex(Bi=>Bi.id===S.id);Da!==-1&&(vn.splice(Da,1),Ea())}),T.appendChild(U),T.appendChild(ie),T.appendChild(Sn),He.appendChild(T)}}function Ei(S){vn.push(S),Ea(),za(`Event  ${S.headline}`)}const Ca="autobattles:panel-log",Bt=100,qt=[];let Ms=!1;const Mt=[],Ci=()=>{if(typeof window>"u"||typeof window.localStorage>"u")return[];try{const S=window.localStorage.getItem(Ca);if(!S)return[];const T=JSON.parse(S);if(!Array.isArray(T))return[];const U=T.filter(ie=>typeof ie=="string");return U.length>Bt?U.slice(-Bt):U}catch{return[]}},xa=S=>{if(!(typeof window>"u"||typeof window.localStorage>"u"))try{const T=S.length>Bt?S.slice(-Bt):S;window.localStorage.setItem(Ca,JSON.stringify(T))}catch{}},Ba=S=>{const T=document.createElement("div");T.textContent=S,T.classList.add("panel-log-entry"),re.appendChild(T)};(()=>{const S=Ci();if(S.length!==0){for(const T of S)Ba(T),Mt.push(T);re.scrollTop=re.scrollHeight}})();function xi(){for(const S of qt)Ba(S);if(qt.length>0&&(Mt.push(...qt),Mt.length>Bt)){const S=Mt.length-Bt;Mt.splice(0,S);for(let T=0;T<S;T+=1)re.firstChild&&re.removeChild(re.firstChild)}re.scrollTop=re.scrollHeight,qt.length=0,Ms=!1,Mt.length>0?xa(Mt):xa([])}function za(S){qt.push(S),Ms||(Ms=!0,(typeof requestAnimationFrame=="function"?requestAnimationFrame:T=>setTimeout(T,16))(xi))}return Z("Roster"),{log:za,addEvent:Ei,renderRoster:V,dispose:()=>{for(const S of m.splice(0))try{S()}catch(T){console.warn("Failed to dispose HUD listener",T)}ue(),Ee(),document.body.classList.remove(z),d.remove(),p.remove(),l.remove()}}}const ud=e=>`[data-tutorial-target="${e}"]`,Ge=16,Ln=12,ro="is-tutorial-highlighted",hd=[{id:"heat",target:"heat",title:"Heat the Sauna",description:"Keep the sauna fires roaring. This control shows when the next warrior emerges from the steam."},{id:"upkeep",target:"upkeep",title:"Mind Your Upkeep",description:"Every attendant draws upkeep. Track totals and see a featured roster member to balance your economy."},{id:"sisu",target:"sisu",title:"Stockpile SISU",description:"SISU fuels heroic bursts. Watch this meter to know when your grit reserves can power signature moves."},{id:"combat",target:"combat",title:"Command the Fight",description:"Trigger a Sisu Burst to supercharge allied attacks or rally everyone home with a Torille call."},{id:"victory",target:"victory",title:"Claim Victory",description:"Saunakunnia measures renown. Push it ever higher to unlock triumphs and close the campaign in glory."}];function fd(e,t,n){return Math.max(t,Math.min(n,e))}function md(e={}){const t=e.steps??hd;if(t.length===0)throw new Error("Tutorial requires at least one step.");let n=-1,s=null,a=!1;const o=document.createElement("div");o.className="tutorial-overlay";const r=document.createElement("div");r.className="tutorial-overlay__spotlight",r.setAttribute("aria-hidden","true");const i=document.createElement("section");i.className="tutorial-card",i.setAttribute("role","dialog"),i.setAttribute("aria-modal","false"),i.tabIndex=-1;const c=document.createElement("header");c.className="tutorial-card__header";const l=document.createElement("h2");l.className="tutorial-card__title";const d=document.createElement("button");d.type="button",d.className="tutorial-card__close",d.setAttribute("aria-label","Dismiss tutorial"),d.textContent="",c.append(l,d);const u=document.createElement("p");u.className="tutorial-card__description";const h=document.createElement("p");h.className="tutorial-card__progress";const f=document.createElement("div");f.className="tutorial-card__controls";const m=document.createElement("button");m.type="button",m.className="tutorial-card__button tutorial-card__button--secondary",m.textContent="Back";const p=document.createElement("button");p.type="button",p.className="tutorial-card__button",p.textContent="Next";const g=document.createElement("button");g.type="button",g.className="tutorial-card__skip",g.textContent="Skip tutorial",f.append(m,p),i.append(c,u,h,f,g),o.append(r,i);const A=typeof ResizeObserver<"u"?new ResizeObserver(()=>{n>=0&&C()}):null,M=()=>{n>=0&&C()};function v(){a||(document.body.appendChild(o),window.addEventListener("resize",C),document.addEventListener("scroll",M,!0),A?.observe(i),a=!0)}function P(){a&&(window.removeEventListener("resize",C),document.removeEventListener("scroll",M,!0),A?.disconnect(),o.remove(),a=!1)}function b(x){if(s&&s!==x&&(s.classList.remove(ro),s.removeAttribute("data-tutorial-highlight")),s=x,!x){r.style.opacity="0";return}x.classList.add(ro),x.setAttribute("data-tutorial-highlight","true"),r.style.opacity="1"}function N(){if(!s)return null;const x=s.getBoundingClientRect();return x.width===0&&x.height===0?null:{top:x.top,left:x.left,width:x.width,height:x.height}}function C(){const x=N();if(!x){i.style.top=`${Ge}px`,i.style.left=`${Ge}px`,i.classList.add("tutorial-card--floating"),r.style.opacity="0";return}i.classList.remove("tutorial-card--floating"),r.style.opacity="1";const Q=x.top-Ln,G=x.left-Ln,ue=x.width+Ln*2,q=x.height+Ln*2;r.style.top=`${Q}px`,r.style.left=`${G}px`,r.style.width=`${ue}px`,r.style.height=`${q}px`;const Y=i.getBoundingClientRect();let he=window.innerHeight-x.top-x.height>=x.top?x.top+x.height+Ge:x.top-Y.height-Ge;he<Ge?he=Ge:he+Y.height>window.innerHeight-Ge&&(he=window.innerHeight-Ge-Y.height);let X=x.left+x.width/2-Y.width/2;X=fd(X,Ge,window.innerWidth-Y.width-Ge),i.style.top=`${Math.round(he)}px`,i.style.left=`${Math.round(X)}px`}function I(){requestAnimationFrame(()=>{i.focus({preventScroll:!0})})}function w(x){if(x<0||x>=t.length)return;v(),n=x;const Q=t[x];l.textContent=Q.title,u.textContent=Q.description,h.textContent=`Step ${x+1} of ${t.length}`,m.disabled=x===0,p.textContent=x===t.length-1?"Finish":"Next";const G=document.querySelector(ud(Q.target));b(G??null),C(),I()}function z(){if(n===-1){w(0);return}if(n>=t.length-1){R();return}w(n+1)}function y(){n<=0||w(n-1)}function k(){b(null),P(),n=-1}function L(){e.onSkip?.(),k()}function R(){e.onComplete?.(),k()}return m.addEventListener("click",()=>{y()}),p.addEventListener("click",()=>{z()}),g.addEventListener("click",()=>{L()}),d.addEventListener("click",()=>{L()}),i.addEventListener("keydown",x=>{x.defaultPrevented||(x.key==="ArrowRight"?(x.preventDefault(),z()):x.key==="ArrowLeft"?(x.preventDefault(),y()):x.key==="Escape"&&(x.preventDefault(),L()))}),{start(){n===-1&&w(0)},next:z,previous:y,skip:L,finish:R,destroy(){k()}}}const gd=Math.sqrt(3),pd=2;function $n(e){return{width:e*gd,height:e*pd}}const _e=16,Tn=2;function Ad(){return typeof window<"u"&&window.devicePixelRatio||1}function yd(e,t){const n=Math.max(e.qMin,t.minQ),s=Math.min(e.qMax,t.maxQ),a=Math.max(e.rMin,t.minR),o=Math.min(e.rMax,t.maxR);return n>s||a>o?null:{qMin:n,qMax:s,rMin:a,rMax:o}}function Md(e,t){const n=Ad(),s=t.width/(n*e.zoom),a=t.height/(n*e.zoom);return{x:e.x-s/2,y:e.y-a/2,width:s,height:a}}function bd(e,t){const n=[tn(e.x,e.y,t),tn(e.x+e.width,e.y,t),tn(e.x,e.y+e.height,t),tn(e.x+e.width,e.y+e.height,t)];let s=1/0,a=-1/0,o=1/0,r=-1/0;for(const i of n)s=Math.min(s,i.q),a=Math.max(a,i.q),o=Math.min(o,i.r),r=Math.max(r,i.r);return{qMin:Math.floor(s)-Tn,qMax:Math.ceil(a)+Tn,rMin:Math.floor(o)-Tn,rMax:Math.ceil(r)+Tn}}function wd(e,t,n,s){if(!n||typeof n.width!="number"||typeof n.height!="number")return{qMin:e.minQ,qMax:e.maxQ,rMin:e.minR,rMax:e.maxR};if(n.width===0||n.height===0)return{qMin:e.minQ,qMax:e.maxQ,rMin:e.minR,rMax:e.maxR};const a=Md(t,n);return yd(bd(a,s),e)}function Pt(e){return Math.floor(e/_e)}function Pr(e){return`${e.q},${e.r}`}function vd(e,t){return Pr({q:Pt(e),r:Pt(t)})}function Sd(e){return{qMin:Pt(e.qMin),qMax:Pt(e.qMax),rMin:Pt(e.rMin),rMax:Pt(e.rMax)}}function kr(e){const t=[];for(let n=e.rMin;n<=e.rMax;n++)for(let s=e.qMin;s<=e.qMax;s++)t.push({q:s,r:n});return t}function Ed(e,t){const n=t.q*_e,s=t.r*_e,a=n+_e-1,o=s+_e-1,r=Math.max(n,e.minQ),i=Math.min(a,e.maxQ),c=Math.max(s,e.minR),l=Math.min(o,e.maxR);if(!(r>i||c>l))for(let d=c;d<=l;d++)for(let u=r;u<=i;u++)e.ensureTile(u,d)}function Cd(e,t){for(const n of kr(t))Ed(e,n)}const xd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3ePlains%20Tile%3c/title%3e%3cdesc%20id='desc'%3eRolling%20plains%20with%20sunrise%20gradients%20and%20glowing%20grasses.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='plains-bg'%20cx='50%25'%20cy='50%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%230f172a'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23111827'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='plains-field'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='0%25'%3e%3cstop%20offset='0%25'%20stop-color='%23facc15'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23eab308'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='plains-haze'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23fde68a'%20stop-opacity='0.8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23f59e0b'%20stop-opacity='0.2'%20/%3e%3c/linearGradient%3e%3cfilter%20id='plains-glow'%20x='-30%25'%20y='-30%25'%20width='160%25'%20height='160%25'%3e%3cfeDropShadow%20dx='0'%20dy='5'%20stdDeviation='6'%20flood-color='%23facc15'%20flood-opacity='0.35'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23plains-bg)'%20/%3e%3cg%20filter='url(%23plains-glow)'%3e%3cpath%20d='M16%2088c20-18%2036-22%2048-22s28%204%2048%2022'%20fill='url(%23plains-field)'%20stroke='%23fef9c3'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cpath%20d='M24%20102c16-14%2032-18%2040-18s24%204%2040%2018'%20fill='none'%20stroke='%23fde68a'%20stroke-width='5'%20stroke-linecap='round'%20opacity='0.5'%20/%3e%3cpath%20d='M32%2070c12-10%2024-14%2032-14s20%204%2032%2014'%20fill='url(%23plains-haze)'%20opacity='0.7'%20/%3e%3cpath%20d='M52%2078l4%2012m8-12l4%2012m8-12l4%2012'%20stroke='%23fef3c7'%20stroke-width='3'%20stroke-linecap='round'%20opacity='0.8'%20/%3e%3c/g%3e%3ccircle%20cx='40'%20cy='36'%20r='8'%20fill='%23fef08a'%20opacity='0.7'%20/%3e%3c/svg%3e",Bd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eForest%20Tile%3c/title%3e%3cdesc%20id='desc'%3eStylised%20evergreen%20trees%20glowing%20against%20a%20deep%20night%20backdrop.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='forest-bg'%20cx='50%25'%20cy='40%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%230f172a'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230b1120'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='forest-leaf'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%234ade80'%20/%3e%3cstop%20offset='100%25'%20stop-color='%2315803d'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='forest-trunk'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23a855f7'%20/%3e%3cstop%20offset='100%25'%20stop-color='%237c3aed'%20/%3e%3c/linearGradient%3e%3cfilter%20id='forest-glow'%20x='-40%25'%20y='-40%25'%20width='180%25'%20height='180%25'%3e%3cfeDropShadow%20dx='0'%20dy='6'%20stdDeviation='6'%20flood-color='%234ade80'%20flood-opacity='0.25'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23forest-bg)'%20/%3e%3cg%20filter='url(%23forest-glow)'%20stroke='%23bbf7d0'%20stroke-width='2'%3e%3cpath%20fill='url(%23forest-leaf)'%20d='M64%2026L32%2080h18l-12%2022h28l-10-22h16l-10%2022h28l-12-22h18z'%20/%3e%3crect%20x='58'%20y='74'%20width='12'%20height='18'%20rx='3'%20fill='url(%23forest-trunk)'%20/%3e%3cpath%20fill='none'%20stroke-linecap='round'%20stroke-opacity='0.5'%20d='M44%2086c6-4%2012-6%2020-6s14%202%2020%206'%20/%3e%3c/g%3e%3ccircle%20cx='40'%20cy='40'%20r='6'%20fill='%23fef3c7'%20opacity='0.6'%20/%3e%3ccircle%20cx='88'%20cy='32'%20r='4'%20fill='%23fef3c7'%20opacity='0.4'%20/%3e%3c/svg%3e",zd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eMountain%20Tile%3c/title%3e%3cdesc%20id='desc'%3eJagged%20alpine%20peaks%20with%20luminous%20snowcaps.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='mountain-bg'%20cx='50%25'%20cy='45%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23111827'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23020617'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='mountain-rock'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%2364748b'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23334155'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='mountain-snow'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23f8fafc'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23cbd5f5'%20/%3e%3c/linearGradient%3e%3cfilter%20id='mountain-glow'%20x='-30%25'%20y='-30%25'%20width='160%25'%20height='160%25'%3e%3cfeDropShadow%20dx='0'%20dy='6'%20stdDeviation='6'%20flood-color='%23f8fafc'%20flood-opacity='0.2'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23mountain-bg)'%20/%3e%3cg%20filter='url(%23mountain-glow)'%20stroke='%23cbd5f5'%20stroke-width='2'%20stroke-linejoin='round'%3e%3cpath%20fill='url(%23mountain-rock)'%20d='M24%20100l32-52%2014%2022%2012-18%2022%2048z'%20/%3e%3cpath%20fill='url(%23mountain-snow)'%20d='M56%2048l14%2022%2012-18%2010%2022H48z'%20opacity='0.85'%20/%3e%3cpath%20fill='none'%20stroke-linecap='round'%20opacity='0.6'%20d='M32%2094c10-6%2020-9%2032-9s22%203%2032%209'%20/%3e%3c/g%3e%3ccircle%20cx='92'%20cy='32'%20r='6'%20fill='%23f1f5f9'%20opacity='0.5'%20/%3e%3c/svg%3e",Dd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eWater%20Tile%3c/title%3e%3cdesc%20id='desc'%3eGlowing%20waves%20surrounding%20a%20crystalline%20droplet.%3c/desc%3e%3cdefs%3e%3cradialGradient%20id='water-bg'%20cx='50%25'%20cy='45%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%230b1120'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23020617'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='water-wave'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%2338bdf8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230ea5e9'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='water-drop'%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23e0f2fe'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230284c7'%20/%3e%3c/linearGradient%3e%3cfilter%20id='water-glow'%20x='-30%25'%20y='-30%25'%20width='160%25'%20height='160%25'%3e%3cfeDropShadow%20dx='0'%20dy='4'%20stdDeviation='8'%20flood-color='%2338bdf8'%20flood-opacity='0.3'%20/%3e%3c/filter%3e%3c/defs%3e%3crect%20x='8'%20y='8'%20width='112'%20height='112'%20rx='24'%20fill='url(%23water-bg)'%20/%3e%3cg%20filter='url(%23water-glow)'%3e%3cpath%20d='M32%2076c12-10%2024-15%2032-15s20%205%2032%2015'%20fill='none'%20stroke='url(%23water-wave)'%20stroke-width='8'%20stroke-linecap='round'%20/%3e%3cpath%20d='M28%2092c14-12%2030-18%2040-18s26%206%2040%2018'%20fill='none'%20stroke='url(%23water-wave)'%20stroke-width='6'%20stroke-linecap='round'%20opacity='0.7'%20/%3e%3cpath%20d='M40%2060c10-8%2018-12%2024-12s14%204%2024%2012'%20fill='none'%20stroke='url(%23water-wave)'%20stroke-width='4'%20stroke-linecap='round'%20opacity='0.5'%20/%3e%3cpath%20d='M64%2030c-12%2020-18%2032-18%2042%200%2011%208%2020%2018%2020s18-9%2018-20c0-10-6-22-18-42z'%20fill='url(%23water-drop)'%20stroke='%23e0f2fe'%20stroke-width='2'%20/%3e%3c/g%3e%3ccircle%20cx='94'%20cy='34'%20r='6'%20fill='%23f8fafc'%20opacity='0.45'%20/%3e%3c/svg%3e",Id=.01;function Lr(e){return!Number.isFinite(e)||e<=Id?1:e}function Nd(e,t){return e/Lr(t)}function Ke(e,t){const n=Lr(t);return Math.round(e*n)/n}const io={[Ie.Plains]:{baseColor:"#d8b869",icon:xd},[Ie.Forest]:{baseColor:"#237a55",icon:Bd},[Ie.Hills]:{baseColor:"#b57c57",icon:zd},[Ie.Lake]:{baseColor:"#3185d5",icon:Dd}},Pd=[255,255,255],ma=[12,18,28],kd=[0,0,0],co="rgba(56, 189, 248, 0.85)",lo="rgba(56, 189, 248, 0.45)";let Wt=null,Vt=null;const Ld=e=>Math.min(1,Math.max(0,e));function Td(e){let t=e.trim().replace("#","");t.length===3&&(t=t.split("").map(s=>s+s).join(""));const n=Number.parseInt(t,16);return[n>>16&255,n>>8&255,n&255]}function es(e,t,n){const s=Ld(n);return[Math.round(e[0]+(t[0]-e[0])*s),Math.round(e[1]+(t[1]-e[1])*s),Math.round(e[2]+(t[2]-e[2])*s)]}function uo(e){return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}function ts(e,t=1){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${t})`}function ns(e,t=1){return ts(es(ma,Pd,e),t)}function Rt(e,t=1){return ts(es(ma,kd,e),t)}const Rd={terrain:.05,hover:.065,selection:.085},jd={terrain:1,hover:1.35,selection:2.1};function ss(e,t,n="terrain"){const s=e*Rd[n],a=Nd(s,t);return Math.max(jd[n],a)}function Od(){if(Wt&&Vt)return{stroke:Wt,glow:Vt};if(typeof window<"u"){const e=getComputedStyle(document.documentElement),t=e.getPropertyValue("--tile-highlight-ring").trim(),n=e.getPropertyValue("--tile-highlight-glow").trim();Wt=t||co,Vt=n||lo}else Wt=co,Vt=lo;return{stroke:Wt,glow:Vt}}function Tr(e){return Math.min(1,Math.max(0,e))}function ps(e){let t=e.trim();if(t.startsWith("#")&&(t=t.slice(1)),t.length===3){const n=Number.parseInt(t[0]+t[0],16),s=Number.parseInt(t[1]+t[1],16),a=Number.parseInt(t[2]+t[2],16);return[n,s,a]}if(t.length===6){const n=Number.parseInt(t,16),s=n>>16&255,a=n>>8&255,o=n&255;return[s,a,o]}return[0,0,0]}function Qd(e,t,n){const s=Tr(n),a=(o,r)=>Math.round(o+(r-o)*s);return[a(e[0],t[0]),a(e[1],t[1]),a(e[2],t[2])]}function Hd([e,t,n],s){return`rgba(${e}, ${t}, ${n}, ${Tr(s)})`}function At(e,t,n,s){return Hd(Qd(e,t,n),s)}function Gd(e){const{ctx:t,x:n,y:s,width:a,height:o,radius:r,baseColor:i}=e,c=ps(i);t.save(),t.lineCap="round",t.lineJoin="round";const l=At(c,[255,255,255],.35,.24);t.strokeStyle=l,t.lineWidth=Math.max(1,r*.06);const d=3,u=6,h=n+a*.12,f=n+a*.88;for(let A=0;A<d;A++){const M=A/Math.max(1,d-1),v=s+o*.28+M*o*.32,P=r*(.18-M*.05);t.beginPath();for(let b=0;b<=u;b++){const N=b/u,C=h+(f-h)*N,I=Math.sin(N*Math.PI*1.6+A*.8)*P,w=v-Math.abs(I)*.55;b===0?t.moveTo(C,w):t.lineTo(C,w)}t.stroke()}const m=At(c,[18,54,32],.4,.2);t.strokeStyle=m,t.lineWidth=Math.max(.75,r*.035);const p=5,g=r*.22;for(let A=0;A<p;A++){const M=n+a*(.2+A/Math.max(1,p-1)*.6),v=s+o*.55-Math.cos(A*.9)*r*.08;t.beginPath(),t.arc(M,v,g,Math.PI*.2,Math.PI*.85),t.stroke(),t.beginPath(),t.arc(M+g*.35,v-g*.1,g*.55,Math.PI*.15,Math.PI*.95),t.stroke()}t.restore()}function Ud(e){const{ctx:t,centerX:n,centerY:s,radius:a,baseColor:o}=e,r=ps(o);t.save(),t.lineCap="round";const i=At(r,[255,235,214],.45,.22);t.strokeStyle=i,t.lineWidth=Math.max(1,a*.05);const c=4;for(let u=0;u<c;u++){const h=u/Math.max(1,c-1),f=a*(1.25-h*.45),m=a*(.72-h*.18),p=s+a*.18*(h-.5);t.beginPath(),t.ellipse(n,p,f,m,0,Math.PI*.12,Math.PI*.88),t.stroke()}const l=At(r,[60,36,20],.35,.18);t.strokeStyle=l,t.lineWidth=Math.max(.85,a*.032),t.setLineDash([a*.22,a*.18]);const d=3;for(let u=0;u<d;u++){const h=a*(.75-u*.1),f=s+a*.28+u*a*.08;t.beginPath(),t.arc(n+a*.08,f,h,Math.PI*.28,Math.PI*.76),t.stroke()}t.setLineDash([]),t.restore()}function Fd(e){const{ctx:t,x:n,y:s,width:a,height:o,radius:r,baseColor:i}=e,c=ps(i);t.save(),t.lineCap="round",t.lineJoin="round";const l=At(c,[255,255,255],.55,.28);t.strokeStyle=l,t.lineWidth=Math.max(1,r*.045);const d=4,u=7,h=n+a*.12,f=n+a*.88,m=r*.16;for(let A=0;A<d;A++){const M=A/Math.max(1,d-1),v=s+o*.3+M*o*.4;t.beginPath();for(let P=0;P<=u;P++){const b=P/u,N=h+(f-h)*b,C=Math.sin(b*Math.PI*2+A*.6)*m*(.75-M*.2),I=v+C;P===0?t.moveTo(N,I):t.lineTo(N,I)}t.stroke()}const p=At(c,[12,52,94],.4,.2);t.strokeStyle=p,t.lineWidth=Math.max(.8,r*.03);const g=3;for(let A=0;A<g;A++){const M=A/Math.max(1,g-1),v=s+o*.35+M*o*.35;t.beginPath();for(let P=0;P<=u;P++){const b=P/u,N=h+(f-h)*b,C=Math.sin(b*Math.PI*2+A)*m*.35,I=v+C;P===0?t.moveTo(N,I):t.lineTo(N,I)}t.stroke()}t.restore()}function Rr(e){const{ctx:t,x:n,y:s,width:a,height:o,radius:r,baseColor:i}=e,c=ps(i);t.save(),t.lineCap="round";const l=At(c,[255,255,255],.42,.18);t.strokeStyle=l,t.lineWidth=Math.max(.85,r*.03);const d=r*.55;for(let f=-1;f<=2;f++){const m=d*f;t.beginPath(),t.moveTo(n+m,s+o*.25),t.lineTo(n+m+a*.75,s+o*.85),t.stroke()}const u=At(c,[112,82,32],.3,.16);t.strokeStyle=u,t.lineWidth=Math.max(.7,r*.025),t.setLineDash([r*.24,r*.34]);const h=r*.48;for(let f=0;f<3;f++){const m=h*f;t.beginPath(),t.moveTo(n+a*.18+m,s+o*.78),t.lineTo(n+a*.7+m,s+o*.38),t.stroke()}t.setLineDash([]),t.restore()}const ho=new Map;let bt=null;function Kd(){if(bt)return bt;const e="/";if(/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e))return bt=e,bt;const n=e.startsWith("/")?e:`/${e}`;return typeof window<"u"&&typeof window.location?.origin=="string"?bt=`${window.location.origin}${n}`:bt=`http://localhost${n}`,bt}function Yd(e){let t=ho.get(e);if(!t){t=new Image,t.decoding="async";const n=new URL(e,Kd()).href;t.src=n,ho.set(e,t)}if(t.complete&&t.naturalWidth>0&&t.naturalHeight>0)return t}const Xd={[Ie.Plains]:Rr,[Ie.Forest]:Gd,[Ie.Hills]:Ud,[Ie.Lake]:Fd};function jr(e,t,n,s){e.beginPath();for(let a=0;a<6;a++){const o=Math.PI/180*(60*a-30),r=t+s*Math.cos(o),i=n+s*Math.sin(o);a===0?e.moveTo(r,i):e.lineTo(r,i)}e.closePath()}function qd(e,t,n,s){jr(e,t,n,s),e.save(),e.lineJoin="round",e.lineCap="round",e.lineWidth=ss(s,1,"terrain"),e.strokeStyle=ns(.16,.6),e.stroke(),e.restore()}function Jd(e,t,n,s,a,o,r,i){const c=io[t.terrain]??io[Ie.Plains],l=Td(c.baseColor),d=s+o/2,u=a+r/2;e.save(),jr(e,d,u,i),e.clip();const h=e.createRadialGradient(d,u,i*.2,d,u,i*1.05);h.addColorStop(0,uo(es(l,[255,255,255],.3))),h.addColorStop(.7,c.baseColor),h.addColorStop(1,uo(es(l,ma,.4))),e.fillStyle=h,e.shadowColor=ts(l,.35),e.shadowBlur=i*.9,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillRect(s-i*.1,a-i*.1,o+i*.2,r+i*.2);const f={ctx:e,x:s,y:a,width:o,height:r,radius:i,centerX:d,centerY:u,baseColor:c.baseColor};(Xd[t.terrain]??Rr)(f),e.globalCompositeOperation="lighter";const p=e.createRadialGradient(d,u,i*.85,d,u,i*1.18);p.addColorStop(0,"rgba(255, 255, 255, 0)"),p.addColorStop(1,ts(l,.18)),e.fillStyle=p,e.fillRect(s-i*.1,a-i*.1,o+i*.2,r+i*.2),e.globalCompositeOperation="source-over",e.restore();const g=Yd(c.icon);if(g){const A=Math.min(o,r)*.62,M=d-A/2,v=u-A/2;e.save(),e.globalAlpha*=.92,e.drawImage(g,M,v,A,A),e.restore()}if(t.building){const A=n[`building-${t.building}`]??n.placeholder;e.drawImage(A,s,a,o,r)}}function Zd(e,t){const n=Math.max(e.q*_e,t.minQ),s=Math.min(n+_e-1,t.maxQ),a=Math.max(e.r*_e,t.minR),o=Math.min(a+_e-1,t.maxR);return{qStart:n,qEnd:s,rStart:a,rEnd:o}}class Wd{constructor(t){this.map=t,this.unsubscribe=t.addTileChangeListener((n,s,a)=>{this.onTileChange(n,a)})}chunkCanvases=new Map;dirtyChunks=new Set;cachedImages;unsubscribe;dispose(){this.unsubscribe(),this.chunkCanvases.clear(),this.dirtyChunks.clear(),this.cachedImages=void 0}invalidate(){this.chunkCanvases.clear(),this.dirtyChunks.clear(),this.cachedImages=void 0}markChunkDirty(t){this.dirtyChunks.add(t)}markTileDirty(t,n){this.dirtyChunks.add(vd(t,n))}getRenderableChunks(t,n,s,a){this.refreshAssets(s);const o=[],{width:r,height:i}=$n(n);for(const c of kr(t)){const l=Pr(c),d=this.ensureChunk(l,c,n,r,i,s,a);d&&o.push(d)}return o}refreshAssets(t){if(this.cachedImages!==t){this.cachedImages=t;for(const n of this.chunkCanvases.keys())this.dirtyChunks.add(n)}}onTileChange(t,n){(n==="created"||n==="terrain"||n==="building"||n==="fog")&&this.markTileDirty(t.q,t.r)}ensureChunk(t,n,s,a,o,r,i){const c=this.chunkCanvases.get(t);if(!c||this.dirtyChunks.has(t)){const l=this.renderChunk(t,n,s,a,o,r,i,c);return this.dirtyChunks.delete(t),l?(this.chunkCanvases.set(t,l),l):(this.chunkCanvases.delete(t),null)}return c}renderChunk(t,n,s,a,o,r,i,c){if(typeof document>"u")return null;const{qStart:l,qEnd:d,rStart:u,rEnd:h}=Zd(n,this.map);if(l>d||u>h)return null;const f=a/2,m=o/2;let p=1/0,g=1/0,A=-1/0,M=-1/0;const v=[];for(let I=l;I<=d;I++)for(let w=u;w<=h;w++){const z=this.map.getTile(I,w);if(!z||z.isFogged)continue;const{x:y,y:k}=Ye({q:I,r:w},s),L=y-i.x-f,R=k-i.y-m;p=Math.min(p,L),g=Math.min(g,R),A=Math.max(A,L+a),M=Math.max(M,R+o),v.push({tile:z,x:L,y:R})}if(!Number.isFinite(p)||!Number.isFinite(g)||!Number.isFinite(A)||!Number.isFinite(M))return null;const P=Math.max(1,Math.ceil(A-p)),b=Math.max(1,Math.ceil(M-g));let N=c?.canvas;(!N||N.width!==P||N.height!==b)&&(N=document.createElement("canvas"),N.width=P,N.height=b);const C=N.getContext("2d");if(!C)throw new Error("Canvas 2D context not available for chunk rendering");C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,P,b);for(const{tile:I,x:w,y:z}of v){const y=w-p,k=z-g;C.save(),Jd(C,I,r,y,k,a,o,s),qd(C,y+a/2,k+o/2,s),C.restore()}return{key:t,canvas:N,origin:{x:p,y:g},width:P,height:b}}}const Vd=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Je=new Array(512);for(let e=0;e<512;e++)Je[e]=Vd[e%256];const fo=new Map,mo=e=>e*e*e*(e*(e*6-15)+10),Bs=(e,t,n)=>e+n*(t-e),Rn=(e,t,n)=>{switch(e&3){case 0:return t+n;case 1:return-t+n;case 2:return t-n;default:return-t-n}};function _d(e,t){const n=Math.floor(e)&255,s=Math.floor(t)&255,a=e-Math.floor(e),o=t-Math.floor(t),r=Je[Je[n+1]+s+1],i=Je[Je[n]+s+1],c=Je[Je[n+1]+s],l=Je[Je[n]+s],d=mo(a),u=mo(o),h=Bs(Rn(l,a,o),Rn(c,a-1,o),d),f=Bs(Rn(i,a,o-1),Rn(r,a-1,o-1),d);return Bs(h,f,u)}function $d(e,t,n=4){let s=0,a=1,o=1,r=0;for(let i=0;i<n;i++)s+=_d(e*a,t*a)*o,r+=o,o*=.5,a*=2;return r>0?s/r:0}function eu(e){const t=Math.max(32,Math.min(512,Math.round(e))),n=t,s=fo.get(n);if(s)return s;if(typeof document>"u")return null;const a=document.createElement("canvas");a.width=t,a.height=t;const o=a.getContext("2d");if(!o)return null;const r=o.createImageData(t,t),i=t/48;let c=0;for(let l=0;l<t;l++)for(let d=0;d<t;d++){const u=$d(d/i,l/i,5),h=Math.pow((u+1)/2,1.35),f=Math.round(h*255);r.data[c]=255,r.data[c+1]=255,r.data[c+2]=255,r.data[c+3]=f,c+=4}return o.putImageData(r,0,0),fo.set(n,a),a}function go(e,t,n,s){e.beginPath();for(let a=0;a<6;a++){const o=Math.PI/180*(60*a-30),r=t+s*Math.cos(o),i=n+s*Math.sin(o);a===0?e.moveTo(r,i):e.lineTo(r,i)}e.closePath()}function tu(e,t,n,s){const a=e.createRadialGradient(t,n,s*.08,t,n,s*1.12);return a.addColorStop(0,ns(.4,.35)),a.addColorStop(.35,ns(.2,.55)),a.addColorStop(.6,Rt(.1,.78)),a.addColorStop(.82,Rt(.2,.88)),a.addColorStop(1,Rt(.35,.95)),a}function nu(e,t,n,s,a){if(s<=0)return;const o=eu(s*2.2),r=s*2.5,i=t-r/2,c=n-r/2;e.save(),go(e,t,n,s),e.clip();const l=tu(e,t,n,s);e.fillStyle=l,e.fillRect(i,c,r,r),o&&(e.save(),e.globalCompositeOperation="lighter",e.globalAlpha*=.32,e.drawImage(o,t-s,n-s,s*2,s*2),e.restore()),e.restore(),e.save(),go(e,t,n,s*.99),e.lineJoin="round",e.lineCap="round",e.lineWidth=ss(s,a,"hover"),e.strokeStyle=Rt(.3,.88),e.shadowColor=Rt(.45,.42),e.shadowBlur=Math.max(3,s*.45/Math.max(a,.1)),e.stroke(),e.restore()}class su{constructor(t){this.mapRef=t,this.terrainCache=new Wd(t),this.cachedHexSize=t.hexSize}terrainCache;cachedHexSize;get hexSize(){return this.mapRef.hexSize}getOrigin(){return Ye({q:this.mapRef.minQ,r:this.mapRef.minR},this.hexSize)}invalidateCache(){this.terrainCache.invalidate()}dispose(){this.terrainCache.dispose()}draw(t,n,s){this.ensureHexSize();const a=t.canvas??null,o=wd(this.mapRef,H,a,this.hexSize);if(!o)return;const r=Sd(o);Cd(this.mapRef,r);const i=this.getOrigin(),c=this.terrainCache.getRenderableChunks(r,this.hexSize,n,i);this.drawChunks(t,c),this.drawFogLayer(t,i,o),s&&this.drawSelection(t,i,s)}drawToCanvas(t,n,s){const a=t.getContext("2d");if(!a)throw new Error("Canvas 2D context not available");this.draw(a,n,s)}ensureHexSize(){this.cachedHexSize!==this.hexSize&&(this.cachedHexSize=this.hexSize,this.terrainCache.invalidate())}drawChunks(t,n){if(n.length!==0)for(const s of n)t.drawImage(s.canvas,s.origin.x,s.origin.y)}drawSelection(t,n,s){const{width:a,height:o}=$n(this.hexSize),{x:r,y:i}=Ye(s,this.hexSize),c=r-n.x-a/2,l=i-n.y-o/2;this.strokeHex(t,c+a/2,l+o/2,this.hexSize,!0)}drawFogLayer(t,n,s){const{width:a,height:o}=$n(this.hexSize),r=a/2,i=o/2;for(let c=s.rMin;c<=s.rMax;c++)for(let l=s.qMin;l<=s.qMax;l++){const d=this.mapRef.getTile(l,c);if(!d||!d.isFogged)continue;const{x:u,y:h}=Ye({q:l,r:c},this.hexSize),f=u-n.x-r,m=h-n.y-i,p=this.hexSize,g=f+a/2,A=m+o/2;nu(t,g,A,p,H.zoom)}}strokeHex(t,n,s,a,o=!1){const{stroke:r,glow:i}=Od();this.hexPath(t,n,s,a),t.save(),t.lineJoin="round",t.lineCap="round",o?(t.shadowColor=i,t.shadowBlur=Math.max(6,a*.65/Math.max(H.zoom,.1)),t.lineWidth=ss(a,H.zoom,"selection"),t.strokeStyle=r,t.stroke()):(t.lineWidth=ss(a,H.zoom,"hover"),t.shadowColor=ns(.1,.45),t.shadowBlur=Math.max(2,a*.4/Math.max(H.zoom,.1)),t.strokeStyle=Rt(.1,.72),t.stroke()),t.restore()}hexPath(t,n,s,a){t.beginPath();for(let o=0;o<6;o++){const r=Math.PI/180*(60*o-30),i=n+a*Math.cos(r),c=s+a*Math.sin(r);o===0?t.moveTo(i,c):t.lineTo(i,c)}t.closePath()}}const dt={accent:"#38bdf8",accentSoft:"rgba(56, 189, 248, 0.2)",warm:"#fbbf24",surface:"rgba(15, 23, 42, 0.92)",border:"rgba(148, 163, 184, 0.34)",text:"#e2e8f0"};let ut=null;function Dt(e,t){const n=e.trim();return n.length>0?n:t}function au(){if(ut)return ut;if(typeof window>"u"||typeof document>"u")return ut=dt,ut;try{const e=getComputedStyle(document.documentElement);return ut={accent:Dt(e.getPropertyValue("--color-accent"),dt.accent),accentSoft:Dt(e.getPropertyValue("--color-accent-soft"),dt.accentSoft),warm:Dt(e.getPropertyValue("--color-warning"),dt.warm),surface:Dt(e.getPropertyValue("--color-surface-strong"),dt.surface),border:Dt(e.getPropertyValue("--hud-border-strong"),dt.border),text:Dt(e.getPropertyValue("--color-foreground"),dt.text)},ut}catch(e){return console.warn("Failed to read sauna palette tokens from computed styles",e),ut=dt,ut}}function ou(e,t){const n=Math.max(0,e.auraRadius),s=Ye(e.pos,t),a=s.x+t,o=s.y+t;let r=t;if(n<=0)return t*1.6;for(const i of Go){const c=Ye({q:e.pos.q+i.q*n,r:e.pos.r+i.r*n},t),l=c.x+t,d=c.y+t,u=Math.hypot(l-a,d-o);u>r&&(r=u)}return r+t*.65}function ru(e,t,n,s,a,o){const r=Math.max(0,Math.min(o,Math.min(s,a)/2));e.moveTo(t+r,n),e.lineTo(t+s-r,n),e.quadraticCurveTo(t+s,n,t+s,n+r),e.lineTo(t+s,n+a-r),e.quadraticCurveTo(t+s,n+a,t+s-r,n+a),e.lineTo(t+r,n+a),e.quadraticCurveTo(t,n+a,t,n+a-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath()}function iu(e,t,{origin:n,hexSize:s,timestamp:a}){if(!t)return;const o=au(),r=Number.isFinite(a)?a:typeof performance<"u"?performance.now():Date.now(),i=.5+.5*Math.sin(r*.0035),c=Ye(t.pos,s),l=c.x-n.x+s,d=c.y-n.y+s,u=ou(t,s);e.save(),e.globalCompositeOperation="screen";const h=u+s*(.4+i*.3),f=Math.max(s*.6,u*.58),m=e.createRadialGradient(l,d,f,l,d,h);m.addColorStop(0,o.accentSoft),m.addColorStop(.55,`rgba(56, 189, 248, ${.18+i*.12})`),m.addColorStop(1,"rgba(2, 6, 23, 0)"),e.fillStyle=m,e.beginPath(),e.arc(l,d,h,0,Math.PI*2),e.fill(),e.restore(),e.save(),e.globalCompositeOperation="lighter",e.lineWidth=Math.max(s*.28,6),e.strokeStyle=`rgba(56, 189, 248, ${(.35+i*.2).toFixed(3)})`,e.shadowColor=`rgba(56, 189, 248, ${.45+i*.1})`,e.shadowBlur=s*(.9+i*.45),e.beginPath(),e.arc(l,d,u+s*.12,0,Math.PI*2),e.stroke(),e.restore();const p=s*.9;e.save(),e.beginPath(),e.arc(l,d,p,0,Math.PI*2),e.fillStyle=o.surface,e.globalAlpha*=.96,e.fill(),e.lineWidth=Math.max(1.5,s*.06),e.strokeStyle=o.border,e.shadowColor="rgba(8, 25, 53, 0.6)",e.shadowBlur=s*.45,e.stroke(),e.restore();const g=p*.78,A=Math.max(s*.22,5);e.save(),e.lineWidth=A,e.strokeStyle="rgba(148, 163, 184, 0.24)",e.beginPath(),e.arc(l,d,g,0,Math.PI*2),e.stroke(),e.restore();const M=t.playerSpawnCooldown>0?t.playerSpawnCooldown:1,P=1-Math.min(1,Math.max(0,t.playerSpawnTimer/M)),b=-Math.PI/2,N=b+Math.PI*2*P;if(P>0){e.save(),e.lineWidth=A,e.lineCap="round";const se=e.createLinearGradient(l,d-g,l,d+g);se.addColorStop(0,o.accent),se.addColorStop(1,o.warm),e.strokeStyle=se,e.shadowColor=`rgba(56, 189, 248, ${.42+i*.18})`,e.shadowBlur=s*(.65+i*.35),e.beginPath(),e.arc(l,d,g,b,N,!1),e.stroke(),e.restore()}const C=Math.max(0,t.playerSpawnTimer),I=Math.ceil(C);e.save(),e.font=`600 ${Math.max(12,s*.9)}px "Inter", "Manrope", "Segoe UI", sans-serif`,e.fillStyle=o.text,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(2, 6, 23, 0.6)",e.shadowBlur=s*.35,e.fillText(String(I),l,d),e.restore(),e.save(),e.font=`500 ${Math.max(10,s*.36)}px "Inter", "Manrope", "Segoe UI", sans-serif`,e.fillStyle="rgba(148, 163, 184, 0.78)",e.textAlign="center",e.textBaseline="top",e.fillText("sec",l,d+g*.45),e.restore();const w="Sauna ",z=Math.max(12,s*.58);e.save(),e.font=`600 ${z}px "Inter", "Manrope", "Segoe UI", sans-serif`;const y=e.measureText(w),k=s*.58,L=s*.32,R=y.width+k*2,x=z+L*2,Q=l-R/2,G=d-u-x-s*.35,ue=x/2;e.beginPath(),ru(e,Q,G,R,x,ue);const q=e.createLinearGradient(Q,G,Q,G+x);q.addColorStop(0,"rgba(15, 23, 42, 0.94)"),q.addColorStop(.55,"rgba(15, 23, 42, 0.86)"),q.addColorStop(1,"rgba(30, 41, 59, 0.9)"),e.fillStyle=q,e.shadowColor="rgba(8, 25, 53, 0.6)",e.shadowBlur=s*.4,e.fill(),e.lineWidth=Math.max(1.5,s*.06);const Y=e.createLinearGradient(Q,G,Q+R,G);Y.addColorStop(0,`${o.accent}`),Y.addColorStop(1,`${o.warm}`),e.strokeStyle=Y,e.stroke(),e.fillStyle=o.text,e.shadowColor="rgba(8, 25, 53, 0.65)",e.shadowBlur=s*.3,e.textAlign="center",e.textBaseline="middle",e.fillText(w,l,G+x/2+z*.05),e.restore()}const Or={nativeSize:{width:64,height:64},anchor:{x:.5,y:.92},scale:{x:1,y:1},nudge:{x:0,y:-.05}},cu={default:Or,soldier:{nativeSize:{width:128,height:128},anchor:{x:.5,y:.88},scale:{x:1.06,y:1.18},nudge:{x:0,y:-.1}},archer:{nativeSize:{width:128,height:128},anchor:{x:.5,y:.86},scale:{x:1.04,y:1.16},nudge:{x:0,y:-.08}},"avanto-marauder":{nativeSize:{width:128,height:128},anchor:{x:.5,y:.86},scale:{x:1.08,y:1.12},nudge:{x:0,y:-.12}},saunoja:{nativeSize:{width:128,height:128},anchor:{x:.5,y:.66},scale:{x:1,y:1},nudge:{x:0,y:-.02}}};function Qr(e){return cu[e]??Or}function Hr(e,t,n,s){const{x:a,y:o}=Ye(e,t),r=s.nudge.x*t,i=s.nudge.y*t;return{x:a-n.x+r,y:o-n.y+i}}function lu({coord:e,hexSize:t,origin:n,zoom:s,type:a}){const o=Qr(a),r=Hr(e,t,n,o);return{x:Ke(r.x,s),y:Ke(r.y,s)}}function du({coord:e,hexSize:t,origin:n,zoom:s,type:a}){const o=Qr(a),r=Hr(e,t,n,o),{width:i,height:c}=$n(t),l=i*o.scale.x,d=c*o.scale.y,u=Ke(r.x-l*o.anchor.x,s),h=Ke(r.y-d*o.anchor.y,s),f=Ke(l,s),m=Ke(d,s),p=u+f*o.anchor.x,g=h+m*o.anchor.y;return{drawX:u,drawY:h,width:f,height:m,centerX:p,centerY:g,metadata:o}}function uu(e,t,n,s,a,o){const r=window.devicePixelRatio||1,i=e.canvas.width,c=e.canvas.height;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i,c);const l=i/r,d=c/r;e.scale(r,r),e.translate(l/2,d/2),e.scale(H.zoom,H.zoom);const u=t.getOrigin();e.translate(-(H.x-u.x),-(H.y-u.y)),t.draw(e,n,a??void 0);const h=o?.saunojas;h&&Array.isArray(h.units)&&h.units.length>0&&h.draw(e,h.units,{originX:u.x,originY:u.y,hexRadius:t.hexSize,zoom:H.zoom}),hu(e,t,n,s,u,o?.fx),o?.sauna&&iu(e,o.sauna,{origin:u,hexSize:t.hexSize}),e.restore()}function hu(e,t,n,s,a,o){const r=s.filter(i=>i.faction==="player"&&!i.isDead()).map(i=>({coord:i.coord,range:i.getVisionRange()}));for(const i of s){if(i.isDead()||i.faction==="enemy"&&!r.some(({coord:h,range:f})=>nn(h,i.coord)<=f))continue;const c=n[`unit-${i.type}`]??n.placeholder,l=i.getMaxHealth();e.save();const d=o?.getUnitAlpha?.(i);if(typeof d=="number"){const h=Math.min(1,Math.max(0,d));if(h<=0){e.restore();continue}e.globalAlpha*=h}i.stats.health/l<.5&&(e.filter="saturate(0)");const u=du({coord:i.coord,hexSize:t.hexSize,origin:a,zoom:H.zoom,type:i.type});e.drawImage(c,u.drawX,u.drawY,u.width,u.height),ha()&&i.faction==="player"&&(e.strokeStyle="rgba(255,255,255,0.5)",e.lineWidth=2,e.strokeRect(u.drawX,u.drawY,u.width,u.height)),e.restore()}}const fu=typeof matchMedia=="function"?matchMedia("(prefers-reduced-motion: reduce)"):null,mu=typeof matchMedia=="function"?matchMedia("(pointer: coarse)"):null,gu=900,pu=650;function Au(e){switch(e){case"down":return{x:0,y:36};case"left":return{x:-26,y:-18};case"right":return{x:26,y:-18};case"up":default:return{x:0,y:-40}}}function yu(e){const t=document.createElement("div");t.className="ui-floater-layer",e.appendChild(t);const n=!!fu?.matches,s=!!mu?.matches;return{spawn:({text:r,x:i,y:c,color:l,direction:d="up",durationMs:u,fontSize:h})=>{const f=document.createElement("span");f.className="ui-floater",f.textContent=r,f.style.left=`${Math.round(i)}px`,f.style.top=`${Math.round(c)}px`,l&&(f.style.color=l),h&&(f.style.fontSize=`${h}px`);const m=s?12:24;for(;t.childElementCount>=m;)t.firstElementChild?.remove();t.appendChild(f);const p=u??(s?pu:gu);if(n||!f.animate){f.style.opacity="0",f.style.transition=`opacity ${Math.round(p*.8)}ms ease-out`,requestAnimationFrame(()=>{f.style.opacity="1",requestAnimationFrame(()=>{f.style.opacity="0"})}),window.setTimeout(()=>{f.remove()},p);return}const g=Au(d),A=[{transform:"translate3d(-50%, -50%, 0) translate3d(0, 0, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0) translate3d(0, 0, 0)",opacity:1,offset:.18},{transform:`translate3d(-50%, -50%, 0) translate3d(${g.x}px, ${g.y}px, 0)`,opacity:0}],M=f.animate(A,{duration:p,easing:"cubic-bezier(0.18, 0.89, 0.32, 1.28)",fill:"forwards"});M.onfinish=()=>{f.remove()}},destroy:()=>{t.remove()}}}const po=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),Mu=new Intl.NumberFormat("en-US",{maximumFractionDigits:1,minimumFractionDigits:0});function Ao(e){return 1-(1-e)*(1-e)}function jn(e,t,n){return Math.min(n,Math.max(t,e))}const bu="var(--color-danger)",wu="color-mix(in srgb, #34d399 88%, white 12%)",vu=720,Su=540,Eu=220,Cu=180,xu=6,Bu=3,zu="color-mix(in srgb, #fbbf24 82%, white 10%)",Du=typeof matchMedia=="function"?matchMedia("(prefers-reduced-motion: reduce)"):null,Iu=typeof matchMedia=="function"?matchMedia("(pointer: coarse)"):null;function Nu(e){const{canvas:t,overlay:n,mapRenderer:s,getUnitById:a,requestDraw:o}=e,r=yu(n),i=new Map,c=new Map,l=[],d={x:0,y:0},u=!!Du?.matches,h=!!Iu?.matches,f=h?Su:vu,m=h?Cu:Eu,p=h?Bu:xu,g=()=>{o&&(typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>o()):o())},A=z=>{const y=t.getBoundingClientRect(),k=n.getBoundingClientRect();if(y.width===0||y.height===0)return null;const{x:L,y:R}=Ye(z,s.hexSize),x=(L-H.x)*H.zoom+y.width/2,Q=(R-H.y)*H.zoom+y.height/2,G=s.hexSize*H.zoom*.75;return{x:x+(y.left-k.left),y:Q+(y.top-k.top)-G}},M=(z,y,k,L="up")=>{const R=a(z);if(!R)return;const x=A(R.coord);x&&r.spawn({text:y,x:x.x,y:x.y,color:k,direction:L,fontSize:h?18:void 0})},v=z=>{if(!z||z.amount<=0)return;const y=po.format(Math.max(1,Math.round(z.amount)));if(M(z.targetId,`-${y}`,bu,"up"),!u){const k=typeof performance<"u"?performance.now():Date.now();l.push({start:k,duration:m,intensity:p,seedX:Math.random()*500,seedY:Math.random()*500})}g()},P=z=>{if(!z||z.amount<=0)return;const y=z.amount>=1?po.format(Math.round(z.amount)):Mu.format(jn(z.amount,0,9.9));M(z.unitId,`+${y}`,wu,"up"),g()},b=z=>{if(!z)return;const y=typeof performance<"u"?performance.now():Date.now();i.set(z.unitId,{start:y,duration:f}),M(z.unitId,"",zu,"down"),g()};return E.on("unitDamaged",v),E.on("unitHealed",P),E.on("unitDied",b),{step:z=>{if(u)d.x=0,d.y=0;else{let y=0,k=0;for(let L=l.length-1;L>=0;L--){const R=l[L],x=z-R.start;if(x>=R.duration){l.splice(L,1);continue}const Q=jn(x/R.duration,0,1),G=R.intensity*Ao(1-Q);y+=Math.sin((z+R.seedX)/16)*G,k+=Math.cos((z+R.seedY)/18)*G}d.x=y,d.y=k}for(const[y,k]of i){const L=z-k.start,R=jn(L/k.duration,0,1),x=1-Ao(R);if(R>=1){c.delete(y),i.delete(y);continue}c.set(y,jn(x,0,1))}},getShakeOffset:()=>({x:d.x,y:d.y}),getUnitAlpha:z=>c.get(z)??1,dispose:()=>{E.off("unitDamaged",v),E.off("unitHealed",P),E.off("unitDied",b),l.length=0,i.clear(),c.clear(),r.destroy()}}}function Pu(){return`${"/".endsWith("/")?"/":"//"}${"assets/units/saunoja.svg".replace(/^\/+/,"")}`}const yo=Pu();let kt=null,_t=null;function Ws(e){return!!(e&&e.complete&&e.naturalWidth>0&&e.naturalHeight>0)}function ku(e,t){if(!t)return e;try{t(e)}catch(n){console.error("Saunoja icon onLoad callback failed",n)}return e}function Gr(e){const t=s=>e?s.then(a=>ku(a,e)):s;if(Ws(kt))return t(Promise.resolve(kt));if(_t)return t(_t);if(typeof Image>"u")return Promise.reject(new Error("Image constructor is not available in this environment."));const n=new Image;return n.decoding="async",kt=n,_t=new Promise((s,a)=>{const o=()=>{n.onload=null,n.onerror=null},r=()=>{o(),s(n)};n.onload=r,n.onerror=i=>{o(),kt=null,_t=null;const c=new Error(`Failed to load saunoja icon from ${yo}`);console.warn(c.message,i),a(c)},n.src=yo,Ws(n)&&r()}),t(_t)}function Lu(e,t,{originX:n=0,originY:s=0,hexRadius:a=Gt,zoom:o=1}={}){if(!e||!Array.isArray(t)||t.length===0)return;const r=Ws(kt)?kt:null;if(!r)return;const i=Number.isFinite(a)&&a>0?a:Gt,c=i*.98,l=[...t].sort((d,u)=>d.coord.r!==u.coord.r?d.coord.r-u.coord.r:d.coord.q!==u.coord.q?d.coord.q-u.coord.q:d.id.localeCompare(u.id));for(const d of l){const{x:u,y:h}=lu({coord:d.coord,hexSize:i,origin:{x:n,y:s},zoom:o,type:"saunoja"});e.save(),on(e,u,h,c),e.clip();const f=i*2.15/Math.max(r.naturalWidth,r.naturalHeight||1),m=Ke(r.naturalWidth*f,o),p=Ke(r.naturalHeight*f,o),g=Ke(u-m/2,o),A=Ke(h-p*.72,o);e.save(),e.filter="grayscale(100%) contrast(112%)",e.globalAlpha*=.96,e.drawImage(r,g,A,m,p),e.restore(),e.save(),e.globalCompositeOperation="multiply";const M=e.createRadialGradient(u,h+c*.38,c*.2,u,h+c*.38,c*1.05);M.addColorStop(0,"rgba(15, 23, 42, 0.55)"),M.addColorStop(1,"rgba(15, 23, 42, 0)"),e.fillStyle=M,e.fillRect(u-c,h-c,c*2,c*2),e.restore(),e.save(),e.globalCompositeOperation="soft-light";const v=e.createLinearGradient(u,h-c,u,h+c);v.addColorStop(0,"rgba(255, 232, 210, 0.18)"),v.addColorStop(.52,"rgba(255, 183, 124, 0.32)"),v.addColorStop(1,"rgba(212, 97, 54, 0.5)"),e.fillStyle=v,e.fillRect(u-c,h-c,c*2,c*2),e.restore(),e.save(),e.globalCompositeOperation="screen",e.globalAlpha=.75;const P=e.createRadialGradient(u,h-c*.68,c*.1,u,h,c*1.12);P.addColorStop(0,"rgba(255, 255, 255, 0.85)"),P.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=P,e.fillRect(u-c,h-c,c*2,c*2),e.restore();const N=performance.now()-d.lastHitAt,C=120;if(N<C){const z=1-N/C;rl(e,{centerX:u,centerY:h,radius:c,progress:z})}e.restore(),il(e,{centerX:u,centerY:h-i*.18,radius:i*.94,intensity:d.steam});const I=i*.42,w=h+i*.34;ol(e,{centerX:u,centerY:w,hp:d.hp,maxHp:d.maxHp,radius:I})}}const Tu=["Resolute Sauna Guardian","Steam Scholar","Frost-Hardened","Loyal Watchbearer","Aura Whisperer","Shield Brother","Stonefooted Scout","Sisu-Forged Veteran","Brewmaster Quartermaster","Icebreaker Herald","Runic Tactician","Torchbearer"],Ru=["Heat Fickle","Soot Allergic","Slow to Spark","Overconfident","Distracted Dreamer","Stubborn Stoker","Thirsty Between Battles","Clumsy Footwork","Rust-Prone Gear","Echo-Lost Listener"];function Mo(e,t,n){const s=[...e],a=[],o=Math.max(0,Math.min(t,s.length));for(let r=0;r<o;r++){const i=Math.floor(n()*s.length),[c]=s.splice(i,1);c&&a.push(c)}return a}function ju(e,t){for(let n=e.length-1;n>0;n--){const s=Math.floor(t()*(n+1));[e[n],e[s]]=[e[s],e[n]]}return e}function Ou(e=Math.random){typeof e!="function"&&(e=Math.random);const t=Mo(Tu,2,e),n=Mo(Ru,1,e),s=[...t,...n];return ju(s,e).map(a=>a.trim()).filter(a=>a.length>0)}const Qu=1;function $t(e,t=0){return Number.isFinite(e)?e:t}function Hu(e){const{heat:t,pickSpawnTile:n,spawnUnit:s,maxSpawns:a}=e,o=Math.max(Qu,Lt),r=Math.max(0,$t(e.minUpkeepReserve??o,o));let i=Math.max(0,$t(e.availableUpkeep,0));const c=Math.max(0,Math.floor($t(a??Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY))),l=$t(e.rosterCap??Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),d=Number.isFinite(l)?Math.max(0,Math.floor(l)):Number.POSITIVE_INFINITY,u=typeof e.getRosterCount=="function"?e.getRosterCount:()=>0;let h=0,f=0,m=0,p=0,g=0,A=0,M=0;for(;t.hasTriggerReady()&&h<c;){if(h+=1,Math.max(0,Math.floor($t(u()??0,0)))>=d){A+=1,f+=t.vent(.25);break}if(i<r){p+=1,f+=t.vent(.5);break}const P=n();if(!P){g+=1,f+=t.vent(.25);break}if(!s(P)){M+=1,f+=t.vent(.25);break}if(!t.consumeTrigger()){M+=1;break}m+=1,i=Math.max(0,i-r)}return{spawned:m,blockedByUpkeep:p,blockedByPosition:g,blockedByRoster:A,failedSpawns:M,ventedHeat:f,remainingUpkeep:i}}function zs(e,t=0){return Number.isFinite(e)?e:t}function Gu(e){const t=Math.max(0,zs(e.dt,0)),{addedHeat:n,cooledHeat:s}=e.heat.advance(t);let a=0;for(const f of e.units){if(f.isDead()||f.faction!=="player")continue;const m=Math.max(0,zs(e.getUnitUpkeep(f),0));m>0&&(a+=m)}const o=5;let i=Math.max(0,zs(e.sauna.beerUpkeepAccumulator,0)),c=0;if(a>0){if(i+=t,i>=o){const f=Math.floor(i/o);c=a*f,i-=f*o}}else i=0;e.sauna.beerUpkeepAccumulator=i,c>0&&e.state.addResource(D.SAUNA_BEER,-c);const l=e.state.getResource(D.SAUNA_BEER),d=Hu({heat:e.heat,availableUpkeep:l,pickSpawnTile:e.pickSpawnTile,spawnUnit:e.spawnBaseUnit,minUpkeepReserve:e.minUpkeepReserve,maxSpawns:e.maxSpawns,rosterCap:e.rosterCap,getRosterCount:e.getRosterCount}),u=e.heat.getCooldownSeconds(),h=e.heat.timeUntilNextTrigger();return e.sauna.heat=e.heat.getHeat(),e.sauna.playerSpawnThreshold=e.heat.getThreshold(),e.sauna.playerSpawnCooldown=Number.isFinite(u)?u:0,e.sauna.playerSpawnTimer=Number.isFinite(h)?h:0,e.sauna.heatPerTick=e.heat.getBuildRate(),{addedHeat:n,cooledHeat:s,upkeepDrain:c,spawn:d,beerRemaining:e.state.getResource(D.SAUNA_BEER),availableUpkeep:d.remainingUpkeep}}function Uu(){try{return globalThis.localStorage??null}catch(e){return console.warn("Unable to access localStorage for inventory persistence",e),null}}function Fu(e,t){const n=e.getItem(t);if(n)try{return JSON.parse(n)}catch(s){console.warn(`Failed to parse persisted inventory for "${t}", clearing.`,s),e.removeItem(t);return}}function On(e,t,n){const s=Number.isFinite(e.quantity)?e.quantity:1,a=Math.max(1,Math.round(s)),o=typeof e.rarity=="string"?e.rarity.trim():void 0,r=typeof e.icon=="string"?e.icon:void 0,i=typeof e.description=="string"?e.description:void 0;return{id:e.id,name:e.name,description:i,icon:r,rarity:o,quantity:a,acquiredAt:t,sourceTableId:n?.tableId,sourceEntryId:n?.entryId}}class Ku{listeners=new Set;storageKey;now;maxStashSize;storage;autoEquip;stash=[];inventory=[];constructor(t={}){this.storageKey=t.storageKey??"autobattles:inventory",this.now=typeof t.now=="function"?t.now:()=>Date.now(),this.maxStashSize=Math.max(1,Math.floor(t.maxStashSize??24)),this.storage=Uu(),this.autoEquip=t.autoEquip??!0,this.load()}load(){if(!this.storage)return;const t=Fu(this.storage,this.storageKey);if(t){if(typeof t.autoEquip=="boolean"&&(this.autoEquip=t.autoEquip),Array.isArray(t.stash)){const n=[];for(const s of t.stash){if(!s||typeof s!="object")continue;const{id:a,name:o,quantity:r}=s;if(typeof a!="string"||typeof o!="string")continue;const i=Number.isFinite(s.acquiredAt)?s.acquiredAt:this.now();n.push(On({id:a,name:o,description:s.description,icon:s.icon,rarity:s.rarity,quantity:r},i,{tableId:s.sourceTableId,entryId:s.sourceEntryId}))}this.stash=n.slice(0,this.maxStashSize)}if(Array.isArray(t.inventory)){const n=[];for(const s of t.inventory){if(!s||typeof s!="object")continue;const{id:a,name:o,quantity:r}=s;if(typeof a!="string"||typeof o!="string")continue;const i=Number.isFinite(s.acquiredAt)?s.acquiredAt:this.now();n.push(On({id:a,name:o,description:s.description,icon:s.icon,rarity:s.rarity,quantity:r},i,{tableId:s.sourceTableId,entryId:s.sourceEntryId}))}this.inventory=n}}}persist(){if(!this.storage)return;const t={autoEquip:this.autoEquip,stash:this.stash.map(n=>({...n})),inventory:this.inventory.map(n=>({...n}))};try{this.storage.setItem(this.storageKey,JSON.stringify(t))}catch(n){console.warn("Failed to persist inventory state",n)}}emit(t){for(const n of this.listeners)n(t)}normalizeEquipResult(t){return typeof t=="boolean"?{success:t}:!t||typeof t!="object"?{success:!1}:{success:!!t.success,comparison:t.comparison,reason:t.reason}}on(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}isAutoEquipEnabled(){return this.autoEquip}setAutoEquip(t){this.autoEquip!==t&&(this.autoEquip=t,this.persist(),this.emit({type:"settings-updated",autoEquip:this.autoEquip}))}getStash(){return this.stash.map(t=>({...t}))}getStashSize(){return this.stash.length}getInventory(){return this.inventory.map(t=>({...t}))}getInventorySize(){return this.inventory.length}addLoot(t,n={}){return this.addItem({...t.item},{...n,sourceTableId:n.sourceTableId,sourceEntryId:n.sourceEntryId??t.entryId})}addItem(t,n={}){const s=Math.max(0,Math.round(this.now())),a=On(t,s,{tableId:n.sourceTableId,entryId:n.sourceEntryId}),o=n.autoEquip??this.autoEquip;let r={success:!1};if(o&&n.unitId&&typeof n.equip=="function"){try{r=this.normalizeEquipResult(n.equip(n.unitId,a))}catch(i){console.warn("Failed to auto-equip inventory item",{item:a,error:i}),r={success:!1}}if(r.success)return this.persist(),this.emit({type:"item-acquired",item:a,equipped:!0,location:"equipped",unitId:n.unitId,stashSize:this.stash.length,inventorySize:this.inventory.length}),{item:a,equipped:!0,location:"equipped"}}if(this.stash.push(a),this.stash.length>this.maxStashSize){const i=this.stash.splice(0,this.stash.length-this.maxStashSize);i.length>0&&console.warn("Inventory stash full, trimming oldest items",i)}return this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-acquired",item:a,equipped:!1,unitId:n.unitId,location:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),{item:a,equipped:!1,location:"stash",stashIndex:this.stash.length-1}}equipFromStash(t,n,s){if(t<0||t>=this.stash.length)return!1;const a=this.stash[t];let o={success:!1};try{o=this.normalizeEquipResult(s(n,a))}catch(i){console.warn("Failed to equip stash item",{item:a,error:i}),o={success:!1}}if(!o.success)return!1;const[r]=this.stash.splice(t,1);return this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-equipped",item:r,unitId:n,from:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length,comparison:o.comparison}),!0}equipFromInventory(t,n,s){if(t<0||t>=this.inventory.length)return!1;const a=this.inventory[t];let o={success:!1};try{o=this.normalizeEquipResult(s(n,a))}catch(i){console.warn("Failed to equip inventory item",{item:a,error:i}),o={success:!1}}if(!o.success)return!1;const[r]=this.inventory.splice(t,1);return this.persist(),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"item-equipped",item:r,unitId:n,from:"inventory",stashSize:this.stash.length,inventorySize:this.inventory.length,comparison:o.comparison}),!0}moveToInventory(t){if(t<0||t>=this.stash.length)return null;const[n]=this.stash.splice(t,1);return this.inventory.push(n),this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"item-moved",item:n,from:"stash",to:"inventory",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}moveToStash(t){if(this.stash.length>=this.maxStashSize||t<0||t>=this.inventory.length)return null;const[n]=this.inventory.splice(t,1);return this.stash.push(n),this.stash.length>this.maxStashSize&&this.stash.splice(0,this.stash.length-this.maxStashSize),this.persist(),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-moved",item:n,from:"inventory",to:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}discardFromInventory(t){if(t<0||t>=this.inventory.length)return null;const[n]=this.inventory.splice(t,1);return this.persist(),this.emit({type:"inventory-updated",inventory:this.getInventory()}),this.emit({type:"item-discarded",item:n,location:"inventory",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}unequipToStash(t,n,s){if(this.stash.length>=this.maxStashSize)return!1;let a=null;try{a=s(t,n)??null}catch(i){console.warn("Failed to unequip item",{unitId:t,slot:n,error:i}),a=null}if(!a)return!1;const o=Math.max(0,Math.round(this.now())),r=On(a,o);return this.stash.push(r),this.stash.length>this.maxStashSize&&this.stash.splice(0,this.stash.length-this.maxStashSize),this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-unequipped",item:r,unitId:t,slot:n,to:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),!0}discardFromStash(t){if(t<0||t>=this.stash.length)return null;const[n]=this.stash.splice(t,1);return this.persist(),this.emit({type:"stash-updated",stash:this.getStash()}),this.emit({type:"item-discarded",item:n,location:"stash",stashSize:this.stash.length,inventorySize:this.inventory.length}),n}}const Yu={stash:"Quartermaster Stash",inventory:"Ready Inventory"},Xu={stash:"Your stash is empty. Conquer enemy elites to gather new equipment.",inventory:"No gear staged. Move items into the ready inventory for quick equipping."},qu={mythic:6,legendary:5,epic:4,rare:3,uncommon:2,common:1},Ju=["health","attackDamage","attackRange","movementRange","defense","shield"],Zu={"birch-sap-satchel":["healing","support"],"steamed-bandages":["restoration","shielding"],"aurora-distillate":["damage","defense"],"stolen-sauna-tokens":["mobility"],"midnight-bloodwine":["healing","damage"],"sauna-incense":["range","focus"],"glacier-brand":["damage"],"emberglass-arrow":["damage","range"],"aurora-lattice":["damage","range"],"emberglass-shard":["damage","mobility"],"windstep-totem":["mobility","defense"],"searing-chant-censer":["damage","shielding"],"cracked-ice-amulet":["defense"],"myrsky-charm":["range","defense"],"frostwyrm-signet":["shielding"],"spirit-oak-charm":["healing","defense"]};function $e(e){return(e??"").trim().toLowerCase()}function Ds(e){const t=new Set;for(const n of e){const s=$e(n);s&&t.add(s)}return t}function Is(e,t){return{id:e.id,name:e.name,quantity:typeof t=="number"?t:e.quantity,rarity:e.rarity}}function Qn(e){return e?{id:e.id,name:e.name,quantity:e.quantity,rarity:e.rarity}:null}function bo(e){return Zu[e]??[]}function wo(e){const t=$e(e)||"common",n=t.charAt(0).toUpperCase()+t.slice(1);return{key:t,label:n,rank:qu[t]??0}}function Wu(e){const t=Mn(e.id);if(!t){const a=wo(e.rarity);return{slot:null,slotLabel:"Unassigned",rarity:a.key,rarityRank:a.rank,tags:bo(e.id),acquiredAt:e.acquiredAt}}const n=yn(t.slot),s=wo(e.rarity);return{slot:t.slot,slotLabel:n.label,rarity:s.key,rarityRank:s.rank,tags:bo(e.id),acquiredAt:e.acquiredAt}}function Vu(e,t,n,s,a){return{id:e.id,name:e.name,description:e.description,icon:e.icon,rarity:e.rarity,quantity:a,slot:t,maxStacks:n,modifiers:s??{}}}function vo(e,t){const n=e[t];return typeof n=="number"&&Number.isFinite(n)?Math.round(n):0}function _u(e,t){const n=Mn(e.item.id);if(!n)return{slot:null,canEquip:!1,reason:"unknown-item",equipped:null,projected:Is(e.item),stats:[]};const s=n.slot,a=yn(s),o=t.loadout.find(g=>g.slot===s)??null,r=Math.max(1,Math.round(e.item.quantity)),i=Math.max(1,Math.floor(n.maxStacks??a.maxStacks)),c=(o?.quantity??0)+r,l=c>i;if(o&&o.id!==e.item.id)return{slot:s,canEquip:!1,reason:"slot-occupied",equipped:Qn(o),projected:Is(e.item),stats:[]};if(l&&(!o||o.id!==e.item.id))return{slot:s,canEquip:!1,reason:"stack-limit",equipped:Qn(o),projected:Is(e.item,Math.min(i,c)),stats:[]};const d=Math.min(i,c),u=[];for(const g of t.loadout)g.slot!==s&&u.push({...g});const h=o&&o.id===e.item.id?{...o,quantity:d}:Vu(e.item,s,i,n.modifiers,d);u.push(h);const f=t.currentStats??Jn(t.baseStats,t.loadout),m=Jn(t.baseStats,u),p=Ju.map(g=>{const A=vo(f,g),M=vo(m,g);return{stat:g,current:A,projected:M,delta:M-A}});return{slot:s,canEquip:!0,equipped:Qn(o),projected:Qn(h),stats:p}}function So(e,t){return e.map((n,s)=>({item:n,index:s,location:t,metadata:Wu(n)}))}function $u(e,t){const n=new Map,s=new Map,a=new Map;for(const c of e){const{metadata:l}=c;if(l.slot){const f=l.slot,m=n.get(f);m?m.count+=1:n.set(f,{label:l.slotLabel,count:1})}const d=l.rarity,u=d.charAt(0).toUpperCase()+d.slice(1),h=s.get(d);h?h.count+=1:s.set(d,{label:u,count:1,rank:l.rarityRank});for(const f of l.tags){const m=$e(f);if(!m)continue;const p=f.split(/[-_]/g).map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" "),g=a.get(m);g?g.count+=1:a.set(m,{label:p,count:1})}}const o=Array.from(n.entries()).sort((c,l)=>{const d=Ht.indexOf(c[0]),u=Ht.indexOf(l[0]);return d-u}).map(([c,l])=>({id:c,label:l.label,count:l.count,active:t.slots.has($e(c))})),r=Array.from(s.entries()).sort((c,l)=>(l[1].rank??0)-(c[1].rank??0)).map(([c,l])=>({id:c,label:l.label,count:l.count,active:t.rarities.has($e(c))})),i=Array.from(a.entries()).sort((c,l)=>c[1].label.localeCompare(l[1].label)).map(([c,l])=>({id:c,label:l.label,count:l.count,active:t.tags.has($e(c))}));return{slots:o,rarities:r,tags:i}}function eh(e,t){if(t.slots.size>0){const n=e.metadata.slot?$e(e.metadata.slot):"";if(!n||!t.slots.has(n))return!1}return!(t.rarities.size>0&&!t.rarities.has(e.metadata.rarity)||t.tags.size>0&&!e.metadata.tags.map(a=>$e(a)).some(a=>t.tags.has(a)))}function th(e,t){return t?[e.item.name,e.item.description??"",e.metadata.tags.join(" ")].join(" ").toLowerCase().includes(t):!0}function nh(e,t){switch(t){case"oldest":e.sort((n,s)=>n.metadata.acquiredAt-s.metadata.acquiredAt);break;case"rarity":e.sort((n,s)=>s.metadata.rarityRank!==n.metadata.rarityRank?s.metadata.rarityRank-n.metadata.rarityRank:s.metadata.acquiredAt-n.metadata.acquiredAt);break;case"name":e.sort((n,s)=>n.item.name.localeCompare(s.item.name));break;case"newest":default:e.sort((n,s)=>s.metadata.acquiredAt-n.metadata.acquiredAt);break}}function Eo(e){const t={slots:Ds(e.filters.slots??new Set),rarities:Ds(e.filters.rarities??new Set),tags:Ds(e.filters.tags??new Set)},n=$e(e.search),s=Math.max(1,Math.floor(e.page||1)),a=Math.max(1,Math.floor(e.pageSize||24)),o=e.collection??"stash",r=So(e.stash,"stash"),i=So(e.inventory,"inventory"),c=[...r,...i],l=$u(c,t),d=o==="stash"?r:i,h=[...d.filter(v=>eh(v,t)&&th(v,n))];nh(h,e.sort??"newest");const f=Math.min(h.length,s*a),m=h.slice(0,f),p=h.length>f,g=e.comparisonContext??null,A=m.map(v=>({item:v.item,index:v.index,location:v.location,metadata:v.metadata,comparison:g?_u(v,g):null})),M=["stash","inventory"].map(v=>({id:v,label:Yu[v],count:v==="stash"?e.stash.length:e.inventory.length,active:v===o}));return{collection:o,collections:M,filters:l,items:A,total:d.length,filteredTotal:h.length,search:e.search,sort:e.sort??"newest",hasMore:p,emptyMessage:Xu[o]}}function sh(){return{slots:new Set,rarities:new Set,tags:new Set}}const ah="_panel_lf1io_1",oh="_header_lf1io_30",rh="_title_lf1io_40",ih="_meta_lf1io_47",ch="_close_lf1io_52",lh="_controls_lf1io_72",dh="_collections_lf1io_80",uh="_collectionButton_lf1io_88",hh="_searchRow_lf1io_117",fh="_search_lf1io_117",mh="_searchIcon_lf1io_149",gh="_sortSelect_lf1io_159",ph="_body_lf1io_169",Ah="_grid_lf1io_175",yh="_empty_lf1io_184",Mh="_footer_lf1io_195",bh="_loadMore_lf1io_200",ce={panel:ah,header:oh,title:rh,meta:ih,close:ch,controls:lh,collections:dh,collectionButton:uh,searchRow:hh,search:fh,searchIcon:mh,sortSelect:gh,body:ph,grid:Ah,empty:yh,footer:Mh,loadMore:bh},wh="_group_18afl_1",vh="_label_18afl_11",Sh="_row_18afl_19",Eh="_chip_18afl_25",Ch="_count_18afl_55",un={group:wh,label:vh,row:Sh,chip:Eh,count:Ch},xh="_card_1o0cv_1",Bh="_header_1o0cv_26",zh="_icon_1o0cv_32",Dh="_details_1o0cv_44",Ih="_titleRow_1o0cv_51",Nh="_title_1o0cv_51",Ph="_rarity_1o0cv_63",kh="_slot_1o0cv_70",Lh="_tags_1o0cv_75",Th="_tag_1o0cv_75",Rh="_compare_1o0cv_91",jh="_tooltip_1o0cv_113",Oh="_statList_1o0cv_144",Qh="_stat_1o0cv_144",Hh="_actions_1o0cv_169",Gh="_action_1o0cv_169",Uh="_primary_1o0cv_198",Fh="_danger_1o0cv_209",Kh="_badge_1o0cv_224",te={card:xh,header:Bh,icon:zh,details:Dh,titleRow:Ih,title:Nh,rarity:Ph,slot:kh,tags:Lh,tag:Th,compare:Rh,tooltip:jh,statList:Oh,stat:Qh,actions:Hh,action:Gh,primary:Uh,danger:Fh,badge:Kh},Yh={health:"HP",attackDamage:"ATK",attackRange:"Range",movementRange:"Move",defense:"Defense",shield:"Shield"},Co={"slot-occupied":"Slot occupied. Unequip the current item first.","stack-limit":"Stack limit reached for this item.","unknown-item":"This item cannot be equipped yet."},Yn=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Xh(e,t){if(t.item.icon){const s=document.createElement("img");s.src=t.item.icon,s.alt="",s.loading="lazy",s.decoding="async",s.width=48,s.height=48,e.appendChild(s);return}const n=document.createElement("span");n.textContent=t.item.name.trim()[0]?.toUpperCase()??"?",e.appendChild(n)}function Ur(e){if(!(!e||e.canEquip))return e.reason&&Co[e.reason]?Co[e.reason]:"Unable to equip this item right now."}function qh(e,t){const n=document.createElement("div");n.className=te.tooltip;const s=document.createElement("h4");if(t.projected?s.textContent=t.canEquip?"Projected stats":"Current loadout":s.textContent="Stats",n.appendChild(s),!t.canEquip){const o=Ur(t);if(o){const r=document.createElement("p");r.textContent=o,r.style.margin="0 0 0.5rem",r.style.fontSize="0.78rem",n.appendChild(r)}}const a=document.createElement("ul");a.className=te.statList;for(const o of e){const r=document.createElement("li");r.className=te.stat,o.delta>0?r.dataset.delta="positive":o.delta<0&&(r.dataset.delta="negative");const i=document.createElement("span");i.textContent=Yh[o.stat]??o.stat;const c=document.createElement("span"),l=Yn.format(o.current),d=Yn.format(o.projected),u=o.delta,h=u===0?"0":`${u>0?"+":""}${Yn.format(Math.abs(u))}`;c.textContent=`${l}  ${d} (${h})`,r.append(i,c),a.appendChild(r)}return n.appendChild(a),n}function Jh(e){const t=e.comparison;if(!t)return null;const n=document.createElement("div"),s=document.createElement("button");s.type="button",s.className=te.compare,s.textContent=t.canEquip?"Compare stats":"View details";const a=`${e.item.id}-compare-${e.location}-${e.index}`;s.setAttribute("aria-controls",a),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-describedby",a),s.addEventListener("focus",()=>{s.setAttribute("aria-expanded","true")}),s.addEventListener("blur",()=>{s.setAttribute("aria-expanded","false")}),n.appendChild(s);const o=qh(t.stats,t);return o.id=a,n.appendChild(o),n}function Zh(e,t){if(t&&!t.canEquip){e.disabled=!0;const n=Ur(t);n&&(e.title=n)}}function Wh(e){return e.map(t=>{const n=t.trim();return n&&n.split(/[-_\s]/g).map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")})}function Vh(e,t,n){const s=document.createElement("div");s.className=te.actions;const a=document.createElement("button");a.type="button",a.className=`${te.action} ${te.primary}`,a.textContent="Equip",Zh(a,t.comparison),a.addEventListener("click",()=>{n.onEquip?.()}),s.appendChild(a);const o=document.createElement("button");o.type="button",o.className=te.action,o.textContent=t.location==="stash"?"Send to inventory":"Return to stash",o.addEventListener("click",()=>{n.onTransfer?.()}),s.appendChild(o);const r=document.createElement("button");r.type="button",r.className=`${te.action} ${te.danger}`,r.textContent="Trash";let i=null;const c=()=>{i!==null&&(window.clearTimeout(i),i=null),r.dataset.confirm="false",r.textContent="Trash"};r.addEventListener("click",()=>{if(i!==null){c(),n.onTrash?.();return}r.dataset.confirm="true",r.textContent="Confirm trash",i=window.setTimeout(()=>{c()},2600)}),s.appendChild(r),e.appendChild(s)}function _h(e,t){const n=document.createElement("li");n.className=te.card,n.dataset.location=e.location,n.setAttribute("role","listitem");const s=document.createElement("div");s.className=te.header;const a=document.createElement("div");a.className=te.icon,Xh(a,e),s.appendChild(a);const o=document.createElement("div");o.className=te.details;const r=document.createElement("div");r.className=te.titleRow;const i=document.createElement("h4");i.className=te.title,i.textContent=e.item.name,r.appendChild(i);const c=document.createElement("span");c.className=te.rarity,c.textContent=e.metadata.rarity.toUpperCase(),r.appendChild(c),o.appendChild(r);const l=document.createElement("span");if(l.className=te.slot,l.textContent=e.metadata.slot?e.metadata.slotLabel:"No slot",o.appendChild(l),e.metadata.tags.length>0){const u=document.createElement("div");u.className=te.tags;for(const h of Wh(e.metadata.tags)){const f=document.createElement("span");f.className=te.tag,f.textContent=h,u.appendChild(f)}o.appendChild(u)}const d=Jh(e);if(d&&o.appendChild(d),s.appendChild(o),n.appendChild(s),e.item.quantity>1){const u=document.createElement("span");u.className=te.badge,u.textContent=`${Yn.format(e.item.quantity)}`,n.appendChild(u)}return Vh(n,e,t),n}const $h={newest:"Newest",oldest:"Oldest",rarity:"Rarity",name:"Name A-Z"};function Ns(e){const t=document.createElement("div");t.className=un.row;const n=document.createElement("div");n.className=un.label,n.textContent=e;const s=document.createElement("div");return s.className=un.group,t.append(n,s),{row:t,group:s}}function ef(e){const t=document.createElement("section");t.className=ce.panel,t.tabIndex=-1,t.dataset.open="false",t.setAttribute("aria-label","Quartermaster stash");const n=document.createElement("header");n.className=ce.header;const s=document.createElement("div"),a=document.createElement("h2");a.className=ce.title,a.textContent="Quartermaster Stash",s.appendChild(a);const o=document.createElement("div");o.className=ce.meta,o.textContent="Loading",s.appendChild(o);const r=document.createElement("button");r.type="button",r.className=ce.close,r.textContent="Close",r.addEventListener("click",()=>e.onClose?.()),n.append(s,r),t.appendChild(n);const i=document.createElement("div");i.className=ce.controls;const c=document.createElement("div");c.className=ce.collections;const l={stash:document.createElement("button"),inventory:document.createElement("button")};l.stash.type="button",l.stash.className=ce.collectionButton,l.stash.textContent="Stash",l.stash.addEventListener("click",()=>e.onCollectionChange?.("stash")),l.inventory.type="button",l.inventory.className=ce.collectionButton,l.inventory.textContent="Ready",l.inventory.addEventListener("click",()=>e.onCollectionChange?.("inventory")),c.append(l.stash,l.inventory),i.appendChild(c);const d=document.createElement("div");d.className=ce.searchRow;const u=document.createElement("div");u.className=ce.search;const h=document.createElement("input");h.type="search",h.placeholder="Search stash",h.addEventListener("input",()=>e.onSearchChange?.(h.value));const f=document.createElement("span");f.className=ce.searchIcon,f.textContent="",u.append(f,h),d.appendChild(u);const m=document.createElement("select");m.className=ce.sortSelect,["newest","oldest","rarity","name"].forEach(w=>{const z=document.createElement("option");z.value=w,z.textContent=$h[w],m.appendChild(z)}),m.addEventListener("change",()=>e.onSortChange?.(m.value)),d.appendChild(m),i.appendChild(d);const p=document.createElement("div"),g={slots:Ns("Slots"),rarities:Ns("Rarity"),tags:Ns("Tags")};p.append(g.slots.row,g.rarities.row,g.tags.row),i.appendChild(p),t.appendChild(i);const A=document.createElement("div");A.className=ce.body;const M=document.createElement("ul");M.className=ce.grid;const v=document.createElement("div");v.className=ce.empty,v.textContent="No items match the current filters.",v.hidden=!0,A.append(M,v),t.appendChild(A);const P=document.createElement("div");P.className=ce.footer;const b=document.createElement("button");b.type="button",b.className=ce.loadMore,b.textContent="Show more",b.addEventListener("click",()=>e.onLoadMore?.()),P.appendChild(b),t.appendChild(P);function N(w,z,y){w.group.innerHTML="",w.row.hidden=y.length===0;for(const k of y){const L=document.createElement("button");if(L.type="button",L.className=un.chip,L.dataset.active=k.active?"true":"false",L.textContent=k.label,k.count>0){const R=document.createElement("span");R.className=un.count,R.textContent=String(k.count),L.appendChild(R)}L.addEventListener("click",()=>e.onFilterToggle?.(z,k.id)),w.group.appendChild(L)}}function C(w){M.replaceChildren();const z=document.createDocumentFragment();for(const y of w.items){const k={onEquip:()=>e.onItemEquip?.(y),onTransfer:()=>e.onItemTransfer?.(y),onTrash:()=>e.onItemTrash?.(y)};z.appendChild(_h(y,k))}M.appendChild(z),v.hidden=w.filteredTotal!==0,v.hidden||(v.textContent=w.emptyMessage)}return{element:t,render(w){o.textContent=w.total===0?"No items yet":`${w.filteredTotal} of ${w.total} item${w.total===1?"":"s"}`;for(const[z,y]of Object.entries(l))y.dataset.active=z===w.collection?"true":"false";h.value!==w.search&&(h.value=w.search),m.value!==w.sort&&(m.value=w.sort),N(g.slots,"slots",w.filters.slots),N(g.rarities,"rarities",w.filters.rarities),N(g.tags,"tags",w.filters.tags),C(w),b.hidden=!w.hasMore},setOpen(w){t.dataset.open=w?"true":"false"},focus(){t.focus({preventScroll:!0})},destroy(){t.remove()}}}const Ps=24,tf=4500,nf=400,sf={health:"HP",attackDamage:"ATK",attackRange:"RNG",movementRange:"MOV",defense:"DEF",shield:"Shield"};function af(e){const t=e.querySelector(".loot-toast-stack");if(t)return t;const n=document.createElement("div");return n.classList.add("loot-toast-stack"),n.setAttribute("aria-live","polite"),n.setAttribute("role","status"),e.appendChild(n),n}function ze(e,t,n){const s=document.createElement("div");s.classList.add("loot-toast"),s.dataset.variant=n,s.textContent=t,e.appendChild(s);const a=window.setTimeout(()=>{s.classList.add("loot-toast--exit"),window.setTimeout(()=>s.remove(),nf)},tf);s.addEventListener("click",()=>{window.clearTimeout(a),s.remove()})}function of(e,t){e.has(t)?e.delete(t):e.add(t)}function rf(e){const t=e.comparison?.deltas??[];return t.length===0?null:t.map(s=>{const a=sf[s.stat]??s.stat;return`${s.delta>0?"+":""}${s.delta} ${a}`}).join(", ")}function ks(e){switch(e){case"inventory":return"ready inventory";case"stash":return"stash";case"equipped":default:return"loadout"}}function cf(){const e=document.createElement("button");e.type="button",e.classList.add("inventory-badge"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls","inventory-stash-panel"),e.setAttribute("aria-label","Open quartermaster stash");const t=document.createElement("span");t.classList.add("inventory-badge__icon"),t.setAttribute("aria-hidden","true"),e.appendChild(t);const n=document.createElement("span");n.classList.add("inventory-badge__text"),n.textContent="Stash",e.appendChild(n);const s=document.createElement("span");return s.classList.add("inventory-badge__count"),s.textContent="0",s.setAttribute("aria-hidden","true"),e.appendChild(s),{button:e,count:s}}function lf(e,t={}){const n=document.getElementById("ui-overlay");if(!n)return{destroy:()=>{}};const{actions:s}=ms(n),a=af(n);n.querySelectorAll(".inventory-badge").forEach(y=>y.remove());const{button:o,count:r}=cf();o.dataset.autoequip=e.isAutoEquipEnabled()?"on":"off",s.appendChild(o),n.querySelector("#inventory-stash-panel")?.remove();const c=ef({onClose:()=>p(!1),onCollectionChange:y=>{d!==y&&(d=y,m=1,A())},onFilterToggle:(y,k)=>{const L=u[y];of(L,k),m=1,A()},onSearchChange:y=>{h=y,m=1,A()},onSortChange:y=>{f=y,m=1,A()},onLoadMore:()=>{m+=1,A()},onItemEquip:y=>{v(y)},onItemTransfer:y=>{P(y)},onItemTrash:y=>{b(y)}});c.element.id="inventory-stash-panel",n.appendChild(c.element);let l=!1,d="stash";const u=sh();let h="",f="newest",m=1;function p(y){l!==y&&(l=y,c.setOpen(l),o.setAttribute("aria-expanded",l?"true":"false"),o.setAttribute("aria-label",l?"Close quartermaster stash":"Open quartermaster stash"),l?(c.focus(),n.classList.add("inventory-panel-open")):n.classList.remove("inventory-panel-open"))}function g(){const y=t.getComparisonContext?.()??null;let k=Eo({stash:e.getStash(),inventory:e.getInventory(),filters:u,search:h,sort:f,page:m,pageSize:Ps,collection:d,comparisonContext:y});if(k.filteredTotal>0){const L=Math.max(1,Math.ceil(k.filteredTotal/Ps));m>L&&(m=L,k=Eo({stash:e.getStash(),inventory:e.getInventory(),filters:u,search:h,sort:f,page:m,pageSize:Ps,collection:d,comparisonContext:y}))}return k}function A(){const y=g(),L=y.collections.find(R=>R.id==="stash")?.count??0;r.textContent=String(L),o.dataset.count=String(L),c.render(y)}function M(){const y=t.getSelectedUnitId?.()??null;return y||(ze(a,"Select an attendant before equipping an item.","warn"),null)}function v(y){const k=M();if(!k)return;const L=t.onEquip??(()=>({success:!1}));(y.location==="stash"?e.equipFromStash(y.index,k,(Q,G)=>L(Q,G,"stash")):e.equipFromInventory(y.index,k,(Q,G)=>L(Q,G,"inventory")))||ze(a,"Unable to equip that item right now.","warn")}function P(y){const k=y.location==="stash"?e.moveToInventory(y.index):e.moveToStash(y.index);if(!k){ze(a,"Unable to move that item right now.","warn");return}const L=y.location==="stash"?"ready inventory":"stash";ze(a,`Moved ${k.name} to the ${L}.`,"info"),m=1,A()}function b(y){const k=y.location==="stash"?e.discardFromStash(y.index):e.discardFromInventory(y.index);if(!k){ze(a,"That item was already removed.","warn");return}const L=y.location==="stash"?"stash":"ready inventory";ze(a,`${k.name} discarded from the ${L}.`,"warn"),A()}function N(y){switch(y.type){case"stash-updated":case"inventory-updated":A();break;case"item-acquired":if(y.equipped)ze(a,`${y.item.name} auto-equipped successfully.`,"info");else{const k=ks(y.location);ze(a,`New item secured: ${y.item.name} (${k}).`,"loot")}break;case"item-equipped":{const k=rf(y),L=k?` (${k})`:"";ze(a,`Equipped ${y.item.name}${L}.`,"info");break}case"item-unequipped":ze(a,`${y.item.name} returned to the stash from slot ${y.slot}.`,"info");break;case"item-moved":{const k=ks(y.to);ze(a,`Moved ${y.item.name} to the ${k}.`,"info");break}case"item-discarded":{const k=ks(y.location);ze(a,`${y.item.name} discarded from the ${k}.`,"warn");break}case"settings-updated":o.dataset.autoequip=y.autoEquip?"on":"off";break}}const C=e.on(y=>N(y)),I=()=>{p(!l)};o.addEventListener("click",I);const w=y=>{y.defaultPrevented||y.code==="KeyI"&&!y.metaKey&&!y.ctrlKey&&!y.altKey&&(y.preventDefault(),p(!l))};return window.addEventListener("keydown",w),A(),{destroy:()=>{C(),o.removeEventListener("click",I),window.removeEventListener("keydown",w),o.remove(),c.destroy(),n.classList.remove("inventory-panel-open"),a.hasChildNodes()||a.remove()}}}const df=Object.freeze({common:1,uncommon:.6,rare:.35,epic:.18,legendary:.08,mythic:.03}),uf=Object.freeze({id:"general-salvage",label:"General Salvage",entries:Object.freeze([{id:"birch-sap-satchel",name:"Birch Sap Satchel",description:"Soothing birch sap that doubles as a brisk field tonic.",rarity:"common",quantity:{min:1,max:3},weight:6},{id:"steamed-bandages",name:"Steamed Linen Bandages",description:"Freshly steamed bandages infused with pine oils.",rarity:"common",quantity:1,weight:5},{id:"emberglass-shard",name:"Emberglass Shard",description:"A radiant shard used to kindle sauna braziers.",rarity:"uncommon",quantity:1,weight:3},{id:"aurora-distillate",name:"Aurora Distillate",description:"Vials of shimmering condensation that empower sauna rituals.",rarity:"rare",quantity:1,weight:1.5},{id:"myrsky-charm",name:"Myrsky Charm",description:"Storm-forged charm rumored to call down aurora flares.",rarity:"epic",quantity:1,weight:.7}])}),hf=Object.freeze({base:Object.freeze({id:"enemy-raiders",label:"Avanto Marauder Spoils",entries:Object.freeze([{id:"cracked-ice-amulet",name:"Cracked Ice Amulet",description:"Necklace of frostbitten charms that hum when danger nears.",rarity:"common",quantity:1,weight:5},{id:"stolen-sauna-tokens",name:"Stolen Sauna Tokens",description:"Pilfered entrance tokens, gladly accepted back at any sauna hall.",rarity:"uncommon",quantity:{min:2,max:5},weight:3},{id:"glacier-brand",name:"Glacier Brand",description:"A cleaver chilled in glacial meltwater that never dulls.",rarity:"rare",quantity:1,weight:1.25}])}),elite:Object.freeze({id:"enemy-champions",label:"Avanto Champion Cache",entries:Object.freeze([{id:"frostwyrm-signet",name:"Frostwyrm Signet",description:"An icy signet ring that wreathes its bearer in frozen vapour.",rarity:"epic",quantity:1,weight:1.1},{id:"aurora-lattice",name:"Aurora Lattice",description:"Filigree latticework that channels auroral light into focused beams.",rarity:"legendary",quantity:1,weight:.4},{id:"midnight-bloodwine",name:"Midnight Bloodwine",description:"A mythical draught said to rekindle a warrior's lost resolve.",rarity:"mythic",quantity:1,weight:.12}])})}),ff=Object.freeze({base:Object.freeze({id:"deepwood-offerings",label:"Deepwood Offerings",entries:Object.freeze([{id:"spirit-oak-charm",name:"Spirit Oak Charm",description:"Carved from living oak, it whispers guidance between sauna rounds.",rarity:"uncommon",quantity:1,weight:4},{id:"sauna-incense",name:"Sauna Incense Pouches",description:"Fragrant blends that steady breathing before the next engagement.",rarity:"common",quantity:{min:1,max:4},weight:5},{id:"emberglass-arrow",name:"Emberglass Arrow Bundle",description:"Arrowheads that glow amber when a perfect shot reveals itself.",rarity:"rare",quantity:{min:1,max:2},weight:1.75}])}),elite:Object.freeze({id:"deepwood-ritual-cache",label:"Deepwood Ritual Cache",entries:Object.freeze([{id:"windstep-totem",name:"Windstep Totem",description:"Totem etched with gale sigils that lighten every cautious stride.",rarity:"epic",quantity:1,weight:.9},{id:"searing-chant-censer",name:"Searing Chant Censer",description:"An ornate censer that empowers allies with smouldering hymns.",rarity:"legendary",quantity:1,weight:.35}])})}),mf=Object.freeze({enemy:hf,deepwood:ff});function gf(e){return mf[e]??{base:uf}}function pf(e,t=!1){const n=gf(e);return t&&n.elite?n.elite:n.base}function Af(e){if(!Number.isFinite(e))return 1;const t=Math.floor(e);return t<=0?0:Math.min(10,t)}function yf(e,t){if(typeof e=="number"&&Number.isFinite(e))return Math.max(1,Math.round(e));if(!e)return 1;const n=e,s=Math.max(1,Math.round(n.min)),o=Math.max(s,Math.round(n.max))-s+1,r=Math.floor(Math.max(0,Math.min(.999999,t()))*o);return s+r}function Mf(e){const t=df[e.rarity]??1,n=typeof e.weight=="number"?e.weight:1;return Math.max(0,n)*Math.max(0,t)}function bf(e,t){const n=e.map(r=>({entry:r,weight:Mf(r)})).filter(r=>r.weight>0);if(n.length===0)return null;const s=n.reduce((r,i)=>r+i.weight,0),a=Math.max(0,Math.min(.999999,t()))*s;let o=0;for(const r of n)if(o+=r.weight,a<o)return r.entry;return n[n.length-1]?.entry??null}function wf(e,t){return{id:e.id,name:e.name,description:e.description,icon:e.icon,rarity:e.rarity,quantity:t}}function vf(e){const t=typeof e.random=="function"?e.random:Math.random,n=!!e.elite,s=e.table??pf(e.factionId,n),a=Af(e.rolls),o=[];if(a<=0||s.entries.length===0)return{factionId:e.factionId,elite:n,tableId:s.id,tableLabel:s.label,rolls:o};for(let r=0;r<a;r+=1){const i=bf(s.entries,t);if(!i)break;const c=yf(i.quantity,t);o.push({entryId:i.id,rarity:i.rarity,quantity:c,item:wf(i,c)})}return{factionId:e.factionId,elite:n,tableId:s.id,tableLabel:s.label,rolls:o}}const Sf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23a4d67a'%20/%3e%3cpolygon%20points='16,48%2032,16%2048,48'%20fill='%23d2691e'%20/%3e%3crect%20x='24'%20y='32'%20width='16'%20height='16'%20fill='%23f4a460'%20/%3e%3c/svg%3e",Ef="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23c0c0c0'%20/%3e%3crect%20x='8'%20y='24'%20width='48'%20height='24'%20fill='%23808080'%20/%3e%3crect%20x='24'%20y='16'%20width='16'%20height='8'%20fill='%23606060'%20/%3e%3c/svg%3e",Cf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%23e0e0e0'%20/%3e%3crect%20x='10'%20y='22'%20width='12'%20height='30'%20fill='%23a9a9a9'%20/%3e%3crect%20x='26'%20y='14'%20width='12'%20height='38'%20fill='%23808080'%20/%3e%3crect%20x='42'%20y='26'%20width='12'%20height='26'%20fill='%23a9a9a9'%20/%3e%3c/svg%3e",xf="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2064%2064'%3e%3crect%20width='64'%20height='64'%20fill='%238b4513'%20/%3e%3cpolygon%20points='32,10%2042,22%2022,22'%20fill='%23555'%20/%3e%3crect%20x='30'%20y='22'%20width='4'%20height='32'%20fill='%23ccc'%20/%3e%3c/svg%3e",Bf="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eFrostguard%20Soldier%3c/title%3e%3cdesc%20id='desc'%3eArmored%20nordic%20soldier%20with%20glacial%20blade,%20frosted%20shield,%20and%20aurora%20glow.%3c/desc%3e%3cdefs%3e%3clinearGradient%20id='soldier-bg'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%230b2a44'%20/%3e%3cstop%20offset='100%25'%20stop-color='%2310243b'%20/%3e%3c/linearGradient%3e%3cradialGradient%20id='soldier-glow'%20cx='50%25'%20cy='28%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20stop-color='rgba(191,%20219,%20254,%200.85)'%20/%3e%3cstop%20offset='100%25'%20stop-color='rgba(14,%20116,%20144,%200)'%20/%3e%3c/radialGradient%3e%3clinearGradient%20id='soldier-armor'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23e2e8f0'%20/%3e%3cstop%20offset='50%25'%20stop-color='%23cbd5f5'%20/%3e%3cstop%20offset='100%25'%20stop-color='%234b5563'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='soldier-trim'%20x1='0'%20y1='0'%20x2='1'%20y2='0'%3e%3cstop%20offset='0%25'%20stop-color='%23fcd34d'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23f97316'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='soldier-cloak'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%231e3a8a'%20/%3e%3cstop%20offset='100%25'%20stop-color='%231d4ed8'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='soldier-steel'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%2394a3b8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%231f2937'%20/%3e%3c/linearGradient%3e%3cradialGradient%20id='soldier-shield'%20cx='38%25'%20cy='38%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20stop-color='%23e0f2fe'%20/%3e%3cstop%20offset='70%25'%20stop-color='%2360a5fa'%20/%3e%3cstop%20offset='100%25'%20stop-color='%231d4ed8'%20/%3e%3c/radialGradient%3e%3c/defs%3e%3crect%20width='128'%20height='128'%20rx='18'%20fill='url(%23soldier-bg)'%20/%3e%3ccircle%20cx='64'%20cy='40'%20r='44'%20fill='url(%23soldier-glow)'%20opacity='0.9'%20/%3e%3cellipse%20cx='64'%20cy='108'%20rx='36'%20ry='10'%20fill='%230f172a'%20opacity='0.4'%20/%3e%3cpath%20d='M38%2038c-10%2014-14%2032-10%2052l14%208c0-18%208-34%2022-42-8-6-18-12-26-18z'%20fill='url(%23soldier-cloak)'%20opacity='0.85'%20/%3e%3cpath%20d='M90%2038c10%2014%2014%2032%2010%2052l-14%208c0-18-8-34-22-42%208-6%2018-12%2026-18z'%20fill='url(%23soldier-cloak)'%20opacity='0.65'%20/%3e%3cpath%20d='M58%2022l-8%2010c-4%206-6%2014-6%2022v20l12%2038h16l12-38V54c0-8-2-16-6-22l-8-10h-12z'%20fill='url(%23soldier-armor)'%20stroke='%231f2937'%20stroke-width='2'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M50%2054h28l4%2012c-8%208-16%2012-18%2012s-10-4-18-12l4-12z'%20fill='%23e0f2fe'%20opacity='0.85'%20/%3e%3cpath%20d='M64%2022c-6%200-12%204-16%2010l6%208c6-6%2020-6%2026%200l6-8c-4-6-10-10-16-10z'%20fill='%23f8fafc'%20stroke='%23cbd5f5'%20stroke-width='1.5'%20/%3e%3cpath%20d='M58%2018h12l4%206-10%206-10-6%204-6z'%20fill='%23e0f2fe'%20stroke='%2394a3b8'%20stroke-width='1.5'%20/%3e%3crect%20x='46'%20y='68'%20width='12'%20height='26'%20rx='5'%20fill='%230ea5e9'%20opacity='0.8'%20/%3e%3crect%20x='70'%20y='68'%20width='12'%20height='26'%20rx='5'%20fill='%2338bdf8'%20opacity='0.8'%20/%3e%3cpath%20d='M34%2066l-10%206%2012%2028%2012-6-14-28z'%20fill='url(%23soldier-shield)'%20stroke='%231e3a8a'%20stroke-width='2'%20/%3e%3ccircle%20cx='36'%20cy='78'%20r='6'%20fill='rgba(226,%20232,%20240,%200.95)'%20/%3e%3cpath%20d='M94%2064l-4-4-18%2036%206%206%2016-38z'%20fill='url(%23soldier-steel)'%20stroke='%230f172a'%20stroke-width='2'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M86%2054l-16%2034%2010%204%2014-32-8-6z'%20fill='%23f8fafc'%20opacity='0.75'%20/%3e%3cpath%20d='M64%2090c-8%200-14%206-18%2014%208%204%2012%206%2018%206s10-2%2018-6c-4-8-10-14-18-14z'%20fill='%23dbeafe'%20stroke='%2393c5fd'%20stroke-width='1.5'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M54%2058l-6%2012c8%2010%2016%2014%2016%2014s8-4%2016-14l-6-12H54z'%20fill='url(%23soldier-trim)'%20opacity='0.85'%20/%3e%3cpath%20d='M60%2048h8l2%208-6%204-6-4%202-8z'%20fill='%23334155'%20/%3e%3ccircle%20cx='64'%20cy='52'%20r='6'%20fill='%23f1f5f9'%20stroke='%23cbd5f5'%20stroke-width='1'%20/%3e%3cpath%20d='M58%2038c-4%200-6%204-6%2010%204-2%208-4%2012-4s8%202%2012%204c0-6-2-10-6-10H58z'%20fill='%231f2937'%20opacity='0.85'%20/%3e%3c/svg%3e",zf="/assets/archer-DKJNMRtW.svg",Df="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20128%20128'%20role='img'%20aria-labelledby='title%20desc'%3e%3ctitle%20id='title'%3eAvanto%20Marauder%3c/title%3e%3cdesc%20id='desc'%3eFrost-clad%20marauder%20icon%20with%20jagged%20pauldrons,%20icy%20beard,%20and%20polar%20glow.%3c/desc%3e%3cdefs%3e%3clinearGradient%20id='bg'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23082f49'%20/%3e%3cstop%20offset='100%25'%20stop-color='%230f172a'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='armor'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23e2e8f0'%20/%3e%3cstop%20offset='60%25'%20stop-color='%2394a3b8'%20/%3e%3cstop%20offset='100%25'%20stop-color='%231f2937'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='beard'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23e0f2fe'%20/%3e%3cstop%20offset='100%25'%20stop-color='%23bae6fd'%20/%3e%3c/linearGradient%3e%3cradialGradient%20id='glow'%20cx='50%25'%20cy='20%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20stop-color='rgba(191,%20219,%20254,%200.85)'%20/%3e%3cstop%20offset='100%25'%20stop-color='rgba(14,%20116,%20144,%200)'%20/%3e%3c/radialGradient%3e%3c/defs%3e%3crect%20width='128'%20height='128'%20rx='20'%20fill='url(%23bg)'%20/%3e%3ccircle%20cx='64'%20cy='46'%20r='38'%20fill='url(%23glow)'%20opacity='0.85'%20/%3e%3cpath%20d='M64%2018c-14%200-26%208-32%2020l10%204c6-8%2014-12%2022-12s16%204%2022%2012l10-4C90%2026%2078%2018%2064%2018z'%20fill='%23cffafe'%20opacity='0.4'%20/%3e%3cpath%20d='M64%2036c-14%200-28%2010-28%2028v10l-12%2016%2018%2010%2022-10%2022%2010%2018-10-12-16V64c0-18-14-28-28-28z'%20fill='url(%23armor)'%20stroke='%230f172a'%20stroke-width='2'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M48%2090l-12%206-10%2020%2020-8%2018%208%2018-8%2020%208-10-20-12-6'%20fill='%230f172a'%20opacity='0.85'%20/%3e%3cpath%20d='M64%2046c-10%200-18%208-18%2018v10c12-8%2024-8%2036%200V64c0-10-8-18-18-18z'%20fill='%230f172a'%20/%3e%3cpath%20d='M64%2050c-8%200-14%206-14%2014%206-4%2012-6%2014-6s8%202%2014%206c0-8-6-14-14-14z'%20fill='%23bae6fd'%20opacity='0.85'%20/%3e%3cpath%20d='M58%2084c-4%200-8%202-10%206%204%200%208%200%2010-2s4-2%206-2%204%200%206%202%206%202%2010%202c-2-4-6-6-10-6h-12z'%20fill='%23f8fafc'%20opacity='0.75'%20/%3e%3cpath%20d='M64%2086c-6%200-12%204-14%2010%204%202%2010%204%2014%204s10-2%2014-4c-2-6-8-10-14-10z'%20fill='url(%23beard)'%20stroke='%23bae6fd'%20stroke-width='1.4'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M42%2064c-4-8-6-18-6-28-6%208-10%2018-10%2030%204-2%2010-2%2016-2z'%20fill='%230ea5e9'%20opacity='0.5'%20/%3e%3cpath%20d='M86%2064c4-8%206-18%206-28%206%208%2010%2018%2010%2030-4-2-10-2-16-2z'%20fill='%230ea5e9'%20opacity='0.5'%20/%3e%3cpath%20d='M34%2098c-6%202-12%206-14%2012%206%200%2012-2%2018-4'%20stroke='%23bae6fd'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cpath%20d='M94%20106c6%202%2012%204%2018%204-2-6-8-10-14-12'%20stroke='%23bae6fd'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3c/svg%3e",en="/",We={saunaBeer:`${en}assets/ui/sauna-beer.svg`,saunojaRoster:`${en}assets/ui/saunoja-roster.svg`,resource:`${en}assets/ui/resource.svg`,sisu:`${en}assets/ui/resource.svg`,sound:`${en}assets/ui/sound.svg`},If={images:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=","building-farm":Sf,"building-barracks":Ef,"building-city":Cf,"building-mine":xf,"unit-soldier":Bf,"unit-archer":zf,"unit-avanto-marauder":Df,"icon-sauna-beer":We.saunaBeer,"icon-saunoja-roster":We.saunojaRoster,"icon-resource":We.resource,"icon-sound":We.sound}};let Fr=null;function Nf(e){Fr=e}function Kr(){return Fr}const Pf=["city"],kf=1e4,Lf=12e3;function Tf(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function xo(e){return Object.freeze({strongholds:{...e.strongholds},roster:{...e.roster},economy:{...e.economy},sauna:{...e.sauna},startedAt:e.startedAt})}function Bo(e){const t={[D.SAUNA_BEER]:0,[D.SAUNAKUNNIA]:0,[D.SISU]:0};return Object.values(D).forEach(n=>{t[n]=e.getResource(n)}),t}class Rf{timeSource;state;map;getRosterCount;sauna;strongholdTypes;rosterGraceMs;bankruptcyGraceMs;progress;startResources;strongholds=new Map;progressListeners=new Set;resolutionListeners=new Set;mapDisposer=null;rosterTimeout=null;bankruptcyTimeout=null;bankruptSince=null;wipeSince=null;saunaDestroyedAt=null;resolution=null;disposed=!1;constructor(t){this.timeSource=typeof t.timeSource=="function"?t.timeSource:Tf,this.state=t.state,this.map=t.map,this.getRosterCount=t.getRosterCount,this.sauna=t.sauna??null;const n=t.strongholdTypes?.length?t.strongholdTypes:Pf;this.strongholdTypes=new Set(n),this.rosterGraceMs=Math.max(0,t.rosterWipeGraceMs??kf),this.bankruptcyGraceMs=Math.max(0,t.bankruptcyGraceMs??Lf),this.startResources=Bo(this.state);const s=this.state.getResource(D.SAUNA_BEER),a=Math.max(0,Math.round(this.getRosterCount()))||0;this.progress={strongholds:{total:0,destroyed:0,remaining:0},roster:{active:a,totalDeaths:0,wipeSince:null,wipeDurationMs:0},economy:{beer:s,worstBeer:s,bankruptSince:null,bankruptDurationMs:0},sauna:this.createSaunaProgress(),startedAt:this.timeSource()},this.bootstrapStrongholds(),this.attachMapListener(),this.attachEventListeners(),this.emitProgress(),this.evaluateResolution()}onProgress(t){this.progressListeners.add(t)}offProgress(t){this.progressListeners.delete(t)}onResolution(t){if(this.resolution){t(this.resolution);return}this.resolutionListeners.add(t)}offResolution(t){this.resolutionListeners.delete(t)}getProgress(){return xo(this.progress)}dispose(){if(!this.disposed){if(this.disposed=!0,this.clearRosterTimer(),this.clearBankruptcyTimer(),this.mapDisposer){try{this.mapDisposer()}catch(t){console.warn("Failed to detach map listener",t)}this.mapDisposer=null}E.off("unitDied",this.handleUnitDied),E.off("unitSpawned",this.handleUnitSpawned),E.off("resourceChanged",this.handleResourceChanged),E.off("saunaDamaged",this.handleSaunaDamaged),E.off("saunaDestroyed",this.handleSaunaDestroyed)}}bootstrapStrongholds(){this.map.forEachTile((t,n)=>{if(this.isStronghold(t.building)){const s=this.coordKey(n);this.strongholds.set(s,{alive:!0})}}),this.updateStrongholdTotals()}attachMapListener(){this.mapDisposer=this.map.addTileChangeListener((t,n,s)=>{if(s!=="building"&&s!=="created")return;const a=this.coordKey(t),o=this.strongholds.get(a);this.isStronghold(n.building)?o?o.alive||(o.alive=!0):this.strongholds.set(a,{alive:!0}):o?.alive&&(o.alive=!1),this.updateStrongholdTotals(),this.emitProgress(),this.evaluateResolution()})}attachEventListeners(){E.on("unitDied",this.handleUnitDied),E.on("unitSpawned",this.handleUnitSpawned),E.on("resourceChanged",this.handleResourceChanged),E.on("saunaDamaged",this.handleSaunaDamaged),E.on("saunaDestroyed",this.handleSaunaDestroyed)}handleUnitDied=({unitFaction:t})=>{t==="player"&&(this.progress.roster.totalDeaths+=1,this.refreshRosterStatus(),this.emitProgress(),this.evaluateResolution())};handleUnitSpawned=({unit:t})=>{t.faction==="player"&&(this.refreshRosterStatus(),this.emitProgress())};handleResourceChanged=({resource:t,total:n})=>{t===D.SAUNA_BEER&&(this.progress.economy.beer=n,n<this.progress.economy.worstBeer&&(this.progress.economy.worstBeer=n),n<0?this.bankruptSince===null&&(this.bankruptSince=this.timeSource(),this.progress.economy.bankruptSince=this.bankruptSince,this.startBankruptcyTimer()):(this.updateBankruptcyDuration(),this.bankruptSince=null,this.progress.economy.bankruptSince=null,this.clearBankruptcyTimer()),this.emitProgress())};handleSaunaDamaged=({remainingHealth:t})=>{this.disposed||(this.updateSaunaSnapshot(t),this.emitProgress())};handleSaunaDestroyed=t=>{this.disposed||(this.markSaunaDestroyed(),this.emitProgress(),this.resolve("lose","saunaDestroyed"))};startBankruptcyTimer(){if(this.bankruptcyTimeout===null){if(this.bankruptcyGraceMs<=0){this.resolve("lose","bankruptcy");return}this.bankruptcyTimeout=setTimeout(()=>{this.updateBankruptcyDuration(),this.resolve("lose","bankruptcy")},this.bankruptcyGraceMs)}}clearBankruptcyTimer(){this.bankruptcyTimeout!==null&&(clearTimeout(this.bankruptcyTimeout),this.bankruptcyTimeout=null)}startRosterTimer(){if(this.rosterTimeout===null){if(this.rosterGraceMs<=0){this.resolve("lose","rosterWipe");return}this.rosterTimeout=setTimeout(()=>{this.updateRosterDuration(),this.resolve("lose","rosterWipe")},this.rosterGraceMs)}}clearRosterTimer(){this.rosterTimeout!==null&&(clearTimeout(this.rosterTimeout),this.rosterTimeout=null)}updateStrongholdTotals(){const t=this.strongholds.size;let n=0;for(const s of this.strongholds.values())s.alive&&(n+=1);this.progress.strongholds.total=t,this.progress.strongholds.remaining=n,this.progress.strongholds.destroyed=Math.max(0,t-n)}refreshRosterStatus(){const t=Math.max(0,Math.round(this.getRosterCount()));this.progress.roster.active=t,t<=0?(this.wipeSince===null&&(this.wipeSince=this.timeSource(),this.progress.roster.wipeSince=this.wipeSince),this.startRosterTimer()):(this.updateRosterDuration(),this.wipeSince=null,this.progress.roster.wipeSince=null,this.clearRosterTimer())}updateBankruptcyDuration(){if(this.bankruptSince===null)return;const t=this.timeSource()-this.bankruptSince;t>this.progress.economy.bankruptDurationMs&&(this.progress.economy.bankruptDurationMs=t)}updateRosterDuration(){if(this.wipeSince===null)return;const t=this.timeSource()-this.wipeSince;t>this.progress.roster.wipeDurationMs&&(this.progress.roster.wipeDurationMs=t)}evaluateResolution(){if(!this.resolution){if(this.progress.sauna.destroyed){this.resolve("lose","saunaDestroyed");return}if(this.progress.strongholds.total>0&&this.progress.strongholds.remaining===0){this.resolve("win","strongholds");return}if(this.wipeSince!==null&&this.rosterGraceMs<=0){this.resolve("lose","rosterWipe");return}this.bankruptSince!==null&&this.bankruptcyGraceMs<=0&&this.resolve("lose","bankruptcy")}}resolve(t,n){if(this.resolution)return;this.updateRosterDuration(),this.updateBankruptcyDuration();const s=this.timeSource(),a=Math.max(0,s-this.progress.startedAt),o=xo({...this.progress,roster:{...this.progress.roster,wipeSince:this.wipeSince},economy:{...this.progress.economy,bankruptSince:this.bankruptSince},sauna:{...this.progress.sauna,destroyedAt:this.saunaDestroyedAt}}),r=this.computeRewards();this.resolution=Object.freeze({outcome:t,cause:n,timestamp:s,durationMs:a,summary:o,rewards:r}),this.emitResolution(),this.dispose()}emitProgress(){const t=this.getProgress();for(const n of this.progressListeners)try{n(t)}catch(s){console.error("Objective progress listener failed",s)}}emitResolution(){if(!this.resolution)return;const t=this.resolution;for(const n of this.resolutionListeners)try{n(t)}catch(s){console.error("Objective resolution listener failed",s)}this.resolutionListeners.clear()}computeRewards(){const t=Bo(this.state);return{resources:{[D.SAUNA_BEER]:{final:t[D.SAUNA_BEER],delta:t[D.SAUNA_BEER]-this.startResources[D.SAUNA_BEER]},[D.SAUNAKUNNIA]:{final:t[D.SAUNAKUNNIA],delta:t[D.SAUNAKUNNIA]-this.startResources[D.SAUNAKUNNIA]},[D.SISU]:{final:t[D.SISU],delta:t[D.SISU]-this.startResources[D.SISU]}}}}coordKey(t){return`${t.q},${t.r}`}isStronghold(t){return t?this.strongholdTypes.has(t):!1}createSaunaProgress(){if(!this.sauna)return{maxHealth:0,health:0,destroyed:!1,destroyedAt:null};const t=Math.max(0,Math.round(this.sauna.maxHealth??0)),n=Math.max(0,Math.round(this.sauna.health??0)),s=!!this.sauna.destroyed||n<=0;return s&&this.saunaDestroyedAt===null&&(this.saunaDestroyedAt=this.timeSource()),{maxHealth:t,health:n,destroyed:s,destroyedAt:s?this.saunaDestroyedAt:null}}updateSaunaSnapshot(t){const n=Number.isFinite(t)?Math.max(0,Math.round(t)):0,s=this.sauna?Math.max(0,Math.round(this.sauna.maxHealth??0)):0,a=this.progress.sauna.maxHealth,o=Math.max(a,s,n);this.progress.sauna.maxHealth=o;const r=Math.max(0,Math.min(o,n));this.progress.sauna.health=r,r>0&&(this.progress.sauna.destroyed=!1,this.progress.sauna.destroyedAt=null,this.saunaDestroyedAt=null)}markSaunaDestroyed(){if(this.sauna){const t=Math.max(0,Math.round(this.sauna.maxHealth??0));t>this.progress.sauna.maxHealth&&(this.progress.sauna.maxHealth=t)}this.progress.sauna.health=0,this.progress.sauna.destroyed=!0,this.saunaDestroyedAt===null&&(this.saunaDestroyedAt=this.timeSource()),this.progress.sauna.destroyedAt=this.saunaDestroyedAt}}function jf(e){return new Rf(e)}const Yr="autobattles:saunojas";function Xr(){try{return globalThis.localStorage??null}catch{return null}}function Of(){const e=Xr();if(!e)return[];try{const t=e.getItem(Yr);if(!t)return[];const n=JSON.parse(t);if(!Array.isArray(n))return[];const s=[];for(const a of n){if(!a||typeof a!="object")continue;const o=a,r=o.id;if(typeof r!="string"||r.length===0)continue;const i=o.coord,c=i&&typeof i=="object"&&typeof i.q=="number"&&Number.isFinite(i.q)&&typeof i.r=="number"&&Number.isFinite(i.r)?{q:i.q,r:i.r}:void 0,l=o.traits,d=Array.isArray(l)?l.filter(f=>typeof f=="string"):void 0,u=typeof o.upkeep=="number"?o.upkeep:void 0,h=typeof o.xp=="number"?o.xp:void 0;s.push(la({id:r,name:typeof o.name=="string"?o.name:void 0,coord:c,maxHp:typeof o.maxHp=="number"?o.maxHp:void 0,hp:typeof o.hp=="number"?o.hp:void 0,steam:typeof o.steam=="number"?o.steam:void 0,traits:d,upkeep:u,xp:h,selected:!!o.selected,items:Array.isArray(o.items)?o.items:void 0,baseStats:o.baseStats,effectiveStats:o.effectiveStats,equipment:o.equipment,modifiers:Array.isArray(o.modifiers)?o.modifiers:void 0}))}return s}catch(t){return console.warn("Failed to load Saunoja units from storage",t),[]}}function Qf(e){const t=Xr();if(t)try{const n=e.map(s=>({id:s.id,name:s.name,coord:{q:s.coord.q,r:s.coord.r},maxHp:s.maxHp,hp:s.hp,steam:s.steam,traits:[...s.traits],upkeep:s.upkeep,xp:s.xp,selected:s.selected,baseStats:{health:s.baseStats.health,attackDamage:s.baseStats.attackDamage,attackRange:s.baseStats.attackRange,movementRange:s.baseStats.movementRange,...typeof s.baseStats.defense=="number"&&Number.isFinite(s.baseStats.defense)?{defense:s.baseStats.defense}:{},...typeof s.baseStats.shield=="number"&&Number.isFinite(s.baseStats.shield)?{shield:s.baseStats.shield}:{},...typeof s.baseStats.visionRange=="number"&&Number.isFinite(s.baseStats.visionRange)?{visionRange:s.baseStats.visionRange}:{}},effectiveStats:{health:s.effectiveStats.health,attackDamage:s.effectiveStats.attackDamage,attackRange:s.effectiveStats.attackRange,movementRange:s.effectiveStats.movementRange,...typeof s.effectiveStats.defense=="number"&&Number.isFinite(s.effectiveStats.defense)?{defense:s.effectiveStats.defense}:{},...typeof s.effectiveStats.shield=="number"&&Number.isFinite(s.effectiveStats.shield)?{shield:s.effectiveStats.shield}:{},...typeof s.effectiveStats.visionRange=="number"&&Number.isFinite(s.effectiveStats.visionRange)?{visionRange:s.effectiveStats.visionRange}:{}},equipment:Ht.reduce((a,o)=>{const r=s.equipment?.[o]??null;return a[o]=r?{id:r.id,name:r.name,description:r.description,icon:r.icon,rarity:r.rarity,quantity:r.quantity,slot:r.slot}:null,a},{}),items:s.items.map(a=>({id:a.id,name:a.name,description:a.description,icon:a.icon,rarity:a.rarity,quantity:a.quantity})),modifiers:s.modifiers.map(a=>({id:a.id,name:a.name,description:a.description,remaining:a.remaining,duration:a.duration,appliedAt:a.appliedAt,stacks:a.stacks,source:a.source}))}));t.setItem(Yr,JSON.stringify(n))}catch(n){console.warn("Failed to persist Saunoja units",n)}}const qr="autobattles:sauna-settings";function Jr(){try{return globalThis.localStorage??null}catch{return null}}function Nt(e,t){const n=typeof e=="number"&&Number.isFinite(e)?e:t,s=Math.max(0,Math.floor(n)),a=1+na;return Math.max(0,Math.min(a,s))}function Hf(e){const t=Jr();if(!t)return{maxRosterSize:Nt(e,e)};try{const n=t.getItem(qr);if(!n)return{maxRosterSize:Nt(e,e)};const s=JSON.parse(n);return!s||typeof s!="object"?{maxRosterSize:Nt(e,e)}:{maxRosterSize:Nt(s.maxRosterSize,e)}}catch(n){return console.warn("Failed to load sauna settings from storage",n),{maxRosterSize:Nt(e,e)}}}function Zr(e){const t=Jr();if(!t)return;const n={maxRosterSize:Nt(e.maxRosterSize,e.maxRosterSize)};try{t.setItem(qr,JSON.stringify(n))}catch(s){console.warn("Failed to persist sauna settings",s)}}const Gf=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),Uf=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Ff(e,t){const{rosterIcon:n,summaryLabel:s="Saunoja Roster"}=t;e.classList.add("sauna-roster"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("title","Active sauna battalion on the field"),e.dataset.tutorialTarget="upkeep",e.replaceChildren();const a=document.createElement("div");a.classList.add("sauna-roster__summary");const o=document.createElement("img");o.src=n,o.alt="Saunoja roster crest",o.decoding="async",o.classList.add("sauna-roster__icon");const r=document.createElement("div");r.classList.add("sauna-roster__text");const i=document.createElement("span");i.textContent=s,i.classList.add("sauna-roster__label");const c=document.createElement("span");c.textContent="0",c.classList.add("sauna-roster__value"),r.append(i,c),a.append(o,r);const l=document.createElement("div");l.classList.add("saunoja-card"),l.setAttribute("aria-live","polite"),l.hidden=!0;const d=document.createElement("h3");d.classList.add("saunoja-card__name"),d.textContent="Saunoja";const u=document.createElement("p");u.classList.add("saunoja-card__traits");const h=document.createElement("p");h.classList.add("saunoja-card__upkeep"),l.append(d,u,h),e.append(a,l);let f=null,m=null;function p(b){if(!b){l.hidden=!0;return}l.hidden=!1,l.dataset.unitId=b.id,d.textContent=b.name||"Saunoja";const N=b.traits.filter(z=>z.length>0),C=N.length>0?N.join(", "):"No notable traits yet";u.textContent=C,u.title=C;const I=Math.max(0,Math.round(b.upkeep)),w=`Upkeep: ${Uf.format(I)} Beer`;h.textContent=w,h.title=w}function g(b){return b===1/0?"inf":!Number.isFinite(b)||b<=0?"0":String(Math.ceil(b))}function A(b){return[b.id,b.name,b.icon??"",b.rarity??"",b.description??"",b.quantity].join("^")}function M(b){return[b.id,b.name,b.description??"",g(b.duration),g(b.remaining),b.appliedAt??"",b.stacks??1,b.source??""].join("^")}function v(b){const{stats:N}=b,C=b.traits.join("|"),I=b.items.map(A).join("|"),w=b.modifiers.map(M).join("|");return[b.id,b.name,b.upkeep,b.status,b.selected?1:0,N.health,N.maxHealth,N.attackDamage,N.attackRange,N.movementRange,N.defense??0,N.shield??0,C,I,w].join("~")}function P(b){return`${b.length}:${b.map(v).join("||")}`}return{updateSummary(b){const N=Math.max(0,Math.floor(b.count)),C=Gf.format(N);c.textContent=C,e.setAttribute("aria-label",`Saunoja roster: ${C} active attendants`),e.setAttribute("title",`Saunoja roster  ${C} active attendants`),p(b.card)},installRenderer(b){m=null,f=b},renderRoster(b){if(!f)return;const N=P(b);N!==m&&(m=N,f(b))},destroy(){f=null,m=null,e.replaceChildren()}}}const Kf={[D.SAUNA_BEER]:"Sauna Beer",[D.SAUNAKUNNIA]:"Saunakunnia",[D.SISU]:"Sisu"},Yf='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';function Xf(e){if(!Number.isFinite(e)||e<=0)return"0:00";const t=Math.round(e/1e3),n=Math.max(0,t%60).toString().padStart(2,"0"),s=Math.floor(t/60),a=(s%60).toString().padStart(2,"0"),o=Math.floor(s/60);return o>0?`${o}:${a}:${n}`:`${s}:${n}`}function qf(e){switch(e.cause){case"strongholds":return"All rival strongholds have fallen.";case"rosterWipe":return"Every attendant is downno one remains to hold the line.";case"bankruptcy":return"Upkeep debts have exhausted the steam reserves.";case"saunaDestroyed":return"The sauna collapsed under relentless assaultthe sacred steamline has fallen silent.";default:return""}}function Jf(e){if(!Number.isFinite(e)||e===0)return"0";const t=Math.round(e*100)/100;return`${t>0?"+":""}${t}`}function Zf(e,t){const n=document.createElement("ul");n.className="end-screen__rewards-list";for(const s of Object.values(D)){const a=e.rewards.resources[s];if(!a)continue;const o=document.createElement("li");o.className="end-screen__reward-item";const r=document.createElement("span");r.className="end-screen__reward-label",r.textContent=t[s]??s;const i=document.createElement("span");i.className="end-screen__reward-value",i.textContent=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(Math.round(a.final));const c=document.createElement("span");c.className="end-screen__reward-delta",c.textContent=Jf(a.delta),c.dataset.polarity=a.delta>=0?"positive":"negative",o.append(r,i,c),n.append(o)}return n}function Wf(e,t,n){const s=a=>{if(a.key==="Escape"){a.preventDefault(),n?.();return}if(a.key!=="Tab")return;const o=t.querySelectorAll(Yf);if(o.length===0){a.preventDefault(),t.focus();return}const r=o[0],i=o[o.length-1],c=document.activeElement;a.shiftKey?(c===r||!t.contains(c))&&(a.preventDefault(),i.focus()):(c===i||!t.contains(c))&&(a.preventDefault(),r.focus())};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}function Vf(e){const{container:t,resolution:n,onNewRun:s,onDismiss:a,currentNgPlusLevel:o}=e;if(!t)return{destroy(){},focusPrimary(){}};const r={...Kf,...e.resourceLabels??{}},i=document.createElement("div");i.className="end-screen",i.setAttribute("role","presentation");const c=document.createElement("section");c.className="end-screen__panel",c.setAttribute("role","dialog"),c.setAttribute("aria-modal","true");const l=`end-screen-title-${Date.now()}`;c.setAttribute("aria-labelledby",l),c.tabIndex=-1,c.dataset.outcome=n.outcome;const d=document.createElement("h2");d.className="end-screen__title",d.id=l,d.textContent=n.outcome==="win"?"Steamforged Victory":"Sauna Lost";const u=document.createElement("p");u.className="end-screen__subtitle",u.textContent=qf(n);const h=document.createElement("dl");h.className="end-screen__metrics";const f=(I,w)=>{const z=document.createElement("dt");z.textContent=I,z.className="end-screen__metric-label";const y=document.createElement("dd");y.textContent=w,y.className="end-screen__metric-value",h.append(z,y)};f("Run time",Xf(n.durationMs)),f("Strongholds",`${n.summary.strongholds.destroyed}/${n.summary.strongholds.total}`),f("Roster losses",`${n.summary.roster.totalDeaths}`),f("Deepest beer reserve",`${Math.round(n.summary.economy.worstBeer)}`);const m=document.createElement("div");m.className="end-screen__badges";const p=document.createElement("span");p.className="end-screen__badge",p.textContent=`NG+ ${Math.max(0,o)}`,m.append(p);const g=document.createElement("h3");g.className="end-screen__section-title",g.textContent="Rewards";const A=Zf(n,r),M=document.createElement("div");M.className="end-screen__actions";const v=document.createElement("button");v.type="button",v.className="end-screen__button end-screen__button--primary",v.textContent="New run (NG+)",v.addEventListener("click",()=>{s()});const P=document.createElement("button");P.type="button",P.className="end-screen__button",P.textContent="Review battlefield",P.addEventListener("click",()=>{a?.()}),M.append(v,P),c.append(d,u,m,h,g,A,M),i.append(c),t.append(i);const b=Wf(i,c,a),N=()=>{b(),i.remove()},C=()=>{requestAnimationFrame(()=>{v.focus({preventScroll:!0})})};return C(),{destroy:N,focusPrimary:C}}const Wr="autobattles4x.flags";function Vr(){if(typeof window>"u")return null;try{if("localStorage"in window&&window.localStorage)return window.localStorage}catch(e){console.warn("Unable to access localStorage for local flags",e)}return null}function _r(){const e=Vr();if(!e)return{};try{const t=e.getItem(Wr);if(!t)return{};const n=JSON.parse(t);if(n&&typeof n=="object")return n}catch(t){console.warn("Failed to parse local flags, resetting.",t)}return{}}function _f(e){const t=Vr();if(t)try{const n={};e.tutorial_done&&(n.tutorial_done=!0),t.setItem(Wr,JSON.stringify(n))}catch(n){console.warn("Failed to persist local flags",n)}}function $f(){return _r().tutorial_done===!0}function zo(e){const t={..._r()};t.tutorial_done=!0,_f(t)}const Do=200,Io=3,em=2,Vs={[D.SAUNA_BEER]:"Sauna Beer",[D.SAUNAKUNNIA]:"Saunakunnia",[D.SISU]:"Sisu"};function $r(e,t){const n=Number.isFinite(t)?Math.max(0,Math.floor(t)):0;if(!Number.isFinite(e))return n;const s=Math.max(0,Math.floor(e));return Math.max(0,Math.min(n,s))}let Se=Ve(ji()),ei=1,ga=0,Yt=1,ti=1,ni=Math.random,si=Math.random;function as(e){Se=Ve(e),ei=Qi(Se),ga=Hi(Se),Yt=Ui(Se),ti=Gi(Se),ni=Na(Se.runSeed,1),si=Na(Se.runSeed,2)}as(Se);let os=null,K=[];const at=new Map,ht=new Map,Kt=new Map;let No=0,rs=null,je=()=>{},Et=null,jt=null,ft=null,hn=null,pe=null,is=null,mt=null,gt=null,Ct=!1,De=null,cs=null,Ue=null,fn=null;function tm(e){const t=ht.get(e.id);return t?Kt.get(t)??null:null}function ai(e,t){e.effectiveStats={...t},e.maxHp=Math.max(1,Math.round(t.health)),e.hp=Math.min(e.maxHp,Math.max(0,Math.round(e.hp))),e.defense=typeof t.defense=="number"?Math.max(0,t.defense):void 0,e.shield=typeof t.shield=="number"?Math.max(0,t.shield):0;const n=tm(e);if(n){const s={health:e.effectiveStats.health,attackDamage:e.effectiveStats.attackDamage,attackRange:e.effectiveStats.attackRange,movementRange:e.effectiveStats.movementRange};typeof e.effectiveStats.defense=="number"&&(s.defense=e.effectiveStats.defense),typeof e.effectiveStats.visionRange=="number"&&(s.visionRange=e.effectiveStats.visionRange),n.updateStats(s),typeof e.effectiveStats.shield=="number"?n.setShield(e.effectiveStats.shield):e.shield<=0&&n.setShield(0)}}function pa(e,t){const n=t??Re(e.equipment),s=Jn(e.baseStats,n);return ai(e,s),s}const nm=Object.freeze(["health","attackDamage","attackRange","movementRange","defense","shield"]);function Po(e){return e?{id:e.id,name:e.name,quantity:e.quantity,rarity:e.rarity}:null}function ko(e,t){const n=e[t];return typeof n=="number"&&Number.isFinite(n)?Math.round(n):0}function sm(e,t){const n=[];for(const s of nm){const a=ko(t,s),o=ko(e,s),r=a-o;r!==0&&n.push({stat:s,delta:r})}return n}function am(e,t){if(!t||Re(e.equipment).length>0)return;const s={health:Math.max(1,Math.round(t.getMaxHealth())),attackDamage:Math.max(0,Math.round(t.stats.attackDamage)),attackRange:Math.max(0,Math.round(t.stats.attackRange)),movementRange:Math.max(0,Math.round(t.stats.movementRange)),defense:typeof t.stats.defense=="number"&&Number.isFinite(t.stats.defense)?Math.max(0,t.stats.defense):e.baseStats.defense,shield:e.baseStats.shield??0,visionRange:typeof t.stats.visionRange=="number"&&Number.isFinite(t.stats.visionRange)?Math.max(0,t.stats.visionRange):e.baseStats.visionRange};e.baseStats=s,pa(e)}function sn(){fn&&(fn.destroy(),fn=null)}function om(){if($f()){sn();return}sn(),fn=md({onComplete:()=>{zo(),sn()},onSkip:()=>{zo(),sn()}}),fn.start()}function Lo(e){is=e,pe&&(pe.installRenderer(e),mt&&(pe.renderRoster(mt),mt=null))}function rm(){return Of()}function it(){Qf(K)}function im(e=Math.random){typeof e!="function"&&(e=Math.random);const t=Math.max(0,Math.floor(Lt)),n=Math.max(t,Math.floor(Fn));if(n===t)return Math.max(Lt,Math.min(Fn,t));const s=n-t+1,a=Math.floor(e()*s)+t;return Math.max(Lt,Math.min(Fn,a))}function cm(e){const n=(Array.isArray(e.traits)?e.traits:[]).length>=3,s=Number.isFinite(e.upkeep),a=Number.isFinite(e.xp);return!n||!s||!a}function oi(e){e.traits=Ou(),e.upkeep=im(),e.xp=0}function lm(e,t,n){os=e,De&&(De.dispose(),De=null),De=Nu({canvas:e,overlay:n,mapRenderer:Aa,getUnitById:s=>Kt.get(s),requestDraw:()=>{Ae()}}),pe&&pe.destroy(),pe=Ff(t,{rosterIcon:We.saunojaRoster}),is&&pe.installRenderer(is),mt&&(pe.renderRoster(mt),mt=null),ft?.dispose(),ft=xl(Me,{getRosterCapLimit:()=>Yt,updateMaxRosterSize:(s,a)=>fi(s,{persist:a?.persist})}),jt?.dispose(),jt=Zl(_,{saunakunnia:We.resource,sisu:We.sisu,saunaBeer:We.saunaBeer,sound:We.sound},{useSisuBurst:()=>{const s=Ul(_,le);return s?(st("sisu"),je(`Sisu bursts forth, spending ${ln} grit to steel our attendants.`)):st("error"),s},torille:()=>{const s=Kl(_,le,Me.pos,be);return s?je(`Torille! Our warriors regroup at the sauna to rally their spirits for ${dn} SISU.`):st("error"),s}}),hn?.destroy(),hn=lf(mn,{getSelectedUnitId:()=>K.find(s=>s.selected)?.id??null,getComparisonContext:()=>Mm(),onEquip:(s,a,o)=>wa(s,a)}),bm(),ya(),Xe(),om()}const be=new Zi(10,10,32),dm=new jc(be),Aa=new su(be),ls=()=>{Aa.invalidateCache(),Ae()};E.on("buildingPlaced",ls);E.on("buildingRemoved",ls);be.forEachTile(e=>e.setFogged(!0));Li();const le=[];function To(e){return`${e.q},${e.r}`}function um(){const e=new Set;for(const c of le)c.isDead()||e.add(To(c.coord));const t=[],{minQ:n,maxQ:s,minR:a,maxR:o}=be,r=c=>{const l=To(c);e.has(l)||(be.ensureTile(c.q,c.r),t.push(c))};for(let c=n;c<=s;c++)r({q:c,r:a}),o!==a&&r({q:c,r:o});for(let c=a+1;c<=o-1;c++)r({q:n,r:c}),s!==n&&r({q:s,r:c});if(t.length===0)return;const i=Math.floor(Math.random()*t.length);return t[i]}function hm(e){const t=at.get(e);t&&(at.delete(e),ht.get(t.id)===e&&ht.delete(t.id))}function fm(e){const t=at.get(e.id);if(t)return{saunoja:t,created:!1,attached:!1};let n=K.find(r=>r.id===e.id);n||(n=K.find(r=>!ht.has(r.id)));let s=!1;n||(n=la({id:`saunoja-${K.length+1}`,coord:{q:e.coord.q,r:e.coord.r}}),K.push(n),s=!0);const a=ht.get(n.id);a&&a!==e.id&&at.delete(a),at.set(e.id,n),ht.set(n.id,e.id),am(n,e),ai(n,n.effectiveStats);const o=cm(n);return(s||o)&&oi(n),{saunoja:n,created:s,attached:!0}}function ya(){let e=!1;for(const t of le){if(t.faction!=="player"||t.isDead())continue;const{saunoja:n,created:s,attached:a}=fm(t);(s||a)&&(e=!0);const o=Number.isFinite(t.stats.health)?Math.max(0,t.stats.health):0;n.hp!==o&&(n.hp=o,e=!0);const r=Number.isFinite(t.getMaxHealth())?Math.max(1,t.getMaxHealth()):1;n.maxHp!==r&&(n.maxHp=r,e=!0);const i=t.getShield(),c=Number.isFinite(i)?Math.max(0,i):0;n.shield!==c&&(n.shield=c,e=!0);const d=t?.lastHitAt;Number.isFinite(d)&&n.lastHitAt!==d&&(n.lastHitAt=d,e=!0);const{q:u,r:h}=t.coord;(n.coord.q!==u||n.coord.r!==h)&&(n.coord={q:u,r:h},e=!0,n.selected&&ba(n.coord))}return e&&it(),e}function ri(e,t){if(e.faction==="player"){const o=(t??at.get(e.id)??null)?.name?.trim();if(o)return o}return`${(e.constructor?.name??"Unit").replace(/([a-z])([A-Z])/g,"$1 $2").toLowerCase()} ${e.id}`.trim()}function As(e){if(Kt.has(e.id))return;le.push(e),Kt.set(e.id,e);let t=null;e.faction==="player"&&(ya()||wn(),t=at.get(e.id)??null),os&&Ae(),e.faction==="player"&&(je(`Our ${ri(e,t)} emerges from the steam.`),Xe())}const ii=({unit:e})=>{As(e)};E.on("unitSpawned",ii);const ci=()=>{wn()},Ot=()=>{wn()};E.on("inventoryChanged",ci);E.on("modifierAdded",Ot);E.on("modifierRemoved",Ot);E.on("modifierExpired",Ot);const li=e=>{ft?.handleDamage?.(e)},di=e=>{ft?.handleDestroyed?.(e)};E.on("saunaDamaged",li);E.on("saunaDestroyed",di);const ui=()=>{Xe()};E.on("unit:stats:changed",ui);function mm(e){const t=at.get(e.id);if(!t)return 0;const n=Number.isFinite(t.upkeep)?t.upkeep:0;return n>0?n*ei:0}const _=new Ki(1e3),mn=new Ku,Ma=_.load(be);if(Ma){const e=_.getNgPlusState();as(e),js(e)}else{const e=_.setNgPlusState(Se);as(e),js(e)}if(!Ma&&Se.ngPlusLevel>0){const e=Math.round(75*Se.ngPlusLevel);e>0&&_.addResource(D.SAUNA_BEER,e)}const hi=Hf(Yt),ds=$r(hi.maxRosterSize,Yt);ds!==hi.maxRosterSize&&Zr({maxRosterSize:ds});const Me=Lc({q:Math.floor(be.width/2),r:Math.floor(be.height/2)},void 0,{maxRosterSize:ds});let Ro=ds;const fi=(e,t={})=>{const n=$r(e,Yt);return n!==Me.maxRosterSize&&(Me.maxRosterSize=n),t.persist&&n!==Ro&&(Zr({maxRosterSize:n}),Ro=n),n},gm=e=>{No+=1;const t=`p${Date.now()}-${No}`,n=ia(_,"soldier",t,e,"player");return n&&As(n),n??null},pm=new Cl({difficulty:ti,random:ni,eliteOdds:ga}),mi=new Yi(1e3,e=>{const t=e/1e3;_.tick();const n=fi(Me.maxRosterSize);Gu({dt:t,state:_,sauna:Me,heat:Me.heatTracker,units:le,getUnitUpkeep:mm,pickSpawnTile:()=>er(Me.pos,le),spawnBaseUnit:gm,minUpkeepReserve:Math.max(1,Lt),maxSpawns:Yt,rosterCap:n,getRosterCount:va}),pm.update(t,le,As,um),dm.tick(le,t,Me),gc(t),ya()&&Xe(),_.save();for(const s of le)s.isDead()||s.faction!=="player"||be.revealAround(s.coord,s.getVisionRange(),{autoFrame:!1});Ae()}),Am=e=>{Ct&&(Ct=!1),mi.stop(),gt!==null&&(cancelAnimationFrame(gt),gt=null),Ae();const t=document.getElementById("ui-overlay");if(!t)return;Ue&&(Ue.destroy(),Ue=null);const n=Se.ngPlusLevel,s=Oi(Se,{outcome:e.outcome});js(s),_.setNgPlusState(s),as(s),Ue=Vf({container:t,resolution:e,currentNgPlusLevel:n,resourceLabels:Vs,onNewRun:()=>{try{typeof window<"u"&&window.localStorage?.removeItem?.("gameState")}catch(o){console.warn("Failed to reset saved game state for NG+",o)}typeof window<"u"&&typeof window.location?.reload=="function"&&window.setTimeout(()=>window.location.reload(),75)},onDismiss:()=>{Ue&&(Ue.destroy(),Ue=null)}})};K=rm();if(K.length===0){const e=la({id:"saunoja-1",coord:Me.pos,selected:!0,upkeep:0});oi(e),e.upkeep=0,K.push(e),it()}else{let e=!1,t=!1;for(const n of K)n.selected&&(e?(n.selected=!1,t=!0):e=!0);t&&it()}const ym=le.some(e=>e.faction==="player"&&!e.isDead());if(!ym){_.canAfford(Ja,D.SAUNA_BEER)||_.addResource(D.SAUNA_BEER,Ja);const e=`u${le.length+1}`,t=ia(_,"soldier",e,Me.pos,"player");t&&As(t)}be.revealAround(Me.pos,3);cs=jf({state:_,map:be,getRosterCount:va,sauna:Me,rosterWipeGraceMs:8e3,bankruptcyGraceMs:12e3});cs.onResolution(Am);function Mm(){const e=K.find(t=>t.selected)??null;return e?{baseStats:{...e.baseStats},loadout:Re(e.equipment),currentStats:{...e.effectiveStats}}:null}function bm(){Et&&(Et(),Et=null);const e=dd(_,{onRosterSelect:xm,onRosterRendererReady:Lo,onRosterEquipSlot:zm,onRosterUnequipSlot:Dm});je=e.log,e.addEvent,Lo(e.renderRoster),Et=e.dispose}function wm(){ft?.update()}function vm(e){jt?.update(e)}Ma||(_.addResource(D.SAUNA_BEER,Do),je(`Quartermaster stocks ${Do} bottles of ${Vs[D.SAUNA_BEER]} to launch your campaign.`),_.addResource(D.SAUNAKUNNIA,Io),je(`Sauna elders honor your leadership with ${Io} ${Vs[D.SAUNAKUNNIA]} to celebrate your arrival.`));const Ls=K.find(e=>e.selected);Ls&&(rs={q:Ls.coord.q,r:Ls.coord.r});function Sm(e,t){return!e||!t?e===t:e.q===t.q&&e.r===t.r}function ba(e){return Sm(rs,e)?!1:(rs=e?{q:e.q,r:e.r}:null,!0)}function gi(e){let t=!1;for(const n of K)e&&n===e||n.selected&&(n.selected=!1,t=!0);return t}function Em(){let e=!1;return gi()&&(e=!0),ba(null)&&(e=!0),e}function Cm(e){if(!e)return!1;const t=ra(e.type);if(!t)return!1;const n=An(t,1),s=e.stats;return s.health>n.health||s.attackDamage>n.attackDamage||s.attackRange>n.attackRange||s.movementRange>n.movementRange}function pi(e){let t=!1;return e.selected||(e.selected=!0,t=!0),gi(e)&&(t=!0),ba(e.coord)&&(t=!0),t}function xm(e){const t=K.find(n=>n.id===e);t&&pi(t)&&(it(),Xe(),Ae())}function Ai(e){const t=Di(e.x,e.y,be.hexSize),n=K.find(a=>a.coord.q===t.q&&a.coord.r===t.r);(n?pi(n):Em())&&(it(),Xe(),Ae())}function wa(e,t){const n=K.find(l=>l.id===e);if(!n)return{success:!1,reason:"unit-missing"};const s=Re(n.equipment),a=Jn(n.baseStats,s),o=Zc(n,t);if(!o.success)return{success:!1,reason:o.reason};const r=pa(n,o.loadout);E.emit("unit:stats:changed",{unitId:n.id,stats:r}),E.emit("inventoryChanged",{}),it(),Xe();const i=s.find(l=>l.slot===o.slot)??null;return{success:!0,comparison:{slot:o.slot,previous:Po(i),next:Po(o.item??null),deltas:sm(a,r)}}}function Bm(e,t){const n=K.find(u=>u.id===e);if(!n)return null;const s=Wc(n,t);if(!s.success||!s.removed)return null;const a=pa(n,s.loadout);E.emit("unit:stats:changed",{unitId:n.id,stats:a}),E.emit("inventoryChanged",{}),it(),Xe();const{id:o,name:r,description:i,icon:c,rarity:l,quantity:d}=s.removed;return{id:o,name:r,description:i,icon:c,rarity:l,quantity:d}}function zm(e,t){const s=mn.getStash().findIndex(a=>Vc(a.id,t));return s===-1?!1:mn.equipFromStash(s,e,wa)}function Dm(e,t){return mn.unequipToStash(e,t,Bm)}function Ae(){if(!os)return;const e=os.getContext("2d"),t=Kr();if(!e||!t)return;if(De){const r=typeof performance<"u"?performance.now():Date.now();De.step(r)}const n=De?.getShakeOffset()??{x:0,y:0},s=De?{getUnitAlpha:r=>De.getUnitAlpha(r.id)}:void 0,o=Array.isArray(K)&&K.length>0?le.filter(r=>r.faction!=="player"):le;e.save(),(n.x!==0||n.y!==0)&&e.translate(n.x,n.y),uu(e,Aa,t.images,o,rs,{saunojas:{units:K,draw:Lu},sauna:Me,fx:s}),e.restore()}const yi=({policy:e})=>{je(`Sauna council toasts a fresh keg for policy: ${e}.`)};E.on("policyApplied",yi);const Mi=({unitId:e,attackerFaction:t,unitFaction:n})=>{const s=le.findIndex(d=>d.id===e),a=s!==-1?le[s]:null,o=a?{q:a.coord.q,r:a.coord.r}:null,r=n==="player"?at.get(e)??null:null;let i=!1;if(n==="player"){const d=r??K.find(u=>ht.get(u.id)===e||u.id===e)??null;d&&(d.hp!==0&&(d.hp=0,i=!0),d.shield!==0&&(d.shield=0,i=!0))}const c=a?ri(a,r):`unit ${e}`;if(s!==-1&&(le.splice(s,1),Kt.delete(e),hm(e),Ae()),i&&it(),n==="player"&&Xe(),t==="player"&&n&&n!=="player"){const d=Cm(a??null)||si()<ga,u=vf({factionId:n,elite:d});if(u.rolls.length>0){const h=K.find(f=>f.selected)??null;for(const f of u.rolls)if(mn.addLoot(f,{unitId:h?.id,sourceTableId:u.tableId,equip:wa}).equipped){const p=h?.name??"our champion";je(`Quartermaster fastens ${f.item.name} to ${p}.`)}else je(`Quartermaster stores ${f.item.name} recovered from ${c}.`)}}t==="player"&&n&&n!=="player"&&(_.addResource(D.SAUNAKUNNIA,em),_.addResource(D.SISU,1),je("Our grit surges  +1 SISU earned for the vanquished foe.")),o&&be.revealAround(o,1,{autoFrame:!1}),je(`The steam hushes as ${n==="player"?"our":"a rival"} ${c} grows still.`)};E.on("unitDied",Mi);function _s(){Ct=!1,cs?.dispose(),cs=null,Ue&&(Ue.destroy(),Ue=null),gt!==null&&(cancelAnimationFrame(gt),gt=null);try{_.save()}catch(e){console.warn("Failed to persist game state during cleanup",e)}try{it()}catch(e){console.warn("Failed to persist Saunoja roster during cleanup",e)}De&&(De.dispose(),De=null),E.off("policyApplied",yi),E.off("unitDied",Mi),E.off("unitSpawned",ii),E.off("inventoryChanged",ci),E.off("modifierAdded",Ot),E.off("modifierRemoved",Ot),E.off("modifierExpired",Ot),E.off("unit:stats:changed",ui),E.off("saunaDamaged",li),E.off("saunaDestroyed",di),E.off("buildingPlaced",ls),E.off("buildingRemoved",ls),Et&&(Et(),Et=null),hn&&(hn.destroy(),hn=null),ft&&(ft.dispose(),ft=null),jt&&(jt.dispose(),jt=null),pe&&(pe.destroy(),pe=null),mt=null,is=null,sn()}async function Im(){if(Ct)return;if(!Kr()){console.error("Cannot start game without loaded assets.");return}Ct=!0,Xe(),Ae();try{await Gr(()=>{Ae()}).then(()=>{Ae()})}catch(s){console.warn("Failed to preload Saunoja icon before starting the game",s)}let t=performance.now();function n(s){if(!Ct)return;const a=s-t;t=s,mi.tick(a),wm(),vm(a),wn(),Ae(),Ct&&(gt=requestAnimationFrame(n))}gt=requestAnimationFrame(n)}function va(){const e=new Set;for(const t of le)t.faction==="player"&&!t.isDead()&&e.add(t.id);for(const t of K)e.add(t.id);return e.size}function Nm(){const e={engaged:0,reserve:1,downed:2},t=K.map(n=>{const s=ht.get(n.id),a=s?Kt.get(s):void 0,o=a?!a.isDead()&&a.stats.health>0:!1,r=n.effectiveStats,i=n.baseStats,c=Math.round(a?Math.max(0,a.stats.health):Math.max(0,n.hp)),l=Math.round(a?Math.max(1,a.getMaxHealth()):Math.max(1,r.health)),d=Math.round(a?Math.max(0,a.stats.attackDamage):Math.max(0,r.attackDamage)),u=Math.round(a?Math.max(0,a.stats.attackRange):Math.max(0,r.attackRange)),h=Math.round(a?Math.max(0,a.stats.movementRange):Math.max(0,r.movementRange)),f=a?.stats.defense??r.defense??0,m=Math.round(Math.max(0,f)),p=a?a.getShield():r.shield??n.shield,g=Math.round(Math.max(0,p)),A=Math.max(0,Math.round(n.upkeep)),M=c<=0?"downed":o?"engaged":"reserve",v=n.items.map(C=>({...C})),P=n.modifiers.map(C=>({...C})),b=Ht.map(C=>{const I=yn(C),w=n.equipment[C],z=w?{id:w.id,name:w.name,description:w.description,icon:w.icon,rarity:w.rarity,quantity:w.quantity,slot:C}:null,y=w?km(w.modifiers,w.quantity):null;return{id:C,label:I.label,description:I.description,maxStacks:I.maxStacks,item:z,modifiers:y}}),N={health:Math.round(Math.max(0,i.health)),maxHealth:Math.round(Math.max(1,i.health)),attackDamage:Math.round(Math.max(0,i.attackDamage)),attackRange:Math.round(Math.max(0,i.attackRange)),movementRange:Math.round(Math.max(0,i.movementRange)),defense:typeof i.defense=="number"&&i.defense>0?Math.round(i.defense):void 0,shield:typeof i.shield=="number"&&i.shield>0?Math.round(i.shield):void 0};return{id:n.id,name:n.name,upkeep:A,status:M,selected:!!n.selected,traits:[...n.traits],stats:{health:c,maxHealth:l,attackDamage:d,attackRange:u,movementRange:h,defense:m>0?m:void 0,shield:g>0?g:void 0},baseStats:N,equipment:b,items:v,modifiers:P}});return t.sort((n,s)=>{const a=e[n.status]-e[s.status];return a!==0?a:n.name.localeCompare(s.name,"en")}),t}function Pm(){return K.length===0?null:K.find(e=>e.selected)??K.find(e=>e.hp>0)??K[0]}function km(e,t){const n=Math.max(1,Math.round(t)),s={};return typeof e.health=="number"&&(s.health=e.health*n),typeof e.attackDamage=="number"&&(s.attackDamage=e.attackDamage*n),typeof e.attackRange=="number"&&(s.attackRange=e.attackRange*n),typeof e.movementRange=="number"&&(s.movementRange=e.movementRange*n),typeof e.defense=="number"&&(s.defense=e.defense*n),typeof e.shield=="number"&&(s.shield=e.shield*n),s}function Lm(){const e=va(),t=Pm();let n=null;return t&&(n={id:t.id,name:t.name||"Saunoja",traits:[...t.traits],upkeep:Math.max(0,Math.round(t.upkeep))}),{count:e,card:n}}function wn(e){const t=Nm();mt=t,pe&&pe.renderRoster(t)}function Xe(){const e=Lm();pe&&pe.updateSummary(e),wn()}function bi(e){if(!e)return{showLoader:()=>({update:()=>{},clear:()=>{},dispose:()=>{}}),showBanner:()=>null,removeTransientUI:()=>{}};const t=()=>{let r=e.querySelector(".hud-banner-stack");return r||(r=document.createElement("div"),r.className="hud-banner-stack",e.append(r)),r},n=(r,i,c)=>{let l=!1;const d=()=>{l||(l=!0,r.removeEventListener("transitionend",d),c())};r.addEventListener("transitionend",d),requestAnimationFrame(()=>{r.classList.add(i)}),window.setTimeout(d,400)};return{showLoader:(r="Heating the sauna stones")=>{const i=document.createElement("div");i.className="hud-loader",i.setAttribute("role","status"),i.setAttribute("aria-live","polite");const c=document.createElement("div");c.className="hud-loader__card";const l=document.createElement("div");l.className="hud-loader__spinner",l.setAttribute("aria-hidden","true");const d=document.createElement("p");d.className="hud-loader__message",d.textContent=r,c.append(l,d),i.append(c),e.append(i);let u=!1;return{update(h){d.textContent=h},clear(){u||n(i,"hud-loader--hidden",()=>{u=!0,i.remove()})},dispose(){u||(u=!0,i.remove())}}},showBanner:(r,i)=>{const c=t(),l=document.createElement("section");l.className=`hud-banner hud-banner--${r}`,l.setAttribute("role",r==="error"?"alert":"status"),l.setAttribute("aria-live",r==="error"?"assertive":"polite");const d=document.createElement("header");d.className="hud-banner__header";const u=document.createElement("p");u.className="hud-banner__title",u.textContent=i.title??(r==="error"?"Attention required":r==="warning"?"Heads up":"Status update"),d.append(u);const h=document.createElement("ul");h.className="hud-banner__list";for(const g of i.messages){const A=document.createElement("li");A.textContent=g,h.append(A)}if(l.append(d),i.messages.length&&l.append(h),i.actions?.length){const g=document.createElement("div");g.className="hud-banner__actions";for(const A of i.actions){const M=document.createElement("button");M.type="button",M.className=A.variant==="secondary"?"hud-banner__button hud-banner__button--secondary":"hud-banner__button",M.textContent=A.label,M.addEventListener("click",()=>{A.onClick()}),g.append(M)}l.append(g)}let f,m=!1;const p=()=>{m||(m=!0,f&&window.clearTimeout(f),n(l,"hud-banner--hide",()=>{l.remove(),c.hasChildNodes()||c.remove()}))};if(i.dismissible!==!1){const g=document.createElement("button");g.type="button",g.className="hud-banner__close",g.setAttribute("aria-label","Dismiss notification"),g.textContent="",g.addEventListener("click",()=>{p()}),d.append(g)}return c.append(l),i.autoCloseMs&&i.autoCloseMs>0&&(f=window.setTimeout(()=>p(),i.autoCloseMs)),{element:l,dismiss:p}},removeTransientUI:()=>{e.querySelectorAll(".hud-loader").forEach(r=>{r.remove()}),e.querySelectorAll(".hud-banner-stack").forEach(r=>{r.remove()})}}}async function Tm(e){const t=Object.entries(e),n=await Promise.allSettled(t.map(([r,i])=>i.load().then(c=>({key:r,descriptor:i,value:c})))),s={},a=[],o=[];return n.forEach((r,i)=>{const[c,l]=t[i],d=l.label??String(c);if(r.status==="fulfilled"){const{value:h}=r.value;if(s[c]=h.value,h.warnings?.length)for(const f of h.warnings)a.push(d?`${d}: ${f}`:f);if(h.errors?.length)for(const f of h.errors)o.push(d?`${d}: ${f}`:f);return}const u=Rm(r.reason);o.push(d?`${d}: ${u}`:u)}),{resources:s,warnings:a,errors:o}}function Rm(e){if(e instanceof Error)return e.message;if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}const jm="Heating the sauna stones",Om="Polishing sauna ambience";function Qm(e){if(e instanceof Error&&e.message)return e.message;if(typeof e=="string"&&e.trim().length>0)return e;try{return JSON.stringify(e)}catch{return String(e)}}function Hm(e){const t=new Set,n=r=>{t.forEach(i=>i(r))},s=e.formatError??Qm;return{run:async r=>{n({type:"status",phase:"start",message:jm});try{const{resources:i,warnings:c,errors:l}=await Tm({assets:{label:"Core assets",load:async()=>{const u=await e.loadAssets(e.assetPaths);return{value:u.assets,errors:u.failures}}},saunojaIcon:{label:"Saunoja icon",load:async()=>{try{return await e.preloadSaunojaIcon(),{value:!0}}catch(u){return{value:!1,warnings:[`Unable to preload Saunoja icon (${s(u)})`]}}}}});if(e.shouldAbort?.(r)){n({type:"cancelled"});return}n({type:"status",phase:"progress",message:Om});const d=i.assets;if(!d){const u=l.length?[...l]:["Critical assets were unavailable. Please refresh to try again."];n({type:"fatal",messages:u});return}if(l.length&&n({type:"errors",errors:l}),c.length&&n({type:"warnings",warnings:c}),e.setAssets(d),e.shouldAbort?.(r)){n({type:"cancelled"});return}e.startGame(),n({type:"ready",assets:d,warnings:c,errors:l})}catch(i){if(e.shouldAbort?.(r)){n({type:"cancelled"});return}n({type:"failure",error:i,message:s(i)})}},subscribe:r=>(t.add(r),()=>{t.delete(r)})}}const Gm="grabbing";function Um(e,t){const n=t.dragCursor??Gm;let s=!1,a=null,o=0,r=0,i=null;const c=f=>{f.pointerType!=="mouse"||f.button!==0||(s=!0,a=f.pointerId,o=f.clientX,r=f.clientY,i=e.style.cursor??"",e.setPointerCapture?.(f.pointerId),e.style.cursor=n,t.onPanStart?.(f))},l=f=>{if(!s||a!==f.pointerId)return;const m=f.clientX-o,p=f.clientY-r;o=f.clientX,r=f.clientY,t.onPan(m,p,f)},d=f=>{!s||a!==f.pointerId||(s=!1,a=null,e.releasePointerCapture?.(f.pointerId),e.style.cursor=i??"",t.onPanEnd?.(f))},u=f=>{d(f)},h=f=>{d(f)};return e.addEventListener("pointerdown",c),e.addEventListener("pointermove",l),e.addEventListener("pointerup",u),e.addEventListener("pointercancel",h),e.addEventListener("pointerleave",h),()=>{e.removeEventListener("pointerdown",c),e.removeEventListener("pointermove",l),e.removeEventListener("pointerup",u),e.removeEventListener("pointercancel",h),e.removeEventListener("pointerleave",h),s&&a!==null&&e.releasePointerCapture?.(a),e.style.cursor=i??""}}const Fm=10,Km=250;function wt(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function Ym(e,t){const n=t.tapMaxMovement??Fm,s=t.tapMaxDuration??Km;let a=null;const o=u=>{if(u.touches.length===1){const h=u.touches[0];a={mode:"pan",lastX:h.clientX,lastY:h.clientY,startX:h.clientX,startY:h.clientY,startTime:wt(),moved:!1};return}if(u.touches.length>=2){const[h,f]=[u.touches[0],u.touches[1]];a={mode:"pinch",lastCenterX:(h.clientX+f.clientX)/2,lastCenterY:(h.clientY+f.clientY)/2,lastDistance:Math.hypot(h.clientX-f.clientX,h.clientY-f.clientY),startTime:wt(),moved:!1}}},r=(u,h)=>{if(!a||a.mode!=="pan")return;const f=u.clientX-a.lastX,m=u.clientY-a.lastY;!a.moved&&Math.hypot(f,m)>1&&(a.moved=!0),a.lastX=u.clientX,a.lastY=u.clientY,t.onPan(f,m,h)},i=(u,h,f)=>{const m=(u.clientX+h.clientX)/2,p=(u.clientY+h.clientY)/2,g=Math.hypot(u.clientX-h.clientX,u.clientY-h.clientY);let A=1,M=0,v=0;a&&a.mode==="pinch"?(A=g/a.lastDistance,M=m-a.lastCenterX,v=p-a.lastCenterY):a={mode:"pinch",lastCenterX:m,lastCenterY:p,lastDistance:g,startTime:wt(),moved:!1},!(!a||a.mode!=="pinch")&&(a.lastCenterX=m,a.lastCenterY=p,a.lastDistance=g,a.moved=!0,t.onPinch({centerX:m,centerY:p,scale:A,deltaCenterX:M,deltaCenterY:v},f))},c=u=>{if(!a||u.touches.length===0)return;if(u.preventDefault(),u.touches.length===1){const m=u.touches[0];a.mode!=="pan"&&(a={mode:"pan",lastX:m.clientX,lastY:m.clientY,startX:m.clientX,startY:m.clientY,startTime:wt(),moved:!0}),r(m,u);return}const[h,f]=[u.touches[0],u.touches[1]];i(h,f,u)},l=()=>!a||a.mode!=="pan"||Math.hypot(a.lastX-a.startX,a.lastY-a.startY)>n?!1:wt()-a.startTime<=s,d=u=>{if(a){if(u.touches.length===0){a.mode==="pan"&&t.onTap&&l()&&t.onTap({x:a.startX,y:a.startY},u),a=null;return}if(u.touches.length===1){const h=u.touches[0];a={mode:"pan",lastX:h.clientX,lastY:h.clientY,startX:h.clientX,startY:h.clientY,startTime:wt(),moved:!0};return}if(u.touches.length>=2){const[h,f]=[u.touches[0],u.touches[1]];a={mode:"pinch",lastCenterX:(h.clientX+f.clientX)/2,lastCenterY:(h.clientY+f.clientY)/2,lastDistance:Math.hypot(h.clientX-f.clientX,h.clientY-f.clientY),startTime:wt(),moved:!0}}}};return e.addEventListener("touchstart",o,{passive:!1}),e.addEventListener("touchmove",c,{passive:!1}),e.addEventListener("touchend",d),e.addEventListener("touchcancel",d),()=>{e.removeEventListener("touchstart",o),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",d),e.removeEventListener("touchcancel",d),a=null}}const Xm=.5,qm=3.5;function $s(e,t,n,s,a){const o=e.getBoundingClientRect(),r=t-o.left,i=n-o.top,c=o.width/2,l=o.height/2;return{x:a.x+(r-c)/s,y:a.y+(i-l)/s}}function Jm(e){return Math.min(qm,Math.max(Xm,e))}function wi(e,t,n,s=H.zoom,a=H){return $s(e,t,n,s,a)}function vi(e,t,n,s){const a=Jm(s);if(a===H.zoom)return;const o={x:H.x,y:H.y},r=$s(e,t,n,H.zoom,o),i=$s(e,t,n,a,o);H.x+=r.x-i.x,H.y+=r.y-i.y,H.zoom=a,Ae()}function Ts(e,t){e===0&&t===0||(H.x-=e/H.zoom,H.y-=t/H.zoom,Ae())}function Zm(e){const t=window.devicePixelRatio||1,n=Math.max(window.innerWidth,1),s=Math.max(window.innerHeight,1);e.style.width=`${n}px`,e.style.height=`${s}px`,e.width=Math.round(n*t),e.height=Math.round(s*t);const a=e.getContext("2d");a&&a.setTransform(1,0,0,1,0,0),Ae()}const Wm=.0015,ea=[];let Sa=0,ot=null,ys=bi(null),fe=null;function Vm(){if(typeof document>"u")return;const e=document.querySelector("[data-build-commit]");if(!e)return;const t="c67240a".trim(),n=t.length>0&&t!=="unknown",s=n?`#${t}`:"DEV BUILD";e.textContent=s,e.dataset.state=n?"commit":"dev";const a=e.closest("#build-id");if(a){const o=n?`Build commit ${t}`:"Development build";a.setAttribute("aria-label",o),a.title=n?`Autobattles build ${t}`:"Unversioned development build",a.dataset.buildState=n?"release":"development"}}Vm();function et(e){ea.push(e)}function _m(){for(;ea.length;){const e=ea.pop();try{e?.()}catch(t){console.error("Error during cleanup",t)}}}function $m(e){et(()=>e.dispose())}function Hn(e,t){const n=ys.showBanner(e,t);n&&et(()=>n.dismiss())}function e0(e){switch(e.type){case"status":if(e.phase==="start"){fe?.dispose();const t=ys.showLoader(e.message);fe=t,$m(t)}else fe&&(fe.update(e.message),fe.clear(),fe=null);break;case"ready":fe?.clear(),fe=null;break;case"warnings":e.warnings.length&&(console.warn("Resource loader warnings",e.warnings),Hn("warning",{title:"Heads up",messages:e.warnings,autoCloseMs:12e3}));break;case"errors":e.errors.length&&(console.error("Resource loader errors",e.errors),Hn("error",{title:"Some resources failed to load",messages:e.errors,actions:[{label:"Reload",onClick:()=>window.location.reload(),variant:"primary"}]}));break;case"fatal":console.error("Critical assets failed to load",e.messages),fe?.clear(),fe=null,Hn("error",{title:"Unable to start the sauna battle",messages:e.messages,actions:[{label:"Reload",onClick:()=>window.location.reload(),variant:"primary"}],dismissible:!1});break;case"failure":console.error("Failed to initialize resources",e.error),fe?.clear(),fe=null,Hn("error",{title:"Failed to initialize",messages:[e.message],actions:[{label:"Reload",onClick:()=>window.location.reload(),variant:"primary"}]});break;case"cancelled":fe?.dispose(),fe=null;break}}const Si=Hm({assetPaths:If,loadAssets:Ti,preloadSaunojaIcon:Gr,setAssets:Nf,startGame:Im,shouldAbort:e=>e!==Sa});Si.subscribe(e0);function jo(e){if(!ot)return;e.preventDefault();const t=Math.exp(-e.deltaY*Wm),n=H.zoom*t;vi(ot,e.clientX,e.clientY,n)}function Oo(e){if(!ot)return;const t=wi(ot,e.clientX,e.clientY);Ai(t)}function t0(e){e.addEventListener("click",Oo),et(()=>e.removeEventListener("click",Oo)),e.addEventListener("wheel",jo,{passive:!1}),et(()=>e.removeEventListener("wheel",jo));const t=Um(e,{onPan:(s,a)=>{Ts(s,a)},dragCursor:"grabbing"});et(t);const n=Ym(e,{onPan:(s,a)=>{Ts(s,a)},onPinch:({centerX:s,centerY:a,scale:o,deltaCenterX:r,deltaCenterY:i})=>{vi(e,s,a,H.zoom*o),Ts(r,i)},onTap:s=>{const a=wi(e,s.x,s.y);Ai(a)}});et(n)}function n0(){Sa+=1,_m(),fe?.dispose(),fe=null,ot&&(ot.style.cursor=""),ot=null,ys.removeTransientUI(),_s()}function s0(){const e=document.getElementById("game-canvas"),t=document.getElementById("resource-bar"),n=document.getElementById("ui-overlay");if(!e||!t||!n){console.error("Autobattles4xFinsauna shell is missing the required canvas, overlay, or resource bar elements.",{hasCanvas:!!e,hasResourceBar:!!t,hasOverlay:!!n});return}ot&&n0();const s=++Sa;ot=e,ys=bi(n);const a=Jl();et(()=>a.dispose()),lm(e,t,n),t0(e);const o=()=>Zm(e);window.addEventListener("resize",o),et(()=>window.removeEventListener("resize",o)),window.addEventListener("beforeunload",_s),et(()=>window.removeEventListener("beforeunload",_s)),o(),import.meta.vitest||Si.run(s)}function a0(){if(typeof document>"u")return;const e=()=>{document.removeEventListener("DOMContentLoaded",e),s0()};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",e);return}e()}import.meta.vitest||a0();
